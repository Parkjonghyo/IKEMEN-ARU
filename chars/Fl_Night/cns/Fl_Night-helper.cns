;カットインや攻撃背景、またヘルパーを使用する記述ファイル

;---------------------------------------------------------------------------
;カットイン
[Statedef 7000]
type = A
anim = -1
ctrl = 0
velset = 0,0 
movetype = A
physics = N ;無重力　movetypeがAだと重力を受ける　カットインとか演出系も。
sprpriority = 1 ;優先度

[State Null]
type = Null
trigger1 = 1

[state 右向き]
type = Explod
ownpal = 1
triggerall = time = 0
Trigger1 = Facing = 1 ;プレイヤー向きのときのトリガー。
anim = 10001
pos = -20, 255
postype = left 
facing = 1
vfacing = 1
bindtime = -1
removetime = -2

supermovetime = 42;SuperPause中に動ける時間を指定。　スーパーポーズは超必殺とかで画面が硬直するアレ。
scale = 0.5, 0.5
sprpriority = 1
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1	

[state 左向き]
type = Explod
ownpal = 1
triggerall = time = 0
Trigger1 = Facing = -1 ;プレイヤー向きのときのトリガー。
anim = 10001
pos = 0, 255
postype = right
facing = -1
vfacing = 1
bindtime = -1
removetime = -2
supermovetime = 42;SuperPause中に動ける時間を指定。　スーパーポーズは超必殺とかで画面が硬直するアレ。
scale = 0.5, 0.5
sprpriority = 1
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 消滅];なぜか立ちアニメが出るのでtime0でそれは消す。
type = DestroySelf
trigger1 = time > 0

;---------------------------------------------------------------------------
;カットイン（指出）
[Statedef 7001]
type = A
anim = -1
ctrl = 0
velset = 0,0 
movetype = A
physics = N ;無重力　movetypeがAだと重力を受ける　カットインとか演出系も。
sprpriority = 1 ;優先度

[State Null]
type = Null
trigger1 = 1

[state 右向き]
type = Explod
ownpal = 1
triggerall = time = 0
Trigger1 = Facing = 1 ;プレイヤー向きのときのトリガー。
anim = 10002
pos = -20, 255
postype = left 
facing = 1
vfacing = 1
bindtime = -1
removetime = -2

supermovetime = 52;SuperPause中に動ける時間を指定。　スーパーポーズは超必殺とかで画面が硬直するアレ。
scale = 0.5, 0.5
sprpriority = 1
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1	

[state 左向き]
type = Explod
ownpal = 1
triggerall = time = 0
Trigger1 = Facing = -1 ;プレイヤー向きのときのトリガー。
anim = 10002
pos = 20, 255
postype = right
facing = -1
vfacing = 1
bindtime = -1
removetime = -2
supermovetime = 52;SuperPause中に動ける時間を指定。　スーパーポーズは超必殺とかで画面が硬直するアレ。
scale = 0.5, 0.5
sprpriority = 1
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 消滅];なぜか立ちアニメが出るのでtime0でそれは消す。
type = DestroySelf
trigger1 = time > 0

;---------------------------------------------------------------------------
;カットイン（覚醒）
[Statedef 7002]
type = A
anim = -1
ctrl = 0
velset = 0,0 
movetype = A
physics = N ;無重力　movetypeがAだと重力を受ける　カットインとか演出系も。
sprpriority = 1 ;優先度

[State Null]
type = Null
trigger1 = 1

[state 右向き]
type = Explod
ownpal = 1
triggerall = time = 0
Trigger1 = Facing = 1 ;プレイヤー向きのときのトリガー。
anim = 10003
pos = -20, 255
postype = left 
facing = 1
vfacing = 1
bindtime = -1
removetime = -2

supermovetime = 52;SuperPause中に動ける時間を指定。　スーパーポーズは超必殺とかで画面が硬直するアレ。
scale = 0.5, 0.5
sprpriority = 1
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1	

[state 左向き]
type = Explod
ownpal = 1
triggerall = time = 0
Trigger1 = Facing = -1 ;プレイヤー向きのときのトリガー。
anim = 10003
pos = 20, 255
postype = right
facing = -1
vfacing = 1
bindtime = -1
removetime = -2
supermovetime = 52;SuperPause中に動ける時間を指定。　スーパーポーズは超必殺とかで画面が硬直するアレ。
scale = 0.5, 0.5
sprpriority = 1
shadow = 0, 0, 0
ownpal = 0
removeongethit = 1

[State 消滅];なぜか立ちアニメが出るのでtime0でそれは消す。
type = DestroySelf
trigger1 = time > 0

;---------------------------------------------------------------------------
;アタック背景
[Statedef 7005]
type = A
anim = -1
ctrl = 0
velset = 0,0 
movetype = A
physics = N ;無重力　movetypeがAだと重力を受ける　カットインとか演出系も。
sprpriority = 0 ;優先度

[State Null]
type = Null
trigger1 = 1

[state ]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 10700
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
removetime = 50
supermovetime = 50;SuperPause中に動ける時間を指定。　スーパーポーズは超必殺とかで画面が硬直するアレ。
scale = 1,1
sprpriority = -2
shadow = 0, 0, 0
ownpal = 0
removeongethit = 0

[State 消滅];なぜか立ちアニメが出るのでtime0でそれは消す。
type = DestroySelf
trigger1 = time > 0

;---------------------------------------------------------------------------
;アタック背景２
[Statedef 7010]
type = A
anim = -1
ctrl = 0
velset = 0,0 
movetype = A
physics = N ;無重力　movetypeがAだと重力を受ける　カットインとか演出系も。
sprpriority = 0 ;優先度

[State Null]
type = Null
trigger1 = 1

[state ]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = 10800
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
removetime = 39
supermovetime = 39;SuperPause中に動ける時間を指定。　スーパーポーズは超必殺とかで画面が硬直するアレ。
scale = 1,1
sprpriority = -1
shadow = 0, 0, 0
ownpal = 0
removeongethit = 0

[State 消滅];なぜか立ちアニメが出るのでtime0でそれは消す。
type = DestroySelf
trigger1 = time > 0

;-------------------------------------------------------------
;リミットオーバー
[Statedef 15000]
type = A
ctrl = 0
anim = 10401
velset = 0,0
movetype = I
physics = N
sprpriority = -31

[state ]
type = changeanim
trigger1 = root,var(57)>=1000
value = 10403

[State 6125, 軸位置]
Type = PosSet
Trigger1 = 1
X = EnemyNear,Pos X
Y = EnemyNear,Pos Y+EnemyNear,Const(Size.Mid.Pos.Y)+ifelse(statetype=L,50,0)

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[state a]
type = null;Trans
trigger1 = enemy,movetype != H ;相手が食らってない時だよ
trigger2 = enemy,stateno = [120,155] ;相手がガードモーションの時だよ
trans = addalpha
alpha = ifelse(var(0)>30,256-time*5,256),256

[state ]
type = Trans
trigger1 = enemy,movetype != H ;相手が食らってない時だよ
trigger2 = enemy,stateno = [120,155] ;相手がガードモーションの時だよ
trans = addalpha
alpha = 256,256

[state ]
type=varset
trigger1 = time%5=0
fvar(0)=-3

[state ]
type = AngleDraw
trigger1 = 1
[state ]
type = AngleAdd
trigger1 = 1
value = fvar(0)

[state ]
type = varadd
trigger1 = 1
var(0)=1

[state ]
type = varadd
trigger1 = enemy,movetype != H ;相手が食らってない時だよ
trigger2 = enemy,stateno = [120,155] ;相手がガードモーションの時だよ
var(1)=1

[state a]
type =  changestate 
trigger1 = root,var(58)<=0
value = 15001
trigger1 = enemy,movetype != H ;相手が食らってない時だよ
trigger2 = enemy,stateno = [120,155] ;相手がガードモーションの時だよ
trigger3 = enemy,alive=0 & enemy,stateno=5150



;-------------------------------------------------------------
;リミットオーバー
[Statedef 15001]
type = A
ctrl = 0
anim = 10401
velset = 0,0
movetype = I
physics = N
sprpriority = -31

[state ]
type = changeanim
trigger1 = root,var(57)>=1000
value = 10403

[State 6125, 軸位置]
Type = PosSet
Trigger1 = 1
X = EnemyNear,Pos X
Y = EnemyNear,Pos Y+EnemyNear,Const(Size.Mid.Pos.Y)+ifelse(statetype=L,150,0)

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-time*13,256

[state ]
type=varset
trigger1 = time%5=0
fvar(0)=-3.7

[state ]
type = AngleAdd
trigger1 = 1
value = fvar(0)

;---------------------[拡縮・回転]
[state a]
type = angledraw
trigger1 = 1
;scale = 1.0 + time*0.03,1.0 + time*0.03

;---------------------[]
[state a]
type = destroyself
trigger1 = time = 30

;-------------------------------------------------------------
;リミットオーバー2
[Statedef 15002]
type = A
ctrl = 0
anim = 10402
velset = 0,0
movetype = I
physics = N
sprpriority = -31

[state ]
type = changeanim
trigger1 = root,var(57)>=1000
value = 10404

[State 6125, 軸位置]
Type = PosSet
Trigger1 = 1
X = EnemyNear,Pos X
Y = EnemyNear,Pos Y+EnemyNear,Const(Size.Mid.Pos.Y)-ifelse(statetype=L,50,0)

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[state a]
type = null;Trans
trigger1 = enemy,movetype != H ;相手が食らってない時だよ
trigger2 = enemy,stateno = [120,155] ;相手がガードモーションの時だよ
trans = addalpha
alpha = ifelse(var(0)>30,256-time*5,256),256

[state ]
type = Trans
trigger1 = enemy,movetype != H ;相手が食らってない時だよ
trigger2 = enemy,stateno = [120,155] ;相手がガードモーションの時だよ
trans = addalpha
alpha = 256,256

[state ]
type=varset
trigger1 = time%5=0
fvar(0)=3

[state ]
type = AngleDraw
trigger1 = 1
[state ]
type = AngleAdd
trigger1 = 1
value = fvar(0)

[state ]
type = varadd
trigger1 = 1
var(0)=1

[state ]
type = varadd
trigger1 = enemy,movetype != H ;相手が食らってない時だよ
trigger2 = enemy,stateno = [120,155] ;相手がガードモーションの時だよ
var(1)=1

[state a]
type =  changestate 
trigger1 = root,var(58)<=0
value = 15003
trigger1 = enemy,movetype != H ;相手が食らってない時だよ
trigger2 = enemy,stateno = [120,155] ;相手がガードモーションの時だよ
trigger3 = enemy,alive=0 & enemy,stateno=5150


;-------------------------------------------------------------
;リミットオーバー2
[Statedef 15003]
type = A
ctrl = 0
anim = 10402
velset = 0,0
movetype = I
physics = N
sprpriority = -31

[state ]
type = changeanim
trigger1 = root,var(57)>=1000
value = 10404

[State 6125, 軸位置]
Type = PosSet
Trigger1 = 1
X = EnemyNear,Pos X
Y = EnemyNear,Pos Y+EnemyNear,Const(Size.Mid.Pos.Y)+ifelse(statetype=L,50,0)

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-time*13,256

[state ]
type=varset
trigger1 = time%5=0
fvar(0)=3.7

[state ]
type = AngleAdd
trigger1 = 1
value = fvar(0)

;---------------------[拡縮・回転]
[state a]
type = angledraw
trigger1 = 1
;scale = 1.0 + time*0.03,1.0 + time*0.03

;---------------------[]
[state a]
type = destroyself
trigger1 = time = 30


[Statedef 7050]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 999999

[State 7050]
Type = VarSet
Trigger1 = Time = 0 || Time = 11
var(5) = 0

[State 7050]
Type = VarAdd
Trigger1 = time <= 10
Trigger2 = time >= 45
var(5) = 1

[State 7050]
Type = ModifyExplod
Trigger1 = Time < 10
ID = 15054
Scale = .5,0+(Var(5)*.05)

[State 7050]
Type = ModifyExplod
Trigger1 = Time = [10,25]
ID = 15054
Scale = .5,.5

[State 7050]
Type = ModifyExplod
Trigger1 = Time >= 45
ID = 15054
Scale = .5,.5-(Var(5)*.05)

[State 7050]
type = Explod
ownpal = 1
trigger1 = Time = 0
anim = 15056
ID = 15054
pos = 0,90
postype = back
sprpriority = 6
ownpal = 0
supermove = 1
persistent = 0
Removetime = 55
bindtime = -1
pausemovetime = 9999999
supermovetime = 9999999

[State 7050]
type = Explod
ownpal = 1
trigger1 = Time = 0
anim = 15053
ID = 15054
pos = 0,90
postype = back
sprpriority = 7
ownpal = 0
bindtime = -1
persistent = 0
Removetime = 55
supermove = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 7050]
type = DestroySelf
trigger1 = Time = 60

[Statedef 7051]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 999999

[State 7050]
Type = VarSet
Trigger1 = Time = 0 || Time = 11
var(5) = 0

[State 7050]
Type = VarAdd
Trigger1 = time <= 10
Trigger2 = time >= 45
var(5) = 1

[State 7050]
Type = ModifyExplod
Trigger1 = Time < 9
ID = 15055
Scale = 1-(Var(5)*.05),0+.5

[State 7050]
Type = ModifyExplod
Trigger1 = Time = [9,25]
ID = 15055
Scale = .5,.5

[State 7050]
Type = ModifyExplod
Trigger1 = Time >= 45
ID = 15055
Scale = 0.5-(Var(5)*.05),0+.5

[State 7050]
type = Explod
ownpal = 1
trigger1 = Time = 0
anim = 15057
ID = 15055
pos = 0,90
postype = back
sprpriority = 6
ownpal = 0
supermove = 1
persistent = 0
Removetime = 55
bindtime = -1
pausemovetime = 9999999
supermovetime = 9999999

[State 7050]
type = Explod
ownpal = 1
trigger1 = Time = 0
ID = 15055
anim = 15055
pos = 0,90
postype = back
sprpriority = 7
ownpal = 0
ontop=1
bindtime = -1
persistent = 0
Removetime = 55
supermove = 1
pausemovetime = 9999999
supermovetime = 9999999

[State 7050]
type = Explod
ownpal = 1
trigger1 = Time = 9
anim = 8034
ID = 0
pos = 140,80
postype = back
sprpriority = 4
ownpal = 0
Scale = 1.7,1.7
supermove = 1
persistent = 0
Removetime = -2
bindtime = -1
pausemovetime = 9999999
supermovetime = 9999999

[State 200, 効果音]
type = PlaySnd
trigger1 = Time = 9
value = 200,5
freqmul =1
[State 200, 効果音]
type = PlaySnd
trigger1 = Time = 9
value = 100,18
freqmul = 1
[State 200, 効果音]
type = PlaySnd
trigger1 = Time = 9
value = 100,21
freqmul = 1

[State 7051]
type = DestroySelf
trigger1 = Time = 60

;時止め解除ヘルパー
[Statedef 7060]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 999999

[state ]
type=posset
trigger1 = 1
x = root,pos x
y = root,pos y

[state 50002];時止め解除　必須
type=pause
trigger1=ishelper
trigger1=root,stateno!=807
trigger1 = root,var(17)!=0
time=0
movetime=0
ignorehitpause=1
[state 50002];時止め解除　必須
type=superpause
trigger1=ishelper
trigger1=root,stateno!=807
trigger1 = root,var(17)!=0
anim=-1
time=0
movetime=0
darken=0
p2defmul=1
ignorehitpause=1


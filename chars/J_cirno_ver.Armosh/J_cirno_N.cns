







;===========================================================================
; ストライカーステート
;===========================================================================






[Statedef 30000];魔理沙　スティールプレッシャー
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 50010 ;使い回し
poweradd = -2000
sprpriority = 2
facep2 = 1





[State 30000, 超必殺技暗転時間停止]
type = SuperPause
trigger1 = AnimElem = 1
anim = s11090       ;超必エフェクトのアクションナンバー。通常は「fightfx.air」のアニメを使うが、
                 ;左に「s」を付ければ「自分のairファイル」のアクションナンバーが使える。
pos = 0, -65    ;超必エフェクトの座標（Ｘ軸,Ｙ軸）
sound = s4, 6    ;超必発動サウンド。通常は「common.snd」の音を使うが、
                 ;左に「s」を付ければ「自分のsndファイル」の音が使える。
time = 47


[State 30000, ヘルパー召喚];カットイン　魔理沙
type = Helper
trigger1 = Time = 0
ID = 31000
pos = 40, 0 
postype = p1
facing = 1
stateno = 31000
SuperMoveTime  = 9999
PauseMoveTime  = 9999





[State 30000, ヘルパー召喚];ヘルパー
type = Helper
trigger1 = time = 0
ID = 30001
pos = 0, 0
postype = p1
facing = 1
stateno = 30001
ontop = 1


[State 30000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1







;-----------------------------------



;スティールプレッシャー
[Statedef 30001]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0.5,0
ctrl = 0
anim = 30000
sprpriority = 3



[State 30001, 残像]
type = Afterimage
trigger1 =  Time = 0
PalContrast =  200, 30, 30
palbright = 30,30,0  ;(赤、緑、青)明るさ
palmul = .80,.80,.80
paladd = -10,-10,-10
trans = Add
time = 20
TimeGap  = 2
FrameGap = 2
length = 10




[State 30001, 速度加算];重力
type = VelAdd
trigger1 = 1
x = 0.7




[State 30001, 音を鳴らす];移動音
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 0



[State 30001, ヒット定義（投げ用）]
type = HitDef
trigger1 = Time = 0
attr = S, ST 
hitflag = MAF
animtype = Hard
ground.type = Low
priority = 1, Miss
sparkno = s10030
sparkxy = -33,-58
p1sprpriority = 1
hitsound = s2, 5
guardsound = s2, 4
guardflag = 
p1facing = 1
p2facing = 1
p1stateno = 30002
p2stateno = 30005
guard.dist = 0 ;相手のガード態勢に入る距離を０にしてるので、ガード不可
fall = 1 
chainID = 20;連続でできないように
nochainID = 20,0
forcestand = 1
hitonce = 0
fall.recover = 0





[State 30001, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 2



[State 30001, ヘルパー消滅]
type = DestroySelf
triggerall = time > 20  
trigger1 =  Facing = 1
trigger1 =  pos x >= 110 && Vel x >= 0
trigger2 =  Facing = -1
trigger2 =  pos x <= -110 && Vel x >= 0



;---------------------------



;成功（移動）
[Statedef 30002]
type    = S
movetype= A
physics = N
anim = 30001
sprpriority = 3


[State 30002, 変数];「holdfwd」のコマンドが入力されているかどうかを判断する
type = VarSet
trigger1 = Time = 0
var(2) = command = "holdfwd"



[State 30002, 速度加算];重力
type = VelAdd
trigger1 = 1
x = 0.5


[State 30002, 残像]
type = Afterimage
trigger1 =  Time = 0
PalContrast =  250, 30, 30
palbright = 30,30,0  ;(赤、緑、青)明るさ
palmul = .80,.80,.80
paladd = -10,-10,-10
trans = Add
time = 40
TimeGap  = 1
FrameGap = 2
length = 10



[State 30002, 音を鳴らす];移動音
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 5








[State 30002, 掴んだ相手の位置１];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = 1
pos = -5, -40  





[State 30002, ステート変更]
type = ChangeState
trigger1 =  Facing = 1
trigger1 =  pos x >= 110 && Vel x >= 0
trigger2 =  Facing = -1
trigger2 =  pos x <= -110 && Vel x >= 0
Trigger3 = AnimTime = 600
value = 30003




;---------------------------




[Statedef 30003]
type    = S
movetype= A
physics = N
anim = 30002
velset = 0,0
sprpriority = 3






[State 30003, 掴んだ相手の位置１];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 20, -50  



[State 30003, 掴んだ相手の位置2];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(3) < 0
pos = 50, -60 




[State 30003, 掴んだ相手の位置2];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(4) < 0
pos = 80, -70 





[State 30003, 速度加算];バック
type = VelSet
trigger1 = AnimElem = 5
x = -5


[State 30003, 速度加算];停止
type = VelSet
trigger1 = AnimElem = 7
x = 0



[State 30003, 音を鳴らす];ぶつかる音
type = PlaySnd
trigger1 = AnimElem = 2
value = 2, 9



[State 30003, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, 1



[State 30003, 音を鳴らす];ぶつかる音2
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 3




[State 30003, エフェクト画像]
type = Explod
trigger1 = AnimElem = 2
anim = 11040
pos = 0,-20  
postype = p2
facing = 1
vfacing = 1
sprpriority = 4
bindtime = -1
removeongethit = 1
ignorehitpause = 0
removetime = 21


[State 30003, エフェクト画像2]
type = Explod
trigger1 = AnimElem = 2
anim = 30010
pos = 0,75  
postype = p2
facing = 1
vfacing = 1
sprpriority = 4
removeongethit = 1
ignorehitpause = 0
removetime = 19



[State 30003, 掴んだ相手のステート変更]
type = TargetState
trigger1 = AnimElem = 3
value = 30007



[State 30003, 掴んだ相手のステート変更]
type = TargetState
trigger1 = AnimElem = 4
value = 30006



[State 30003, 震動];衝撃 揺れ
type = envshake
trigger1 = AnimElem = 2
time = 18
freq = 130
ampl = 15
phase = 140




;相手が食らい状態の時のみ機能するTarget系コントローラ
[State 30003, 掴んだ相手のライフ増減]
type = TargetLifeAdd
trigger1 = AnimElem = 2
value = -300



[State 30003, ヘルパー消滅]
type = DestroySelf
trigger1 = AnimTime = 0













;----------------------------
;掴まれた敵
;----------------------------


[Statedef 30005]
type    = A
movetype= H
physics = N
velset = 0,0


[State 30005, 相手のアニメ変更]
type = ChangeAnim2
trigger1 = Time = 0
value = 30005


[State 30005, 無敵]
type = NotHitBy
trigger1 = 1
value = , NA,SA,HA,NP,SP,HP,NT,ST,HT




[State 30005, 吸収]
type = poweradd
trigger1 = time = 0
value = -500




[State 30005, 相手ステートに戻す]
type = SelfState
trigger1 = !GetHitVar(IsBound) ;（※３）
value = 5050



;---------------------------





[Statedef 30006]
type    = A
movetype= H
physics = N
velset = -2, 0.3



[State 30006, 速度加算];重力
type = VelAdd
trigger1 = 1
y = .3 ;現在のＹ軸方向の移動速度を「0.2ポイント」ずつ増やしていく







[State 30006, ステート変更]
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive      ;生きている時
triggerall = CanRecover ;空中受け身が可能な時
trigger1 = Command = "recovery"
value = 5200

[State 30006, 相手ステートに戻す]
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210

[State 30006, 相手ステートに戻す]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100


;---------------------------


[Statedef 30007]
type    = A
movetype= H
physics = N
velset = 0,0


[State 30007, 相手のアニメ変更]
type = ChangeAnim2
trigger1 = Time = 0
value = 30007




[State -1, 無敵]
type = NotHitBy
trigger1 = 1
value = , NA,SA,HA,NP,SP,HP,NT,ST,HT





[State 30007, 速度加算]
type = VelSet
trigger1 = AnimElem = 1
y = -3





[State 30007, 速度加算];重力
type = VelAdd
trigger1 = 1
y = .2 ;現在のＹ軸方向の移動速度を「0.2ポイント」ずつ増やしていく





[State 30007, 相手ステートに戻す]
type = SelfState
trigger1 = !GetHitVar(IsBound) ;（※３）
value = 5050





;---------------------------------------------------------------------------
;---------------------------------------------------------------------------








[Statedef 33000];天子　剣抜弩張
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 33020
poweradd = -2000
sprpriority = 2
facep2 = 1





[State 33000, 超必殺技暗転時間停止]
type = SuperPause
trigger1 = AnimElem = 1
anim = s11090       ;超必エフェクトのアクションナンバー。通常は「fightfx.air」のアニメを使うが、
                 ;左に「s」を付ければ「自分のairファイル」のアクションナンバーが使える。
pos = 0, -65    ;超必エフェクトの座標（Ｘ軸,Ｙ軸）
sound = s4, 6    ;超必発動サウンド。通常は「common.snd」の音を使うが、
                 ;左に「s」を付ければ「自分のsndファイル」の音が使える。
time = 47



[State 33000, ヒット定義（投げ用）]
type = HitDef
trigger1 = AnimElem != 1
attr = S, ST 
guardflag = MA
hitflag = MAFD
animtype = Hard
ground.type = Low
priority = 1, Miss
sparkno = s12100
sparkxy = -33,-58
p1sprpriority = 1
hitsound = s20, 10
p1facing = 1
p2facing = 1
p1stateno = 33020
p2stateno = 33005
guard.dist = 0 ;相手のガード態勢に入る距離を０にしてるので、ガード不可
fall = 1 
forcestand = 1
palfx.color = 150


[State 33021, 音を鳴らす];切る音2
type = PlaySnd
trigger1 = AnimElem = 3
value = 50, 2





[State 33000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;-----------------------------------



[Statedef 33020];チルノ　剣抜弩張　成功
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 33021
sprpriority = 2
facep2 = 1






[State 33020, 真白]
type = envcolor
trigger1 = time = 0
value = 250,250,250
time = 3
undar = 1





[State 33020, 超必殺技暗転時間停止]
type = SuperPause
trigger1 = AnimElem = 1
anim = s11090       ;超必エフェクトのアクションナンバー。通常は「fightfx.air」のアニメを使うが、
                 ;左に「s」を付ければ「自分のairファイル」のアクションナンバーが使える。
pos = 0, -65    ;超必エフェクトの座標（Ｘ軸,Ｙ軸）
sound = s4, 8    ;超必発動サウンド。通常は「common.snd」の音を使うが、
                 ;左に「s」を付ければ「自分のsndファイル」の音が使える。
time = 47



[State 33020, ヘルパー召喚];カットイン　チルノ
type = Helper
trigger1 = Time = 0
ID = 9999
pos = 0, 0 
postype = p1
facing = 1
stateno = 99994
pausemovetime=999999
supermovetime=999999
SuperPauseTime=99999


[State 33001, ヘルパー召喚];カットイン　天子
type = Helper
trigger1 = Time = 0
ID = 33999
pos = 0, 0 
postype = p1
facing = -1
stateno = 33999
pausemovetime=999999
supermovetime=999999
SuperPauseTime=99999

[State 33000, ヘルパー召喚];ヘルパー
type = Helper
trigger1 = time = 0
ID = 33000
pos = -200, 0
postype = p2
facing = 1
stateno = 33001
ontop = 1
SuperPauseTime  = 99999
PauseMoveTime  = 99999
HelperType = player





[State -1, 残像]
type = Afterimage
trigger1 =  Time = 0
PalContrast =  30, 30, 200
palbright = 0,30,30  ;(赤、緑、青)明るさ
palmul = .80,.80,.80
paladd = -10,-10,-10
trans = Add
time = 60
TimeGap  = 2
FrameGap = 2
length = 10



[State 33020, 掴んだ相手の位置１];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = 1
SuperPauseTime  = 99999
PauseMoveTime  = 99999




[State 33020, 軸位置]
type = PosSet
triggerAll = time = 0
trigger1 =  Facing = 1
x = -160
y = 0
SuperPauseTime  = 99999
PauseMoveTime  = 99999

[State 33020, 軸位置]
type = PosSet
triggerAll = time = 0
trigger1 =  Facing = -1
x = 160
y = 0
SuperPauseTime  = 99999
PauseMoveTime  = 99999


[State 33020, 移動];追尾１
type = VelSet
TriggerAll = time > 37
Trigger1 = 1
x = 15





[State 33020, 音を鳴らす];音
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 5


[State 33020, ステート変更]
type = ChangeState
trigger1 =  P2BodyDist X < -10
value = 33021
SuperPauseTime  = 99999
PauseMoveTime  = 99999




;-----------------------------------




[Statedef 33021];チルノ　剣抜弩張　攻撃
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 33022
sprpriority = 2



[State 33021, 移動];1
type = VelSet
Trigger1 = time = 0
x = 6

[State 33021, 移動];1
type = VelSet
Trigger1 = time = 10
x = 4

[State 33021, 移動];1
type = VelSet
Trigger1 = time = 20
x = 2

[State 33021, 移動];1
type = VelSet
Trigger1 = time = 30
x = 0


[State 33021, 軸位置]
type = PosSet
trigger1 = facing = 1
trigger1 =  time = 0
x = 70
y = 0
SuperPauseTime  = 99999
PauseMoveTime  = 99999

[State 33021, 軸位置]
type = PosSet
trigger1 = facing = -1
trigger1 =  time = 0
x = -70
y = 0
SuperPauseTime  = 99999
PauseMoveTime  = 99999



[State 33021, エフェクト画像]
type = Explod
trigger1 = AnimElem = 1
trigger1 = facing = 1
anim = 33010
pos = 0, 0  
postype = front
facing = 1
vfacing = 1
sprpriority = 6
bindtime = -1
removeongethit = 1
ignorehitpause = 0
removetime = 16
SuperPauseTime = 999
id = 33010
Scale = 1.3,1.3



[State 33021, エフェクト画像];2
type = Explod
trigger1 = AnimElem = 1
trigger1 = facing = -1
anim = 33010
pos = 0, 0  
postype = front
facing = -1
vfacing = 1
sprpriority = 6
bindtime = -1
removeongethit = 1
ignorehitpause = 0
removetime = 16
SuperPauseTime = 999
id = 33010
Scale = 1.3,1.3


[State -1]
Type = ModifyExplod
Trigger1 = 1
postype = front
pos = 0, 0
ID = 33010
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime  = 9999
PauseMoveTime  = 9999
Scale = 1.3,1.3




[State 33021, 音を鳴らす];切る音
type = PlaySnd
trigger1 = time = 1
value = 6, 1

[State 33021, 音を鳴らす];切る音2
type = PlaySnd
trigger1 = time = 1
value = 50, 1

[State 33021, 音を鳴らす];攻撃音
type = PlaySnd
trigger1 = AnimElem = 2
value = 2, 7

[State 33021, 音を鳴らす];攻撃音2
type = PlaySnd
trigger1 = AnimElem = 2
value = 60, 13

[State 33021, 掴んだ相手の位置１];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(2) < 0

;相手が食らい状態の時のみ機能するTarget系コントローラ
[State 33021, 掴んだ相手のライフ増減]
type = TargetLifeAdd
trigger1 = AnimElem = 2
value = -490



[State 33021, 震動];衝撃 揺れ
type = envshake
trigger1 = AnimElem = 2
time = 18
freq = 130
ampl = 20
phase = 140


[State 33021, 掴んだ相手のステート変更]
type = TargetState
trigger1 = AnimElem = 2
value = 33006


[State 33021, エフェクト画像]
type = Explod
trigger1 = AnimElem = 2
anim = 10020
pos = 0, -60
postype = p2
scale = 1.2,1.2
ontop = 1
bindtime = -1
removetime = 13
sprpriority = 2
ownpal = 1

[State 33021, エフェクト画像]
type = Explod
trigger1 = AnimElem = 2
anim = 10010
pos = 0, -60
postype = p2
scale = 1.2,1.2
ontop = 1
bindtime = -1
removetime = 13
sprpriority = 2
ownpal = 1

[State 33021, エフェクト画像]
type = Explod
trigger1 = AnimElem = 2
anim = 10000
pos = 0, -60
postype = p2
scale = 1.2,1.2
ontop = 1
bindtime = -1
removetime = 13
sprpriority = 2
ownpal = 1




[State 33021, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1




;-----------------------------------
;-----------------------------------





[Statedef 33001];天子　剣抜弩張　成功
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 33000
sprpriority = 2
facep2 = 1



[State 33000, ターン];1
type = turn
trigger1 = 1
trigger1 = P2BodyDist X < 0
SuperPauseTime  = 99999
PauseMoveTime  = 99999


[State 33000, 軸位置]
type = PosSet
trigger1 = Root,facing = 1
trigger1 =   time = 0
x = 130
y = 0
SuperPauseTime  = 99999
PauseMoveTime  = 99999

[State 33000, 軸位置]
type = PosSet
trigger1 = Root,facing = -1
trigger1 =  time = 0
x = -130
y = 0
SuperPauseTime  = 99999
PauseMoveTime  = 99999


[State -1, 残像]
type = Afterimage
trigger1 =  Time = 0
PalContrast =  200, 100, 30
palbright = 30,30,0  ;(赤、緑、青)明るさ
palmul = .80,.80,.80
paladd = -10,-10,-10
trans = Add
time = -1
TimeGap  = 2
FrameGap = 2
length = 10


[State 33001, 超必殺技暗転時間停止]
type = SuperPause
trigger1 = AnimElem = 1
anim = s999       ;超必エフェクトのアクションナンバー。通常は「fightfx.air」のアニメを使うが、
                 ;左に「s」を付ければ「自分のairファイル」のアクションナンバーが使える。
pos = 0, -65    ;超必エフェクトの座標（Ｘ軸,Ｙ軸）
sound = s4, 7    ;超必発動サウンド。通常は「common.snd」の音を使うが、
                 ;左に「s」を付ければ「自分のsndファイル」の音が使える。
time = 47
SuperPauseTime  = 99999
PauseMoveTime  = 99999





[State 33001, 音を鳴らす];音
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 5


[State 33001, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 33002







;-----------------------------------





[Statedef 33002];天子　剣抜弩張　移動
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 33001
sprpriority = 2
facep2 = 1






[State 33002, 移動];追尾１
type = VelSet
TriggerAll = 1
Trigger1 = 1
x = 18




[State 33002, ステート変更]
type = ChangeState
trigger1 = Root,stateno = 33021
value = 33003
SuperPauseTime  = 99999
PauseMoveTime  = 99999


;-----------------------------------



[Statedef 33003];天子　剣抜弩張　終了
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 33002
sprpriority = 2


[State 33003, 移動];1
type = VelSet
Trigger1 = time = 0
x = 6

[State 33003, 移動];1
type = VelSet
Trigger1 = time = 10
x = 4

[State 33003, 移動];1
type = VelSet
Trigger1 = time = 20
x = 2

[State 33003, 移動];1
type = VelSet
Trigger1 = time = 30
x = 0


[State 33003, 軸位置]
type = PosSet
trigger1 = facing = 1
trigger1 =  time = 0
x = 70
y = 0
SuperPauseTime  = 99999
PauseMoveTime  = 99999

[State 33003, 軸位置]
type = PosSet
trigger1 = facing = -1
trigger1 =  time = 0
x = -70
y = 0
SuperPauseTime  = 99999
PauseMoveTime  = 99999

[State 33003, ヘルパー消滅]
type = DestroySelf
trigger1 = AnimTime = 0






;----------------------------
;掴まれた敵
;----------------------------


[Statedef 33005]
type    = A
movetype= H
physics = N
velset = 0,0


[State 33005, 相手のアニメ変更]
type = ChangeAnim2
trigger1 = Time = 0
value = 33005


[State 33005, 無敵]
type = NotHitBy
trigger1 = 1
value = , NA,SA,HA,NP,SP,HP,NT,ST,HT





[State 33005, ]
type = posset
trigger1 =  Facing = 1
trigger1 = 1
x = 0
y = -40
SuperPauseTime  = 9999
PauseMoveTime  = 9999 



[State 33005, ]
type = posset
trigger1 =  Facing = -1
trigger1 = 1
x = 0
y = -40
SuperPauseTime  = 9999
PauseMoveTime  = 9999 


[State 33005, ]
type = playerpush
trigger1 = 1
value = 1


[State 33005, ]
type = posfreeze
trigger1 = 1
value = 1


[State 33005, 画面固定]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0


[State 33005, 相手ステートに戻す]
type = SelfState
trigger1 = !GetHitVar(IsBound) ;（※３）
value = 5050



;---------------------------





[Statedef 33006]
type    = A
movetype= H
physics = N
velset = -2, 0.3



[State 33006, 速度加算];重力
type = VelAdd
trigger1 = 1
y = .3 ;現在のＹ軸方向の移動速度を「0.2ポイント」ずつ増やしていく






[State 33006, ステート変更]
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive      ;生きている時
triggerall = CanRecover ;空中受け身が可能な時
trigger1 = Command = "recovery"
value = 5200

[State 33006, 相手ステートに戻す]
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210

[State 33006, 相手ステートに戻す]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100
















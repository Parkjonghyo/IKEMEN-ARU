

;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;    固有Helper
;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

;---------------------------------------------------------------------------
;236A-1
[Statedef 1105]
type     = A
movetype = A
physics  = N
anim     = 1105
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, AttackPower]
type = VarSet
trigger1 = Time = 0
var(10) = 77

;----相手ダウン時攻撃半減---------
[State B, AttackPower]
type = VarSet
trigger1 = root,var(12) = 30
var(10) = ceil(var(10) * 0.5)
ignorehitpause = 1
persistent = 0

;----相対&背面補正(Proj用)--------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = Time = 0
fVar(4) = 1.00

[State P, Counter Revise]
type = VarSet
trigger1 = P2MoveType = A
fVar(4) = 1.25

[State P, Back Attack Revise]
type = VarSet
Trigger1 = (Facing = enemynear,Facing)
Trigger1 = P2BodyDist X >= 0
fVar(4) = 1.5

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----対打撃無敵-------------------
[State 1105, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
time = 999

;----演出-------------------------
[State 1105, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 1105, Snd]
type = PlaySnd
trigger1 = time = 0
value = 1100, 1

;----動作処理---------------------
[State 1105, Velset]
type = Velset
trigger1 = time = 0
x = 3
y = 0

[State 1105, Veladd]
type = Veladd
trigger1 = time >= 0
y = 0.20

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット定義
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----通常ヒット-------------------------
[State 1105, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) != 40
triggerAll = root,Var(12) != 30
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-30 + Random%10), ceil(-20 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -7, 0
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -5
airguard.velocity = -3, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

;----壁やられ---------------------------
[State 1105, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 40
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-30 + Random%10), ceil(-20 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -7, 0
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -5
airguard.velocity = -3, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2StateNo = 6120,6121,6130)
p2facing = 1

;----ダウン追撃-------------------------
[State 1105, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 30
trigger1 = 1
attr = S,SP
hitflag = MAFD
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-30 + Random%10), ceil(-20 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -7, 0
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -5
airguard.velocity = -3, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2stateno = 6045,6045,ifelse(P2stateno = 6042,6045,ifelse(P2stateno = 6041,6042,6040)))
p2facing = 1

;++++ヒット定義ここまで++++++++++++++++++++++++++++++

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット時処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----キャンセルと各種補正処理-----------
[State HIT, Hitcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = movehit
var(13) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Floatcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = enemynear,StateType = A
trigger1 = MoveHit
var(14) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Cancel ON]
type = ParentVarSet
trigger1 = movecontact
var(4) = 10
ignorehitpause = 1
persistent = 0

;----ゲージ回収処理---------------------
[State B, PowerAdd]
type = ParentVarSet
trigger1 = movehit
var(16) = ceil((var(10) * 1.42) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

[State B, PowerAdd]
type = ParentVarSet
trigger1 = moveguarded
var(16) = ceil((var(10) * 0.71) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

;----防禦ゲージ削り---------------------
[State HIT, Guardcount +1]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = MoveGuarded
var(15) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Guard Damage]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
triggerAll = root,var(25) > 0
trigger1 = MoveGuarded = 1
var(25) = -ceil(var(10) * root,fVar(6) * root,fVar(10) * root,fVar(11))
ignorehitpause = 1
persistent = 0

;----防禦崩壊---------------------------
[State HIT, GC Flag]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(25) <= 0
var(26) = 1
ignorehitpause = 1
persistent = 0

[State HIT, GUARD CRUSH]
type = TargetState
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(26) = 1
value = ifelse(P2StateType = A,6210,6200)
ignorehitpause = 1
persistent = 0

;----カウンターヒット-------------------

;----背面攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.50
triggerAll = NumHelper(40040) = 0
trigger1 = MoveHit = 1
stateno = 40040
ID = 40040
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;----相対攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.25
triggerAll = NumHelper(40040) = 0
triggerAll = NumHelper(40020) = 0
trigger1 = MoveHit = 1
stateno = 40020
ID = 40020
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;++++命中時処理ここまで++++++++++++++++++++++++++++++

;----補正リセット-----------------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = P2MoveType = H
trigger2 = ctrl && fVar(4) = 1.25
trigger3 = P2MoveType != A && fVar(4) = 1.25
trigger4 = EnemyNear,ctrl && fVar(4) = 1.25
Trigger5 = (Facing != enemynear,Facing) &&  fVar(4) = 1.50
fVar(4) = 1

;----ステート終了-----------------
[State 1105, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 1107
time = -1

[State 1105, Remove]
type = Changestate
trigger1 = FrontEdgeDist <= -40
trigger2 = MoveContact = 1
value = 1107
ignorehitpause = 1

;----ステート移行-----------------
[State 1105, Changestate]
type = Changestate
trigger1 = Vel y > 0 && Pos y >= 0
value = 1106
ignorehitpause = 1


;---------------------------------------------------------------------------
;236A-2
[Statedef 1106]
type     = S
movetype = A
physics  = N
anim     = 1106
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;----相手ダウン時攻撃半減---------
[State B, AttackPower]
type = VarSet
trigger1 = root,var(12) = 30
var(10) = ceil(var(10) * 0.5)
ignorehitpause = 1
persistent = 0

;----相対&背面補正(Proj用)--------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = Time = 0
fVar(4) = 1.00

[State P, Counter Revise]
type = VarSet
trigger1 = P2MoveType = A
fVar(4) = 1.25

[State P, Back Attack Revise]
type = VarSet
Trigger1 = (Facing = enemynear,Facing)
Trigger1 = P2BodyDist X >= 0
fVar(4) = 1.5

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----対打撃無敵-------------------
[State 1106, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
time = 999

;----演出-------------------------
[State 1106, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

;----動作処理---------------------
[State 1106, Velset]
type = Velset
trigger1 = time = 0
x = 3
y = 0

[State 1106, PosY0]
type = PosSet
trigger1 = Pos Y >= 0
y = 0

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット定義
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----通常ヒット-------------------------
[State 1106, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) != 40
triggerAll = root,Var(12) != 30
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-30 + Random%10), ceil(-20 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -7, 0
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -5
airguard.velocity = -3, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

;----壁やられ---------------------------
[State 1106, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 40
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-30 + Random%10), ceil(-20 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -7, 0
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -5
airguard.velocity = -3, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2StateNo = 6120,6121,6130)
p2facing = 1

;----ダウン追撃-------------------------
[State 1106, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 30
trigger1 = 1
attr = S,SP
hitflag = MAFD
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-30 + Random%10), ceil(-20 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -7, 0
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -5
airguard.velocity = -3, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2stateno = 6045,6045,ifelse(P2stateno = 6042,6045,ifelse(P2stateno = 6041,6042,6040)))
p2facing = 1

;++++ヒット定義ここまで++++++++++++++++++++++++++++++

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット時処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----キャンセルと各種補正処理-----------
[State HIT, Hitcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = movehit
var(13) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Floatcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = enemynear,StateType = A
trigger1 = MoveHit
var(14) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Cancel ON]
type = ParentVarSet
trigger1 = movecontact
var(4) = 10
ignorehitpause = 1
persistent = 0

;----ゲージ回収処理---------------------
[State B, PowerAdd]
type = ParentVarSet
trigger1 = movehit
var(16) = ceil((var(10) * 1.42) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

[State B, PowerAdd]
type = ParentVarSet
trigger1 = moveguarded
var(16) = ceil((var(10) * 0.71) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

;----防禦ゲージ削り---------------------
[State HIT, Guardcount +1]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = MoveGuarded
var(15) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Guard Damage]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
triggerAll = root,var(25) > 0
trigger1 = MoveGuarded = 1
var(25) = -ceil(var(10) * root,fVar(6) * root,fVar(10) * root,fVar(11))
ignorehitpause = 1
persistent = 0

;----防禦崩壊---------------------------
[State HIT, GC Flag]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(25) <= 0
var(26) = 1
ignorehitpause = 1
persistent = 0

[State HIT, GUARD CRUSH]
type = TargetState
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(26) = 1
value = ifelse(P2StateType = A,6210,6200)
ignorehitpause = 1
persistent = 0

;----カウンターヒット-------------------

;----背面攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.50
triggerAll = NumHelper(40040) = 0
trigger1 = MoveHit = 1
stateno = 40040
ID = 40040
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;----相対攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.25
triggerAll = NumHelper(40040) = 0
triggerAll = NumHelper(40020) = 0
trigger1 = MoveHit = 1
stateno = 40020
ID = 40020
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;++++命中時処理ここまで++++++++++++++++++++++++++++++

;----補正リセット-----------------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = P2MoveType = H
trigger2 = ctrl && fVar(4) = 1.25
trigger3 = P2MoveType != A && fVar(4) = 1.25
trigger4 = EnemyNear,ctrl && fVar(4) = 1.25
Trigger5 = (Facing != enemynear,Facing) &&  fVar(4) = 1.50
fVar(4) = 1

;----ステート終了-----------------
[State 1106, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 1107
time = -1

[State 1106, Remove]
type = Changestate
trigger1 = FrontEdgeDist <= -40
trigger2 = MoveContact = 1
value = 1107
ignorehitpause = 1

;---------------------------------------------------------------------------
;236A終了
[Statedef 1107]
type     = S
movetype = A
physics  = N
anim     = 1107
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 1107, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 1107, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

;----動作処理---------------------
[State 1107, Velset]
type = Velset
trigger1 = time = 0
x = 3
y = 0

;----消滅-------------------------
[State 1107, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0



;---------------------------------------------------------------------------
;22A-1
[Statedef 1205]
type     = A
movetype = A
physics  = N
anim     = 1205
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, AttackPower]
type = VarSet
trigger1 = Time = 0
var(10) = 105

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----完全無敵---------------------
[State 12X5, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;----演出-------------------------
[State 12X5, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

;----動作処理---------------------
[State 12X5, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

[State 12X5, Explod]
type = Explod
trigger1 = time = 0
anim = 1201
ID = 1205
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----ステート終了-----------------
[State 1205, Remove]
type = Changestate
trigger1 = root,movetype = H
value = 1208
ignorehitpause = 1

;----ステート移行-----------------
[State 1205, Changestate]
type = Changestate
trigger1 = root,command != "hold_a"
trigger1 = Time >= 22
value = 1206
ignorehitpause = 1


;---------------------------------------------------------------------------
;22A-2
[Statedef 1206]
type     = S
movetype = A
physics  = N
anim     = 1206
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;----相手ダウン時攻撃半減---------
[State B, AttackPower]
type = VarSet
trigger1 = root,var(12) = 30
var(10) = ceil(var(10) * 0.5)
ignorehitpause = 1
persistent = 0

;----相対&背面補正(Proj用)--------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = Time = 0
fVar(4) = 1.00

[State P, Counter Revise]
type = VarSet
trigger1 = P2MoveType = A
fVar(4) = 1.25

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----対打撃無敵-------------------
[State 12X6, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
time = 999

;----演出-------------------------
[State 12X6, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 12X6, Snd]
type = PlaySnd
trigger1 = time = 0
value = 1200, 1

[State 12X6, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1205

[State 12X6, Explod]
type = Explod
trigger1 = time = 0
anim = 1202
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 12X6, Velset]
type = Velset
trigger1 = time = 1
x = 0
y = 4

[State 12X6, Veladd]
type = Veladd
trigger1 = time >= 1
y = 0.20

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット定義
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----通常ヒット-------------------------
[State 1206, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) != 40
triggerAll = root,Var(12) != 30
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = -3, 0
air.velocity = -1, 3 + root,fVar(8)
guard.velocity = -2
airguard.velocity = -3, -4
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

;----壁やられ---------------------------
[State 1206, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 40
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = -3, 0
air.velocity = -1, 3 + root,fVar(8)
guard.velocity = -2
airguard.velocity = -3, -4
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2StateNo = 6120,6121,6130)
p2facing = 1

;----ダウン追撃-------------------------
[State 1206, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 30
trigger1 = 1
attr = S,SP
hitflag = MAFD
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = -3, 0
air.velocity = -1, 3 + root,fVar(8)
guard.velocity = -2
airguard.velocity = -3, -4
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2stateno = 6045,6045,ifelse(P2stateno = 6042,6045,ifelse(P2stateno = 6041,6042,6040)))
p2facing = 1

;++++ヒット定義ここまで++++++++++++++++++++++++++++++

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット時処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----キャンセルと各種補正処理-----------
[State HIT, Hitcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = movehit
var(13) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Floatcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = enemynear,StateType = A
trigger1 = MoveHit
var(14) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Cancel ON]
type = ParentVarSet
trigger1 = movecontact
var(4) = 10
ignorehitpause = 1
persistent = 0

;----ゲージ回収処理---------------------
[State B, PowerAdd]
type = ParentVarSet
trigger1 = movehit
var(16) = ceil((var(10) * 1.42) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

[State B, PowerAdd]
type = ParentVarSet
trigger1 = moveguarded
var(16) = ceil((var(10) * 0.71) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

;----防禦ゲージ削り---------------------
[State HIT, Guardcount +1]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = MoveGuarded
var(15) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Guard Damage]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
triggerAll = root,var(25) > 0
trigger1 = MoveGuarded = 1
var(25) = -ceil(var(10) * root,fVar(6) * root,fVar(10) * root,fVar(11))
ignorehitpause = 1
persistent = 0

;----防禦崩壊---------------------------
[State HIT, GC Flag]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(25) <= 0
var(26) = 1
ignorehitpause = 1
persistent = 0

[State HIT, GUARD CRUSH]
type = TargetState
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(26) = 1
value = ifelse(P2StateType = A,6210,6200)
ignorehitpause = 1
persistent = 0

;----カウンターヒット-------------------

;----背面攻撃表示-----------------

;----相対攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.25
triggerAll = NumHelper(40040) = 0
triggerAll = NumHelper(40020) = 0
trigger1 = MoveHit = 1
stateno = 40020
ID = 40020
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;++++命中時処理ここまで++++++++++++++++++++++++++++++

;----補正リセット-----------------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = P2MoveType = H
trigger2 = ctrl && fVar(4) = 1.25
trigger3 = P2MoveType != A && fVar(4) = 1.25
trigger4 = EnemyNear,ctrl && fVar(4) = 1.25
fVar(4) = 1

;----ステート終了-----------------
[State 1206, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 1207
time = -1

[State 1206, Remove]
type = Changestate
trigger1 = Vel Y > 0 && Pos Y >= 0
trigger2 = MoveContact = 1
trigger3 = root,movetype = H
value = 1207
ignorehitpause = 1

;---------------------------------------------------------------------------
;22A終了
[Statedef 1207]
type     = S
movetype = A
physics  = N
anim     = 1207
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 12X7, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 12X7, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 12X7, Explod]
type = Explod
trigger1 = time = 0
anim = 1207
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 1, -3
accel = 0, 0.5
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 12X7, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 12X7, DestroySelf]
type = DestroySelf
trigger1 = time >= 0

;---------------------------------------------------------------------------
;22A終了(ダメージ)
[Statedef 1208]
type     = S
movetype = A
physics  = N
anim     = 18000
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 12X8, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 12X8, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 12X8, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1205

[State 12X8, Explod]
type = Explod
trigger1 = time = 0
anim = 1202
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 12X8, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 12X8, DestroySelf]
type = DestroySelf
trigger1 = time >= 0



;---------------------------------------------------------------------------
;22B-1
[Statedef 1215]
type     = A
movetype = A
physics  = N
anim     = 1205
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, AttackPower]
type = VarSet
trigger1 = Time = 0
var(10) = 105

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----完全無敵---------------------
[State 12X5, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;----演出-------------------------
[State 12X5, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

;----動作処理---------------------
[State 12X5, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

[State 12X5, Explod]
type = Explod
trigger1 = time = 0
anim = 1201
ID = 1205
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----ステート終了-----------------
[State 1215, Remove]
type = Changestate
trigger1 = root,movetype = H
value = 1218
ignorehitpause = 1

;----ステート移行-----------------
[State 1215, Changestate]
type = Changestate
trigger1 = root,command != "hold_b"
trigger1 = Time >= 22
value = 1216
ignorehitpause = 1


;---------------------------------------------------------------------------
;22B-2
[Statedef 1216]
type     = S
movetype = A
physics  = N
anim     = 1206
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;----相手ダウン時攻撃半減---------
[State B, AttackPower]
type = VarSet
trigger1 = root,var(12) = 30
var(10) = ceil(var(10) * 0.5)
ignorehitpause = 1
persistent = 0

;----相対&背面補正(Proj用)--------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = Time = 0
fVar(4) = 1.00

[State P, Counter Revise]
type = VarSet
trigger1 = P2MoveType = A
fVar(4) = 1.25

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----対打撃無敵-------------------
[State 12X6, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
time = 999

;----演出-------------------------
[State 12X6, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 12X6, Snd]
type = PlaySnd
trigger1 = time = 0
value = 1200, 1

[State 12X6, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1205

[State 12X6, Explod]
type = Explod
trigger1 = time = 0
anim = 1202
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 12X6, Velset]
type = Velset
trigger1 = time = 1
x = 0
y = 4

[State 12X6, Veladd]
type = Veladd
trigger1 = time >= 1
y = 0.20

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット定義
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----通常ヒット-------------------------
[State 1216, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) != 40
triggerAll = root,Var(12) != 30
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = -3, 0
air.velocity = -1, 3 + root,fVar(8)
guard.velocity = -2
airguard.velocity = -3, -4
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

;----壁やられ---------------------------
[State 1216, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 40
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = -3, 0
air.velocity = -1, 3 + root,fVar(8)
guard.velocity = -2
airguard.velocity = -3, -4
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2StateNo = 6120,6121,6130)
p2facing = 1

;----ダウン追撃-------------------------
[State 1216, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 30
trigger1 = 1
attr = S,SP
hitflag = MAFD
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = -3, 0
air.velocity = -1, 3 + root,fVar(8)
guard.velocity = -2
airguard.velocity = -3, -4
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2stateno = 6045,6045,ifelse(P2stateno = 6042,6045,ifelse(P2stateno = 6041,6042,6040)))
p2facing = 1

;++++ヒット定義ここまで++++++++++++++++++++++++++++++

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット時処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----キャンセルと各種補正処理-----------
[State HIT, Hitcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = movehit
var(13) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Floatcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = enemynear,StateType = A
trigger1 = MoveHit
var(14) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Cancel ON]
type = ParentVarSet
trigger1 = movecontact
var(4) = 10
ignorehitpause = 1
persistent = 0

;----ゲージ回収処理---------------------
[State B, PowerAdd]
type = ParentVarSet
trigger1 = movehit
var(16) = ceil((var(10) * 1.42) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

[State B, PowerAdd]
type = ParentVarSet
trigger1 = moveguarded
var(16) = ceil((var(10) * 0.71) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

;----防禦ゲージ削り---------------------
[State HIT, Guardcount +1]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = MoveGuarded
var(15) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Guard Damage]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
triggerAll = root,var(25) > 0
trigger1 = MoveGuarded = 1
var(25) = -ceil(var(10) * root,fVar(6) * root,fVar(10) * root,fVar(11))
ignorehitpause = 1
persistent = 0

;----防禦崩壊---------------------------
[State HIT, GC Flag]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(25) <= 0
var(26) = 1
ignorehitpause = 1
persistent = 0

[State HIT, GUARD CRUSH]
type = TargetState
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(26) = 1
value = ifelse(P2StateType = A,6210,6200)
ignorehitpause = 1
persistent = 0

;----カウンターヒット-------------------

;----背面攻撃表示-----------------

;----相対攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.25
triggerAll = NumHelper(40040) = 0
triggerAll = NumHelper(40020) = 0
trigger1 = MoveHit = 1
stateno = 40020
ID = 40020
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;++++命中時処理ここまで++++++++++++++++++++++++++++++

;----補正リセット-----------------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = P2MoveType = H
trigger2 = ctrl && fVar(4) = 1.25
trigger3 = P2MoveType != A && fVar(4) = 1.25
trigger4 = EnemyNear,ctrl && fVar(4) = 1.25
fVar(4) = 1

;----ステート終了-----------------
[State 1216, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 1217
time = -1

[State 1216, Remove]
type = Changestate
trigger1 = Vel Y > 0 && Pos Y >= 0
trigger2 = MoveContact = 1
trigger3 = root,movetype = H
value = 1217
ignorehitpause = 1

;---------------------------------------------------------------------------
;22B終了
[Statedef 1217]
type     = S
movetype = A
physics  = N
anim     = 1207
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 12X7, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 12X7, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 12X7, Explod]
type = Explod
trigger1 = time = 0
anim = 1207
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 1, -3
accel = 0, 0.5
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 12X7, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 12X7, DestroySelf]
type = DestroySelf
trigger1 = time >= 0

;---------------------------------------------------------------------------
;22B終了(ダメージ)
[Statedef 1218]
type     = S
movetype = A
physics  = N
anim     = 18000
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 12X8, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 12X8, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 12X8, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1205

[State 12X8, Explod]
type = Explod
trigger1 = time = 0
anim = 1202
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 12X8, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 12X8, DestroySelf]
type = DestroySelf
trigger1 = time >= 0

;---------------------------------------------------------------------------
;22C-1
[Statedef 1225]
type     = A
movetype = A
physics  = N
anim     = 1205
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, AttackPower]
type = VarSet
trigger1 = Time = 0
var(10) = 105

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----完全無敵---------------------
[State 12X5, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;----演出-------------------------
[State 12X5, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

;----動作処理---------------------
[State 12X5, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

[State 12X5, Explod]
type = Explod
trigger1 = time = 0
anim = 1201
ID = 1205
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----ステート終了-----------------
[State 1225, Remove]
type = Changestate
trigger1 = root,movetype = H
value = 1228
ignorehitpause = 1

;----ステート移行-----------------
[State 1225, Changestate]
type = Changestate
trigger1 = root,command != "hold_c"
trigger1 = Time >= 22
value = 1226
ignorehitpause = 1


;---------------------------------------------------------------------------
;22C-2
[Statedef 1226]
type     = S
movetype = A
physics  = N
anim     = 1206
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;----相手ダウン時攻撃半減---------
[State B, AttackPower]
type = VarSet
trigger1 = root,var(12) = 30
var(10) = ceil(var(10) * 0.5)
ignorehitpause = 1
persistent = 0

;----相対&背面補正(Proj用)--------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = Time = 0
fVar(4) = 1.00

[State P, Counter Revise]
type = VarSet
trigger1 = P2MoveType = A
fVar(4) = 1.25

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----対打撃無敵-------------------
[State 12X6, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
time = 999

;----演出-------------------------
[State 12X6, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 12X6, Snd]
type = PlaySnd
trigger1 = time = 0
value = 1200, 1

[State 12X6, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1205

[State 12X6, Explod]
type = Explod
trigger1 = time = 0
anim = 1202
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 12X6, Velset]
type = Velset
trigger1 = time = 1
x = 0
y = 4

[State 12X6, Veladd]
type = Veladd
trigger1 = time >= 1
y = 0.20

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット定義
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----通常ヒット-------------------------
[State 1226, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) != 40
triggerAll = root,Var(12) != 30
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = -3, 0
air.velocity = -1, 3 + root,fVar(8)
guard.velocity = -2
airguard.velocity = -3, -4
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

;----壁やられ---------------------------
[State 1226, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 40
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = -3, 0
air.velocity = -1, 3 + root,fVar(8)
guard.velocity = -2
airguard.velocity = -3, -4
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2StateNo = 6120,6121,6130)
p2facing = 1

;----ダウン追撃-------------------------
[State 1226, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 30
trigger1 = 1
attr = S,SP
hitflag = MAFD
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = -3, 0
air.velocity = -1, 3 + root,fVar(8)
guard.velocity = -2
airguard.velocity = -3, -4
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2stateno = 6045,6045,ifelse(P2stateno = 6042,6045,ifelse(P2stateno = 6041,6042,6040)))
p2facing = 1

;++++ヒット定義ここまで++++++++++++++++++++++++++++++

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット時処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----キャンセルと各種補正処理-----------
[State HIT, Hitcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = movehit
var(13) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Floatcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = enemynear,StateType = A
trigger1 = MoveHit
var(14) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Cancel ON]
type = ParentVarSet
trigger1 = movecontact
var(4) = 10
ignorehitpause = 1
persistent = 0

;----ゲージ回収処理---------------------
[State B, PowerAdd]
type = ParentVarSet
trigger1 = movehit
var(16) = ceil((var(10) * 1.42) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

[State B, PowerAdd]
type = ParentVarSet
trigger1 = moveguarded
var(16) = ceil((var(10) * 0.71) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

;----防禦ゲージ削り---------------------
[State HIT, Guardcount +1]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = MoveGuarded
var(15) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Guard Damage]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
triggerAll = root,var(25) > 0
trigger1 = MoveGuarded = 1
var(25) = -ceil(var(10) * root,fVar(6) * root,fVar(10) * root,fVar(11))
ignorehitpause = 1
persistent = 0

;----防禦崩壊---------------------------
[State HIT, GC Flag]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(25) <= 0
var(26) = 1
ignorehitpause = 1
persistent = 0

[State HIT, GUARD CRUSH]
type = TargetState
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(26) = 1
value = ifelse(P2StateType = A,6210,6200)
ignorehitpause = 1
persistent = 0

;----カウンターヒット-------------------

;----背面攻撃表示-----------------

;----相対攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.25
triggerAll = NumHelper(40040) = 0
triggerAll = NumHelper(40020) = 0
trigger1 = MoveHit = 1
stateno = 40020
ID = 40020
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;++++命中時処理ここまで++++++++++++++++++++++++++++++

;----補正リセット-----------------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = P2MoveType = H
trigger2 = ctrl && fVar(4) = 1.25
trigger3 = P2MoveType != A && fVar(4) = 1.25
trigger4 = EnemyNear,ctrl && fVar(4) = 1.25
fVar(4) = 1

;----ステート終了-----------------
[State 1226, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 1227
time = -1

[State 1226, Remove]
type = Changestate
trigger1 = Vel Y > 0 && Pos Y >= 0
trigger2 = MoveContact = 1
trigger3 = root,movetype = H
value = 1227
ignorehitpause = 1

;---------------------------------------------------------------------------
;22C終了
[Statedef 1227]
type     = S
movetype = A
physics  = N
anim     = 1207
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 12X7, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 12X7, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 12X7, Explod]
type = Explod
trigger1 = time = 0
anim = 1207
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 1, -3
accel = 0, 0.5
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 12X7, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 12X7, DestroySelf]
type = DestroySelf
trigger1 = time >= 0

;---------------------------------------------------------------------------
;22C終了(ダメージ)
[Statedef 1228]
type     = S
movetype = A
physics  = N
anim     = 18000
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 12X8, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 12X8, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 12X8, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1205

[State 12X8, Explod]
type = Explod
trigger1 = time = 0
anim = 1202
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 12X8, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 12X8, DestroySelf]
type = DestroySelf
trigger1 = time >= 0



;---------------------------------------------------------------------------
;214A-1
[Statedef 1305]
type     = A
movetype = A
physics  = N
anim     = 1305
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, AttackPower]
type = VarSet
trigger1 = Time = 0
var(10) = 84

;----相手ダウン時攻撃半減---------
[State B, AttackPower]
type = VarSet
trigger1 = root,var(12) = 30
var(10) = ceil(var(10) * 0.5)
ignorehitpause = 1
persistent = 0

;----相対&背面補正(Proj用)--------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = Time = 0
fVar(4) = 1.00

[State P, Counter Revise]
type = VarSet
trigger1 = P2MoveType = A
fVar(4) = 1.25

[State P, Back Attack Revise]
type = VarSet
Trigger1 = (Facing = enemynear,Facing)
Trigger1 = P2BodyDist X >= 0
fVar(4) = 1.5

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----対打撃無敵-------------------
[State 1305, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
time = 999

;----演出-------------------------
[State 1305, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 1305, Snd]
type = PlaySnd
trigger1 = time = 0
value = 1300, 2

;----動作処理---------------------
[State 1305, Vel0]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット定義
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----通常ヒット-------------------------
[State 1305, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) != 40
triggerAll = root,Var(12) != 30
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-10 + Random%10), ceil(-15 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -7, 0
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -5
airguard.velocity = -3, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
palfx.time      = 45
palfx.sinadd    = 92,92,92,18
palfx.mul       = 210,200,190
palfx.add       = -30,-40,-50
palfx.color     = 120
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

;----壁やられ---------------------------
[State 1305, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 40
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-10 + Random%10), ceil(-15 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -7, 0
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -5
airguard.velocity = -3, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
palfx.time      = 45
palfx.sinadd    = 92,92,92,18
palfx.mul       = 210,200,190
palfx.add       = -30,-40,-50
palfx.color     = 120
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2StateNo = 6120,6121,6130)
p2facing = 1

;----ダウン追撃-------------------------
[State 1305, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 30
trigger1 = 1
attr = S,SP
hitflag = MAFD
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10001,10003)
guard.sparkno = S10022
sparkxy = ceil(-10 + Random%10), ceil(-15 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -7, 0
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -5
airguard.velocity = -3, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
palfx.time      = 45
palfx.sinadd    = 92,92,92,18
palfx.mul       = 210,200,190
palfx.add       = -30,-40,-50
palfx.color     = 120
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2stateno = 6045,6045,ifelse(P2stateno = 6042,6045,ifelse(P2stateno = 6041,6042,6040)))
p2facing = 1

;++++ヒット定義ここまで++++++++++++++++++++++++++++++

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット時処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----キャンセルと各種補正処理-----------
[State HIT, Hitcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = movehit
var(13) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Floatcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = enemynear,StateType = A
trigger1 = MoveHit
var(14) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Cancel ON]
type = ParentVarSet
trigger1 = movecontact
var(4) = 10
ignorehitpause = 1
persistent = 0

;----ゲージ回収処理---------------------
[State B, PowerAdd]
type = ParentVarSet
trigger1 = movehit
var(16) = ceil((var(10) * 1.42) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

[State B, PowerAdd]
type = ParentVarSet
trigger1 = moveguarded
var(16) = ceil((var(10) * 0.71) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

;----防禦ゲージ削り---------------------
[State HIT, Guardcount +1]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = MoveGuarded
var(15) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Guard Damage]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
triggerAll = root,var(25) > 0
trigger1 = MoveGuarded = 1
var(25) = -ceil(var(10) * root,fVar(6) * root,fVar(10) * root,fVar(11))
ignorehitpause = 1
persistent = 0

;----防禦崩壊---------------------------
[State HIT, GC Flag]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(25) <= 0
var(26) = 1
ignorehitpause = 1
persistent = 0

[State HIT, GUARD CRUSH]
type = TargetState
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(26) = 1
value = ifelse(P2StateType = A,6210,6200)
ignorehitpause = 1
persistent = 0

;----カウンターヒット-------------------

;----背面攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.50
triggerAll = NumHelper(40040) = 0
trigger1 = MoveHit = 1
stateno = 40040
ID = 40040
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;----相対攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.25
triggerAll = NumHelper(40040) = 0
triggerAll = NumHelper(40020) = 0
trigger1 = MoveHit = 1
stateno = 40020
ID = 40020
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;----演出-------------------------
[State 13X5, Explod]
type = Explod
trigger1 = MoveHit = 1
anim = 1330
;ID = 1330
pos = 0, 0
postype = p2
facing = 1
vfacing = 1
bindtime = -1
vel = 0, -2
accel = 0, -0.25
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = 1.5, 1.5
sprpriority = 7
ontop = 0
ownpal = 0
removeongethit = 0
IgnoreHitPause = 1
persistent = 0

;++++命中時処理ここまで++++++++++++++++++++++++++++++

;----補正リセット-----------------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = P2MoveType = H
trigger2 = ctrl && fVar(4) = 1.25
trigger3 = P2MoveType != A && fVar(4) = 1.25
trigger4 = EnemyNear,ctrl && fVar(4) = 1.25
Trigger5 = (Facing != enemynear,Facing) &&  fVar(4) = 1.50
fVar(4) = 1

;----ステート終了-----------------
[State 1305, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 1306
time = -1

[State 1305, Remove]
type = Changestate
trigger1 = Time >= 40
trigger2 = MoveContact = 1
value = 1306
ignorehitpause = 1

;---------------------------------------------------------------------------
;214A終了
[Statedef 1306]
type     = S
movetype = A
physics  = N
anim     = 1306
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 1306, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 1306, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

;----動作処理---------------------
[State 1306, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 1306, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0



;---------------------------------------------------------------------------
;632A-1
[Statedef 1405]
type     = A
movetype = A
physics  = N
anim     = 1405
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, AttackPower]
type = VarSet
trigger1 = Time = 0
var(10) = 84

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----完全無敵---------------------
[State 14X5, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;----演出-------------------------
[State 14X5, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 14X5, Explod]
type = Explod
trigger1 = time = 0
anim = 1401
ID = 1405
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 14X5, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

[State 14XX, PosSet X]
type = PosAdd
trigger1 = FrontEdgeDist < 0
x = FrontEdgeDist

[State 14XX, PosSet]
type = PosSet
trigger1 = 1
y = -60

;----ステート終了-----------------
[State 1405, Remove]
type = Changestate
trigger1 = root,movetype = H
value = 1408
ignorehitpause = 1

;----ステート移行-----------------
[State 1405, Changestate]
type = Changestate
trigger1 = Time >= 25
value = 1406
ignorehitpause = 1


;---------------------------------------------------------------------------
;632A-2
[Statedef 1406]
type     = S
movetype = A
physics  = N
anim     = 1406
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;----相対&背面補正(Proj用)--------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = Time = 0
fVar(4) = 1.00

[State P, Counter Revise]
type = VarSet
trigger1 = P2MoveType = A
fVar(4) = 1.25

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----対打撃無敵-------------------
[State 14X6, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
time = 999

;----演出-------------------------
[State 14X6, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 14X6, Snd]
type = PlaySnd
trigger1 = time = 0
value = 1400, 1

[State 14X6, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1405

[State 14X6, Explod]
type = Explod
trigger1 = time = 0
anim = 1402
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 14X6, Velset]
type = Velset
trigger1 = time = 1
x = 0
y = 0

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット定義
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----通常ヒット-------------------------
[State 1406, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) != 40
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = High
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10016,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1400, 10
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = 8, 0
air.velocity = 3, -4 + root,fVar(8)
guard.velocity = 6
airguard.velocity = 3, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

;----壁やられ---------------------------
[State 1406, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 40
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = High
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10016,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1400, 10
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = 8, 0
air.velocity = 3, -4 + root,fVar(8)
guard.velocity = 6
airguard.velocity = 3, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2StateNo = 6120,6121,6130)
p2facing = 1

;++++ヒット定義ここまで++++++++++++++++++++++++++++++

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット時処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----キャンセルと各種補正処理-----------
[State HIT, Hitcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = movehit
var(13) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Floatcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = enemynear,StateType = A
trigger1 = MoveHit
var(14) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Cancel ON]
type = ParentVarSet
trigger1 = movecontact
var(4) = 10
ignorehitpause = 1
persistent = 0

;----ゲージ回収処理---------------------
[State B, PowerAdd]
type = ParentVarSet
trigger1 = movehit
var(16) = ceil((var(10) * 1.42) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

[State B, PowerAdd]
type = ParentVarSet
trigger1 = moveguarded
var(16) = ceil((var(10) * 0.71) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

;----防禦ゲージ削り---------------------
[State HIT, Guardcount +1]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = MoveGuarded
var(15) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Guard Damage]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
triggerAll = root,var(25) > 0
trigger1 = MoveGuarded = 1
var(25) = -ceil(var(10) * root,fVar(6) * root,fVar(10) * root,fVar(11))
ignorehitpause = 1
persistent = 0

;----防禦崩壊---------------------------
[State HIT, GC Flag]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(25) <= 0
var(26) = 1
ignorehitpause = 1
persistent = 0

[State HIT, GUARD CRUSH]
type = TargetState
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(26) = 1
value = ifelse(P2StateType = A,6210,6200)
ignorehitpause = 1
persistent = 0

;----カウンターヒット-------------------

;----背面攻撃表示-----------------

;----相対攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.25
triggerAll = NumHelper(40040) = 0
triggerAll = NumHelper(40020) = 0
trigger1 = MoveHit = 1
stateno = 40020
ID = 40020
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;----演出-------------------------
[State 14X5, Explod]
type = Explod
trigger1 = MoveHit = 1
anim = 1430
;ID = 1430
pos = 0, 0
postype = p2
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 0
removeongethit = 0
IgnoreHitPause = 1
persistent = 0

;++++命中時処理ここまで++++++++++++++++++++++++++++++

;----補正リセット-----------------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = P2MoveType = H
trigger2 = ctrl && fVar(4) = 1.25
trigger3 = P2MoveType != A && fVar(4) = 1.25
trigger4 = EnemyNear,ctrl && fVar(4) = 1.25
fVar(4) = 1

;----ステート終了-----------------
[State 1406, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 1407
time = -1

[State 1406, Remove]
type = Changestate
trigger1 = AnimTime = 0
trigger2 = MoveContact = 1
trigger3 = root,movetype = H
value = 1407
ignorehitpause = 1

;---------------------------------------------------------------------------
;632A終了
[Statedef 1407]
type     = S
movetype = A
physics  = N
anim     = 1407
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 14X7, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 14X7, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 14X7, Explod]
type = Explod
trigger1 = time = 0
anim = 1407
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 14X7, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 14X7, DestroySelf]
type = DestroySelf
trigger1 = time >= 0

;---------------------------------------------------------------------------
;632A終了(ダメージ)
[Statedef 1408]
type     = S
movetype = A
physics  = N
anim     = 18000
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 14X8, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 14X8, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 14X8, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1405

[State 14X8, Explod]
type = Explod
trigger1 = time = 0
anim = 1402
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 14X8, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 14X8, DestroySelf]
type = DestroySelf
trigger1 = time >= 0

;---------------------------------------------------------------------------
;632B-1
[Statedef 1415]
type     = A
movetype = A
physics  = N
anim     = 1405
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, AttackPower]
type = VarSet
trigger1 = Time = 0
var(10) = 84

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----完全無敵---------------------
[State 14X5, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;----演出-------------------------
[State 14X5, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

;----動作処理---------------------
[State 14X5, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

[State 14X5, Explod]
type = Explod
trigger1 = time = 0
anim = 1401
ID = 1405
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

[State 14XX, PosSet X]
type = PosAdd
trigger1 = FrontEdgeDist < 0
x = FrontEdgeDist

[State 14XX, PosSet]
type = PosSet
trigger1 = 1
y = -60

;----ステート終了-----------------
[State 1415, Remove]
type = Changestate
trigger1 = root,movetype = H
value = 1418
ignorehitpause = 1

;----ステート移行-----------------
[State 1415, Changestate]
type = Changestate
trigger1 = Time >= 45
value = 1416
ignorehitpause = 1


;---------------------------------------------------------------------------
;632B-2
[Statedef 1416]
type     = S
movetype = A
physics  = N
anim     = 1406
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;----相対&背面補正(Proj用)--------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = Time = 0
fVar(4) = 1.00

[State P, Counter Revise]
type = VarSet
trigger1 = P2MoveType = A
fVar(4) = 1.25

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----対打撃無敵-------------------
[State 14X6, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
time = 999

;----演出-------------------------
[State 14X6, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 14X6, Snd]
type = PlaySnd
trigger1 = time = 0
value = 1400, 1

[State 14X6, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1405

[State 14X6, Explod]
type = Explod
trigger1 = time = 0
anim = 1402
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 14X6, Velset]
type = Velset
trigger1 = time = 1
x = 0
y = 0

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット定義
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----通常ヒット-------------------------
[State 1416, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) != 40
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = High
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10016,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1400, 10
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = 8, 0
air.velocity = 3, -4 + root,fVar(8)
guard.velocity = 6
airguard.velocity = 3, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

;----壁やられ---------------------------
[State 1416, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 40
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = High
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10016,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1400, 10
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = 8, 0
air.velocity = 3, -4 + root,fVar(8)
guard.velocity = 6
airguard.velocity = 3, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2StateNo = 6120,6121,6130)
p2facing = 1

;++++ヒット定義ここまで++++++++++++++++++++++++++++++

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット時処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----キャンセルと各種補正処理-----------
[State HIT, Hitcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = movehit
var(13) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Floatcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = enemynear,StateType = A
trigger1 = MoveHit
var(14) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Cancel ON]
type = ParentVarSet
trigger1 = movecontact
var(4) = 10
ignorehitpause = 1
persistent = 0

;----ゲージ回収処理---------------------
[State B, PowerAdd]
type = ParentVarSet
trigger1 = movehit
var(16) = ceil((var(10) * 1.42) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

[State B, PowerAdd]
type = ParentVarSet
trigger1 = moveguarded
var(16) = ceil((var(10) * 0.71) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

;----防禦ゲージ削り---------------------
[State HIT, Guardcount +1]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = MoveGuarded
var(15) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Guard Damage]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
triggerAll = root,var(25) > 0
trigger1 = MoveGuarded = 1
var(25) = -ceil(var(10) * root,fVar(6) * root,fVar(10) * root,fVar(11))
ignorehitpause = 1
persistent = 0

;----防禦崩壊---------------------------
[State HIT, GC Flag]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(25) <= 0
var(26) = 1
ignorehitpause = 1
persistent = 0

[State HIT, GUARD CRUSH]
type = TargetState
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(26) = 1
value = ifelse(P2StateType = A,6210,6200)
ignorehitpause = 1
persistent = 0

;----カウンターヒット-------------------

;----背面攻撃表示-----------------

;----相対攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.25
triggerAll = NumHelper(40040) = 0
triggerAll = NumHelper(40020) = 0
trigger1 = MoveHit = 1
stateno = 40020
ID = 40020
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;----演出-------------------------
[State 14X5, Explod]
type = Explod
trigger1 = MoveHit = 1
anim = 1430
;ID = 1430
pos = 0, 0
postype = p2
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 0
removeongethit = 0
IgnoreHitPause = 1
persistent = 0

;++++命中時処理ここまで++++++++++++++++++++++++++++++

;----補正リセット-----------------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = P2MoveType = H
trigger2 = ctrl && fVar(4) = 1.25
trigger3 = P2MoveType != A && fVar(4) = 1.25
trigger4 = EnemyNear,ctrl && fVar(4) = 1.25
fVar(4) = 1

;----ステート終了-----------------
[State 1416, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 1417
time = -1

[State 1416, Remove]
type = Changestate
trigger1 = AnimTime = 0
trigger2 = MoveContact = 1
trigger3 = root,movetype = H
value = 1417
ignorehitpause = 1

;---------------------------------------------------------------------------
;632B終了
[Statedef 1417]
type     = S
movetype = A
physics  = N
anim     = 1407
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 14X7, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 14X7, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 14X7, Explod]
type = Explod
trigger1 = time = 0
anim = 1407
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 14X7, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 14X7, DestroySelf]
type = DestroySelf
trigger1 = time >= 0

;---------------------------------------------------------------------------
;632B終了(ダメージ)
[Statedef 1418]
type     = S
movetype = A
physics  = N
anim     = 18000
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 14X8, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 14X8, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 14X8, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1405

[State 14X8, Explod]
type = Explod
trigger1 = time = 0
anim = 1402
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 14X8, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 14X8, DestroySelf]
type = DestroySelf
trigger1 = time >= 0

;---------------------------------------------------------------------------
;632C-1
[Statedef 1425]
type     = A
movetype = A
physics  = N
anim     = 1405
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, AttackPower]
type = VarSet
trigger1 = Time = 0
var(10) = 84

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----完全無敵---------------------
[State 14X5, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;----演出-------------------------
[State 14X5, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

;----動作処理---------------------
[State 14X5, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

[State 14X5, Explod]
type = Explod
trigger1 = time = 0
anim = 1401
ID = 1405
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

[State 14XX, PosSet X]
type = PosAdd
trigger1 = FrontEdgeDist < 0
x = FrontEdgeDist

[State 14XX, PosSet]
type = PosSet
trigger1 = 1
y = -60

;----ステート終了-----------------
[State 1425, Remove]
type = Changestate
trigger1 = root,movetype = H
value = 1428
ignorehitpause = 1

;----ステート移行-----------------
[State 1425, Changestate]
type = Changestate
trigger1 = Time >= 65
value = 1426
ignorehitpause = 1


;---------------------------------------------------------------------------
;632C-2
[Statedef 1426]
type     = S
movetype = A
physics  = N
anim     = 1406
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;----相対&背面補正(Proj用)--------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = Time = 0
fVar(4) = 1.00

[State P, Counter Revise]
type = VarSet
trigger1 = P2MoveType = A
fVar(4) = 1.25

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----対打撃無敵-------------------
[State 14X6, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
time = 999

;----演出-------------------------
[State 14X6, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 14X6, Snd]
type = PlaySnd
trigger1 = time = 0
value = 1400, 1

[State 14X6, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1405

[State 14X6, Explod]
type = Explod
trigger1 = time = 0
anim = 1402
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 14X6, Velset]
type = Velset
trigger1 = time = 1
x = 0
y = 0

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット定義
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----通常ヒット-------------------------
[State 1426, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) != 40
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = High
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10016,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1400, 10
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = 8, 0
air.velocity = 3, -4 + root,fVar(8)
guard.velocity = 6
airguard.velocity = 3, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

;----壁やられ---------------------------
[State 1426, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 40
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = High
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10016,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1400, 10
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = 8, 0
air.velocity = 3, -4 + root,fVar(8)
guard.velocity = 6
airguard.velocity = 3, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2StateNo = 6120,6121,6130)
p2facing = 1

;++++ヒット定義ここまで++++++++++++++++++++++++++++++

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット時処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----キャンセルと各種補正処理-----------
[State HIT, Hitcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = movehit
var(13) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Floatcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = enemynear,StateType = A
trigger1 = MoveHit
var(14) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Cancel ON]
type = ParentVarSet
trigger1 = movecontact
var(4) = 10
ignorehitpause = 1
persistent = 0

;----ゲージ回収処理---------------------
[State B, PowerAdd]
type = ParentVarSet
trigger1 = movehit
var(16) = ceil((var(10) * 1.42) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

[State B, PowerAdd]
type = ParentVarSet
trigger1 = moveguarded
var(16) = ceil((var(10) * 0.71) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

;----防禦ゲージ削り---------------------
[State HIT, Guardcount +1]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = MoveGuarded
var(15) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Guard Damage]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
triggerAll = root,var(25) > 0
trigger1 = MoveGuarded = 1
var(25) = -ceil(var(10) * root,fVar(6) * root,fVar(10) * root,fVar(11))
ignorehitpause = 1
persistent = 0

;----防禦崩壊---------------------------
[State HIT, GC Flag]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(25) <= 0
var(26) = 1
ignorehitpause = 1
persistent = 0

[State HIT, GUARD CRUSH]
type = TargetState
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(26) = 1
value = ifelse(P2StateType = A,6210,6200)
ignorehitpause = 1
persistent = 0

;----カウンターヒット-------------------

;----背面攻撃表示-----------------

;----相対攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.25
triggerAll = NumHelper(40040) = 0
triggerAll = NumHelper(40020) = 0
trigger1 = MoveHit = 1
stateno = 40020
ID = 40020
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;----演出-------------------------
[State 14X5, Explod]
type = Explod
trigger1 = MoveHit = 1
anim = 1430
;ID = 1430
pos = 0, 0
postype = p2
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 0
removeongethit = 0
IgnoreHitPause = 1
persistent = 0

;++++命中時処理ここまで++++++++++++++++++++++++++++++

;----補正リセット-----------------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = P2MoveType = H
trigger2 = ctrl && fVar(4) = 1.25
trigger3 = P2MoveType != A && fVar(4) = 1.25
trigger4 = EnemyNear,ctrl && fVar(4) = 1.25
fVar(4) = 1

;----ステート終了-----------------
[State 1426, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 1427
time = -1

[State 1426, Remove]
type = Changestate
trigger1 = AnimTime = 0
trigger2 = MoveContact = 1
trigger3 = root,movetype = H
value = 1427
ignorehitpause = 1

;---------------------------------------------------------------------------
;632C終了
[Statedef 1427]
type     = S
movetype = A
physics  = N
anim     = 1407
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 14X7, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 14X7, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 14X7, Explod]
type = Explod
trigger1 = time = 0
anim = 1407
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 14X7, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 14X7, DestroySelf]
type = DestroySelf
trigger1 = time >= 0

;---------------------------------------------------------------------------
;632C終了(ダメージ)
[Statedef 1428]
type     = S
movetype = A
physics  = N
anim     = 18000
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 14X8, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 14X8, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 14X8, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1405

[State 14X8, Explod]
type = Explod
trigger1 = time = 0
anim = 1402
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 14X8, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

[State 14XX, PosSet]
type = PosSet
trigger1 = 1
y = -60

;----消滅-------------------------
[State 14X8, DestroySelf]
type = DestroySelf
trigger1 = time >= 0




;---------------------------------------------------------------------------
;236SP-1
[Statedef 2105]
type     = A
movetype = A
physics  = N
anim     = 2105
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, AttackPower]
type = VarSet
trigger1 = Time = 0
var(10) = 70

;----相手ダウン時攻撃半減---------
[State B, AttackPower]
type = VarSet
trigger1 = root,var(12) = 30
var(10) = ceil(var(10) * 0.5)
ignorehitpause = 1
persistent = 0

;----相対&背面補正(Proj用)--------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = Time = 0
fVar(4) = 1.00

[State P, Counter Revise]
type = VarSet
trigger1 = P2MoveType = A
fVar(4) = 1.25

[State P, Back Attack Revise]
type = VarSet
Trigger1 = (Facing = enemynear,Facing)
Trigger1 = P2BodyDist X >= 0
fVar(4) = 1.5

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----対打撃無敵-------------------
[State 2105, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
time = 999

;----演出-------------------------
[State 2105, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 2105, Snd]
type = PlaySnd
trigger1 = time = 0
value = 1100, 1

;----動作処理---------------------
[State 2105, Velset]
type = Velset
trigger1 = time = 0
x = 3
y = 0

[State 2105, Veladd]
type = Veladd
trigger1 = time >= 0
y = 0.20

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット定義
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----通常ヒット-------------------------
[State 2105, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) != 40
triggerAll = root,Var(12) != 30
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Back
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10002,10003)
guard.sparkno = S10022
sparkxy = ceil(-30 + Random%10), ceil(-20 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -3, -4
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -5
airguard.velocity = -3, -4
fall = 1
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

;----壁やられ---------------------------
[State 2105, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 40
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Back
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10002,10003)
guard.sparkno = S10022
sparkxy = ceil(-30 + Random%10), ceil(-20 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -3, -4
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -5
airguard.velocity = -3, -4
fall = 1
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2StateNo = 6120,6121,6130)
p2facing = 1

;----ダウン追撃-------------------------
[State 2105, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 30
trigger1 = 1
attr = S,SP
hitflag = MAFD
guardflag = MA
animtype = Back
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10002,10003)
guard.sparkno = S10022
sparkxy = ceil(-30 + Random%10), ceil(-20 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -3, -4
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -5
airguard.velocity = -3, -4
fall = 1
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2stateno = 6045,6045,ifelse(P2stateno = 6042,6045,ifelse(P2stateno = 6041,6042,6040)))
p2facing = 1

;++++ヒット定義ここまで++++++++++++++++++++++++++++++

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット時処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----キャンセルと各種補正処理-----------
[State HIT, Hitcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = movehit
var(13) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Floatcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = enemynear,StateType = A
trigger1 = MoveHit
var(14) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Cancel ON]
type = ParentVarSet
trigger1 = movecontact
var(4) = 1
ignorehitpause = 1
persistent = 0

;----ゲージ回収処理---------------------

;----防禦ゲージ削り---------------------
[State HIT, Guardcount +1]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = MoveGuarded
var(15) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Guard Damage]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
triggerAll = root,var(25) > 0
trigger1 = MoveGuarded = 1
var(25) = -ceil(var(10) * root,fVar(6) * root,fVar(10) * root,fVar(11))
ignorehitpause = 1
persistent = 0

;----防禦崩壊---------------------------
[State HIT, GC Flag]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(25) <= 0
var(26) = 1
ignorehitpause = 1
persistent = 0

[State HIT, GUARD CRUSH]
type = TargetState
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(26) = 1
value = ifelse(P2StateType = A,6210,6200)
ignorehitpause = 1
persistent = 0

;----カウンターヒット-------------------

;----背面攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.50
triggerAll = NumHelper(40040) = 0
trigger1 = MoveHit = 1
stateno = 40040
ID = 40040
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;----相対攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.25
triggerAll = NumHelper(40040) = 0
triggerAll = NumHelper(40020) = 0
trigger1 = MoveHit = 1
stateno = 40020
ID = 40020
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;++++命中時処理ここまで++++++++++++++++++++++++++++++

;----補正リセット-----------------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = P2MoveType = H
trigger2 = ctrl && fVar(4) = 1.25
trigger3 = P2MoveType != A && fVar(4) = 1.25
trigger4 = EnemyNear,ctrl && fVar(4) = 1.25
Trigger5 = (Facing != enemynear,Facing) &&  fVar(4) = 1.50
fVar(4) = 1

;----ステート終了-----------------
[State 2105, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 2107
time = -1

[State 2105, Remove]
type = Changestate
trigger1 = FrontEdgeDist <= -40
trigger2 = MoveContact = 1
value = 2107
ignorehitpause = 1

;----ステート移行-----------------
[State 2105, Changestate]
type = Changestate
trigger1 = Vel y > 0 && Pos y >= 0
value = 2106
ignorehitpause = 1


;---------------------------------------------------------------------------
;236SP-2
[Statedef 2106]
type     = S
movetype = A
physics  = N
anim     = 2106
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;----相手ダウン時攻撃半減---------
[State B, AttackPower]
type = VarSet
trigger1 = root,var(12) = 30
var(10) = ceil(var(10) * 0.5)
ignorehitpause = 1
persistent = 0

;----相対&背面補正(Proj用)--------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = Time = 0
fVar(4) = 1.00

[State P, Counter Revise]
type = VarSet
trigger1 = P2MoveType = A
fVar(4) = 1.25

[State P, Back Attack Revise]
type = VarSet
Trigger1 = (Facing = enemynear,Facing)
Trigger1 = P2BodyDist X >= 0
fVar(4) = 1.5

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----対打撃無敵-------------------
[State 2106, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
time = 999

;----演出-------------------------
[State 2106, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

;----動作処理---------------------
[State 2106, Velset]
type = Velset
trigger1 = time = 0
x = 3
y = 0

[State 2106, PosY0]
type = PosSet
trigger1 = Pos Y >= 0
y = 0

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット定義
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----通常ヒット-------------------------
[State 2106, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) != 40
triggerAll = root,Var(12) != 30
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Back
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10002,10003)
guard.sparkno = S10022
sparkxy = ceil(-30 + Random%10), ceil(-20 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -3, -4
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -5
airguard.velocity = -3, -4
fall = 1
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

;----壁やられ---------------------------
[State 2106, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 40
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Back
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10002,10003)
guard.sparkno = S10022
sparkxy = ceil(-30 + Random%10), ceil(-20 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -3, -4
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -5
airguard.velocity = -3, -4
fall = 1
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2StateNo = 6120,6121,6130)
p2facing = 1

;----ダウン追撃-------------------------
[State 2106, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 30
trigger1 = 1
attr = S,SP
hitflag = MAFD
guardflag = MA
animtype = Back
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10002,10003)
guard.sparkno = S10022
sparkxy = ceil(-30 + Random%10), ceil(-20 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -3, -4
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -5
airguard.velocity = -3, -4
fall = 1
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2stateno = 6045,6045,ifelse(P2stateno = 6042,6045,ifelse(P2stateno = 6041,6042,6040)))
p2facing = 1

;++++ヒット定義ここまで++++++++++++++++++++++++++++++

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット時処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----キャンセルと各種補正処理-----------
[State HIT, Hitcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = movehit
var(13) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Floatcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = enemynear,StateType = A
trigger1 = MoveHit
var(14) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Cancel ON]
type = ParentVarSet
trigger1 = movecontact
var(4) = 10
ignorehitpause = 1
persistent = 0

;----ゲージ回収処理---------------------

;----防禦ゲージ削り---------------------
[State HIT, Guardcount +1]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = MoveGuarded
var(15) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Guard Damage]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
triggerAll = root,var(25) > 0
trigger1 = MoveGuarded = 1
var(25) = -ceil(var(10) * root,fVar(6) * root,fVar(10) * root,fVar(11))
ignorehitpause = 1
persistent = 0

;----防禦崩壊---------------------------
[State HIT, GC Flag]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(25) <= 0
var(26) = 1
ignorehitpause = 1
persistent = 0

[State HIT, GUARD CRUSH]
type = TargetState
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(26) = 1
value = ifelse(P2StateType = A,6210,6200)
ignorehitpause = 1
persistent = 0

;----カウンターヒット-------------------

;----背面攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.50
triggerAll = NumHelper(40040) = 0
trigger1 = MoveHit = 1
stateno = 40040
ID = 40040
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;----相対攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.25
triggerAll = NumHelper(40040) = 0
triggerAll = NumHelper(40020) = 0
trigger1 = MoveHit = 1
stateno = 40020
ID = 40020
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;++++命中時処理ここまで++++++++++++++++++++++++++++++

;----補正リセット-----------------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = P2MoveType = H
trigger2 = ctrl && fVar(4) = 1.25
trigger3 = P2MoveType != A && fVar(4) = 1.25
trigger4 = EnemyNear,ctrl && fVar(4) = 1.25
Trigger5 = (Facing != enemynear,Facing) &&  fVar(4) = 1.50
fVar(4) = 1

;----ステート終了-----------------
[State 2106, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 2107
time = -1

[State 2106, Remove]
type = Changestate
trigger1 = FrontEdgeDist <= -40
trigger2 = MoveContact = 1
value = 2107
ignorehitpause = 1

;---------------------------------------------------------------------------
;236SP終了
[Statedef 2107]
type     = S
movetype = A
physics  = N
anim     = 2107
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 2107, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 2107, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

;----動作処理---------------------
[State 2107, Velset]
type = Velset
trigger1 = time = 0
x = 3
y = 0

;----消滅-------------------------
[State 2107, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0



;---------------------------------------------------------------------------
;22SP-1
[Statedef 2205]
type     = A
movetype = A
physics  = N
anim     = 2205
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, AttackPower]
type = VarSet
trigger1 = Time = 0
var(10) = 91

;----相手ダウン時攻撃半減---------
[State B, AttackPower]
type = VarSet
trigger1 = root,var(12) = 30
var(10) = ceil(var(10) * 0.5)
ignorehitpause = 1
persistent = 0

;----相対&背面補正(Proj用)--------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = Time = 0
fVar(4) = 1.00

[State P, Counter Revise]
type = VarSet
trigger1 = P2MoveType = A
fVar(4) = 1.25

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----対打撃無敵-------------------
[State 2205, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
time = 999

;----演出-------------------------
[State 2205, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 2205, Snd]
type = PlaySnd
trigger1 = time = 0
value = 1200, 1

;----動作処理---------------------
[State 2205, Velset]
type = Velset
trigger1 = time = 1
x = 0
y = 4

[State 2205, Veladd]
type = Veladd
trigger1 = time >= 1
y = 0.20

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット定義
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----通常ヒット-------------------------
[State 2205, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) != 40
triggerAll = root,Var(12) != 30
trigger1 = 1
attr = S,HP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10002,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = -3, 0
air.velocity = -1, 3 + root,fVar(8)
guard.velocity = -2
airguard.velocity = -3, -4
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

;----壁やられ---------------------------
[State 2205, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 40
trigger1 = 1
attr = S,HP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10002,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = -3, 0
air.velocity = -1, 3 + root,fVar(8)
guard.velocity = -2
airguard.velocity = -3, -4
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2StateNo = 6120,6121,6130)
p2facing = 1

;----ダウン追撃-------------------------
[State 2205, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 30
trigger1 = 1
attr = S,HP
hitflag = MAFD
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10002,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = -3, 0
air.velocity = -1, 3 + root,fVar(8)
guard.velocity = -2
airguard.velocity = -3, -4
fall = 0
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2stateno = 6045,6045,ifelse(P2stateno = 6042,6045,ifelse(P2stateno = 6041,6042,6040)))
p2facing = 1

;++++ヒット定義ここまで++++++++++++++++++++++++++++++

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット時処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----キャンセルと各種補正処理-----------
[State HIT, Hitcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = movehit
var(13) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Floatcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = enemynear,StateType = A
trigger1 = MoveHit
var(14) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Cancel ON]
type = ParentVarSet
trigger1 = movecontact
var(4) = 10
ignorehitpause = 1
persistent = 0

;----ゲージ回収処理---------------------
[State B, PowerAdd]
type = ParentVarSet
trigger1 = movehit
var(16) = ceil((var(10) * 1.42) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

[State B, PowerAdd]
type = ParentVarSet
trigger1 = moveguarded
var(16) = ceil((var(10) * 0.71) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

;----防禦ゲージ削り---------------------
[State HIT, Guardcount +1]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = MoveGuarded
var(15) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Guard Damage]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
triggerAll = root,var(25) > 0
trigger1 = MoveGuarded = 1
var(25) = -ceil(var(10) * root,fVar(6) * root,fVar(10) * root,fVar(11))
ignorehitpause = 1
persistent = 0

;----防禦崩壊---------------------------
[State HIT, GC Flag]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(25) <= 0
var(26) = 1
ignorehitpause = 1
persistent = 0

[State HIT, GUARD CRUSH]
type = TargetState
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(26) = 1
value = ifelse(P2StateType = A,6210,6200)
ignorehitpause = 1
persistent = 0

;----カウンターヒット-------------------

;----背面攻撃表示-----------------

;----相対攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.25
triggerAll = NumHelper(40040) = 0
triggerAll = NumHelper(40020) = 0
trigger1 = MoveHit = 1
stateno = 40020
ID = 40020
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;++++命中時処理ここまで++++++++++++++++++++++++++++++

;----補正リセット-----------------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = P2MoveType = H
trigger2 = ctrl && fVar(4) = 1.25
trigger3 = P2MoveType != A && fVar(4) = 1.25
trigger4 = EnemyNear,ctrl && fVar(4) = 1.25
fVar(4) = 1

;----ステート終了-----------------
[State 2205, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 2206
time = -1

[State 2206, Remove]
type = Changestate
trigger1 = Vel Y > 0 && Pos Y >= 0
trigger2 = MoveContact = 1
trigger3 = root,movetype = H
value = 2206
ignorehitpause = 1

;---------------------------------------------------------------------------
;22SP終了
[Statedef 2206]
type     = S
movetype = A
physics  = N
anim     = 2206
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 2206, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 2206, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 2206, Explod]
type = Explod
trigger1 = time = 0
anim = 2206
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 1, -3
accel = 0, 0.5
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 2206, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 2206, DestroySelf]
type = DestroySelf
trigger1 = time >= 0



;---------------------------------------------------------------------------
;214SP-1
[Statedef 2305]
type     = A
movetype = A
physics  = N
anim     = 2305
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, AttackPower]
type = VarSet
trigger1 = Time = 0
var(10) = 80

;----相手ダウン時攻撃半減---------
[State B, AttackPower]
type = VarSet
trigger1 = root,var(12) = 30
var(10) = ceil(var(10) * 0.5)
ignorehitpause = 1
persistent = 0

;----相対&背面補正(Proj用)--------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = Time = 0
fVar(4) = 1.00

[State P, Counter Revise]
type = VarSet
trigger1 = P2MoveType = A
fVar(4) = 1.25

[State P, Back Attack Revise]
type = VarSet
Trigger1 = (Facing = enemynear,Facing)
Trigger1 = P2BodyDist X >= 0
fVar(4) = 1.5

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----対打撃無敵-------------------
[State 2305, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
time = 999

;----演出-------------------------
[State 2305, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 2305, Snd]
type = PlaySnd
trigger1 = time = 0
value = 1300, 2

;----動作処理---------------------
[State 2305, Vel0]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット定義
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----通常ヒット-------------------------
[State 2305, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) != 40
triggerAll = root,Var(12) != 30
trigger1 = 1
attr = S,HP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 4
guard.pausetime = 0, 4
sparkno = S0 + ifelse(root,var(21) != 1,10002,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-15 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -12, 0
air.velocity = -5, -4 + root,fVar(8)
guard.velocity = -10
airguard.velocity = -5, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
palfx.time      = 45
palfx.sinadd    = 92,92,92,18
palfx.mul       = 210,200,190
palfx.add       = -30,-40,-50
palfx.color     = 120
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

;----壁やられ---------------------------
[State 2305, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 40
trigger1 = 1
attr = S,HP
hitflag = MAF
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 4
guard.pausetime = 0, 4
sparkno = S0 + ifelse(root,var(21) != 1,10002,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-15 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -12, 0
air.velocity = -5, -4 + root,fVar(8)
guard.velocity = -10
airguard.velocity = -5, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
palfx.time      = 45
palfx.sinadd    = 92,92,92,18
palfx.mul       = 210,200,190
palfx.add       = -30,-40,-50
palfx.color     = 120
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2StateNo = 6120,6121,6130)
p2facing = 1

;----ダウン追撃-------------------------
[State 2305, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 30
trigger1 = 1
attr = S,HP
hitflag = MAFD
guardflag = MA
animtype = Hard
ground.type = Low
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 4
guard.pausetime = 0, 4
sparkno = S0 + ifelse(root,var(21) != 1,10002,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-15 + Random%10)
hitsound = S1, ifelse(root,var(12) != 40,2,3)
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -12, 0
air.velocity = -5, -4 + root,fVar(8)
guard.velocity = -10
airguard.velocity = -5, -4
fall = 0
air.fall = ifelse(P2movetype = H,1,0)
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
palfx.time      = 45
palfx.sinadd    = 92,92,92,18
palfx.mul       = 210,200,190
palfx.add       = -30,-40,-50
palfx.color     = 120
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2stateno = 6045,6045,ifelse(P2stateno = 6042,6045,ifelse(P2stateno = 6041,6042,6040)))
p2facing = 1

;++++ヒット定義ここまで++++++++++++++++++++++++++++++

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット時処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----キャンセルと各種補正処理-----------
[State HIT, Hitcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = movehit
var(13) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Floatcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = enemynear,StateType = A
trigger1 = MoveHit
var(14) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Cancel ON]
type = ParentVarSet
trigger1 = movecontact
var(4) = 1
ignorehitpause = 1
persistent = 0

;----ゲージ回収処理---------------------
[State B, PowerAdd]
type = ParentVarSet
trigger1 = movehit
var(16) = ceil((var(10) * 1.42) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

[State B, PowerAdd]
type = ParentVarSet
trigger1 = moveguarded
var(16) = ceil((var(10) * 0.71) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

;----防禦ゲージ削り---------------------
[State HIT, Guardcount +1]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = MoveGuarded
var(15) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Guard Damage]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
triggerAll = root,var(25) > 0
trigger1 = MoveGuarded = 1
var(25) = -ceil(var(10) * root,fVar(6) * root,fVar(10) * root,fVar(11))
ignorehitpause = 1
persistent = 0

;----防禦崩壊---------------------------
[State HIT, GC Flag]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(25) <= 0
var(26) = 1
ignorehitpause = 1
persistent = 0

[State HIT, GUARD CRUSH]
type = TargetState
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(26) = 1
value = ifelse(P2StateType = A,6210,6200)
ignorehitpause = 1
persistent = 0

;----カウンターヒット-------------------

;----背面攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.50
triggerAll = NumHelper(40040) = 0
trigger1 = MoveHit = 1
stateno = 40040
ID = 40040
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;----相対攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.25
triggerAll = NumHelper(40040) = 0
triggerAll = NumHelper(40020) = 0
trigger1 = MoveHit = 1
stateno = 40020
ID = 40020
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;----演出-------------------------
[State 2305, Explod]
type = Explod
trigger1 = MoveHit = 1
anim = 1330
;ID = 1330
pos = 0, 0
postype = p2
facing = 1
vfacing = 1
bindtime = -1
vel = 0, -2
accel = 0, -0.25
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = 1.5, 1.5
sprpriority = 7
ontop = 0
ownpal = 0
removeongethit = 0
IgnoreHitPause = 1
persistent = 0

;++++命中時処理ここまで++++++++++++++++++++++++++++++

;----補正リセット-----------------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = P2MoveType = H
trigger2 = ctrl && fVar(4) = 1.25
trigger3 = P2MoveType != A && fVar(4) = 1.25
trigger4 = EnemyNear,ctrl && fVar(4) = 1.25
Trigger5 = (Facing != enemynear,Facing) &&  fVar(4) = 1.50
fVar(4) = 1

;----ステート終了-----------------
[State 2305, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 2306
time = -1

[State 2305, Remove]
type = Changestate
trigger1 = Time >= 30
trigger2 = MoveContact = 1
value = 2306
ignorehitpause = 1

;---------------------------------------------------------------------------
;214SP終了
[Statedef 2306]
type     = S
movetype = A
physics  = N
anim     = 2306
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 2306, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 2306, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

;----動作処理---------------------
[State 2306, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 2306, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0



;---------------------------------------------------------------------------
;632SP-1
[Statedef 2405]
type     = A
movetype = A
physics  = N
anim     = 2405
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, AttackPower]
type = VarSet
trigger1 = Time = 0
var(10) = 84

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----完全無敵---------------------
[State 2405, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;----演出-------------------------
[State 2405, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 2405, Explod]
type = Explod
trigger1 = time = 0
anim = 2401
ID = 2405
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 2405, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

[State 2405, PosSet X]
type = PosAdd
trigger1 = FrontEdgeDist < 0
x = FrontEdgeDist

[State 2405, PosSet]
type = PosSet
trigger1 = 1
y = -60

;----ステート終了-----------------
[State 2405, Remove]
type = Changestate
trigger1 = root,movetype = H
value = 2408
ignorehitpause = 1

;----ステート移行-----------------
[State 2405, Changestate]
type = Changestate
trigger1 = Time >= 20
value = 2406
ignorehitpause = 1


;---------------------------------------------------------------------------
;632SP-2
[Statedef 2406]
type     = S
movetype = A
physics  = N
anim     = 2406
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;----相対&背面補正(Proj用)--------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = Time = 0
fVar(4) = 1.00

[State P, Counter Revise]
type = VarSet
trigger1 = P2MoveType = A
fVar(4) = 1.25

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----対打撃無敵-------------------
[State 2406, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
time = 999

;----演出-------------------------
[State 2406, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 2406, Snd]
type = PlaySnd
trigger1 = time = 0
value = 1400, 1

[State 2406, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 2405

[State 2406, Explod]
type = Explod
trigger1 = time = 0
anim = 2402
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 2406, Velset]
type = Velset
trigger1 = time = 1
x = 0
y = 0

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット定義
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----通常ヒット-------------------------
[State 2406, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) != 40
trigger1 = 1
attr = S,HP
hitflag = MAF
guardflag = MA
animtype = Back
ground.type = High
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10016,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1400, 10
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = 5, -4
air.velocity = 5, -4 + root,fVar(8)
guard.velocity = 6
airguard.velocity = 3, -4
fall = 1
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

;----壁やられ---------------------------
[State 2406, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 40
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Back
ground.type = High
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10016,10003)
guard.sparkno = S10022
sparkxy = ceil(-5 + Random%10), ceil(-5 + Random%10)
hitsound = S1400, 10
guardsound = S2, 2
ground.slidetime = 20
ground.hittime = 20
air.hittime = 20
guard.slidetime = 16
guard.ctrltime = 16
yaccel = .5
ground.velocity = 5, -4
air.velocity = 5, -4 + root,fVar(8)
guard.velocity = 6
airguard.velocity = 3, -4
fall = 1
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2StateNo = 6120,6121,6130)
p2facing = 1

;++++ヒット定義ここまで++++++++++++++++++++++++++++++

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット時処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----キャンセルと各種補正処理-----------
[State HIT, Hitcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = movehit
var(13) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Floatcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = enemynear,StateType = A
trigger1 = MoveHit
var(14) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Cancel ON]
type = ParentVarSet
trigger1 = movecontact
var(4) = 10
ignorehitpause = 1
persistent = 0

;----ゲージ回収処理---------------------
[State B, PowerAdd]
type = ParentVarSet
trigger1 = movehit
var(16) = ceil((var(10) * 1.42) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

[State B, PowerAdd]
type = ParentVarSet
trigger1 = moveguarded
var(16) = ceil((var(10) * 0.71) * ifelse(root,var(21) = 0,1,0))
ignorehitpause = 1
persistent = 0

;----防禦ゲージ削り---------------------
[State HIT, Guardcount +1]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = MoveGuarded
var(15) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Guard Damage]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
triggerAll = root,var(25) > 0
trigger1 = MoveGuarded = 1
var(25) = -ceil(var(10) * root,fVar(6) * root,fVar(10) * root,fVar(11))
ignorehitpause = 1
persistent = 0

;----防禦崩壊---------------------------
[State HIT, GC Flag]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(25) <= 0
var(26) = 1
ignorehitpause = 1
persistent = 0

[State HIT, GUARD CRUSH]
type = TargetState
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(26) = 1
value = ifelse(P2StateType = A,6210,6200)
ignorehitpause = 1
persistent = 0

;----カウンターヒット-------------------

;----背面攻撃表示-----------------

;----相対攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.25
triggerAll = NumHelper(40040) = 0
triggerAll = NumHelper(40020) = 0
trigger1 = MoveHit = 1
stateno = 40020
ID = 40020
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;----演出-------------------------
[State 2406, Explod]
type = Explod
trigger1 = MoveHit = 1
anim = 1430
;ID = 1430
pos = 0, 0
postype = p2
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 0
removeongethit = 0
IgnoreHitPause = 1
persistent = 0

;++++命中時処理ここまで++++++++++++++++++++++++++++++

;----補正リセット-----------------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = P2MoveType = H
trigger2 = ctrl && fVar(4) = 1.25
trigger3 = P2MoveType != A && fVar(4) = 1.25
trigger4 = EnemyNear,ctrl && fVar(4) = 1.25
fVar(4) = 1

;----ステート終了-----------------
[State 2406, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 2407
time = -1

[State 2406, Remove]
type = Changestate
trigger1 = AnimTime = 0
trigger2 = MoveContact = 1
trigger3 = root,movetype = H
value = 2407
ignorehitpause = 1

;---------------------------------------------------------------------------
;632SP終了
[Statedef 2407]
type     = S
movetype = A
physics  = N
anim     = 2407
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 2407, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 2407, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 2407, Explod]
type = Explod
trigger1 = time = 0
anim = 2407
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 2407, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 2407, DestroySelf]
type = DestroySelf
trigger1 = time >= 0

;---------------------------------------------------------------------------
;632SP終了(ダメージ)
[Statedef 2408]
type     = S
movetype = A
physics  = N
anim     = 18000
poweradd = 0
ctrl     = 0
sprpriority = 4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 2408, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 2408, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 2408, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 2405

[State 2408, Explod]
type = Explod
trigger1 = time = 0
anim = 2402
;ID = 0
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = const(size.xscale), const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 2408, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 2408, DestroySelf]
type = DestroySelf
trigger1 = time >= 0


;---------------------------------------------------------------------------
;A+B+C(Jormungandr)
[Statedef 2810]
type     = A
movetype = A
physics  = N
anim     = 2810
poweradd = 0
ctrl     = 0
sprpriority = -5

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, AttackPower]
type = VarSet
trigger1 = Time = 0
var(10) = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 2810, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 2810, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

[State 2810, Snd]
type = PlaySnd
trigger1 = AnimElem = 11
value = 2810, 0

[State 2810, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 30
freq = 125
ampl = 18

[State 2810, Explod]
type = Explod
trigger1 = time = 0
anim = 2812
ID = 2810
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = const(size.xscale), const(size.yscale)
sprpriority = -6
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 2810, Vel0]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----飛び道具ヘルパー発射---------
[State 2810, Helper]
type = Helper
trigger1  = AnimElem = 11
trigger2  = AnimElem = 12
trigger3  = AnimElem = 13
trigger4  = AnimElem = 14
trigger5  = AnimElem = 15
trigger6  = AnimElem = 16
trigger7  = AnimElem = 17
trigger8  = AnimElem = 18
trigger9  = AnimElem = 19
trigger10 = AnimElem = 20
trigger11 = AnimElem = 21
trigger12 = AnimElem = 22
trigger13 = AnimElem = 23
trigger14 = AnimElem = 24
trigger15 = AnimElem = 25
trigger16 = AnimElem = 26
name = "JormungandrFire"
ID = 2820
pos = 80, -130
postype = p1
facing = 1
stateno = 2820
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット時処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----キャンセルと各種補正処理-----------
[State HIT, Hitcount +1]
type = ParentVarAdd
trigger1 = Var(13) != 0
var(13) = 1
ignorehitpause = 1

[State HIT, Floatcount +1]
type = ParentVarAdd
trigger1 = Var(14) != 0
var(14) = 1
ignorehitpause = 1

;----ゲージ回収処理---------------------

;----防禦ゲージ削り---------------------
[State HIT, Guardcount +1]
type = ParentVarAdd
trigger1 = Var(15) != 0
var(15) = 1
ignorehitpause = 1

[State HIT, Guard Damage]
type = ParentVarAdd
trigger1 = Var(25) != 0
var(25) = var(25)
ignorehitpause = 1

;----防禦崩壊---------------------
[State HIT, GC Flag]
type = ParentVarAdd
trigger1 = var(26) != 0
var(26) = 1
ignorehitpause = 1
persistent = 0

;----カウンターヒット-------------

;----背面攻撃表示-----------------

;----相対攻撃表示-----------------

;----初期化-----------------------
[State HIT, Hitcount +1]
type = VarSet
trigger1 = Var(13) != 0
var(13) = 0
ignorehitpause = 1

[State HIT, Floatcount +1]
type = VarSet
trigger1 = Var(14) != 0
var(14) = 0
ignorehitpause = 1

[State HIT, Guardcount +1]
type = VarSet
trigger1 = Var(15) != 0
var(15) = 0
ignorehitpause = 1

[State HIT, Guard Damage]
type = VarSet
trigger1 = Var(25) != 0
var(25) = 0
ignorehitpause = 1

[State HIT, GC Flag]
type = VarSet
trigger1 = var(26) != 0
var(26) = 0
ignorehitpause = 1
persistent = 0

;++++命中時処理ここまで++++++++++++++++++++++++++++++

;----ステート終了-----------------
[State 2810, Remove]
type = Changestate
trigger1 = AnimTime = 0
value = 2811
ignorehitpause = 1


;---------------------------------------------------------------------------
;A+B+C終了(Jormungandr)
[Statedef 2811]
type     = S
movetype = A
physics  = N
anim     = 2811
poweradd = 0
ctrl     = 0
sprpriority = -5

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 2811, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 2811, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

;----演出-------------------------
[State 2811, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 2810

[State 2811, Explod]
type = Explod
trigger1 = time = 0
anim = 2813
;ID = 2810
pos = 0, 0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = const(size.xscale), const(size.yscale)
sprpriority = -6
ontop = 0
ownpal = 0
removeongethit = 1

;----動作処理---------------------
[State 2811, Vel0]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 2811, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0


;---------------------------------------------------------------------------
;A+B+C-1(Fire)
[Statedef 2820]
type     = A
movetype = A
physics  = N
anim     = 2820
poweradd = 0
ctrl     = 0
sprpriority = -4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    攻撃Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, AttackPower]
type = VarSet
trigger1 = Time = 0
var(10) = 70

;----相手ダウン時攻撃半減---------
[State B, AttackPower]
type = VarSet
trigger1 = root,var(12) = 30
var(10) = ceil(var(10) * 0.5)
ignorehitpause = 1
persistent = 0

;----相対&背面補正(Proj用)--------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = Time = 0
fVar(4) = 1.00

[State P, Counter Revise]
type = VarSet
trigger1 = P2MoveType = A
fVar(4) = 1.25

[State P, Back Attack Revise]
type = VarSet
Trigger1 = (Facing = enemynear,Facing)
Trigger1 = P2BodyDist X >= 0
fVar(4) = 1.5

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----対打撃無敵-------------------
[State 2820, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
time = 999

;----演出-------------------------
[State 2820, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

;----動作処理---------------------
[State 2820, Velset]
type = Velset
trigger1 = time = 0
x = 3
y = 5

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット定義
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----通常ヒット-------------------------
[State 2820, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) != 40
triggerAll = root,Var(12) != 30
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Back
ground.type = High
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10002,10003)
guard.sparkno = S10022
sparkxy = ceil(-30 + Random%10), ceil(-20 + Random%10)
hitsound = S1, 3
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -3, -4
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -3
airguard.velocity = -3, -4
fall = 1
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
palfx.time      = 45
palfx.sinadd    = 92,92,92,18
palfx.mul       = 210,200,190
palfx.add       = -30,-40,-50
palfx.color     = 120
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

;----壁やられ---------------------------
[State 2820, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 40
trigger1 = 1
attr = S,SP
hitflag = MAF
guardflag = MA
animtype = Back
ground.type = High
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10002,10003)
guard.sparkno = S10022
sparkxy = ceil(-30 + Random%10), ceil(-20 + Random%10)
hitsound = S1, 3
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -3, -4
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -3
airguard.velocity = -3, -4
fall = 1
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
palfx.time      = 45
palfx.sinadd    = 92,92,92,18
palfx.mul       = 210,200,190
palfx.add       = -30,-40,-50
palfx.color     = 120
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2StateNo = 6120,6121,6130)
p2facing = 1

;----ダウン追撃-------------------------
[State 2820, HitDef]
type = HitDef
triggerAll = !movereversed && !movecontact
triggerAll = root,Var(12) = 30
trigger1 = 1
attr = S,SP
hitflag = MAFD
guardflag = MA
animtype = Back
ground.type = High
priority = 4,Hit
damage = ceil(var(10) * root,fVar(3) * fVar(4) * root,fVar(5) * root,fVar(6)),ceil(var(10) * 0.1)
pausetime = 0, 12
guard.pausetime = 0, 12
sparkno = S0 + ifelse(root,var(21) != 1,10002,10003)
guard.sparkno = S10022
sparkxy = ceil(-30 + Random%10), ceil(-20 + Random%10)
hitsound = S1, 3
guardsound = S2, 2
ground.slidetime = 18
ground.hittime = 18
air.hittime = 18
guard.slidetime = 14
guard.ctrltime = 14
yaccel = .5
ground.velocity = -3, -4
air.velocity = -3, -4 + root,fVar(8)
guard.velocity = -3
airguard.velocity = -3, -4
fall = 1
air.fall = 1
fall.recover = 0
getpower = 0, 0
givepower = ceil(var(10) * 0.71), ceil(var(10) * 0.36)
envshake.time  = ifelse(root,var(12) != 40,8,8)
envshake.freq  = ifelse(root,var(12) != 40,50,50)
envshake.ampl  = ifelse(root,var(12) != 40,8,8)
envshake.phase = ifelse(root,var(12) != 40,8,8)
fall.envshake.time  = ifelse(root,var(12) = 40,0,6)
fall.envshake.freq  = ifelse(root,var(12) = 40,0,25)
fall.envshake.ampl  = ifelse(root,var(12) = 40,0,6)
fall.envshake.phase = ifelse(root,var(12) = 40,0,6)
palfx.time      = 45
palfx.sinadd    = 92,92,92,18
palfx.mul       = 210,200,190
palfx.add       = -30,-40,-50
palfx.color     = 120
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = ifelse(P2stateno = 6045,6045,ifelse(P2stateno = 6042,6045,ifelse(P2stateno = 6041,6042,6040)))
p2facing = 1

;++++ヒット定義ここまで++++++++++++++++++++++++++++++

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    ヒット時処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----キャンセルと各種補正処理-----------
[State HIT, Hitcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = movehit
var(13) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Floatcount +1]
type = ParentVarAdd
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = enemynear,StateType = A
trigger1 = MoveHit
var(14) = 1
ignorehitpause = 1
persistent = 0

;----ゲージ回収処理---------------------

;----防禦ゲージ削り---------------------
[State HIT, Guardcount +1]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = MoveGuarded
var(15) = 1
ignorehitpause = 1
persistent = 0

[State HIT, Guard Damage]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
triggerAll = root,var(25) > 0
trigger1 = MoveGuarded = 1
var(25) = -ceil(var(10) * root,fVar(6) * root,fVar(10) * root,fVar(11))
ignorehitpause = 1
persistent = 0

;----防禦崩壊---------------------------
[State HIT, GC Flag]
type = ParentVarAdd
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(25) <= 0
var(26) = 1
ignorehitpause = 1
persistent = 0

[State HIT, GUARD CRUSH]
type = TargetState
triggerAll = TeamMode = single
triggerAll = NumTarget
triggerAll = target,IsHelper = 0
trigger1 = root,var(26) != 0
trigger1 = MoveGuarded
value = ifelse(P2StateType = A,6210,6200)
ignorehitpause = 1
persistent = 0

;----カウンターヒット-------------

;----背面攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.50
triggerAll = NumHelper(40040) = 0
trigger1 = MoveHit = 1
stateno = 40040
ID = 40040
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;----相対攻撃表示-----------------
[State 46000P, Helper]
type = Helper
triggerAll = fVar(4) = 1.25
triggerAll = NumHelper(40040) = 0
triggerAll = NumHelper(40020) = 0
trigger1 = MoveHit = 1
stateno = 40020
ID = 40020
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;----演出-------------------------
[State 2820, Explod]
type = Explod
trigger1 = MoveHit = 1
anim = 1330
;ID = 1330
pos = 0, 0
postype = p2
facing = 1
vfacing = 1
bindtime = -1
vel = 0, -2
accel = 0, -0.25
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = 1.5, 1.5
sprpriority = 7
ontop = 0
ownpal = 0
removeongethit = 0
IgnoreHitPause = 1
persistent = 0

;++++命中時処理ここまで++++++++++++++++++++++++++++++

;----補正リセット-----------------
[State P, Reset Counter&BackAttack Revise]
type = varset
trigger1 = P2MoveType = H
trigger2 = ctrl && fVar(4) = 1.25
trigger3 = P2MoveType != A && fVar(4) = 1.25
trigger4 = EnemyNear,ctrl && fVar(4) = 1.25
Trigger5 = (Facing != enemynear,Facing) &&  fVar(4) = 1.50
fVar(4) = 1

;----ステート終了-----------------
[State 2820, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AP
stateno = 2821
time = -1

[State 2820, Remove]
type = Changestate
trigger1 = FrontEdgeDist <= -40
trigger2 = Vel y > 0 && Pos y >= 0
trigger3 = MoveContact = 1
value = 2821
ignorehitpause = 1

;---------------------------------------------------------------------------
;A+B+C終了(Fire)
[Statedef 2821]
type     = S
movetype = A
physics  = N
anim     = 2821
poweradd = 0
ctrl     = 0
sprpriority = -4

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----無敵-------------------------
[State 2821, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 999

;----演出-------------------------
[State 2821, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
flag2= NoAutoTurn
IgnoreHitPause = 1

;----動作処理---------------------
[State 2821, Velset]
type = Velset
trigger1 = time = 0
x = 0
y = 0

;----消滅-------------------------
[State 2821, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0


;---------------------------------------------------------------------------
;カットイン(ぺる子用)
[Statedef 12020]
type     = A
anim     = 18000
sprpriority = 7

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    透明型Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,AA,NT,ST,HT,AT
time = 999

[State B, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = Invisible
flag2 = NoShadow
flag3 = NoAutoTurn
IgnoreHitPause = 1

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----カットイン大きさ変更---------
[State 12020, VarSet]
type = VarSet
trigger1 = Time = 0
fVar(0) = 0

[State 12020, VarAdd]
type = VarAdd
trigger1 = fVar(0) < 1.2
fVar(0) = 0.08

[State 12020, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 12020
scale = fVar(0), fVar(0)

;----カットイン-------------------
[State 12020, Explod]
type = Explod
trigger1 = TeamSide = 1
trigger1 = Time = 0
id = 12020
anim = 12020
pos = 0, 75
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 1
removeongethit = 1

[State 12020, Explod]
type = Explod
trigger1 = TeamSide = 2
trigger1 = Time = 0
id = 12020
anim = 12020
pos = 0, 75
postype = right
facing = -1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 1
removeongethit = 1

;----消滅時処理-------------------
[State 12020, DestroySelf]
type = DestroySelf
trigger1 = Time >= 40

;----使用変数---------------------
;fVar(0) = カットイン大きさ変更用


































;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;    共有Helper
;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

;---------------------------------------------------------------------------
;カットイン
[Statedef 12010]
type     = A
anim     = 18000
sprpriority = 7

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    透明型Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,AA,NT,ST,HT,AT
time = 999

[State B, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = Invisible
flag2 = NoShadow
flag3 = NoAutoTurn
IgnoreHitPause = 1

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----カットイン大きさ変更---------
[State 12010, VarSet]
type = VarSet
trigger1 = Time = 0
fVar(0) = 0

[State 12010, VarAdd]
type = VarAdd
trigger1 = fVar(0) < 1.2
fVar(0) = 0.08

[State 12010, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 12010
scale = fVar(0), fVar(0)

;----カットイン-------------------
[State 12010, Explod]
type = Explod
trigger1 = TeamSide = 1
trigger1 = Time = 0
id = 12010
anim = 12010
pos = 0, 75
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 1
removeongethit = 1

[State 12010, Explod]
type = Explod
trigger1 = TeamSide = 2
trigger1 = Time = 0
id = 12010
anim = 12010
pos = 0, 75
postype = right
facing = -1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 1
removeongethit = 1

;----消滅時処理-------------------
[State 12010, DestroySelf]
type = DestroySelf
trigger1 = Time >= 40

;----使用変数---------------------
;fVar(0) = カットイン大きさ変更用



;---------------------------------------------------------------------------
;最終特別攻撃エフェクト
[Statedef 15210]
type     = A
anim     = 18000
sprpriority = -5

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    透明型Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,AA,NT,ST,HT,AT
time = 999

[State B, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = Invisible
flag2 = NoShadow
flag3 = NoAutoTurn
IgnoreHitPause = 1

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----背景エフェクト---------------
[State 15210, Explod]
type = Explod
trigger1 = Time = 0
anim = 15212
ID = 15212
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 1.5, 1.5
sprpriority = -7
ontop = 0
ownpal = 0
removeongethit = 1

[State 15210, Explod]
type = Explod
trigger1 = Time = 0
anim = 15210
ID = 15210
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 1, 1
sprpriority = -7
ontop = 0
ownpal = 0
removeongethit = 1

;----終了ステートへ---------------
[State 15210, Remove]
type = Changestate
trigger1 = root,movetype != A
trigger2 = root,stateno = 2800
trigger2 = root,AnimElem = 51
value = 15211
ignorehitpause = 1

;----ステート終了-----------------
[Statedef 15211]
type     = S
anim     = 18000
sprpriority = -5

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    透明型Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,AA,NT,ST,HT,AT
time = 999

[State B, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = Invisible
flag2 = NoShadow
flag3 = NoAutoTurn
IgnoreHitPause = 1

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----エフェクト消す---------------
[State 15211, RemoveExplod]
type = RemoveExplod
trigger1 = 1
ID = 15210

;----背景エフェクト---------------
[State 15211, Explod]
type = Explod
trigger1 = Time = 0
anim = 15211
ID = 15211
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 1, 1
sprpriority = -7
ontop = 0
ownpal = 0
removeongethit = 1

;----消滅時処理-------------------
[State 15211, DestroySelf]
type = DestroySelf
trigger1 = 1



;---------------------------------------------------------------------------
;完全世界エフェクト
[Statedef 15220]
type     = S
anim     = 18000
sprpriority = -5

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    透明型Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,AA,NT,ST,HT,AT
time = 999

[State B, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = Invisible
flag2 = NoShadow
flag3 = NoAutoTurn
IgnoreHitPause = 1

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----背景消去---------------------
[State 15220, AssertSpecial]
type = AssertSpecial
trigger1 = root,var(55) = 0
flag  = noBG
flag2 = nomusic
IgnoreHitPause = 1

[State 15220, AssertSpecial]
type = AssertSpecial
trigger1 = root,var(55) = 1
flag  = noBG
IgnoreHitPause = 1

;----音楽変更---------------------
[State 15220, BGM]
type = PlaySnd
triggerAll = root,var(55) = 0
trigger1 = time = 0
value = 4500, 0
loop = 1
channel = 10

;----背景エフェクト---------------
[State 15220, Explod]
type = Explod
triggerAll = root,var(55) != 2
trigger1 = time = 0
id = 15220
anim = 15220
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.75, 0.75
sprpriority = -6
ontop = 0
ownpal = 1
removeongethit = 0
IgnoreHitPause = 1

[State 15220, Explod]
type = Explod
triggerAll = root,var(55) != 2
trigger1 = time = 0
anim = 15222
ID = 15222
pos = 160, 240
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 1.25, 1.25
sprpriority = -6
ontop = 0
ownpal = 1
removeongethit = 0
IgnoreHitPause = 1

;----終了ステートへ---------------
[State 15220, Remove]
type = Changestate
trigger1 = root,var(21) = 50
trigger2 = RoundState != 2
value = 15221
ignorehitpause = 1

;----ステート終了-----------------
[Statedef 15221]
type     = S
anim     = 18000
sprpriority = -5

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    透明型Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,AA,NT,ST,HT,AT
time = 999

[State B, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = Invisible
flag2 = NoShadow
flag3 = NoAutoTurn
IgnoreHitPause = 1

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----エフェクト消す---------------
[State 15221, RemoveExplod]
type = RemoveExplod
trigger1 = 1
ID = 15220

[State 15221, RemoveExplod]
type = RemoveExplod
trigger1 = 1
ID = 15221

[State 15221, RemoveExplod]
type = RemoveExplod
trigger1 = 1
ID = 15222

;----背景エフェクト---------------
[State 15221, Explod]
type = Explod
triggerAll = root,var(55) != 2
trigger1 = Time = 0
anim = 15225
ID = 15225
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 1.5, 1.5
sprpriority = 7
ontop = 1
ownpal = 0
removeongethit = 1

;----BGMストップ------------------
[State 15221, StopBGM]
type = StopSnd
trigger1 = 1
channel = 10

;----消滅時処理-------------------
[State 15221, DestroySelf]
type = DestroySelf
trigger1 = 1



;---------------------------------------------------------------------------
;完全世界ゲージ
[Statedef 16000]
type     = A
anim     = 18000
sprpriority = 7

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    透明型Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,AA,NT,ST,HT,AT
time = 999

[State B, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = Invisible
flag2 = NoShadow
flag3 = NoAutoTurn
IgnoreHitPause = 1

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----発動時ゲージ類表示-----------
[State 16000, Explod]
Type = Explod
triggerAll = teamside = 1
trigger1 = Time = 0
id = 16001
anim = 16001
pos = 52, 220
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 1
removeongethit = 0

[State 16000, Explod]
Type = Explod
triggerAll = teamside = 2
trigger1 = Time = 0
id = 16001
anim = 16011
pos = 180, 220
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 1
removeongethit = 0

[State 16000, Explod]
Type = Explod
triggerAll = teamside = 1
trigger1 = Time = 0
id = 16002
anim = 16002
pos = 52, 220
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 1
removeongethit = 0

[State 16000, Explod]
Type = Explod
triggerAll = teamside = 2
trigger1 = Time = 0
id = 16002
anim = 16012
pos = 180, 220
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 1
removeongethit = 0

[State 16000, Explod]
type = Explod
triggerAll = teamside = 1
trigger1 = Time = 0
ID = 16000
anim = 16000
pos = 52, 220
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 1
removeongethit = 0

[State 16000, Explod]
type = Explod
triggerAll = teamside = 2
trigger1 = Time = 0
ID = 16000
anim = 16010
pos = 180, 220
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 1
removeongethit = 0

;----ゲージ伸縮処理---------------
[State 16000, VarSet]
type = VarSet
trigger1 = 1
var(0) = ceil(root,var(23)*0.1)
IgnoreHitPause = 1

[State 16000, VarSet]
type = VarSet
trigger1 = var(0) > 83
var(0) = 83
IgnoreHitPause = 1

[State 16000, ModifyExplod]
type = ModifyExplod
triggerAll = teamside = 1
trigger1 = numexplod(16002) > 0
scale = 83-var(0),0.5
supermovetime = 99999999
pausemovetime = 99999999
id = 16002

[State 16000, ModifyExplod]
type = ModifyExplod
triggerAll = teamside = 2
trigger1 = numexplod(16002) > 0
scale = var(0),0.5
supermovetime = 99999999
pausemovetime = 99999999
id = 16002

;----消滅時処理-------------------
[State 16000, RemoveExplod]
type = RemoveExplod
trigger1 = root,Var(23) <= 0
ID = 16000

[State 16000, RemoveExplod]
type = RemoveExplod
trigger1 = root,Var(23) <= 0
ID = 16001

[State 16000, RemoveExplod]
type = RemoveExplod
trigger1 = root,Var(23) <= 0
ID = 16002

[State 16000, DestroySelf]
type = DestroySelf
trigger1 = root,Var(23) <= 0

;----使用変数---------------------
;Var(0) = ゲージバー表示用




;---------------------------------------------------------------------------
;ガードゲージ
[Statedef 16100]
type     = A
anim     = 18000
sprpriority = 7

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    透明型Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,AA,NT,ST,HT,AT
time = 999

[State B, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = Invisible
flag2 = NoShadow
flag3 = NoAutoTurn
IgnoreHitPause = 1

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----ゲージ類表示-----------------
[State 16000, Explod]
type = Explod
triggerAll = teamside = 1
trigger1 = Time = 0
ID = 16100
anim = 16100
pos = ceil(root,var(53)), ceil(root,var(54))
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0

[State 16000, Explod]
Type = Explod
triggerAll = teamside = 1
trigger1 = Time = 0
id = 16102
anim = 16102
pos = (ceil(root,var(53))), ceil(root,var(54))
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 3
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0

[State 16100, Explod]
Type = Explod
triggerAll = teamside = 1
trigger1 = Time = 0
id = 16101
anim = 16101
pos = ceil(root,var(53)), ceil(root,var(54))
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0

[State 16000, Explod]
type = Explod
triggerAll = teamside = 2
trigger1 = Time = 0
ID = 16100
anim = 16110
pos = (260 - ceil(root,var(53))), ceil(root,var(54))
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0

[State 16000, Explod]
Type = Explod
triggerAll = teamside = 2
trigger1 = Time = 0
id = 16102
anim = 16112
pos = (260 - ceil(root,var(53))), ceil(root,var(54))
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0

[State 16100, Explod]
Type = Explod
triggerAll = teamside = 2
trigger1 = Time = 0
id = 16101
anim = 16111
pos = (260 - ceil(root,var(53))), ceil(root,var(54))
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0

;----ゲージ伸縮処理---------------
[State 16100, VarSet]
type = VarSet
trigger1 = 1
var(0) = ceil(root,var(25) * 0.116 * 0.5)
IgnoreHitPause = 1

[State 16100, VarSet]
type = VarSet
trigger1 = var(0) > 116
var(0) = 116
IgnoreHitPause = 1

[State 16100, ModifyExplod]
type = ModifyExplod
triggerAll = teamside = 1
trigger1 = numexplod(16102) > 0
scale = ceil(var(0)), 0.5
supermovetime = 99999999
pausemovetime = 99999999
id = 16102

[State 16100, ModifyExplod]
type = ModifyExplod
triggerAll = teamside = 2
trigger1 = numexplod(16102) > 0
scale = 58 - ceil(var(0)), 0.5
supermovetime = 99999999
pausemovetime = 99999999
id = 16102

;----相手KO時---------------------
[State 16100, RemoveExplod]
type = RemoveExplod
trigger1 = numexplod(16100) > 0
trigger1 = RoundState != 2
ID = 16100

[State 16100, RemoveExplod]
type = RemoveExplod
trigger1 = numexplod(16101) > 0
trigger1 = RoundState != 2
ID = 16101

[State 16100, RemoveExplod]
type = RemoveExplod
trigger1 = numexplod(16102) > 0
trigger1 = RoundState != 2
ID = 16102

;----使用変数---------------------
;Var(0) = ゲージバー表示用




;---------------------------------------------------------------------------
;KOエフェクト
[Statedef 25000]
type     = S
anim     = 18000
sprpriority = -5

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    透明型Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,AA,NT,ST,HT,AT
time = 999

[State B, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = Invisible
flag2 = NoShadow
flag3 = NoAutoTurn
IgnoreHitPause = 1

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----スロー不可-------------------
[State 250XX, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = nokoslow
IgnoreHitPause = 1

;----文字演出用-------------------
[State 25000, VarSet]
type = VarSet
trigger1 = Time = 0
fVar(0) = 0

[State 25000, VarAdd]
type = VarAdd
trigger1 = fVar(0) < 0.5
fVar(0) = 0.05

[State 25000, VarSet]
type = VarSet
trigger1 = Time = 0
fVar(1) = 3

[State 25000, VarAdd]
type = VarAdd
trigger1 = fVar(1) > 0.5
fVar(1) = -0.25

;----演出-------------------------
[State 25000, Snd]
type = PlaySnd
trigger1 = time = 0
value = 25000, 0

[State 25000, Explod]
type = Explod
trigger1 = Time = 0
anim = 25000
ID = 25000
pos = 160, 60
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = 120
supermovetime = 999999
pausemovetime = 999999
scale = 1, 1
sprpriority = 7
ontop = 0
ownpal = 0
removeongethit = 1

[State 25000, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 25000
scale = fVar(0), fVar(1)

[State 25000, Pause]
type = Pause
trigger1 = Time = 0
time = 30
movetime = 30


;---------------------------------------------------------------------------
;玉砕
[Statedef 25010]
type     = S
anim     = 18000
sprpriority = -5

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    透明型Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,AA,NT,ST,HT,AT
time = 999

[State B, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = Invisible
flag2 = NoShadow
flag3 = NoAutoTurn
IgnoreHitPause = 1

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----ゲージ消去&スロー不可--------
[State 250XX, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = nokoslow
flag2 = nobardisplay
IgnoreHitPause = 1

;----画面移行阻止-----------------
[State 25010, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 480
flag = roundnotover

;----文字演出用-------------------
[State 25010, VarSet]
type = VarSet
trigger1 = Time = 0
fVar(0) = 2.0

[State 25010, VarAdd]
type = VarAdd
trigger1 = time < 5
fvar(0) = -0.375

[State 25010, VarSet]
type = VarSet
trigger1 = Time = 0
fVar(1) = 0.001

[State 25010, VarAdd]
type = VarAdd
trigger1 = time < 5
fvar(1) = 0.125

[State 25010, VarSet]
type = VarSet
trigger1 = Time = 5
fVar(0) = 0.5

[State 25010, VarSet]
type = VarSet
trigger1 = Time = 5
fVar(1) = 0.5

;----演出-------------------------
[State 25010, Snd]
type = PlaySnd
trigger1 = time = 0
value = 25010, 0

[State 25010, Snd]
type = PlaySnd
trigger1 = time = 0
value = 25010, 1
loop = 1

[State 25010, StopSnd]
type = StopSnd
trigger1 = 1
channel = 10

[State 25010, Explod]
type = Explod
trigger1 = Time = 0
anim = 25010
ID = 25010
pos = 160, 60
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = 120
supermovetime = 999999
pausemovetime = 999999
scale = 1, 1
sprpriority = 7
ontop = 1
ownpal = 0
removeongethit = 0
persistent = 0
IgnoreHitPause = 1

[State 25010, Explod]
type = Explod
trigger1 = Time = 0
anim = 25011
ID = 25011
pos = 160, 120
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 1.5, 1.5
sprpriority = -7
ontop = 0
ownpal = 0
removeongethit = 1

[State 25010, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 25010
scale = fVar(0), fVar(1)

[State 25010, Pause]
type = Pause
trigger1 = Time = 0
time = 60
movetime = 60

[State 25010, EnvColor]
type = EnvColor
trigger1 = 1
time = 1
under = 1
value = 240,240,240

;----勝利メッセージ---------------
[State 25010, Win Message]
type = Helper
Triggerall = TeamMode = Single
trigger1 = Time = 420
ID = 25050
pos = 0, 0
postype = p1
facing = 1
stateno = 25050
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
size.xscale = 0.5
size.yscale = 0.5

;---------------------------------------------------------------------------
;散華
[Statedef 25020]
type     = S
anim     = 18000
sprpriority = -5

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    透明型Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,AA,NT,ST,HT,AT
time = 999

[State B, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = Invisible
flag2 = NoShadow
flag3 = NoAutoTurn
IgnoreHitPause = 1

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----ゲージ消去&スロー不可--------
[State 250XX, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = nokoslow
flag2 = nobardisplay
IgnoreHitPause = 1

;----画面移行阻止-----------------
[State 25020, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 480
flag = roundnotover

;----文字演出用-------------------
[State 25020, VarSet]
type = VarSet
trigger1 = Time = 0
fVar(0) = 2.0

[State 25020, VarAdd]
type = VarAdd
trigger1 = time < 5
fvar(0) = -0.72

[State 25020, VarSet]
type = VarSet
trigger1 = Time = 0
fVar(1) = 0.001

[State 25020, VarAdd]
type = VarAdd
trigger1 = time < 5
fvar(1) = 0.25

[State 25020, VarSet]
type = VarSet
trigger1 = Time = 5
fVar(0) = 0.5

[State 25020, VarSet]
type = VarSet
trigger1 = Time = 5
fVar(1) = 0.5

;----演出-------------------------
[State 25020, Snd]
type = PlaySnd
trigger1 = time = 1
value = 25020, 0

[State 25020, Snd]
type = PlaySnd
trigger1 = time = 0
value = 25010, 1
loop = 1

[State 25020, StopSnd]
type = StopSnd
trigger1 = 1
channel = 10

[State 25020, Explod]
type = Explod
trigger1 = Time = 0
anim = 25020
ID = 25020
pos = 160, 120
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = 100
supermovetime = 999999
pausemovetime = 999999
scale = 1, 1
sprpriority = 6
ontop = 1
ownpal = 0
removeongethit = 0
persistent = 0
IgnoreHitPause = 1

[State 25020, Explod]
type = Explod
trigger1 = Time = 0
anim = 25011
ID = 25011
pos = 160, 120
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 1.5, 1.5
sprpriority = -7
ontop = 0
ownpal = 0
removeongethit = 1

[State 25020, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 25020
scale = fVar(0), fVar(1)

[State 25020, Pause]
type = Pause
trigger1 = Time = 0
time = 60
movetime = 60

[State 25020, EnvColor]
type = EnvColor
trigger1 = 1
time = 1
under = 1
value = 240,240,240

;----勝利メッセージ---------------
[State 25020, Win Message]
type = Helper
Triggerall = TeamMode = Single
trigger1 = Time = 420
ID = 25050
pos = 0, 0
postype = p1
facing = 1
stateno = 25050
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
size.xscale = 0.5
size.yscale = 0.5


;---------------------------------------------------------------------------
;勝利メッセージ
[Statedef 25050]
type     = S
anim     = 18000
sprpriority = -5

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    透明型Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,AA,NT,ST,HT,AT
time = 999

[State B, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = Invisible
flag2 = NoShadow
flag3 = NoAutoTurn
IgnoreHitPause = 1

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----画面移行阻止-----------------
[State 25050, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 500
flag = roundnotover

;----基本画面---------------------
[State 25050, Explod]
type = Explod
trigger1 = Time = 0
anim = 25050
ID = 25050
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.7, 0.7
sprpriority = 3
ontop = 0
ownpal = 0
removeongethit = 0

[State 25050, Explod]
type = Explod
trigger1 = Time = 0
anim = 25051
ID = 25051
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 0

[State 25050, Explod]
type = Explod
trigger1 = Time = 0
anim = 25052
ID = 25052
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 0

[State 25050, Explod]
type = Explod
trigger1 = Time = 0
anim = 25053
ID = 25053
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 4
ontop = 0
ownpal = 0
removeongethit = 0

;----メッセージ表示(特殊)---------
;アカツキ
[State 25050, Explod]
type = Explod
triggerAll = NumExplod(25060) = 0
triggerAll = Time = 0
trigger1 = enemy,Name = "AKATSUKI"
anim = 25070
ID = 25060
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 0
removeongethit = 0

;不律おじいちゃん
[State 25050, Explod]
type = Explod
triggerAll = NumExplod(25060) = 0
triggerAll = Time = 0
trigger1 = enemy,Name = "Flitz" || enemy,Name = "Fritz"
anim = 25071
ID = 25060
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 0
removeongethit = 0

;塞
[State 25050, Explod]
type = Explod
triggerAll = NumExplod(25060) = 0
triggerAll = Time = 0
trigger1 = enemy,Name = "Sai"
anim = 25072
ID = 25060
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 0
removeongethit = 0

;アノニム
[State 25050, Explod]
type = Explod
triggerAll = NumExplod(25060) = 0
triggerAll = Time = 0
trigger1 = enemy,Name = "ANONYM" || enemy,Name = "ANONYMGUARD" || enemy,Name = "ANONYM GUARD" || enemy,Name = "ANONYM-GUARD" || enemy,Name = "ANONYM_GUARD"
anim = 25073
ID = 25060
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 0
removeongethit = 0

;電光戦車
[State 25050, Explod]
type = Explod
triggerAll = NumExplod(25060) = 0
triggerAll = Time = 0
trigger1 = enemy,Name = "BLITZTANK" || enemy,Name = "BLITZ-TANK" || enemy,Name = "SENSYA-TAN"
anim = 25073
ID = 25060
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 0
removeongethit = 0

;ムラクモ
[State 25050, Explod]
type = Explod
triggerAll = NumExplod(25060) = 0
triggerAll = Time = 0
trigger1 = enemy,Name = "MURAKUMO"
anim = 25073
ID = 25060
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 0
removeongethit = 0

;ロア
[State 25050, Explod]
type = Explod
triggerAll = NumExplod(25060) = 0
triggerAll = Time = 0
trigger1 = enemy,Name = "Roa" || enemy,Name = "Michael_Roa_Valdamjong" || enemy,Name = "Michael Roa Valdamjong" || enemy,Name = "NeRoa"
anim = 25073
ID = 25060
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 0
removeongethit = 0

;自分とか
[State 25050, Explod]
type = Explod
triggerAll = NumExplod(25060) = 0
triggerAll = Time = 0
trigger1 = enemy,Name = "MYCALE" || enemy,Name = "Imaich Moenai Musume"
trigger2 = enemy,Name = "PERFECTI" || enemy,Name = "PERUKO" || enemy,Name = "KANZENSYA" || enemy,Name = "MANAITA"
trigger3 = enemy,Name = "KATI" || enemy,Name = "KATI Chan" || enemy,Name = "KATIChanKAWAIIYATTAAAA"
anim = 25073
ID = 25060
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 0
removeongethit = 0

;----メッセージ表示(汎用)---------
[State 25050, Explod]
type = Explod
trigger1 = NumExplod(25060) = 0
trigger1 = Time = 0
anim = 25060 + (random%4)
ID = 25060
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 0
removeongethit = 0





;---------------------------------------------------------------------------
;相対攻撃ヘルパー
[Statedef 40020]
type     = S
anim     = 18000
sprpriority = -5

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    透明型Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,AA,NT,ST,HT,AT
time = 999

[State B, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = Invisible
flag2 = NoShadow
flag3 = NoAutoTurn
IgnoreHitPause = 1

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----アナウンス-------------------
[State 40020, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 20002
ignorehitpause = 1
persistent = 0

;1P
[State 40020, 1P Announs Tape1]
type = Explod
triggerAll = TeamSide = 1
trigger1 = Time = 0
anim = 20022
ID = 20002
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0

[State 40020, 1P Announs Tape2]
type = Explod
triggerAll = TeamSide = 1
trigger1 = Time = 0
anim = 20032
ID = 20002
pos = -60, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0

[State 40020, 1P Announs]
type = Explod
triggerAll = TeamSide = 1
trigger1 = Time = 0
anim = 20002
ID = 20002
pos = 35, 75
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 1
removeongethit = 0

;2P
[State 40020, 2P Announs Tape1]
type = Explod
triggerAll = TeamSide = 2
trigger1 = Time = 0
anim = 20022
ID = 20002
pos = -60, 0
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0

[State 40020, 2P Announs Tape2]
type = Explod
triggerAll = TeamSide = 2
trigger1 = Time = 0
anim = 20032
ID = 20002
pos = -120, 0
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0

[State 40020, 2P Announs]
type = Explod
triggerAll = TeamSide = 2
trigger1 = Time = 0
anim = 20012
ID = 20002
pos = -35, 75
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 1
removeongethit = 0

;----相対攻撃演出-----------------
[State 40020, Flash]
Type = Explod
triggerAll = var(0) = 0
trigger1 = Time = 0
id = 15200
anim = 15200
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = 3
supermovetime = 999999
pausemovetime = 999999
scale = 5, 5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0

[State 40020, Snd]
type = PlaySnd
triggerAll = var(0) = 0
trigger1 = Time = 0
value = 1, 3
ignorehitpause = 1
persistent = 0

[State 40020, Pause]
type = Pause
trigger1 = time = 0
time = 3
ignorehitpause = 1
persistent = 0

;----バグ防止用-------------------
[State 40020, VarSet]
type = VarSet
triggerAll = var(0) = 0
trigger1 = time = 0
var(0) = 1

;----消滅時処理-------------------
[State 40020, DestroySelf]
type = DestroySelf
trigger1 = EnemyNear,MoveType != H

;----使用変数---------------------
;Var(0) = バグ防止用


;---------------------------------------------------------------------------
;背面攻撃ヘルパー
[Statedef 40040]
type     = S
anim     = 18000
sprpriority = -5

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    透明型Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,AA,NT,ST,HT,AT
time = 999

[State B, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = Invisible
flag2 = NoShadow
flag3 = NoAutoTurn
IgnoreHitPause = 1

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----アナウンス-------------------
[State 40040, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 20004
ignorehitpause = 1
persistent = 0

;1P
[State 40040, 1P Announs Tape1]
type = Explod
triggerAll = TeamSide = 1
trigger1 = Time = 0
anim = 20024
ID = 20004
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0

[State 40040, 1P Announs Tape2]
type = Explod
triggerAll = TeamSide = 1
trigger1 = Time = 0
anim = 20034
ID = 20004
pos = -60, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0

[State 40040, 1P Announs]
type = Explod
triggerAll = TeamSide = 1
trigger1 = Time = 0
anim = 20004
ID = 20004
pos = 35, 75
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 1
removeongethit = 0

;2P
[State 40040, 2P Announs Tape1]
type = Explod
triggerAll = TeamSide = 2
trigger1 = Time = 0
anim = 20024
ID = 20004
pos = -60, 0
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0

[State 40040, 2P Announs Tape2]
type = Explod
triggerAll = TeamSide = 2
trigger1 = Time = 0
anim = 20034
ID = 20004
pos = -120, 0
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0

[State 40040, 2P Announs]
type = Explod
triggerAll = TeamSide = 2
trigger1 = Time = 0
anim = 20014
ID = 20004
pos = -35, 75
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 1
removeongethit = 0

;----背面攻撃演出-----------------
[State 40040, Flash]
Type = Explod
triggerAll = var(0) = 0
trigger1 = Time = 0
id = 15200
anim = 15200
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = 3
supermovetime = 999999
pausemovetime = 999999
scale = 5, 5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0

[State 40040, Snd]
type = PlaySnd
triggerAll = var(0) = 0
trigger1 = Time = 0
value = 1, 3
ignorehitpause = 1
persistent = 0

[State 40040, Pause]
type = Pause
trigger1 = time = 0
time = 3
ignorehitpause = 1
persistent = 0

;----バグ防止用-------------------
[State 40040, VarSet]
type = VarSet
triggerAll = var(0) = 0
trigger1 = time = 0
var(0) = 1

;----消滅時処理-------------------
[State 40040, DestroySelf]
type = DestroySelf
trigger1 = EnemyNear,MoveType != H

;----使用変数---------------------
;Var(0) = バグ防止用


;===============================================================================
;常駐処理ヘルパー
;===============================================================================
[Statedef 46000]
type     = S
anim     = 18000
sprpriority = -5

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    透明型Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,AA,NT,ST,HT,AT
time = 999

[State B, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = Invisible
flag2 = NoShadow
flag3 = NoAutoTurn
IgnoreHitPause = 1

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;=========================エフェクト関連=========================
;----回転吹き飛びエフェクト-------
[State 46000, Explod]
type = Explod
triggerAll = NumExplod(10070) = 0
triggerAll = P2movetype = H
triggerAll = enemynear,Anim = 6000
trigger1 = P2stateno = 6000
anim = 10070
ID = 10070
pos = 0, -60
postype = p2
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -1
supermovetime = 999999
pausemovetime = 999999
scale = 1, 1
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 0
IgnoreHitPause = 1

[State 46000, RemoveExplod]
type = RemoveExplod
trigger1 = P2stateno != 6000
ID = 10070

;----カウンターダウンエフェクト---
[State 46000, Explod]
type = Explod
trigger1 = P2stateno = 6001
trigger1 = P2movetype = H
trigger1 = enemynear,time = 1
anim = 10040
pos = 0, Pos Y = 0
postype = p2
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.75, 0.75
sprpriority = -7
ontop = 0
ownpal = 0
removeongethit = 0
IgnoreHitPause = 0

[State 46000, Snd]
type = PlaySnd
trigger1 = P2stateno = 6001
trigger1 = P2movetype = H
trigger1 = enemynear,time = 1
value = 3, 5
IgnoreHitPause = 0

[State 46000, EnvShake]
type = EnvShake
trigger1 = P2stateno = 6001
trigger1 = P2movetype = H
trigger1 = enemynear,time = 1
time = 10
freq = 25
ampl = 5

;----スライドダウンエフェクト-----
[State 46000, Explod]
type = Explod
triggerAll = P2stateno = 6011
triggerAll = P2movetype = H
trigger1 = enemynear,time = 1
anim = 10030
pos = -20, Pos Y = 0
postype = p2
facing = -1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 9999999
pausemovetime = 9999999
scale = 0.5, 1
sprpriority = -5
ontop = 0
ownpal = 0
removeongethit = 0
IgnoreHitPause = 0

[State 46000, Snd]
type = PlaySnd
trigger1 = P2stateno = 6011
trigger1 = P2movetype = H
trigger1 = enemynear,time = 1
value = 3, 4
IgnoreHitPause = 0

;----特大バウンドエフェクト-------
[State 46000, Explod]
type = Explod
trigger1 = P2stateno = 6021
trigger1 = P2movetype = H
trigger1 = enemynear,time = 1
anim = 10040
pos = 0, Pos Y = 0
postype = p2
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.75, 0.75
sprpriority = -7
ontop = 0
ownpal = 0
removeongethit = 0
IgnoreHitPause = 0

[State 46000, Explod]
type = Explod
trigger1 = P2stateno = 6021
trigger1 = P2movetype = H
trigger1 = enemynear,time = 1
anim = 10041
pos = 0, Pos Y = 0
postype = p2
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 17
pausemovetime = 17
scale = 0.5, 0.5
sprpriority = 7
ontop = 0
ownpal = 0
removeongethit = 0
IgnoreHitPause = 0

[State 46000, Snd]
type = PlaySnd
trigger1 = P2stateno = 6021
trigger1 = P2movetype = H
trigger1 = enemynear,time = 1
value = 3, 5
IgnoreHitPause = 0

[State 46000, Explod]
type = Explod
trigger1 = P2stateno = 6022
trigger1 = P2movetype = H
trigger1 = enemynear,time = 1
anim = 10040
pos = 0, Pos Y = 0
postype = p2
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.75, 0.75
sprpriority = -7
ontop = 0
ownpal = 0
removeongethit = 0
IgnoreHitPause = 0

[State 46000, Snd]
type = PlaySnd
trigger1 = P2stateno = 6022
trigger1 = P2movetype = H
trigger1 = enemynear,time = 1
value = 3, 5
channel = 10
lowpriority = 1
IgnoreHitPause = 0

;----ワイヤーエフェクト-----------
[State 46000, Explod]
type = Explod
trigger1 = P2stateno = 6031
trigger1 = P2movetype = H
trigger1 = enemynear,time = 1
trigger1 = NumExplod(10051) = 0
anim = 10051
ID = 10051
pos = ifelse(enemynear,facing = root,facing,30,-30), -60
postype = p2
facing = ifelse(enemynear,facing = root,facing,1,-1)
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 0
ownpal = 0
removeongethit = 0
IgnoreHitPause = 0

[State 46000, Snd]
type = PlaySnd
trigger1 = P2stateno = 6031
trigger1 = P2movetype = H
trigger1 = enemynear,time = 1
value = 1, 3
channel = 11
lowpriority = 1
IgnoreHitPause = 0

[State 46000, EnvShake]
type = EnvShake
trigger1 = P2stateno = 6031
trigger1 = P2movetype = H
trigger1 = enemynear,time = 1
time = 20
freq = 25
ampl = 8

;----壁張り付きエフェクト---------
[State 46000, Explod]
type = Explod
trigger1 = P2stateno = 6110
trigger1 = P2movetype = H
trigger1 = enemynear,time = 1
trigger1 = NumExplod(10051) = 0
anim = 10051
ID = 10051
pos = -30, -60
postype = p2
facing = -1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 0
IgnoreHitPause = 0

[State 46000, Explod]
type = Explod
trigger1 = P2stateno = 6130
trigger1 = P2movetype = H
trigger1 = enemynear,time = 1
anim = 10051
ID = 10051
pos = -30, -60
postype = p2
facing = -1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 0
IgnoreHitPause = 0

[State 46000, Snd]
type = PlaySnd
trigger1 = P2stateno = 6110
trigger1 = P2movetype = H
trigger1 = enemynear,time = 1
value = 1, 3
IgnoreHitPause = 0


;=========================アナウンス関連=========================
;----背面攻撃---------------------
[State 46000, Helper]
type = Helper
triggerAll = NumHelper(40040) = 0
triggerAll = root,var(11) = 2
triggerAll = P2movetype = H
trigger1 = root,MoveHit = 1
stateno = 40040
ID = 40040
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;----相対攻撃---------------------
[State 46000, Helper]
type = Helper
triggerAll = NumHelper(40040) = 0
triggerAll = NumHelper(40020) = 0
triggerAll = root,var(11) = 1
triggerAll = P2movetype = H
trigger1 = root,MoveHit = 1
stateno = 40020
ID = 40020
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 0
IgnoreHitPause = 1

;----防禦崩壊(エフェクト含)-------
[State 46000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 20003

[State 46000, 1P Announs Tape1]
type = Explod
triggerAll = TeamSide = 1
triggerAll = root,var(26) != 0
trigger1 = P2Stateno = 6200 || P2Stateno = 6210
trigger1 = P2MoveType = H
trigger1 = enemy,Time = 1
anim = 20023
ID = 20003
pos = 0, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0
IgnoreHitPause = 1

[State 46000, 1P Announs Tape2]
type = Explod
triggerAll = TeamSide = 1
triggerAll = root,var(26) != 0
trigger1 = P2Stateno = 6200 || P2Stateno = 6210
trigger1 = P2MoveType = H
trigger1 = enemy,Time = 1
anim = 20033
ID = 20003
pos = -60, 0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0
IgnoreHitPause = 1

[State 46000, 1P Announs]
type = Explod
triggerAll = TeamSide = 1
triggerAll = root,var(26) != 0
trigger1 = P2Stateno = 6200 || P2Stateno = 6210
trigger1 = P2MoveType = H
trigger1 = enemy,Time = 1
anim = 20003
ID = 20003
pos = 35, 75
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 1
removeongethit = 0
IgnoreHitPause = 1

[State 46000, 2P Announs Tape1]
type = Explod
triggerAll = TeamSide = 2
triggerAll = root,var(26) != 0
trigger1 = P2Stateno = 6200 || P2Stateno = 6210
trigger1 = P2MoveType = H
trigger1 = enemy,Time = 1
anim = 20023
ID = 20003
pos = -60, 0
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0
IgnoreHitPause = 1

[State 46000, 2P Announs Tape2]
type = Explod
triggerAll = TeamSide = 2
triggerAll = root,var(26) != 0
trigger1 = P2Stateno = 6200 || P2Stateno = 6210
trigger1 = P2MoveType = H
trigger1 = enemy,Time = 1
anim = 20033
ID = 20003
pos = -120, 0
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = -7
ontop = 0
ownpal = 1
removeongethit = 0
IgnoreHitPause = 1

[State 46000, 2P Announs]
type = Explod
triggerAll = TeamSide = 2
triggerAll = root,var(26) != 0
trigger1 = P2Stateno = 6200 || P2Stateno = 6210
trigger1 = P2MoveType = H
trigger1 = enemy,Time = 1
anim = 20013
ID = 20003
pos = -35, 75
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.5, 0.5
sprpriority = 7
ontop = 1
ownpal = 1
removeongethit = 0
IgnoreHitPause = 1

[State 46000, GUARD CRUSH]
type = Explod
triggerAll = NumExplod(10100) = 0
triggerAll = root,var(26) != 0
trigger1 = P2Stateno = 6200 || P2Stateno = 6210
trigger1 = P2MoveType = H
trigger1 = enemy,Time = 1
anim = 10100
ID = 10100
pos = 0, -60
postype = p2
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 999999
pausemovetime = 999999
scale = 0.75, 0.75
sprpriority = 7
ontop = 0
ownpal = 1
removeongethit = 0
IgnoreHitPause = 1

[State 46000, Snd]
type = PlaySnd
triggerAll = root,var(26) != 0
trigger1 = P2Stateno = 6200 || P2Stateno = 6210
trigger1 = P2MoveType = H
trigger1 = enemy,Time = 1
value = 3, 1
IgnoreHitPause = 1

;=========================完全世界関連===========================
;----発動中画面効果---------------
[State 46000, NOBG Mugic]
type = AssertSpecial
trigger1 = root,var(21) = 1
trigger1 = root,var(55) = 0
flag  = timerfreeze
flag2 = noBG
flag3 = nomusic
IgnoreHitPause = 1

[State 46000, NOBG]
type = AssertSpecial
trigger1 = root,var(21) = 1
trigger1 = root,var(55) = 1
flag  = timerfreeze
flag2 = noBG
IgnoreHitPause = 1

[State 46000, TimeFreeze]
type = AssertSpecial
trigger1 = root,var(21) = 1
trigger1 = root,var(55) = 2
flag  = timerfreeze
IgnoreHitPause = 1

;=========================勝利演出===============================
;----散華-------------------------
[State 46000, Sange]
type = Helper
triggerAll = teammode = single
triggerAll = NumHelper(25020) = 0
triggerAll = NumHelper(25010) = 0
triggerAll = NumHelper(25000) = 0
triggerAll = root,Var(50) != 0
triggerAll = root,Var(50) <= (root,Var(51) + 1)
trigger1 = WinKO
trigger1 = parent,Var(18) != 0
name = "Sange"
stateno = 25020
ID = 25020
pos = 0, 0
postype = p1
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
size.xscale = 0.5
size.yscale = 0.5

;----玉砕-------------------------
[State 46000, Defated]
type = Helper
triggerAll = teammode = single
triggerAll = NumHelper(25020) = 0
triggerAll = NumHelper(25010) = 0
triggerAll = NumHelper(25000) = 0
triggerAll = root,Var(50) != 0
triggerAll = root,Var(50) <= (root,Var(51) + 1)
trigger1 = WinKO
trigger1 = parent,Var(18) = 0
name = "Defated"
stateno = 25010
ID = 25010
pos = 0, 0
postype = p1
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
size.xscale = 0.5
size.yscale = 0.5

;----大打撃-----------------------
[State 46000, Major Damage]
type = Helper
triggerAll = teammode = single
triggerAll = NumHelper(25020) = 0
triggerAll = NumHelper(25010) = 0
triggerAll = NumHelper(25000) = 0
triggerAll = root,Var(50) != 0
triggerAll = root,Var(50) > (root,Var(51) + 1)
trigger1 = WinKO
name = "Major Damage"
stateno = 25000
ID = 25000
pos = 0, 0
postype = p1
facing = 1
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
size.xscale = 0.5
size.yscale = 0.5

;----画面処理---------------------
[State 46000, AssertSpecial]
type = AssertSpecial
trigger1 = NumHelper(25020) != 0
trigger2 = NumHelper(25010) != 0
flag = noBG
flag2 = nomusic
IgnoreHitPause = 1

;=========================被KO演出===============================
;----敗北時ボイス-----------------
[State 46000, Voice]
Type = PlaySnd
triggerAll = parent,Alive = 0
trigger1 = root,matchover
Value = 5050, 1
ignorehitpause = 1
persistent = 0

;----被KO時ボイス-----------------
[State 46000, Voice]
Type = PlaySnd
triggerAll = root,Alive = 0
trigger1 = root,Anim = 5140
trigger1 = root,AnimElem = 2
Value = 5050, 0
ignorehitpause = 1
persistent = 0


;===============================================================================
;先行入力処理ヘルパー
;===============================================================================
[statedef 50000]
type = A
movetype = I
physics = N
ctrl = 0
anim = 18000

;++++++++++++++++++++++++++++++++++++++++++++++++++++
;    透明型Helper基本処理
;++++++++++++++++++++++++++++++++++++++++++++++++++++
;----初期設定---------------------
[state B, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[State B, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,AA,NT,ST,HT,AT
time = 999

[State B, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag  = Invisible
flag2 = NoShadow
flag3 = NoAutoTurn
IgnoreHitPause = 1

;++++基本処理ここまで++++++++++++++++++++++++++++++++

;----監視処理---------------------
[state 50000, selfstate]
type = selfstate
trigger1 = !ishelper
value = 0

[state 50000, posset]
type = posset
trigger1 = 1
x = root,pos X
y = 9999

[state 50000, turn]
type = turn
trigger1 = root,facing != facing

;=========================コマンド関連===========================
;----特別攻撃---------------------
[State 50000, Final SP Attack]
type = Varset
trigger1 = (command = "a+b+c")
V = 0
value = 6

[State 50000, 236SP]
type = Varset
trigger1 = (command = "236SP")
V = 1
value = 6

[State 50000, 214SP]
type = Varset
trigger1 = (command = "214SP")
V = 2
value = 6

[State 50000, 22SP]
type = Varset
trigger1 = (command = "22SP")
V = 3
value = 6

[State 50000, 4-6SP]
type = Varset
trigger1 = (command = "4-6SP")
V = 4
value = 6

[State 50000, -6SP]
type = Varset
trigger1 = (command = "-6SP")
V = 5
value = 6

[State 50000, 2-8SP]
type = Varset
trigger1 = (command = "2-8SP")
V = 6
value = 6

[State 50000, -8SP]
type = Varset
trigger1 = (command = "-8SP")
V = 7
value = 6

[State 50000, 632SP]
type = Varset
trigger1 = (command = "632SP")
V = 8
value = 6

;----必殺技-----------------------
[State 50000, 236A]
type = Varset
trigger1 = (command = "236A")
V = 10
value = 6

[State 50000, 236B]
type = Varset
trigger1 = (command = "236B")
V = 11
value = 6

[State 50000, 236C]
type = Varset
trigger1 = (command = "236C")
V = 12
value = 6

[State 50000, 22A]
type = Varset
trigger1 = (command = "22A")
V = 13
value = 6

[State 50000, 22B]
type = Varset
trigger1 = (command = "22B")
V = 14
value = 6

[State 50000, 22C]
type = Varset
trigger1 = (command = "22C")
V = 15
value = 6

[State 50000, 214A]
type = Varset
trigger1 = (command = "214A")
V = 16
value = 6

[State 50000, 214B]
type = Varset
trigger1 = (command = "214B")
V = 17
value = 6

[State 50000, 214C]
type = Varset
trigger1 = (command = "214C")
V = 18
value = 6

[State 50000, 4-6A]
type = Varset
trigger1 = (command = "4-6A")
V = 19
value = 6

[State 50000, 4-6B]
type = Varset
trigger1 = (command = "4-6B")
V = 20
value = 6

[State 50000, 4-6C]
type = Varset
trigger1 = (command = "4-6C")
V = 21
value = 6

[State 50000, 2-8A]
type = Varset
trigger1 = (command = "2-8A")
V = 22
value = 6

[State 50000, 2-8B]
type = Varset
trigger1 = (command = "2-8B")
V = 23
value = 6

[State 50000, 2-8C]
type = Varset
trigger1 = (command = "2-8C")
V = 24
value = 6

[State 50000, 632A]
type = Varset
trigger1 = (command = "632A")
V = 25
value = 6

[State 50000, 632B]
type = Varset
trigger1 = (command = "632B")
V = 26
value = 6

[State 50000, 632C]
type = Varset
trigger1 = (command = "632C")
V = 27
value = 6

;----特殊技-----------------------
[State 50000, J2A]
type = Varset
trigger1 = ((command = "a") && (command = "holddown"))
V = 30
value = 6

[State 50000, J2B]
type = Varset
trigger1 = ((command = "b") && (command = "holddown"))
V = 31
value = 6

[State 50000, J2C]
type = Varset
trigger1 = ((command = "c") && (command = "holddown"))
V = 32
value = 6

;----ボタン単発-------------------
[State 50000, A]
type = Varset
trigger1 = (command = "a")
V = 40
value = 5

[State 50000, B]
type = Varset
trigger1 = (command = "b")
V = 41
value = 5

[State 50000, C]
type = Varset
trigger1 = (command = "c")
V = 42
value = 5

;----システム行動-----------------
[State 50000, PerfectiWelt]
type = Varset
trigger1 = (command = "PerfectiWelt")
V = 50
value = 6

[State 50000, Throw]
type = Varset
trigger1 = (command = "a+b")
V = 51
value = 5

[State 50000, Refrector]
type = Varset
trigger1 = (command = "b+c")
V = 52
value = 5

[State 50000, Refrector]
type = Varset
trigger1 = (command = "z")
V = 52
value = 5

[State 50000, Front Step]
type = Varset
trigger1 = (command = "FF")
V = 53
value = 4

[State 50000, Back Step]
type = Varset
trigger1 = (command = "BB")
V = 54
value = 4

;=======================先行入力時間処理=========================
;----時間減算---------------------
[State 50000, Time Watch 0]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(0) > 0
var(0) = -1

[State 50000, Time Watch 1]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(1) > 0
var(1) = -1

[State 50000, Time Watch 2]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(2) > 0
var(2) = -1

[State 50000, Time Watch 3]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(3) > 0
var(3) = -1

[State 50000, Time Watch 4]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(4) > 0
var(4) = -1

[State 50000, Time Watch 5]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(5) > 0
var(5) = -1

[State 50000, Time Watch 6]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(6) > 0
var(6) = -1

[State 50000, Time Watch 7]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(7) > 0
var(7) = -1

[State 50000, Time Watch 8]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(8) > 0
var(8) = -1

[State 50000, Time Watch 9]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(9) > 0
var(9) = -1

[State 50000, Time Watch 10]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(10) > 0
var(10) = -1

[State 50000, Time Watch 11]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(11) > 0
var(11) = -1

[State 50000, Time Watch 12]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(12) > 0
var(12) = -1

[State 50000, Time Watch 13]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(13) > 0
var(13) = -1

[State 50000, Time Watch 14]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(14) > 0
var(14) = -1

[State 50000, Time Watch 15]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(15) > 0
var(15) = -1

[State 50000, Time Watch 16]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(16) > 0
var(16) = -1

[State 50000, Time Watch 17]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(17) > 0
var(17) = -1

[State 50000, Time Watch 18]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(18) > 0
var(18) = -1

[State 50000, Time Watch 19]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(19) > 0
var(19) = -1

[State 50000, Time Watch 20]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(20) > 0
var(20) = -1

[State 50000, Time Watch 21]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(21) > 0
var(21) = -1

[State 50000, Time Watch 22]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(22) > 0
var(22) = -1

[State 50000, Time Watch 23]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(23) > 0
var(23) = -1

[State 50000, Time Watch 24]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(24) > 0
var(24) = -1

[State 50000, Time Watch 25]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(25) > 0
var(25) = -1

[State 50000, Time Watch 26]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(26) > 0
var(26) = -1

[State 50000, Time Watch 27]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(27) > 0
var(27) = -1

[State 50000, Time Watch 28]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(28) > 0
var(28) = -1

[State 50000, Time Watch 29]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(29) > 0
var(29) = -1

[State 50000, Time Watch 30]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(30) > 0
var(30) = -1

[State 50000, Time Watch 31]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(31) > 0
var(31) = -1

[State 50000, Time Watch 32]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(32) > 0
var(32) = -1

[State 50000, Time Watch 33]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(33) > 0
var(33) = -1

[State 50000, Time Watch 34]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(34) > 0
var(34) = -1

[State 50000, Time Watch 35]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(35) > 0
var(35) = -1

[State 50000, Time Watch 36]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(36) > 0
var(36) = -1

[State 50000, Time Watch 37]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(37) > 0
var(37) = -1

[State 50000, Time Watch 38]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(38) > 0
var(38) = -1

[State 50000, Time Watch 39]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(39) > 0
var(39) = -1

[State 50000, Time Watch 40]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(40) > 0
var(40) = -1

[State 50000, Time Watch 41]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(41) > 0
var(41) = -1

[State 50000, Time Watch 42]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(42) > 0
var(42) = -1

[State 50000, Time Watch 43]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(43) > 0
var(43) = -1

[State 50000, Time Watch 44]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(44) > 0
var(44) = -1

[State 50000, Time Watch 45]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(45) > 0
var(45) = -1

[State 50000, Time Watch 46]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(46) > 0
var(46) = -1

[State 50000, Time Watch 47]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(47) > 0
var(47) = -1

[State 50000, Time Watch 48]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(48) > 0
var(48) = -1

[State 50000, Time Watch 49]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(49) > 0
var(49) = -1

[State 50000, Time Watch 50]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(50) > 0
var(50) = -1

[State 50000, Time Watch 51]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(51) > 0
var(51) = -1

[State 50000, Time Watch 52]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(52) > 0
var(52) = -1

[State 50000, Time Watch 53]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(53) > 0
var(53) = -1

[State 50000, Time Watch 54]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(54) > 0
var(54) = -1

[State 50000, Time Watch 55]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(55) > 0
var(55) = -1

[State 50000, Time Watch 56]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(56) > 0
var(56) = -1

[State 50000, Time Watch 57]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(57) > 0
var(57) = -1

[State 50000, Time Watch 58]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(58) > 0
var(58) = -1

[State 50000, Time Watch 59]
type = varadd
trigger1 = root,HitPauseTime = 0
trigger1 = var(59) > 0
var(59) = -1








          御名方　守矢


　　　arranged by "Ildanaf"


キャラアレンジおよびAI製作者の「Ildanaf」です。
このキャラは、元キャラの製作者である"DALA"さんの許可を得て公開しているいわゆる改変キャラです。
更なる改変を行うことは、自由にして頂いて結構ですが、無断転載はご遠慮ください。


;---------------------------------------------------------------------------
最初に

ほぼ、オリジナルの月華2に近い性能にしてあります。
最初に公開したキャラが、改変強化キャラ（いわゆるマスターキャラ）であったので、
通常のキャラを相手にするには強いという問題がありますので、
オリジナルに近い通常版の作成とそのAIを公開しようと思い作成しました。

マスター版のような、各種昇華、コマンド投げ、ゲージの自動増加、隠し剣質といった要素は搭載されず、
キャラ性能的には比較的平凡となっています。

ＭＵＧＥＮ仕様の３ゲージタイプであるタイプＡと１ゲージ＋ライフ制の原作仕様のタイプＢが選べます。

今回の新しい仕様によって、ゲージタイプＢは一新されています。
まず、以前はゲージ本数が同一キャラでは変えられないため、
ゲージタイプＢでは、パワーが1000以上たまらないようになっており、
1000を超えた場合は強制的に1000にするという方法を取っていました。

このため、タッグでは一人目でも二人目でも、
相手のゲージ本数に関係なく、ゲージが1000までしかたまらないため、
この原作風味のゲージタイプは非常に使いにくくなっていました。

そこで、今回の更新ではゲージが3000を変更できないなら、
便宜上3000を一ゲージとみなせばいいと考え、
ゲージの溜まる速度を３倍とし、消費量も３倍としました。

結果的に１ゲージと同じ振る舞いが出来る上で、
最大ゲージは3000であり、またタッグ時では相手のゲージ量が多かった時に、
強制的に制限がかかることもなくなりましたので、
タッグでもかなり使いやすくなったと思います。

また、通常の３倍というどこかの赤い彗星のような速度でパワーが溜まるため、
タッグでのゲージ効率がよくなります。
もっとも、消費量も３倍なので、パートナーが溜めたゲージも一瞬で使いきりますが・・・。
これはチーム戦にもいえます。
そういう意味では、一長一短の特徴が大きく出て面白いと思います。

ゲージタイプＡとＢを見分けるために、
タイプＢの時は原作のように、左下に剣質が表示されるようにしました。
また、以前はライフ1/4を判断するのに、ライフゲージで原作のように判断できないことから、
ライフ1/4を知らせるためにキャラを点滅させていましたが、
キャラの点滅は好き嫌いが分かれるところですので、、
左下に表示した剣質ゲージを点滅あっせることで、ライフ1/4を知らせるようにしました。

あと、自キャラのタイプＢ同士でタッグを組んだときに、剣質ゲージが見えなくならないように、
自キャラ同士では、表示をずらすようにしてあります。

＊ちなみに、A〜Zボタンで決定するパレット1-6が、ゲージ３本性のタイプA
　スタートボタンを押しながら、A〜Zボタンで決定するパレット7-12が、ゲージ１本＋ライフ性のタイプBです。


;---------------------------------------------------------------------------
オリジナルとの相違点


1.ガードキャンセルの挙動

412+y　で、ゲージ1消費でガードキャンセルが出ます。

ヒットした時の挙動はオリジナルとは異なり、マスター版と同様にしてあります。（かためキャラ対策です。）
地上の相手に当てたときはノックバック、空中の相手に当てた時は空中に打ち上げます。
また、必殺技でキャンセル可能にしてあります。

このガードキャンセル攻撃の強化が、ほぼ唯一のオリジナルに対する強化点といえます。


2..一部追加技あり

「DALA」さんが作成されているオリジナル技の「月読み」は残してあります。

昇華は非対応ですが、対空や、対空弾きからの追撃や、ガードキャンセルで浮かせたあとの追撃など、
使いどころも多いですし、何より格好良いですので、使ってください。



＊立ち回りの自由度などを考えると、コマンド投げ程度はこちらにもあってもよかったかもしれません。
　ご要望があれば、スイッチ式にして部分的な昇華やコマンド投げのon/offを可能にしても良いかなと思います。


;---------------------------------------------------------------------------
AIについて

AIは11段階のレベル式AIです。
AI.cns　の中の

[State -3, AI]
Type = VarSet
TriggerAll = ((Var(59) = 0) && (RoundState != 3))
trigger1 = command = "AI_01"
　　　　　〜
　　　　　中略
　　　　　〜
trigger50 = command = "AI_50"
Trigger51 = Numhelper(10000)
Trigger51 = helper(10000),var(59)
V = 59
Value =11 ; 1〜11でレベルを決めてください。1が弱く、11が最強です。
IgnoreHitPause = 1

この、Value =　の後に数字1〜11を入れてください。
レベル1が最弱で、11が最強です。



　　　　　＊＊＊＊：重要なお知らせです＊＊＊＊＊＊

○通常タイプ（従来型）の弾き確率設定について

・弾きの頻度を、立ち回りとは別に個別指定するようにしました。
AI.cns　の中の

;弾き率設定
[State -3, haziki]
type = varset
TriggerAll = var(59) != 0
Trigger1 = RoundState = 2
var(53) = -10 ; 0〜100でレベルを決めてください。「弾き率＋(AIレベル−6)*2」の確率で弾きを使用します。最大レベルで封印するには-10に設定して下さい。
persistent = 0
IgnoreHitPause = 1

のvar(53) = 　のあとの数字を変えて設定してください。
デフォルトは以前より低下し、6としました

「弾き率＋(AIレベル−6)*2」の確率で弾きを使用します。
AIレベルが最大の11で封印するには、弾き率は-10に設定して下さい。
逆にAIレベルが最低の1ならば、弾き率は10でも一切弾きません。

設定の目安ですが、あまり高くすると、弾ける攻撃を出すタイプの敵は一方的に弾かれますし、
逆に弾けないタイプの攻撃を出す敵の攻撃はくらい続けるという、なんともイマイチな展開になりますので、
弾き率とAIレベル補整の合計値が最大で20 程度が良いかなと思います。
封印をしない時は、最低値の目安は合計値を5 程度にすると良いかなと思います。


・ガードキャンセルの頻度も個別指定するようにしました。
AI.cns　の中の

;ガードキャンセル弾き確率設定
[State -3, ガードキャンセル]
type = varset
TriggerAll = var(59) != 0
Trigger1 = RoundState = 2
var(54) = 20 ; 0〜100でレベルを決めてください。「ガーキャン率＋(AIレベル−6)*2」の確率で弾きを使用します。最大レベルで封印するには-10に設定して下さい。
persistent = 0
IgnoreHitPause = 1

のvar(54) = 　のあとの数字を変えて設定してください。
デフォルトは20としました

「弾き率＋(AIレベル−6)*2」の確率でガードキャンセルを使用します。
AIレベルが最大の11で封印するには、-10に設定して下さい。
逆にAIレベルが最低の1ならば、10でも一切弾きません。

設定の目安ですが、あまり高くすると強すぎるので、
ガードキャンセル率とAIレベル補整の合計値が最大で30 程度が良いかなと思います。
封印をしない時は、最低値の目安は合計値を10 程度にすると良いかなと思います。

・従来型の相手の動き（HitDefAttrやmovetype）に反応する弾きではなく、
　相手の動きに関係なく、ランダムで適当に出す弾きを使用可能にしました。
　相手との距離があまりに遠い時や、連続技中、相手が弾かれモーションやガードモーション中など、
　そこで弾いても明らかに無意味だろうと、誰にでも分かるシチュエーション以外では、
　完全にランダムに弾きを使用します。
　
　また、これは他の行動のような60Fごとに設定される乱数ではなく、
　1Fごとの0-999の乱数にしたがって行うようにしてあります。

AI.cns　の中の

;ランダム弾き設定
;相手の技とは無関係に完全に適当に弾きを使用する確率です。
;設定値は 0〜1000 ですが、あまりあげるとひたすら弾きばかりするので、高くとも200以下がお勧めと思います。

[State -3, ランダム弾き]
type = varset
TriggerAll = var(59) != 0
Trigger1 = RoundState = 2
var(56) = 50 ; 0〜1000でレベルを決めてください。
persistent = 0
IgnoreHitPause = 1

のvar(56) = 　のあとの数字を変えて設定してください。
デフォルトは、ランダムは使用しない0としました

通常の弾き確率を0とし、こちらのランダムのみとしたり、
通常弾きとこちらのランダム弾きを適当に混ぜたり、
いろいろなバランスで試してみてください。


　　　　　<<<<ループコンボの頻度設定の方法について>>>

歩月ループの設定は以下のようになっています。
AI.cns内の上のほうに下記の記述が追加されています。

[State -3, 歩月ループ確率]
type = varset
TriggerAll = var(59) != 0
Trigger1 = RoundState = 2
var(8) = 50 ; 歩月ループコンボの一回目を行う確率です。0は使用せず、100はAIレベル最大の時に100％使用します。
persistent = 0
IgnoreHitPause = 1

[State -3, 歩月ループ回数制限]
type = varset
TriggerAll = var(59) != 0
Trigger1 = RoundState = 2
var(9) = 2 ; 歩月ループコンボの回数制限の設定です。入れた数字が最大ループ数となります。ループする毎に使用確率は低下します。
persistent = 0
IgnoreHitPause = 1

このvar(8)とvar(9)が歩月ループコンボの設定項目です。

var(8)のループ確率は1回目のループを使用する確率です。
尚AIレベルによっても使用確率は変化し、AIレベル11の時に数字と同じ確率で使用し、
1レベルが下るごとに、入れた数字の1/10ずつ初期ループの確率が低下していきます。
例１．var(8)=100の時の1ループ目の確率は、AIレベル11の時は100％、AIレベル10で90％、AIレベル6で50％、AIレベル1は0％です。
例２．var(8)=50の時の1ループ目の確率は、AIレベル11の時は50％、AIレベル10で45％、AIレベル6で25％、AIレベル1は0％です。

次に、var(9)のループ回数制限は、最大ループ数になります。
また、ループする毎に確率が1ループ目に対して、最大ループ回数に比例して低下していきます。
例３．AIレベル11で、var(8)=60、var(9)=3のとき、1ループ目の確率60％、2ループ目の確率40％、3ループ目の確率20％、となります。
例４．AIレベル11で、var(8)=100、var(9)=2のとき、1ループ目の確率100％、2ループ目50％、となります。
例５．AIレベル6で、var(8)=60、var(9)=3のとき、1ループ目の確率30％、2ループ目の確率20％、3ループ目の確率10％、となります。

更にはこのような設定の仕方で様々なバリエーションをつけることも可能です。
(100%を超えた場合は、100％使用するので、100％として表記しています。）
例６．AIレベル11で、var(8)=200、var(9)=4のとき、1ループ100％、2ループ100％、3ループ100％、4ループ50％、となります。
例７．AIレベル6で、var(8)=200、var(9)=4のとき、1ループ100％、2ループ75％、3ループ50％、4ループ25％、となります。
例８．AIレベル11で、var(8)=200、var(9)=2のとき、1ループ100％、2ループ100％、となります。
例９．AIレベル11で、var(8)=50、var(9)=100のとき、1ループ50％、2ループ49.5％、3ループ49％、・・・100ループ0.5％、となります。

計算が面倒かとは思いますが、大体分かりましたでしょうか？
見ての通り、設定次第で、低レベルでもループを積極的に狙いに行くことは可能となっていますが、
低レベルで歩月ループを狙いに行くと、歩月バグの停止失敗やつなぎの目押しミスが多くなり、
連続技に失敗し隙を晒す形となります。守矢風にいうなら器を知れというところでしょうか( ﾟДﾟ)
逆にそれを狙って、敢えて低レベルでも高確率で使用させるのも一つの手段です。
また例９のように、極端にループ回数を増やすと、ほとんど確率が減衰しませんので、
見た目上ほぼ各ループの確率を固定することが出来ます。
ただしこの時は、初期ループ率を高くし過ぎるといつまでたってもループが終わらなくなるので要注意です( ﾟДﾟ)
デフォルトは、初期ループ値50、ループ制限2回で、AIレベル11においては以前と同じ確率にしてあります。
お好みに合わせて、ループ確率を設定してください。


そして、上の計算で求めた値に対してライフ差で補整がかかるようにしました。
相手より体力が多ければ確率が低下し、相手より体力が少なければ確率が増すようになっています。
ライフが同じ時の補整値を1として、ライフ差100につき0.1づつ補整がかかります。
よって、相手よりもライフが500多ければ0.5倍、500少なければ1.5倍するということです。

これによってリードしている時はループを控え、追い込まれたら積極的にループを狙うため、
拮抗した試合内容になり、逆転が起きやすくなっています。


・推奨される設定値

var(8)は0（ループしない）か、30-50程度がいいでしょう。
var(9)は2程度がお勧めですが、var(8)が30程度ならループ回数を多めにしても確率的にまず続かないので平気です。
このvar(8)が低目で、var(9)が多い設定だと、普段のループが少なくなる代わりに、
体力差がついたときに、一気に大量ループでまくるというような展開が狙えます。

また逆に安定感を出し結果にブレを少なくさせたい時は、
var(8)を100にして最初のループはさせる代わりに、var(9)を1にして1ループで終わらせるのも良いと思います。


;---------------------------------------------------------------------------
連続技

基本的な流れは、昇華可能剣質なら

・通常技→弱月影１段目→弱月影2段目→新月系
・通常技→弱月影１段目→十六夜月華
・通常技→乱れ雪月華 or 月読み（潜在奥義発動可能時）
・強月影1段目→強月影2段目→強月影3段目→新月系
・強月影1段目→強月影2段目→強月影3段目→強月影4段目→十六夜月華
・(画面端限定）通常技→弱月影１段目→弱月影2段目→上段朧→新月系

昇華できない剣質なら
・通常技→弱月影１段目→弱月影2段目→新月→双月
・通常技→十六夜月華

乱舞奥義の使える剣質なら、（通常技→乱舞奥義→）を頭にはさむ事が出来ます。
また、乱舞奥義時は強月影の出が早くなりますので、
乱舞奥義の最後を強月影1段目にして、その後に強月影2段目以降の連続技を入れることが可能です。



;---------------------------------------------------------------------------

その他ご要望や問題点などありましたら、vixen3572@yahoo.co.jp　あてにメールを下さいませ。
ご意見いただければ、是非参考にさせていただこうと思います。



;---------------------------------------------------------------------------
;避け
[Statedef 750]
Type    = S
Physics = S
VelSet = 0,0
Ctrl = 0
Anim = 750
SprPriority = -1

[State -1] 
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0


[State -1]
Type = PlaySnd
Trigger1 = animelem = 2
Trigger1 = random < 300
Value = s750, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = animelem = 2
Trigger1 = random > 700
Value = s750, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = PalFX
Trigger1 = Time = [0,14]
Time = 1
Add = 150-Var(54),150-Var(54),150-Var(54)
IgnoreHitPause = 0
Peresistent = 0

[State -1]
Type = VarAdd
Trigger1 = Time = [5,14]
V = 54
Value = 15

[State -1]
Type = VarSet
Trigger1 = Time = 15
V = 54
Value = 0

[State -1]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = Time >= 1
StateNo = 855
ID = 856
Ownpal = 1
Keyctrl = 0
SprPriority = -5
IgnoreHitPause = 0
Persistent = 1

[State -1]
Type = NotHitBy
Trigger1 = Time = [1,25]
Value = , NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;空中避け
[Statedef 760]
Type    = A
Physics = A
Ctrl = 0
Anim = 760
SprPriority = -1

[State -1] 
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0


[State -1]
Type = PlaySnd
Trigger1 = animelem = 2
Trigger1 = random < 300
Value = s750, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = animelem = 2
Trigger1 = random > 700
Value = s750, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = PowerAdd
Trigger1 = PrevStateNo = [600,699]
Trigger1 = Var(13) = 0
Trigger1 = Time = 0
Value = Ceil(-500*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarAdd
Trigger1 = PrevStateNo = [600,699]
Trigger1 = Var(13) = [1,4]
Trigger1 = Time = 0
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)

[State -1]
Type = VarSet
Trigger1 = PrevStateNo = [600,699]
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = VelSet
TriggerAll = Vel X >= 2
TriggerAll = Var(57)%10 != [4,5]
Trigger1 = Time = 0
X = 2

[State -1] 
Type = VelSet
Trigger1 = Time = 0
Y = -6.6

[State -1] 
Type = Turn
Trigger1 = Time = 20
Trigger1 = P2Dist X < 0

[State -1]
Type = PalFX
Trigger1 = Time = [0,10]
Time = 1
Add = 150-Var(54),150-Var(54),150-Var(54)
IgnoreHitPause = 0
Peresistent = 0

[State -1]
Type = VarAdd
Trigger1 = Time = [1,9]
V = 54
Value = 15

[State -1]
Type = VarSet
Trigger1 = Time = 10
V = 54
Value = 0

[State -1]
Type = Helper
Trigger1 = Time >= 1
StateNo = 855
ID = 857
Ownpal = 1
Keyctrl = 0
SprPriority = -5
IgnoreHitPause = 0
Persistent = 1

[State -1]
Type = NotHitBy
Trigger1 = Time = [0,9]
Value = , NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

;---------------------------------------------------------------------------
; ゲージ溜め
[Statedef 850]
Type    = S
Physics = S
Anim    = 850
Ctrl    = 0
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = PlaySnd
Trigger1 = Time = 6
Value = s960, 0
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = animelem = 2
Value = s850, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = Anim = 850
Trigger1 = Time = 7
Anim = 10850
ID = 10850
Postype = P1
Pos = 0,0
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 4
BindTime = -1
RemoveTime = -1
RemoveOnGetHit = 1
IgnoreHitPause = 1
Persistent = 0


[State -1]
Type = PowerAdd
Trigger1 = Anim = 850
Trigger1 = Time = [7,36]
Value = Ceil(FVar(30)*IfElse(Var(43)>0,0.88,1.00)*IfElse(Time%3=0,6,5))

[State -1]
Type = PowerAdd
Trigger1 = Anim = 850
Trigger1 = Time = [37,66]
Value = Ceil(FVar(30)*IfElse(Var(43)>0,0.88,1.00)*IfElse(Time%3=0,9,8))

[State -1]
Type = PowerAdd
Trigger1 = Anim = 850
Trigger1 = Time = [67,96]
Value = Ceil(FVar(30)*IfElse(Var(43)>0,0.88,1.00)*IfElse(Time%3=0,13,12))

[State -1]
Type = PowerAdd
Trigger1 = Anim = 850
Trigger1 = Time = [97,126]
Value = Ceil(FVar(30)*IfElse(Var(43)>0,0.88,1.00)*IfElse(Time%3=0,16,15))

[State -1]
Type = PowerAdd
Trigger1 = Anim = 850
Trigger1 = Time = [127,156]
Value = Ceil(FVar(30)*IfElse(Var(43)>0,0.88,1.00)*IfElse(Time%3=0,20,19))

[State -1]
Type = PowerAdd
Trigger1 = Anim = 850
Trigger1 = Time = [157,186]
Value = Ceil(FVar(30)*IfElse(Var(43)>0,0.88,1.00)*IfElse(Time%3=0,23,22))

[State -1]
Type = PowerAdd
Trigger1 = Anim = 850
Trigger1 = Time = [187,216]
Value = Ceil(FVar(30)*IfElse(Var(43)>0,0.88,1.00)*IfElse(Time%3=0,27,26))

[State -1]
Type = PowerAdd
Trigger1 = Anim = 850
Trigger1 = Time >= 217
Value = Ceil(FVar(30)*IfElse(Var(43)>0,0.88,1.00)*IfElse(Time%3=0,30,29))

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) < 100
Trigger1 = Anim = 850
Trigger1 = Time >= 7
V = 36
Value = IfElse(Time%2=0,1,2)

[State -1] 
Type = ChangeAnim
TriggerAll = Var(59) <= 0
TriggerAll = Time >= 21
TriggerAll = Anim = 850
Trigger1 = Command != "ABC溜め" && Command != "X溜め"
Trigger2 = Command = "holdup" || Command = "holddown" || Command = "holdfwd" || Command = "holdback"
Trigger3 = Power >= 3334
Value = 851

[State -1]
Type = Explod
TriggerAll = NumExplod(10850) = 1
TriggerAll = Anim = 851
Trigger1 = Time%10= 9
Anim = 10851
ID = 10851
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 4
RemoveOnGetHit = 1
Persistent = 0

[State -1]
Type = Explod
TriggerAll = NumExplod(10850) = 1
TriggerAll = Anim = 851
Trigger1 = Time%10!= 9
Trigger1 = AnimTime = 0
Anim = 10852
ID = 10851
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 4
RemoveOnGetHit = 1
Persistent = 0

[State -1]
Type = RemoveExplod
TriggerAll = NumExplod(10850) = 1
TriggerAll = Anim = 851
Trigger1 = Time%10= 9
Trigger2 = AnimTime = 0
ID = 10850

[State -1] 
Type = ChangeState
Trigger1 = Anim = 851
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;サーキットスパーク
[Statedef 860]
Type     = S
MoveType = A
Physics  = S
Anim     = 860
Ctrl     = 0
VelSet = 0,0
Facep2 = 1


[State -1]
Type = PlaySnd
Trigger1 = animelem = 2
Trigger1 = random < 300
Value = s860, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = animelem = 2
Trigger1 = random > 700
Value = s860, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = PlaySnd
Trigger1 = animelem = 2
Trigger1 = random <= 700
Trigger1 = random >= 300
Value = s860, 2
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 54
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 55
Value = 0

[State -1]
Type = NotHitBy
TriggerAll = Var(57)%10 != 2
Trigger1 = AnimTime < -1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = NotHitBy
Trigger1 = Var(57)%10 = 2
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = PosSet
Trigger1 = Time = 0
Y = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = EnvShake
Trigger1 = Time = 12
Time  = 15
Ampl  = 5
Freq  = 90

[State -1]
Type = PowerSet
Trigger1 = RoundState = 2
Trigger1 = Time = 0
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 0
FV = 29
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 0
Trigger1 = Var(13) = 2 || Var(13) = 4
V = 13
Value = 9
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 0
Trigger1 = Var(13) = [6,9]
V = 14
Value = 3000
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 0
Trigger1 = Var(13) = [6,9]
V = 16
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
TriggerAll = RoundState = 2
TriggerAll = Var(0)%10 = 0
TriggerAll = NumExplod(25600) = 0
Trigger1 = Time = 0
Trigger1 = Var(13) = [6,9]
Anim = 25600
PosType = P1
Pos = 0, -60
Scale = 0.5,0.5
Ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 99999
PauseMoveTime = 99999
SprPriority = 5
ID = 25600

[State -1]
Type = Helper
TriggerAll = Var(0)%10 = 0
Trigger1 = Time = 10
StateNo = 8020
PosType = P1
Pos = 0, -50
Ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 99999
PauseMoveTime = 99999
SprPriority = 5
ID = 8020

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 0
Trigger1 = Var(13) = [1,5]
V = 13
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 0
Trigger1 = Var(13) = [1,5]
Trigger1 = Var(14) > 0
V = 14
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 12
Value = s960, 0
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PalFX
Trigger1 = Time = [11,31]
Time = 1
Add = 160-Var(55),160-Var(55),160-Var(55)
IgnoreHitPause = 1

[State -1]
Type = VarAdd
Trigger1 = Time = [12,31]
V = 55
Value = 8

[State -1]
Type = BGPalFX
Trigger1 = Time = [0,34]
Time = 1
Add = 0-Var(54),0-Var(54),0-Var(54)
IgnoreHitPause = 1

[State -1]
Type = VarAdd
Trigger1 = Time = [0,19]
V = 54
Value = 5

[State -1]
Type = VarAdd
Trigger1 = Time = [30,34]
V = 54
Value = -20

[State -1]
Type = VarRangeSet
Trigger1 = AnimTime = 0
First = 54
Last = 55
Value = 0

[State -1]
Type = Explod
Trigger1 = Time = 2
Anim = 10860
ID = 10860
Postype = P1
Pos = 0,-60
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 5
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 6
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 7
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 8
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = P2MoveType != H || P2StateNo = [120,159]
Trigger1 = Time = 10
Attr = S, NA
Damage = Ceil(FVar(0)*(10-Var(4)%2))
AnimType = Hard
HitFlag = MAF-
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 0, 11+11*IfElse(Var(38)>0,1,0)+Var(41)
SparkNo = -1
Guard.SparkNo = -1
HitSound = s10, 2
Ground.Type = High
Air.Type = High
Ground.SlideTime = 10
Ground.HitTime  = 10
Ground.Velocity = -2.8,-11.2
Air.Velocity = -2.8,-11.2
Down.Velocity = -2.8,-11.2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff =0
Down.CornerPush.VelOff = 0
Fall.XVelocity = 0
Down.Bounce = 1
P2StateNo = 865
ID = 860
P2Facing = 1
Kill = 0
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(0.50*FVar(31)*37)


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1

[State -1] 
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; サーキットスパーク・投げられている相手
[Statedef 865]
Type     = A
MoveType = H
Physics  = N
Ctrl     = 0
VelSet   = 0,0

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
Persistent = 1

[State -1]
Type = HitFallSet
Trigger1 = 1
Value = 0
Persistent = 0

[State -1]
Type = OffSet
Trigger1 = Time >= 0
X = 1
Persistent = 4

[State -1]
Type = OffSet
Trigger1 = Time >= 2
X = -1
Persistent = 4

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5030)
Trigger1 = 1
Value = 5030

[State -1]
Type = ChangeState
Trigger1 = GetHitVar(HitShakeTime) = 0
Value = 866

;---------------------------------------------------------------------------
; サーキットスパーク・相手の空中の状態
[Statedef 866]
Type     = A
MoveType = H
Physics  = N
Ctrl     = 0
VelSet = -2.8,-11.2

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
Persistent = 1

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5030)
Trigger1 = Time = 0
Value = 5030

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5035)
Trigger1 =! SelfAnimExist(5030)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Value = 5035

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5050)
Trigger1 =! SelfAnimExist(5030)
Trigger1 =! SelfAnimExist(5035)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Trigger3 = Anim = 5035
Trigger3 = AnimTime = 0
Value = 5050

[State -1] ;これは重力これは毎フレーム事に0.4の力が加わります
Type = VelAdd
Trigger1 = 1
y = .6

[State -1] 
Type = HitFallSet
TriggerAll = Vel Y >= 3
TriggerAll = Vel Y + Pos Y >= -50
Trigger1 = 1
Value = 1

[State -1] 
Type = SelfState
TriggerAll = Vel Y > 3
TriggerAll = Pos Y >= -20
TriggerAll = Alive
TriggerAll = CanRecover
Trigger1 = Command != "holddown" && Command != "holdup"
Trigger1 = Command = "fwd" || Command = "back" || Command = "holdfwd" || Command = "holdback"
Trigger2 = Command != "holddown" && Command != "holdfwd" && Command != "holdback"
Trigger2 = Command = "up" || Command = "holdup"
Value = 5200 

[State -1] 
Type = SelfState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y >= 0
Value = 5100



;---------------------------------------------------------------------------
;エリアルスパーク
[Statedef 870]
Type     = A
MoveType = A
Physics  = A
Anim     = 870
Ctrl     = 0
VelSet = 0,0
Facep2 = 1


[State -1]
Type = PlaySnd
Trigger1 = animelem = 2
Trigger1 = random < 300
Value = s860, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = animelem = 2
Trigger1 = random > 700
Value = s860, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = PlaySnd
Trigger1 = animelem = 2
Trigger1 = random <= 700
Trigger1 = random >= 300
Value = s860, 2
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 54
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 55
Value = 0

[State -1]
Type = NotHitBy
TriggerAll = Var(57)%10 != 2
Trigger1 = Time = [0,13]
Value = , NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = NotHitBy
Trigger1 = Var(57)%10 = 2
Value = , NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = EnvShake
Trigger1 = Time = 12
Time  = 15
Ampl  = 5
Freq  = 90

[State -1]
Type = PowerSet
Trigger1 = RoundState = 2
Trigger1 = Time = 0
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 0
FV = 29
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 0
Trigger1 = Var(13) = 2 || Var(13) = 4
V = 13
Value = 9
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 0
Trigger1 = Var(13) = [6,9]
V = 14
Value = 3000
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 0
Trigger1 = Var(13) = [6,9]
V = 16
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
TriggerAll = RoundState = 2
TriggerAll = Var(0)%10 = 0
TriggerAll = NumExplod(25600) = 0
Trigger1 = Time = 0
Trigger1 = Var(13) = [6,9]
Anim = 25600
PosType = P1
Pos = 0, -60
Scale = 0.5,0.5
Ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 99999
PauseMoveTime = 99999
SprPriority = 5
ID = 25600

[State -1]
Type = Helper
TriggerAll = Var(0)%10 = 0
Trigger1 = Time = 10
StateNo = 8020
PosType = P1
Pos = 0, -50
Ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 99999
PauseMoveTime = 99999
SprPriority = 5
ID = 8020

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 0
Trigger1 = Var(13) = [1,5]
V = 13
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 0
Trigger1 = Var(13) = [1,5]
Trigger1 = Var(14) > 0
V = 14
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 12
Value = s960, 0
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PalFX
Trigger1 = Time = [11,30]
Time = 1
Add = 160-Var(55),160-Var(55),160-Var(55)
IgnoreHitPause = 1

[State -1]
Type = VarAdd
Trigger1 = Time = [11,30]
V = 55
Value = 8

[State -1]
Type = BGPalFX
Trigger1 = Time = [0,30]
Time = 1
Add = 0-Var(54),0-Var(54),0-Var(54)
IgnoreHitPause = 1

[State -1]
Type = VarAdd
Trigger1 = Time = [0,19]
V = 54
Value = 5

[State -1]
Type = VarAdd
Trigger1 = Time = [25,30]
V = 54
Value = -20

[State -1]
Type = VarRangeSet
Trigger1 = AnimTime = 0
First = 54
Last = 55
Value = 0

[State -1]
Type = VelSet
Trigger1 = Time <= 29
Y = 0

[State -1]
Type = Explod
Trigger1 = Time = 2
Anim = 10860
ID = 10860
Postype = P1
Pos = 0,-66
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 5
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 6
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 7
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 8
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = P2MoveType != H || P2StateNo = [120,159]
Trigger1 = Time = 11
Attr = A, NA
Damage = Ceil(FVar(0)*(10-Var(4)%2))
AnimType = Hard
HitFlag = MAF-
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 0, 11+11*IfElse(Var(38)>0,1,0)+Var(41)
SparkNo = -1
Guard.SparkNo = -1
HitSound = s10, 2
Ground.Type = High
Air.Type = High
Ground.SlideTime = 10
Ground.HitTime  = 10
Ground.Velocity = -2.8,-11.2
Air.Velocity = -2.8,-11.2
Down.Velocity = -2.8,-11.2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff =0
Down.CornerPush.VelOff = 0
Fall.XVelocity = 0
Down.Bounce = 1
P2StateNo = 865
ID = 870
P2Facing = 1
Kill = 0
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(0.50*FVar(31)*37)


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1

;---------------------------------------------------------------------------
; 立ち　EX-シールド
[Statedef 900]
Type    = S
Physics = S
Anim    = 900
Ctrl    = 0
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Var(57)%10 = 3
Trigger1 = Var(13) = 4
Trigger1 = Time = 0
FV = 26
Value = 1

[State -1]
Type = VelSet
TriggerAll = Time = 0
Trigger1 = Var(57)%10 != 4
Trigger2 = PrevStateNo != [100,101]
X = 0
Y = 0

[State -1]
Type = VarSet
Trigger1 = Time = [0,5]
V = 15
Value = Power

[State -1] 
Type = null;ChangeAnim
TriggerAll = Anim = 900
Trigger1 = Var(57)%10 != 2
Trigger1 = Time = 4
Trigger2 = MoveHit = 1
Value = 900
Elem = 3

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s900, 0
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarRandom
Trigger1 = AnimElem = 1
V = 1
Range = 0,4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Var(1) = 0
Trigger1 = AnimElem = 1
Value = s1600, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Var(1) = 1
Trigger1 = AnimElem = 1
Value = s1600, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = NotHitBy
Trigger1 = MoveHit = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State -1]
Type = HitOverRide
Trigger1 =! MoveHit
Trigger1 = Time = [0,IfElse((Var(57)%10=2),5,4)]
Attr = SCA, NP, SP, HP
StateNo = 901+IfElse((Var(57)%10=[2,3]),2,0)
IgnoreHitPause = 1


[State -1]
Type = ReversalDef
Trigger1 = P2StateNo != [400,409]
Trigger1 =! MoveContact
Reversal.Attr = SA, NA,SA,HA,NP,SP,HP
NumHits = 0
Pausetime = 13,17
HitSound = S901,0+Random%2
SparkNo = -1
Guard.SparkNo = -1
GetPower = Ceil(50*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000))),0

[State -1]
Type = ReversalDef
Trigger1 = P2StateNo = [400,409]
Trigger1 =! MoveContact
Reversal.Attr = C, NA,SA,HA,NP,SP,HP
NumHits = 0
Pausetime = 13,17
HitSound = S901,0+Random%2
SparkNo = -1
Guard.SparkNo = -1
GetPower = Ceil(50*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000))),0

[State -1]
Type = HitDef
Trigger1 =! MoveContact
Trigger1 = Time > IfElse((Var(57)%10=2),5,4)

[State -1]
Type = Helper
Trigger1 = Time = 0
StateNo = 940
ID = 940
Name = "Helper"
Pos = 0,0
PosType = P1
Ownpal = 1

[State -1]
Type = Helper
Trigger1 = Time = 0
StateNo = 941
ID = 950
Name = "Helper"
Pos = 0,0
PosType = P1
Ownpal = 1

[State -1]
Type = Helper
Trigger1 = MoveHit = 1 && HitPauseTime = 12
StateNo = 10910
ID = 10910+Var(57)%10
PosType = P1
Pos = 10,-70
Ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = TargetDrop
Trigger1 = NumTarget >= 5
ExcludeID = 900
IgnoreHitPause = 1

[State -1]
Type = PlaySnd
Trigger1 = MoveHit
Value = s902, 0+Random%4
Channel = 1
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = MoveHit = 2
V = 36
Value = Ceil(75*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,1.25,IfElse(Var(57)%10=3,1.11,1.20))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) > 100
V = 36
Value = 100
IgnoreHitPause = 1

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = MoveHit = 2
Trigger2 =! MoveHit
Trigger2 = AnimElem = 2, = 1
V = 36
Value = Ceil(-50*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,1.25,IfElse(Var(57)%10=3,1.11,1.20))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) < 0
V = 36
Value = 0
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) = 0
TriggerAll = Var(57)/10%10 != 2
TriggerAll = Command = "holdfwd" && Command = "ab" && Command != "holddown" && Command != "holdup" || Command = "holdfwd" && Command = "y" && Command != "holddown" && Command != "holdup"
Trigger1 = Time = [0,2]
V = 45
Value = 100
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) = 0
TriggerAll = Var(57)/10%10 = 2
TriggerAll = Command = "holdfwd" && Command = "ab" && Command != "holddown" && Command != "holdup" || Command = "holdfwd" && Command = "y" && Command != "holddown" && Command != "holdup"
Trigger1 = Time = [0,2]
V = 45
Value = 108
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) = 0
;TriggerAll = Var(57)/10%10 != 2
TriggerAll = Command = "holdback" && Command = "ab" && Command != "holddown" && Command != "holdup" || Command = "holdback" && Command = "y" && Command != "holddown" && Command != "holdup"
Trigger1 = Time = [0,2]
V = 45
Value = 105
IgnoreHitPause = 1


[State -1]
Type = VarSet
TriggerAll = Var(59) = 0
TriggerAll = Var(57)%10 != 3 && Var(57)%10 != 5
TriggerAll = Command = "holddown"
TriggerAll = Command != "holdfwd" && Command != "holdback"
TriggerAll = Command = "ab" || Command = "x" || Command = "y"
Trigger1 = Time = [0,2]
V = 45
Value = 750
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) = 0
TriggerAll = Var(57)%10 = 3
TriggerAll = Command = "abc" || Command = "x" && Command != "holddown" && Command != "holdfwd" && Command != "holdback"
TriggerAll = FVar(13) = 0
TriggerAll = FVar(29) <= 3000
Trigger1 = Time = [0,2]
V = 45
Value = 850
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) = 0
TriggerAll = Var(57)%10 != 2
TriggerAll = Command = "abc" || Command = "x" && Command != "holddown" && Command != "holdfwd" && Command != "holdback"
TriggerAll = Time = [0,2]
Trigger1 = Var(13) = 1 || Var(13) = 5
Trigger2 = Var(57)%10 = 1 || Var(57)%10 = 4
Trigger2 = FVar(29) >= 1000
Trigger2 = Var(13) = 0
V = 45
Value = 960
IgnoreHitPause = 1

[State -1]
Type = Helper
TriggerAll = Var(0)%10 = 0
TriggerAll = Var(45) >= 1
Trigger1 = MoveHit = 1
StateNo = 8070
ID = 8070
PosType = P1
Pos = 0,-55
Ownpal = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeState
TriggerAll = Var(45) >= 1
Trigger1 = MoveHit = 1
Value = Var(45)

[State -1] 
Type = ChangeState
TriggerAll = Var(59) <= 0
TriggerAll =! MoveHit
TriggerAll = Var(57)%10 != 2
Trigger1 = Command != "A溜め"
Trigger1 = Command != "B溜め"
Trigger1 = Command != "C溜め"
Trigger1 = Command = "Z溜め"
Trigger1 = Time = 5
Trigger1 = FVar(29) > 0
Value = 902

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 =! MoveHit
Trigger1 = AnimElem = 2, = 1
V = 36
Value = Ceil(-50*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,0.70,IfElse(Var(57)%10=3,1.20,1.25))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) < 0
V = 36
Value = 0
IgnoreHitPause = 1


[State -1] 
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1


;---------------------------------------------------------------------------
;立ち　EX-シールド2
[Statedef 901]
Type    = S
MoveType= I
Physics = S
Juggle  = 0
Ctrl = 0
VelSet = 0,0
SprPriority = 2

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = Time = 1
V = 36
Value = Ceil(75*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,1.25,IfElse(Var(57)%10=3,1.11,1.20))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) > 100
V = 36
Value = 100
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) < 0
V = 36
Value = 0
IgnoreHitPause = 1

[State -1]
Type = PowerSet
Trigger1 = Time = 0
Value = Var(15)
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PowerAdd
Trigger1 = Time = 0
Value = 50
IgnoreHitPause = 1

[State -1]
Type = VarSet
Trigger1 = Time = 1
V = 15
Value = 0

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s901, 0+Random%2
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s902, 0+Random%4
Channel = 1
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = ChangeAnim
Trigger1 = Time = 1
Value = 903

[State -1]
Type = Helper
Trigger1 = Time = 0
StateNo = 10910
ID = 10910+Var(57)%10
PosType = P1
Pos = 10,-70
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = 1
V = 2
Value = 302
IgnoreHitPause = 1

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State -1]
Type = Pause
Trigger1 = Time = 0
Time = 13
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Pause
Trigger1 = Time = 1
Time = 4
MoveTime = 4
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Helper
TriggerAll = Var(0)%10 = 0
TriggerAll = Var(45) >= 1
Trigger1 = Time = 1
StateNo = 8070
ID = 8070
PosType = P1
Pos = 10,-70
Ownpal = 1
SprPriority = 4
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeState
TriggerAll = Var(45) >= 1
Trigger1 = Time = 1
Value = Var(45)

[State -1]
Type = ChangeState
Trigger1 = Time = 19
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; 立ち　シールド
[Statedef 902]
Type    = S
Physics = S
Anim    = 902
Ctrl    = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
FV = 26
Value = 0

[State -1]
Type = VarSet
Trigger1 = Anim = 902
V = 15
Value = Power

[State -1]
Type = VarSet
Trigger1 = Anim = 903
V = 15
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = MoveHit = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State -1]
Type = HitOverRide
Trigger1 =! MoveHit
Trigger1 = Anim = 902
Attr = SCA, NP, SP, HP
StateNo = 903
IgnoreHitPause = 1


[State -1]
Type = ReversalDef
Trigger1 = P2StateNo != [400,409]
Trigger1 = Anim = 902
Trigger1 =! MoveContact
Reversal.Attr = SA, NA,SA,HA,NP,SP,HP
NumHits = 0
Pausetime = 13,17
HitSound = S901,0+Random%2
SparkNo = -1
Guard.SparkNo = -1
GetPower = Ceil(50*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000))),0

[State -1]
Type = ReversalDef
Trigger1 = P2StateNo = [400,409]
Trigger1 = Anim = 902
Trigger1 =! MoveContact
Reversal.Attr = C, NA,SA,HA,NP,SP,HP
NumHits = 0
Pausetime = 13,17
HitSound = S901,0+Random%2
SparkNo = -1
Guard.SparkNo = -1
GetPower = Ceil(50*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000))),0

[State -1]
Type = Helper
Trigger1 = MoveHit = 1 && HitPauseTime = 12
StateNo = 10910
ID = 10915+Var(57)%10
PosType = P1
Pos = 10,-70
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = TargetDrop
Trigger1 = NumTarget >= 5
ExcludeID = 900
IgnoreHitPause = 1

[State -1]
Type = PlaySnd
Trigger1 = MoveHit
Value = s902, 0+Random%4
Channel = 1
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = MoveHit = 2
V = 36
Value = Ceil(75*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,1.25,IfElse(Var(57)%10=3,1.11,1.20))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) > 100
V = 36
Value = 100
IgnoreHitPause = 1

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = MoveHit = 2
Trigger2 =! MoveHit
Trigger2 = Anim = 903
Trigger2 = AnimElem = 1, = 1
V = 36
Value = Ceil(-50*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,1.25,IfElse(Var(57)%10=3,1.11,1.20))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) < 0
V = 36
Value = 0
IgnoreHitPause = 1

[State -1] 
Type = ChangeAnim
TriggerAll = Anim = 902
Trigger1 = Command != "Z溜め"
Trigger2 = MoveHit
Trigger3 = Time = IfElse(Var(57)%10=3,45,60)
Trigger4 = FVar(29) = 0 && Var(13) = 0
Trigger5 = Command = "a"
Trigger6 = Command = "b"
Trigger7 = Command = "c"
Value = 903


[State -1]
Type = PowerAdd
Trigger1 = Var(57)%10 = 3
Trigger1 = Var(13) = 0
Trigger1 = Anim = 902
Value = IfElse(Time%10=0,-12,-11)

[State -1]
Type = PowerAdd
Trigger1 = Var(57)%10 != 3
Trigger1 = Var(13) = 0
Trigger1 = Anim = 902
Value = -2


[State -1] 
Type = ChangeState
Trigger1 = Anim = 903
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;立ち　シールド2
[Statedef 903]
Type    = S
MoveType= I
Physics = S
Juggle  = 0
Ctrl = 0
VelSet = 0,0
SprPriority = 2

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0
IgnoreHitPause = 1
Persistent = 0


[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = Time = 1
V = 36
Value = Ceil(75*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,1.25,IfElse(Var(57)%10=3,1.11,1.20))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) > 100
V = 36
Value = 100
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) < 0
V = 36
Value = 0
IgnoreHitPause = 1

[State -1]
Type = VarSet
Trigger1 = Time = 1
FV = 26
Value = 0



[State -1]
Type = PowerSet
Trigger1 = Time = 0
Value = Var(15)
IgnoreHitPause = 1

[State -1]
Type = PowerAdd
Trigger1 = Time = 0
Value = 50
IgnoreHitPause = 1

[State -1]
Type = VarSet
Trigger1 = Time = 1
V = 15
Value = 0

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s901, 0+Random%2
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s902, 0+Random%4
Channel = 1
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
Trigger1 = Time = 1
Value = 903

[State -1]
Type = Helper
Trigger1 = Time = 0
StateNo = 10910
ID = 10915+Var(57)%10
PosType = P1
Pos = 10,-70
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = 1
V = 2
Value = 202
IgnoreHitPause = 1

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State -1]
Type = Pause
Trigger1 = Time = 0
Time = 13
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Pause
Trigger1 = Time = 1
Time = 4
MoveTime = 4
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Helper
TriggerAll = Var(0)%10 = 0
TriggerAll = Var(45) >= 1
Trigger1 = Time = 1
StateNo = 8070
ID = 8070
PosType = P1
Pos = 10,-70
Ownpal = 1
SprPriority = 4
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeState
TriggerAll = Var(45) >= 1
Trigger1 = Time = 1
Value = Var(45)

[State -1]
Type = ChangeState
Trigger1 = Time = 19
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; 立ちシールドカウンター
[Statedef 905]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
Anim = 905
SprPriority = 2

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time <= 11
Value = , NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1


[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 4
Value = s30, 2
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 4
Anim = 208
ID = 906
PosType = P1
Pos = 15,-70
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
RemoveTime = -2
BindTime = -1
RemoveOnGetHit = 1
Persistent = 0

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 5
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 6
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 7
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 8
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = MoveHit = 1
Trigger1 = FVar(1) > 0.50
FV = 1
Value = 0.50
IgnoreHitPause = 1

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 4
Attr = S, SA
AnimType  = Up
Damage    = Ceil(FVar(0)*(50-Var(4)%2))
HitFlag = MAFD
GuardFlag = MA
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 11,11+11*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 11,11
HitSound   = s20,0
GuardSound = s120,0
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = High
Ground.SlideTime = 13
Ground.HitTime  = 13
AirGuard.CtrlTime = 7
Ground.Velocity = 0,-11.5*FVar(36)
Guard.Velocity = -7
Air.Velocity = IfElse(Var(50)=1,0,-6),IfElse(Var(50)=1,-11.5*FVar(36),-2)
AirGuard.Velocity = -4,-1
Down.Velocity = -6,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Fall.XVelocity = 0
EnvShake.Time = 10
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .54
ID = 905
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*50), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*50)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)


[State -1] 
Type = VarSet
Trigger1 = EnemyNear(Var(3)),BackEdgeBodyDist <= 0 || EnemyNear(Var(3)),FrontEdgeBodyDist <= 0
Trigger1 = MoveContact = 1
FV = 25
Value = IfElse(Var(50)=2,-4,-EnemyNear(Var(3)),GetHitVar(XVel)*Facing)
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1] 
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1


;---------------------------------------------------------------------------
; 立ちシールドカウンター改
[Statedef 9051]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
Anim = 9051
SprPriority = 2


[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 55
Range = 0,1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 1
Value = 0

[State -1]
Type = VarSet
Trigger1 = movehit
V = 1
Value = 1
ignorehitpause = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time <= 11
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1


[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s30, 2
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 9
Trigger2 = AnimElem = 12
Trigger3 = AnimElem = 16
Trigger4 = AnimElem = 26
Value = s30, 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 9
Value = s1800, 6
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
trigger1 = var(55) = 0
Trigger1 = AnimElem = 26
Value = s1122, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
trigger1 = var(55) = 1
Trigger1 = AnimElem = 26
Value = s1800, 7
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 3
ID = 9051
PosType = P1
Pos = 5,-90
Anim = 207
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = Explod
Trigger1 = AnimElem = 9
ID = 9051
PosType = P1
Pos = -30,-80
Anim = 1125
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = Explod
Trigger1 = AnimElem = 12
ID = 9051
PosType = P1
Pos = -20,-30
Anim = 1115
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = Explod
Trigger1 = AnimElem = 16
ID = 9051
PosType = P1
Pos = -30,-80
Anim = 1125
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = Explod
Trigger1 = AnimElem = 26
ID = 9051
PosType = P1
Pos = 40,-70
Anim = 226
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 5
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 6
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 7
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 8
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = MoveHit = 1
Trigger1 = FVar(1) > 0.50
FV = 1
Value = 0.50
IgnoreHitPause = 1

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 3
Attr = S, SA
AnimType  = Up
Damage    = Ceil(FVar(0)*(50-Var(4)%2))
HitFlag = MAFD
GuardFlag = MA
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 11,11+11*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 11,11
HitSound   = s20,0
GuardSound = s120,0
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = High
Ground.SlideTime = 13
Ground.HitTime  = 13
AirGuard.CtrlTime = 7
Ground.Velocity = 0,-7.5*FVar(36)
Guard.Velocity = -7
Air.Velocity = IfElse(Var(50)=1,0,-6),IfElse(Var(50)=1,-7.5*FVar(36),-2)
AirGuard.Velocity = -4,-1
Down.Velocity = -6,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Fall.XVelocity = 0
EnvShake.Time = 10
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .54
ID = 9051
Kill = 0
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
Fall.RecoverTime = 0
GetPower = Ceil(FVar(30)*50), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*50)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
Down.Bounce = 1


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 9
Trigger2 = AnimElem = 12
Attr = S, SA
AnimType  = Up
Damage    = Ceil(FVar(0)*(50-Var(4)%2))
HitFlag = MAFD
GuardFlag = MA
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 3,3+3*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 3,3
HitSound   = s20,0
GuardSound = s120,0
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = High
Ground.SlideTime = 13
Ground.HitTime  = 13
AirGuard.CtrlTime = 7
Ground.Velocity = 0,-2.5*FVar(36)
Guard.Velocity = -7
Air.Velocity = IfElse(Var(50)=1,0,-6),IfElse(Var(50)=1,-2.5*FVar(36),-2)
AirGuard.Velocity = -4,-1
Down.Velocity = -6,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Fall.XVelocity = 0
EnvShake.Time = 10
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .54
ID = 9052
Kill = 0
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
Fall.RecoverTime = 0
GetPower = Ceil(FVar(30)*50), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*50)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
Down.Bounce = 1


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 16
Attr = S, SA
AnimType  = Up
Damage    = Ceil(FVar(0)*(50-Var(4)%2))
HitFlag = MAFD
GuardFlag = MA
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 3,3+3*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 3,3
HitSound   = s20,0
GuardSound = s120,0
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = High
Ground.SlideTime = 13
Ground.HitTime  = 13
AirGuard.CtrlTime = 7
Ground.Velocity = 0,-8.5*FVar(36)
Guard.Velocity = -7
Air.Velocity = IfElse(Var(50)=1,0,-6),IfElse(Var(50)=1,-8.5*FVar(36),-2)
AirGuard.Velocity = -4,-1
Down.Velocity = -6,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Fall.XVelocity = 0
EnvShake.Time = 10
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .48
ID = 9052
Kill = 0
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
Fall.RecoverTime = 0
GetPower = Ceil(FVar(30)*50), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*50)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
Down.Bounce = 1


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 26
Attr = S, NA
Damage = Ceil(FVar(0)*(150-Var(4)%2))
AnimType = Hard
HitFlag = MAFD
GuardFlag = 
Priority = 2, Miss
PauseTime = 5,5+5*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 5,5
hitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -60-Random%20
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = Low
Air.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1.5*Var(50),IfElse(Var(50)=1,-8.2,FVar(25))
Air.Velocity = -2*Var(50),IfElse(Var(50)=1,-8,FVar(25))
Down.Velocity = -4,-2.5
Ground.CornerPush.VelOff = -2.5*Var(50)
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -6
YAccel = .48
Kill = 1
Fall = 1
Air.Fall = 1
Fall.Recover = 0
Fall.RecoverTime = 0
GetPower = Ceil(FVar(30)*50), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*50)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 5600
p2facing = 1
Down.Bounce = 1

[State 1450]
type = targetstate
trigger1 = animelemtime(25) >= 0
trigger1 = movehit
value = 5600
IgnoreHitPause = 1
Persistent = 1

[State -2]
Type = Helper
TriggerAll = MoveHit = 1
TriggerAll = P2MoveType = H
Trigger1 = NumHelper(170000) = 0
Trigger1 = NumTarget(5600) > 0
Trigger1 = Target(5600),Time = 0
StateNo = 170000
ID = 170000
PosType = P1
Pos = 80,-60
random = 20,20
Ownpal = 1
Persistent = 0
SprPriority = 5
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = posadd
Trigger1 = AnimElemtime(26) = 0
x = 10
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = posadd
Trigger1 = AnimElemtime(29) = 0
x = -12
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = posadd
Trigger1 = AnimElemtime(30) = 0
x = -8
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1] 
Type = VarSet
Trigger1 = EnemyNear(Var(3)),BackEdgeBodyDist <= 0 || EnemyNear(Var(3)),FrontEdgeBodyDist <= 0
Trigger1 = MoveContact = 1
FV = 25
Value = IfElse(Var(50)=2,-4,-EnemyNear(Var(3)),GetHitVar(XVel)*Facing)
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1


[State -1] 
Type = ChangeState
Trigger1 = AnimTime = 0
Trigger2 = AnimelemTime(6) = 5
Trigger2 = var(1) = 0
Value = 0
Ctrl = 1





;---------------------------------------------------------------------------
; しゃがみ　EX-シールド
[Statedef 910]
Type    = C
Physics = C
Anim    = 910
Ctrl    = 0
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Var(57)%10 = 3
Trigger1 = Var(13) = 4
Trigger1 = Time = 0
FV = 26
Value = 1

[State -1]
Type = VelSet
TriggerAll = Time = 0
Trigger1 = Var(57)%10 != 4
Trigger2 = PrevStateNo != [100,101]
X = 0
Y = 0

[State -1]
Type = VarSet
Trigger1 = Time = [0,5]
V = 15
Value = Power

[State -1] 
Type = null;ChangeAnim
TriggerAll = Anim = 910
Trigger1 = Var(57)%10 != 2
Trigger1 = Time = 4
Trigger2 = MoveHit = 1
Value = 910
Elem = 3

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s900, 0
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarRandom
Trigger1 = AnimElem = 1
V = 1
Range = 0,4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Var(1) = 0
Trigger1 = AnimElem = 1
Value = s1600, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Var(1) = 1
Trigger1 = AnimElem = 1
Value = s1600, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = NotHitBy
Trigger1 = MoveHit = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State -1]
Type = HitOverRide
Trigger1 =! MoveHit
Trigger1 = Time = [0,IfElse((Var(57)%10=2),5,4)]
Attr = SCA, NP, SP, HP
StateNo = 911+IfElse((Var(57)%10=[2,3]),2,0)
IgnoreHitPause = 1

[State -1]
Type = ReversalDef
Trigger1 = (P2StateNo != [200,209]) && (P2StateNo != [600,609])
Trigger1 =! MoveContact
Reversal.Attr = C, NA,SA,HA,NP,SP,HP
Pausetime = 13,17
HitSound = S901,0+Random%2
SparkNo = -1
Guard.SparkNo = -1
NumHits = 0
GetPower = Ceil(50*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000))),0

[State -1]
Type = ReversalDef
Trigger1 = (P2StateNo = [200,209]) || (P2StateNo = [600,609])
Trigger1 =! MoveContact
Reversal.Attr = SA, NA,SA,HA,NP,SP,HP
Pausetime = 13,17
HitSound = S901,0+Random%2
SparkNo = -1
Guard.SparkNo = -1
NumHits = 0
GetPower = Ceil(50*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000))),0



[State -1]
Type = Helper
Trigger1 = Time = 0
StateNo = 940
ID = 941
Name = "Helper"
Pos = 0,0
PosType = P1
Ownpal = 1

[State -1]
Type = Helper
Trigger1 = Time = 0
StateNo = 941
ID = 951
Name = "Helper"
Pos = 0,0
PosType = P1
Ownpal = 1

[State -1]
Type = Helper
Trigger1 = MoveHit = 1 && HitPauseTime = 12
StateNo = 10910
ID = 10910+Var(57)%10
PosType = P1
Pos = 30,-28
Ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = TargetDrop
Trigger1 = NumTarget >= 5
ExcludeID = 900
IgnoreHitPause = 1

[State -1]
Type = PlaySnd
Trigger1 = MoveHit
Value = s902, 0+Random%4
Channel = 1
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = MoveHit = 2
V = 36
Value = Ceil(75*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,1.25,IfElse(Var(57)%10=3,1.11,1.20))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) > 100
V = 36
Value = 100
IgnoreHitPause = 1

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = MoveHit = 2
Trigger2 =! MoveHit
Trigger2 = AnimElem = 2, = 1
V = 36
Value = Ceil(-50*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,1.25,IfElse(Var(57)%10=3,1.11,1.20))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) < 0
V = 36
Value = 0
IgnoreHitPause = 1


[State -1]
Type = VarSet
TriggerAll = Var(59) = 0
TriggerAll = Var(57)/10%10 != 2
TriggerAll = Command = "holdfwd" && Command = "ab" && Command != "holddown" && Command != "holdup" || Command = "holdfwd" && Command = "y" && Command != "holddown" && Command != "holdup"
Trigger1 = Time = [0,2]
V = 45
Value = 100
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) = 0
TriggerAll = Var(57)/10%10 = 2
TriggerAll = Command = "holdfwd" && Command = "ab" && Command != "holddown" && Command != "holdup" || Command = "holdfwd" && Command = "y" && Command != "holddown" && Command != "holdup"
Trigger1 = Time = [0,2]
V = 45
Value = 102
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) = 0
TriggerAll = Var(57)/10%10 != 2
TriggerAll = Command = "holdback" && Command = "ab" && Command != "holddown" && Command != "holdup" || Command = "holdback" && Command = "y" && Command != "holddown" && Command != "holdup"
Trigger1 = Time = [0,2]
V = 45
Value = 105
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) = 0
TriggerAll = Var(57)/10%10 = 2
TriggerAll = Command = "holdback" && Command = "ab" && Command != "holddown" && Command != "holdup" || Command = "holdback" && Command = "y" && Command != "holddown" && Command != "holdup"
Trigger1 = Time = [0,2]
V = 45
Value = 107
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) = 0
TriggerAll = Var(57)%10 != 3 && Var(57)%10 != 5
TriggerAll = Command = "holddown"
TriggerAll = Command != "holdfwd" && Command != "holdback"
TriggerAll = Command = "ab" || Command = "x" || Command = "y"
Trigger1 = Time = [0,2]
V = 45
Value = 750
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) = 0
TriggerAll = Var(57)%10 = 3
TriggerAll = Command = "abc" || Command = "x" && Command != "holddown" && Command != "holdfwd" && Command != "holdback"
TriggerAll = FVar(13) = 0
TriggerAll = FVar(29) <= 3000
Trigger1 = Time = [0,2]
V = 45
Value = 850
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) = 0
TriggerAll = Var(57)%10 != 2
TriggerAll = Command = "abc" || Command = "x" && Command != "holddown" && Command != "holdfwd" && Command != "holdback"
TriggerAll = Time = [0,2]
Trigger1 = Var(13) = 1 || Var(13) = 5
Trigger2 = Var(57)%10 = 1 || Var(57)%10 = 4
Trigger2 = FVar(29) >= 1000
Trigger2 = Var(13) = 0
V = 45
Value = 960
IgnoreHitPause = 1

[State -1]
Type = Helper
TriggerAll = Var(0)%10 = 0
TriggerAll = Var(45) >= 1
Trigger1 = MoveHit = 1
StateNo = 8070
ID = 8070
PosType = P1
Pos = 0,-55
Ownpal = 1
SprPriority = 4
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeState
TriggerAll = Var(45) >= 1
Trigger1 = MoveHit = 1
Value = Var(45)

[State -1] 
Type = ChangeState
TriggerAll = Var(59) <= 0
TriggerAll =! MoveHit
TriggerAll = Var(57)%10 != 2
Trigger1 = Command != "A溜め"
Trigger1 = Command != "B溜め"
Trigger1 = Command != "C溜め"
Trigger1 = Command = "Z溜め"
Trigger1 = Time = 5
Trigger1 = FVar(29) > 0
Value = 912

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 =! MoveHit
Trigger1 = AnimElem = 2, = 1
V = 36
Value = Ceil(-50*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,0.70,IfElse(Var(57)%10=3,1.20,1.25))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) < 0
V = 36
Value = 0
IgnoreHitPause = 1


[State -1] 
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 11
Ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ　EX-シールド2
[Statedef 911]
Type    = C
MoveType= I
Physics = C
Juggle  = 0
Ctrl = 0
VelSet = 0,0
SprPriority = 2

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = Time = 1
V = 36
Value = Ceil(75*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,1.25,IfElse(Var(57)%10=3,1.11,1.20))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) > 100
V = 36
Value = 100
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) < 0
V = 36
Value = 0
IgnoreHitPause = 1

[State -1]
Type = PowerSet
Trigger1 = Time = 0
Value = Var(15)
IgnoreHitPause = 1


[State -1]
Type = PowerAdd
Trigger1 = Time = 0
Value = 50
IgnoreHitPause = 1

[State -1]
Type = VarSet
Trigger1 = Time = 1
V = 15
Value = 0

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s901, 0+Random%2
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s902, 0+Random%4
Channel = 1
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
Trigger1 = Time = 1
Value = 913

[State -1]
Type = Helper
Trigger1 = Time = 0
StateNo = 10910
ID = 10910+Var(57)%10
PosType = P1
Pos = 30,-28
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = 1
V = 2
Value = 302
IgnoreHitPause = 1

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State -1]
Type = Pause
Trigger1 = Time = 0
Time = 13
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Pause
Trigger1 = Time = 1
Time = 4
MoveTime = 4
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Helper
TriggerAll = Var(0)%10 = 0
TriggerAll = Var(45) >= 1
Trigger1 = Time = 1
StateNo = 8070
ID = 8070
PosType = P1
Pos = 0,-55
Ownpal = 1
SprPriority = 4
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeState
TriggerAll = Var(45) >= 1
Trigger1 = Time = 1
Value = Var(45)

[State -1]
Type = ChangeState
Trigger1 = Time = 19
Value = 11
Ctrl = 1

;---------------------------------------------------------------------------
; しゃがみ　シールド
[Statedef 912]
Type    = C
Physics = C
Anim    = 912
Ctrl    = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
FV = 26
Value = 0

[State -1]
Type = VarSet
Trigger1 = Anim = 912
V = 15
Value = Power

[State -1]
Type = VarSet
Trigger1 = Anim = 913
V = 15
Value = 0

[State -1]
Type = PowerAdd
Trigger1 = Var(57)%10 = 3
Trigger1 = Var(13) = 0
Trigger1 = Anim = 912
Value = IfElse(Time%10=0,-12,-11)

[State -1]
Type = PowerAdd
Trigger1 = Var(57)%10 != 3
Trigger1 = Var(13) = 0
Trigger1 = Anim = 912
Value = -2

[State -1]
Type = NotHitBy
Trigger1 = MoveHit = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State -1]
Type = HitOverRide
Trigger1 =! MoveHit
Trigger1 = Anim = 912
Attr = SCA, NP, SP, HP
StateNo = 913
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ReversalDef
Trigger1 = (P2StateNo != [200,209]) && (P2StateNo != [600,609])
Trigger1 = Anim = 912
Trigger1 =! MoveContact
Reversal.Attr = C, NA,SA,HA,NP,SP,HP
NumHits = 0
Pausetime = 13,17
HitSound = S901,0+Random%2
SparkNo = -1
Guard.SparkNo = -1
GetPower = 50,0

[State -1]
Type = ReversalDef
Trigger1 = (P2StateNo = [200,209]) || (P2StateNo = [600,609])
Trigger1 = Anim = 912
Trigger1 =! MoveContact
Reversal.Attr = SA, NA,SA,HA,NP,SP,HP
NumHits = 0
Pausetime = 13,17
HitSound = S901,0+Random%2
SparkNo = -1
Guard.SparkNo = -1
GetPower = 50,0

[State -1]
Type = Helper
Trigger1 = MoveHit
StateNo = 10910
ID = 10915+Var(57)%10
PosType = P1
Pos = 30,-28
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = TargetDrop
Trigger1 = NumTarget >= 5
ExcludeID = 900
IgnoreHitPause = 1

[State -1]
Type = PlaySnd
Trigger1 = MoveHit
Value = s902, 0+Random%4
Channel = 1
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = MoveHit = 2
V = 36
Value = Ceil(75*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,1.25,IfElse(Var(57)%10=3,1.11,1.20))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) > 100
V = 36
Value = 100
IgnoreHitPause = 1

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = MoveHit = 2
Trigger2 =! MoveHit
Trigger2 = Anim = 913 || Anim = 919
Trigger2 = AnimElem = 1, = 1
V = 36
Value = Ceil(-50*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,1.25,IfElse(Var(57)%10=3,1.11,1.20))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) < 0
V = 36
Value = 0
IgnoreHitPause = 1


[State -1] 
Type = ChangeAnim
TriggerAll = Anim = 912
Trigger1 = Command != "Z溜め"
Trigger2 = MoveHit
Trigger3 = Time = IfElse(Var(57)%10=3,44,59)
Trigger4 = FVar(29) = 0 && Var(13) = 0
Trigger5 = Command = "a"
Trigger6 = Command = "b"
Trigger7 = Command = "c"
Value = 913

[State -1] 
Type = ChangeState
Trigger1 = Anim = 913
Trigger1 = AnimTime = 0
Value = 11
Ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ　シールド2
[Statedef 913]
Type    = C
MoveType= I
Physics = C
Juggle  = 0
Ctrl = 0
VelSet = 0,0
SprPriority = 2

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = Time = 1
V = 36
Value = Ceil(75*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,1.25,IfElse(Var(57)%10=3,1.11,1.20))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) > 100
V = 36
Value = 100
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) < 0
V = 36
Value = 0
IgnoreHitPause = 1


[State -1]
Type = VarSet
Trigger1 = Time = 1
FV = 26
Value = 0

[State -1]
Type = PowerSet
Trigger1 = Time = 0
Value = Var(15)
IgnoreHitPause = 1


[State -1]
Type = PowerAdd
Trigger1 = Time = 0
Value = 50
IgnoreHitPause = 1


[State -1]
Type = VarSet
Trigger1 = Time = 1
V = 15
Value = 0

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s901, 0+Random%2
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s902, 0+Random%4
Channel = 1
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
Trigger1 = Time = 1
Value = 913

[State -1]
Type = Helper
Trigger1 = Time = 0
StateNo = 10910
ID = 10915+Var(57)%10
PosType = P1
Pos = 30,-28
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = 1
V = 2
Value = 202
IgnoreHitPause = 1

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State -1]
Type = Pause
Trigger1 = Time = 0
Time = 13
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Pause
Trigger1 = Time = 1
Time = 4
MoveTime = 4
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Helper
TriggerAll = Var(0)%10 = 0
TriggerAll = Var(45) >= 1
Trigger1 = Time = 1
StateNo = 8070
ID = 8070
PosType = P1
Pos = 0,-55
Ownpal = 1
SprPriority = 4
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeState
TriggerAll = Var(45) >= 1
Trigger1 = Time = 1
Value = Var(45)

[State -1]
Type = ChangeState
Trigger1 = Time = 19
Value = 11
Ctrl = 1

;---------------------------------------------------------------------------
; しゃがみシールドカウンター
[Statedef 915]
Type    = C
MoveType= A
Physics = C
Juggle  = 0
Ctrl = 0
Anim = 915
SprPriority = 2

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time <= 11
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1


[State -1]
Type = Explod
Trigger1 = animelem = 3
Anim = 626
ID = 916
PosType = P1
Pos = -20,-70
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0

[State -1]
Type = PlaySnd
Trigger1 = animelem = 3
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 13
Value = s0, 0
Channel = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 5
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 6
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 7
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 8
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = MoveHit = 1
Trigger1 = FVar(1) > 0.50
FV = 1
Value = 0.50
IgnoreHitPause = 1

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 3
Attr = C, SA
Damage    = Ceil(FVar(0)*(150-Var(4)%2))
AnimType  = Hard
HitFlag = MAFD
GuardFlag = LA
Priority  = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 11,11*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 11,11
HitSound   = s20,0
GuardSound = s120,0
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = Trip
Ground.SlideTime = 16
Ground.HitTime  = 16
AirGuard.CtrlTime = 7
Ground.Velocity = -1,-5
Guard.Velocity = -8
Air.Velocity = -1*Var(50),IfElse(Var(50)=1,-5*FVar(36),-2)
AirGuard.Velocity = -4,-1
Down.Velocity = -3,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
Fall.XVelocity = 0
EnvShake.Time = 10
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .54
ID = 915
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*150), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*150)
GivePower = Floor(FVar(31)*150), Floor(0.50*FVar(31)*150)
Down.Bounce = 1


[State -1] 
Type = VarSet
Trigger1 = EnemyNear(Var(3)),BackEdgeBodyDist <= 0 || EnemyNear(Var(3)),FrontEdgeBodyDist <= 0
Trigger1 = MoveContact = 1
FV = 25
Value = IfElse(P2StateType=A&&Var(50)=1,-5,IfElse(Var(50)=2,-5,-5))
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State 1000, 0]
type = StateTypeSet
trigger1 = animelem = 3
statetype = S
physics = S
IgnoreHitPause = 1


[State -1] 
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1


;---------------------------------------------------------------------------
; しゃがみシールドカウンター改
[Statedef 9151]
Type    = C
MoveType= A
Physics = C
Juggle  = 0
Ctrl = 0
Anim = 9151
SprPriority = 2

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 1
Value = 0

[State -1]
Type = VarSet
Trigger1 = movehit
V = 1
Value = 1
ignorehitpause = 1


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time <= 11
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1


[State -1]
Type = Explod
Triggerall = anim = 9151
Trigger1 = AnimElem = 3
ID = 9151
PosType = P1
Pos = -30,-80
Anim = 1125
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1


[State -1]
Type = PlaySnd
Triggerall = anim = 9151
Trigger1 = animelem = 3
Value = s1110, 2
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Triggerall = anim = 9151
Trigger1 = animelem = 3
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Triggerall = anim = 9151
Trigger1 = animelem = 18
Value = s30, 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Triggerall = anim = 9151
Trigger1 = animelem = 23
Value = s30, 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = PlaySnd
Triggerall = anim = 9151
Trigger1 = animelem = 28
Value = s30, 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Explod
Triggerall = anim = 9151
Trigger1 = AnimElem = 18
ID = 9151
PosType = P1
Pos = -15,-25
Anim = 1325
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
RemoveTime = -2
BindTime = -1
RemoveOnGetHit = 1

[State -1]
Type = Explod
Triggerall = anim = 9151
Trigger1 = AnimElem = 23
ID = 9151
PosType = P1
Pos = -15,-35
Anim = 1325
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
RemoveTime = -2
BindTime = -1
RemoveOnGetHit = 1

[State -1]
Type = Explod
Triggerall = anim = 9151
Trigger1 = AnimElem = 28
ID = 9151
PosType = P1
Pos = 0,-40
Anim = 1315
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
RemoveTime = -2
BindTime = -1
RemoveOnGetHit = 1


[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 5
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 6
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 7
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 8
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = MoveHit = 1
Trigger1 = FVar(1) > 0.50
FV = 1
Value = 0.50
IgnoreHitPause = 1


[State 105, 1]
type = Veladd
Trigger1 = anim = 9151
trigger1 = AnimElemTime(12) = 0
x = 3 + enemynear,p2bodydist x / 18
y = -10


[State 105, 1]
type = VelSet
Trigger1 = anim = 9151
trigger1 = AnimElemtime(36) = 1
Trigger2 = anim = 9152
trigger2 = AnimElemtime(4) = 1
x = 0
y = 0

[State 105, 1]
type = posSet
Trigger1 = anim = 9151
trigger1 = AnimElemTime(36) = 1
Trigger2 = anim = 9152
trigger2 = AnimElemtime(4) = 1
y = 0

[State 100]
type = VelAdd
Trigger1 = anim = 9151
trigger1 = AnimElemtime(12) >= 1
trigger1 = AnimElemtime(36) <= 0
Trigger2 = anim = 9152
trigger2 = AnimElemtime(4) <= 0
x = -0.05
y = 0.4




[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 3
Attr = C, SA
Damage    = Ceil(FVar(0)*(50-Var(4)%2))
AnimType  = Hard
HitFlag = MAFD
GuardFlag = LA
Priority  = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 11,11+11*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 11,11
HitSound   = s20,0
GuardSound = s120,0
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = Trip
Ground.SlideTime = 16
Ground.HitTime  = 16
AirGuard.CtrlTime = 7
Ground.Velocity = -0.8,-10
Guard.Velocity = -8
Air.Velocity = -0.8,-10
AirGuard.Velocity = -1.1,-4
Down.Velocity = -3,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
Fall.XVelocity = 0
EnvShake.Time = 10
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .54
ID = 9151
Kill = 0
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*150), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*150)
GivePower = Floor(FVar(31)*150), Floor(0.50*FVar(31)*150)
Down.Bounce = 1


[State -1]
Type = PlaySnd
Triggerall = anim = 9151
Trigger1 = animelem = 18
Value = s220, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = HitDef
Triggerall = anim = 9151
Trigger1 = AnimElem = 18
Trigger2 = AnimElem = 23
Attr = C, SA
Damage = Ceil(FVar(0)*(120-Var(4)%2))
HitFlag = MAFD
GuardFlag = HA
Priority = 2, Hit
PauseTime = 1,1+1*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 1,1
HitSound = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = Hard
Ground.Type = Trip
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -0.5,-4
Guard.Velocity = -6
Air.Velocity = IfElse(Var(50)=1,-0.5,-3),IfElse(Var(50)=1,-3.8,FVar(25))
Down.Velocity = -3,-2.5
Ground.CornerPush.VelOff = -1.5
Guard.CornerPush.VelOff = -7
Air.CornerPush.VelOff = IfElse(Var(50)=1,-1.5,-4)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 0
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*150), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*150)
GivePower = Floor(FVar(31)*150), Floor(0.50*FVar(31)*150)
P2Facing = 1
ID = 91511
Down.Bounce = 1



[State -1]
Type = HitDef
Trigger1 = anim = 9151
Trigger1 = AnimElem = 28
Attr = C, SA
Damage = Ceil(FVar(0)*(250-Var(4)%2))
HitFlag = MAFD
GuardFlag = 
Priority = 2, Hit
PauseTime = 18,18+18*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 18,18
HitSound = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = Hard
Ground.Type = Trip
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -0.5,-4
Guard.Velocity = -6
Air.Velocity = IfElse(Var(50)=1,-0.5,-3),IfElse(Var(50)=1,-3.8,FVar(25))
Down.Velocity = -3,-2.5
Ground.CornerPush.VelOff = -1.5
Guard.CornerPush.VelOff = -7
Air.CornerPush.VelOff = IfElse(Var(50)=1,-1.5,-4)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*150), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*150)
GivePower = Floor(FVar(31)*150), Floor(0.50*FVar(31)*150)
P2Facing = -1
ID = 5600
Down.Bounce = 1


[State 1450]
type = targetstate
Triggerall = anim = 9151
trigger1 = animelemtime(28) >= 0
trigger1 = movehit
value = 5600
IgnoreHitPause = 1
Persistent = 1

[State -2]
Type = Helper
TriggerAll = MoveHit = 1
TriggerAll = P2MoveType = H
Trigger1 = NumHelper(170000) = 0
Trigger1 = NumTarget(5600) > 0
Trigger1 = Target(5600),Time = 0
StateNo = 170000
ID = 170000
PosType = P1
Pos = -50,-30
random = 20,20
Ownpal = 1
Persistent = 0
SprPriority = 5
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -1test]
Type = null;changeanim
Triggerall = anim = 9151
Triggerall = animelemtime(30) = 3
Triggerall = anim != 9152
triggerall = numtarget(5600) = 0
trigger1 = facing = 1
trigger1 = (enemynear,ScreenPos x) - (ScreenPos x) <= 180
trigger2 = facing = -1
trigger2 = (ScreenPos x) - (enemynear,ScreenPos x) <= 180
Value = 1001
IgnoreHitPause = 1
Persistent = 0


[State -1test]
Type = null;changeanim
Triggerall = anim = 9151
Triggerall = animelemtime(30) = 3
Triggerall = anim != 9152
triggerall = numtarget(5600) >= 1
Triggerall = Target(5600),Time >= 10
trigger1 = facing = 1
trigger1 = (enemynear,ScreenPos x) - (ScreenPos x) <= 180
trigger2 = facing = -1
trigger2 = (ScreenPos x) - (enemynear,ScreenPos x) <= 180
Value = 1001
IgnoreHitPause = 1
Persistent = 0


[State -1test]
Type = changeanim
Triggerall = anim = 9151
Triggerall = animelemtime(30) = 2
Triggerall = anim != 9152
trigger1 = facing = 1
trigger1 = (enemynear,ScreenPos x) - (ScreenPos x) <= 120
trigger2 = facing = -1
trigger2 = (ScreenPos x) - (enemynear,ScreenPos x) <= 120
Value = 9152
IgnoreHitPause = 1
Persistent = 0


[State -1]
Type = PlayerPush
Trigger1 = anim = 9151
trigger1 = animelemtime(12) >= 0
trigger1 = animelemtime(36) <= 0
Trigger2 = anim = 9152
trigger2 = animelemtime(4) <= 0
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 105, 1]
type = null;posadd
Trigger1 = anim = 1001
trigger1 = AnimElemtime(4) = 0
x = 8

[State -1]
Type = turn
Trigger1 = anim = 9152
Trigger1 = AnimTime = 0
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = Explod
Trigger1 = anim = 9151
Trigger1 = animelemtime(36) = 1
Trigger2 = anim = 9152
trigger2 = animelemtime(4) = 1
Anim = 10052
ID = 10052
PosType = P1
Pos = 0,0
Ownpal = 1
Scale = 0.5,0.5
SprPriority = 0
IgnoreHitPause = 1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = PlaySnd
Trigger1 = anim = 9151
Trigger1 = animelemtime(36) = 1
Trigger2 = anim = 9152
trigger2 = animelemtime(4) = 1
Value = s40, 1


[State -1] 
Type = VarSet
Trigger1 = EnemyNear(Var(3)),BackEdgeBodyDist <= 0 || EnemyNear(Var(3)),FrontEdgeBodyDist <= 0
Trigger1 = MoveContact = 1
FV = 25
Value = IfElse(P2StateType=A&&Var(50)=1,-5,IfElse(Var(50)=2,-5,-5))
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State 1000, 0]
type = StateTypeSet
Triggerall = anim = 9151
trigger1 = animelem = 3
statetype = S
physics = S
IgnoreHitPause = 1

[State 1000, 0]
type = StateTypeSet
Triggerall = anim = 9151
trigger1 = animelem = 12
statetype = A
Physics = N
IgnoreHitPause = 1

[State 1000, 0]
type = StateTypeSet
Trigger1 = anim = 9151
trigger1 = animelem = 36
Trigger2 = anim = 9152
trigger2 = animelem = 4
statetype = S
physics = S
IgnoreHitPause = 1

[State -1] 
Type = ChangeState
Trigger1 = anim = 9151
Trigger1 = AnimTime = 0
Trigger2 = anim = 9151
Trigger2 = AnimelemTime(7) = 3
Trigger2 = var(1) = 0
Trigger3 = anim = 9152
Trigger3 = AnimTime = 0
Value = 0
Ctrl = 1



;---------------------------------------------------------------------------
; 空中　EX-シールド
[Statedef 920]
Type    = A
Physics = A
Anim    = 920
Ctrl    = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Var(57)%10 = 3
Trigger1 = Var(13) = 4
Trigger1 = Time = 0
FV = 26
Value = 1

[State -1]
Type = VarSet
Trigger1 = Time = [0,10]
V = 15
Value = Power

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s900, 0
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarRandom
Trigger1 = AnimElem = 1
V = 1
Range = 0,4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Var(1) = 0
Trigger1 = AnimElem = 1
Value = s1600, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Var(1) = 1
Trigger1 = AnimElem = 1
Value = s1600, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = NotHitBy
Trigger1 = MoveHit = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State -1]
Type = HitOverRide
Trigger1 =! MoveHit
Trigger1 = Time = [0,9]
Attr = SCA, NP, SP, HP
StateNo = 921+IfElse((Var(57)%10=[2,3]),2,0)
IgnoreHitPause = 1


[State -1]
Type = ReversalDef
Trigger1 =! MoveContact
Reversal.Attr = SCA, NA,SA,HA,NP,SP,HP
Pausetime = 13,17
HitSound = S901,0+Random%2
SparkNo = -1
Guard.SparkNo = -1
NumHits = 0
GetPower = 50,0

[State -1]
Type = Helper
Trigger1 = Time = 0
StateNo = 940
ID = 942
Name = "Helper"
Pos = 0,0
PosType = P1
Ownpal = 1

[State -1]
Type = Helper
Trigger1 = Time = 0
StateNo = 941
ID = 952
Name = "Helper"
Pos = 0,0
PosType = P1
Ownpal = 1

[State -1]
Type = Helper
Trigger1 = MoveHit = 1 && HitPauseTime = 12
StateNo = 10910
ID = 10910+Var(57)%10
PosType = P1
Pos = 13,-70
Ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PosFreeze
Trigger1 = MoveHit = 1

[State -1]
Type = PlaySnd
Trigger1 = MoveHit
Value = s902, 0+Random%4
Channel = 1
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = TargetDrop
Trigger1 = NumTarget >= 5
ExcludeID = 900
IgnoreHitPause = 1

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = MoveHit = 2
V = 36
Value = Ceil(25*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,0.70,IfElse(Var(57)%10=3,1.20,1.25))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) > 100
V = 36
Value = 100
IgnoreHitPause = 1

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 =! MoveHit
Trigger1 = AnimElem = 2, = 1
V = 36
Value = Ceil(-50*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,0.70,IfElse(Var(57)%10=3,1.20,1.25))))
IgnoreHitPause = 1
Persistent = 0


[State 50, 1]
type = VarSet
trigger1 = animelem = 3
sysvar(1) = 0

[State -1] 
Type = ChangeState
TriggerAll = Var(59) <= 0
TriggerAll =! MoveHit
TriggerAll = Var(57)%10 != 2
Trigger1 = Command != "A溜め"
Trigger1 = Command != "B溜め"
Trigger1 = Command != "C溜め"
Trigger1 = Command = "Z溜め"
Trigger1 = Time = 5
Trigger1 = FVar(29) > 0
Value = 922

;---------------------------------------------------------------------------
;空中　EX-シールド2
[Statedef 921]
Type    = A
MoveType= I
Physics = A
SprPriority = 2

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0
IgnoreHitPause = 1
Persistent = 0


[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = Time = 1
V = 36
Value = Ceil(30*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,1.25,IfElse(Var(57)%10=3,1.11,1.20))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) > 100
V = 36
Value = 100
IgnoreHitPause = 1


[State -1]
Type = PowerSet
Trigger1 = Time = 0
Value = Var(15)
IgnoreHitPause = 1


[State -1]
Type = PowerAdd
Trigger1 = Time = 0
Value = 50
IgnoreHitPause = 1


[State -1]
Type = VarSet
Trigger1 = Time = 1
V = 15
Value = 0

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s901, 0+Random%2
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s902, 0+Random%4
Channel = 1
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
Trigger1 = Time = 1
Value = 923

[State -1]
Type = Helper
Trigger1 = Time = 0
StateNo = 10910
ID = 10910+Var(57)%10
PosType = P1
Pos = 13,-70
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = 1
V = 2
Value = 502
IgnoreHitPause = 1

[State -1]
Type = PosFreeze
Trigger1 = Time = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State -1]
Type = Pause
Trigger1 = Time = 0
Time = 13
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Pause
Trigger1 = Time = 1
Time = 4
MoveTime = 4
IgnoreHitPause = 1
Persistent = 0

[State 50, 1]
type = VarSet
trigger1 = animelem = 3
sysvar(1) = 0

;---------------------------------------------------------------------------
; 空中　シールド
[Statedef 922]
Type    = A
Physics = A
Anim    = 922
Ctrl    = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
FV = 26
Value = 0

[State -1]
Type = VarSet
Trigger1 = Anim = 922
V = 15
Value = Power

[State -1]
Type = VarSet
Trigger1 = Anim = 923
V = 15
Value = 0

[State -1]
Type = PowerAdd
Trigger1 = Var(57)%10 = 3
Trigger1 = Var(13) = 0
Trigger1 = Anim = 922
Value = IfElse(Time%10=0,-12,-11)

[State -1]
Type = PowerAdd
Trigger1 = Var(57)%10 != 3
Trigger1 = Var(13) = 0
Trigger1 = Anim = 922
Value = -2



[State -1]
Type = NotHitBy
Trigger1 = MoveHit = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State -1]
Type = HitOverRide
Trigger1 =! MoveHit
Trigger1 = Anim = 922
Attr = SCA, NP, SP, HP
StateNo = 923
IgnoreHitPause = 1


[State -1]
Type = ReversalDef
Trigger1 = Anim = 922
Trigger1 =! MoveContact
Reversal.Attr = SCA, NA,SA,HA,NP,SP,HP
NumHits = 0
Pausetime = 13,17
HitSound = S901,0+Random%2
SparkNo = -1
Guard.SparkNo = -1
GetPower = Ceil(50*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000))),0

[State -1]
Type = Helper
Trigger1 = MoveHit = 1 && HitPauseTime = 12
StateNo = 10910
ID = 10915+Var(57)%10
PosType = P1
Pos = 13,-70
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = TargetDrop
Trigger1 = NumTarget >= 5
ExcludeID = 900
IgnoreHitPause = 1

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = MoveHit = 2
V = 36
Value = Ceil(25*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,0.70,IfElse(Var(57)%10=3,1.20,1.25))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) > 100
V = 36
Value = 100
IgnoreHitPause = 1

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 =! MoveHit
Trigger1 = Anim = 923
Trigger1 = AnimElem = 1, = 1
V = 36
Value = Ceil(-50*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,0.70,IfElse(Var(57)%10=3,1.20,1.25))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) < 0
V = 36
Value = 0
IgnoreHitPause = 1


[State -1] 
Type = ChangeAnim
TriggerAll = Anim = 922
Trigger1 = Command != "Z溜め"
Trigger2 = MoveHit
Trigger3 = Time = IfElse(Var(57)%10=3,44,59)
Trigger4 = FVar(29) = 0 && Var(13) = 0
Trigger5 = Command = "a"
Trigger6 = Command = "b"
Trigger7 = Command = "c"
Value = 923

[State -1]
Type = PlaySnd
Trigger1 = MoveHit
Value = s902, 0+Random%4
Channel = 1
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 50, 1]
type = VarSet
trigger1 = animelem = 3
sysvar(1) = 0

;---------------------------------------------------------------------------
;空中　シールド2
[Statedef 923]
Type    = A
MoveType= I
Physics = A
SprPriority = 2

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarAdd
TriggerAll = Var(0)/10000%10 = 0
TriggerAll = FVar(7) = [1,39]
TriggerAll = EnemyNear(Var(3)),Var(35) > -1
Trigger1 = Time = 1
V = 36
Value = Ceil(30*IfElse(Var(57)%10=1,1.00,IfElse(Var(57)%10=2,1.25,IfElse(Var(57)%10=3,1.11,1.20))))
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Var(36) > 100
V = 36
Value = 100
IgnoreHitPause = 1


[State -1]
Type = VarSet
Trigger1 = Time = 1
FV = 26
Value = 0

[State -1]
Type = PowerSet
Trigger1 = Time = 0
Value = Var(15)
IgnoreHitPause = 1


[State -1]
Type = PowerAdd
Trigger1 = Time = 0
Value = 50
IgnoreHitPause = 1


[State -1]
Type = VarSet
Trigger1 = Time = 1
V = 15
Value = 0

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s901, 0+Random%2
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s902, 0+Random%4
Channel = 1
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
Trigger1 = Time = 1
Value = 923

[State -1]
Type = Helper
Trigger1 = Time = 0
StateNo = 10910
ID = 10915+Var(57)%10
PosType = P1
Pos = 13,-70
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = 1
V = 2
Value = 202
IgnoreHitPause = 1

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State -1]
Type = Pause
Trigger1 = Time = 0
Time = 13
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Pause
Trigger1 = Time = 1
Time = 4
MoveTime = 4
IgnoreHitPause = 1
Persistent = 0

[State 50, 1]
type = VarSet
trigger1 = animelem = 3
sysvar(1) = 0

;---------------------------------------------------------------------------
; 空中シールドカウンター
[Statedef 925]
Type    = A
MoveType= A
Physics = A
Juggle  = 0
VelSet = 0,0
Ctrl = 0
Anim = 925
SprPriority = 2

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time <= 11
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State -1]
Type = VelSet
Trigger1 = Time <= 10
Y = 0

[State -1]
Type = PlaySnd
Trigger1 = Time = 4
Value = s30, 1
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = animelem = 3
Value = s30, 3
Channel = 3
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 3
ID = 926
PosType = P1
Pos = 38,-73
Anim = 615
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1


[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 5
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 6
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 7
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 8
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = MoveHit = 1
Trigger1 = FVar(1) > 0.50
FV = 1
Value = 0.50
IgnoreHitPause = 1

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 3
Attr = A, SA
Damage = Ceil(FVar(0)*(50-Var(4)%2))
HitFlag = MAFD
GuardFlag = HA
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 11,11+11*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 11,11
HitSound   = s20,0
GuardSound = s120,0
SparkNo = -1
Guard.SparkNo = -1
AnimType = Med
Ground.Type = High
Ground.SlideTime = 11
Ground.HitTime  = 11
AirGuard.CtrlTime = 7
Ground.Velocity = -1.8,-7.8*FVar(36)
Guard.Velocity = -6.5
Air.Velocity = -1.8*Var(50),IfElse(Var(50)=1,-7.8*FVar(36),-2)
AirGuard.Velocity = -4,-1
Down.Velocity = -3.6,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Fall.XVelocity = 0
EnvShake.Time = 10
EnvShake.Ampl = 3
EnvShake.Freq = 90
YAccel = .54
ID = 925
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = Ceil(41+Var(41)-FVar(35))
GetPower = Ceil(FVar(30)*50), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*50)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
Down.Bounce = 1


[State -1] 
Type = VarSet
Trigger1 = EnemyNear(Var(3)),BackEdgeBodyDist <= 0 || EnemyNear(Var(3)),FrontEdgeBodyDist <= 0
Trigger1 = MoveContact = 1
FV = 25
Value = IfElse(P2StateType=A&&Var(50)=1,-4.8,IfElse(Var(50)=2,-5.6,-4.8))
IgnoreHitPause = 1
Persistent = 1

[State 50, 1]
type = VarSet
trigger1 = animelem = 3
sysvar(1) = -1

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1


;---------------------------------------------------------------------------
; 空中シールドカウンター改
[Statedef 9251]
Type    = A
MoveType= A
Physics = A
Juggle  = 0
VelSet = 0,0
Ctrl = 0
Anim = 9251
SprPriority = 2

[State -1]
Type = VarAdd
Trigger1 = time = 0
V = 2
Value = 0
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = NotHitBy
Trigger1 = Time <= 11
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 5
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 6
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 7
Value = 1
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = VelSet
triggerall = anim = 9251
Trigger1 = AnimElemtime(1) >= 1
X = 0
Y = 0

[State 1000, 0]
type = StateTypeSet
trigger1 = time = 8
statetype = C
movetype = A
physics = C
ignorehitpause = 1
persistent = 1


[State -1]
type = HitDef
triggerall = anim = 9251
trigger1 = time = 0
attr = S, HA
damage = 0
numhits = 0
animtype = hight
guardflag = 
hitflag = MAFD
priority = 3, Hit
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = -5,-73
hitsound = -1
guardsound = -1
ground.slidetime = 1
ground.hittime = 1
guard.velocity = 0
ground.velocity = 0
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
id = 9251
p2facing = 1
Down.Bounce = 1
GetPower = Ceil(FVar(30)*50), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*50)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)

[State -1]
Type = null;Pause
triggerall = anim = 9251
trigger1 = movehit
Time = 8
movetime = 100
P2DefMul = 1
Darken = 0
Persistent = 0

[State 240, 4]
type = allpalfx
triggerall = anim = 9251
trigger1 = time = 1
time = 8
add = 255,255,255
under = -1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
type = TargetState
triggerall = anim = 9251
trigger1 = movehit
value = 3002
persistent = 0
ignorehitpause = 0
pausemovetime = 0
supermovetime = 999



[State -1]
Type = ChangeAnim
triggerall = anim = 9251
TriggerAll = anim != 913
Trigger1 = numtarget(9251) = 0
Trigger1 = Time = 1
Value = 913
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1


[state -1]
type = TargetBind
triggerall = anim = 9251
trigger1 = time >= 12
trigger1 = time <= 18
pos = -150,floor(Pos y)-20
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1


[State -2]
Type = Helper
Trigger1 = NumHelper(170000) = 0
Trigger1 = animelemtime(3) = 10
StateNo = 170000
ID = 170000
PosType = P1
Pos = -150,-100
random = 20,20
Ownpal = 1
Persistent = 0
SprPriority = 5
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[state -1]
type = posadd
triggerall = anim = 9251
trigger1 = time = 12
x = -ceil(70-frontedgedist)
ignorehitpause = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[state -1]
type = posset
triggerall = anim = 9251
trigger1 = time = 12
y = 0
ignorehitpause = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1


[State -1]
type = TargetState
triggerall = anim = 9251
trigger1 = time = 19
value = 3003
persistent = 0
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1


[State -1]
type = TargetLifeAdd
triggerall = anim = 9251
trigger1 = time = 9
Value = -Ceil(FVar(0)*(300-Var(4)%2))
absolute = 1
kill = 1


[State -1]
type = PlaySnd
triggerall = anim = 9251
trigger1 = time = 8
value = S20, 0
Channel = 3


[State -1]
Type = Explod
triggerall = anim = 9251
Trigger1 = time = 8
Anim = 3207
PosType = left
Pos = ifelse(facing = 1,0,320), 0
facing = ifelse(facing = 1,1,-1)
Ownpal = 1
ontop = 1
SprPriority = 80
BindTime = 999
removetime = 20
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Explod
triggerall = anim = 9251
Trigger1 = time = 8
Anim = 178000
PosType = left
Pos = ifelse(facing = 1,0,320), 0
facing = ifelse(facing = 1,1,-1)
scale = 1.1,1
Ownpal = 1
ontop = 1
SprPriority = 90
BindTime = 999
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1

[State -1]
type = ChangeState
triggerall = anim = 903
trigger1 = !movehit
trigger1 = animtime = 0
value = 0
Ctrl = 1


[State -1]
Type = Pause
Trigger1 = animelemtime(4) >= 0
Trigger1 = animelemtime(7) <= 4
Anim = -1
Time = 1
P2DefMul = 1
Darken = 0
Persistent = 1

[State -1]
Type = turn
Trigger1 = anim = 9251
Trigger1 = AnimTime = 0
IgnoreHitPause = 1
Persistent = 1

[State -1]
type = ChangeState
triggerall = anim = 9251
trigger1 = animtime = 0
value = 0
Ctrl = 1



;---------------------------------------------------------------------------
; シールドバンカー
[Statedef 930]
Type      = S
Physics   = S
Ctrl      = 0
Anim      = 930
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VelSet
TriggerAll = Time = 0
Trigger1 = Var(57)%10 != 4
Trigger2 = PrevStateNo != [100,101]
X = 0
Y = 0

[State -1]
Type = PowerAdd
Trigger1 = Var(13) = 0
Trigger1 = Time = 0
Trigger1 = PrevStateNo = [150,153]
Value = Ceil(IfElse(Var(57)%10=2,-1000,-500)*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))

[State -1]
Type = VarAdd
Trigger1 = Var(13) = [1,4]
Trigger1 = Time = 0
Trigger1 = PrevStateNo = [150,153]
FV = 29
Value = IfElse(Var(13)=4,-600,-1200)

[State -1]
Type = VarSet
Trigger1 = PrevStateNo = [150,153]
Trigger1 = Time = 0
V = 43
Value = 420
IgnoreHitPause = 1

[State -1]
Type = VarSet
Trigger1 = Anim != 934
Trigger1 = Time = [0,9]
V = 15
Value = Power

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(45) = 0
TriggerAll = Command = "jump"
Trigger1 = Time = 0
Trigger1 = PrevStateNo = [150,153]
V = 45
Value = 41

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(45) = 0
TriggerAll = Command = "jump2"
Trigger1 = Time = 0
Trigger1 = PrevStateNo = [150,153]
V = 45
Value = 42

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(45) = 0
TriggerAll = Command = "FF" || Command = "holdfwd" && Command = "ab" && Command != "holddown" && Command != "holdup"
Trigger1 = Time = 0
Trigger1 = PrevStateNo = [150,153]
V = 45
Value = 100

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(45) = 0
TriggerAll = Command = "BB" || Command = "holdback" && Command = "ab" && Command != "holddown" && Command != "holdup"
Trigger1 = Time = 0
Trigger1 = PrevStateNo = [150,153]
V = 45
Value = 105

[State -1]
Type = VarSet
TriggerAll = Var(59) = 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(45) = 0
TriggerAll = PrevStateNo = [150,153]
TriggerAll = Command = "holddown"
TriggerAll = Command != "holdfwd" && Command != "holdback"
TriggerAll = Command = "ab" || Command = "x" || Command = "y"
Trigger1 = Time = 0
V = 45
Value = 750
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Command = "abc" || Command = "x" && Command != "holddown" && Command != "holdfwd" && Command != "holdback"
TriggerAll = Var(45) = 0
TriggerAll = Time = 0
TriggerAll = PrevStateNo = [150,153]
Trigger1 = Var(13) = 1 || Var(13) = 5
Trigger2 = Var(57)%10 = 1 || Var(57)%10 = 4
Trigger2 = FVar(29) >= 1000
Trigger2 = Var(13) = 0
V = 45
Value = 960

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Command = "41236c"
TriggerAll = PrevStateNo = [150,153]
TriggerAll = Time = 0
TriggerAll = Var(45) = 0
Trigger1 = (Var(13) = [1,3]) || Var(13) = 5
V = 45
Value = 3000
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Command = "41236c"
TriggerAll = PrevStateNo = [150,153]
TriggerAll = Time = 0
TriggerAll = Var(45) = 0
Trigger1 = Var(13) = 4
V = 45
Value = 3050
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(57)/100%10 = [1,2]
TriggerAll = Command = "623a" || Command = "623b"
TriggerAll = Var(45) = 0
Trigger1 = PrevStateNo = [150,153]
Trigger1 = Time = 0
V = 45
Value = IfElse(Command = "623a",1210,1260)
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(57)/100%10 = [1,2]
TriggerAll = Command = "623c"
TriggerAll = PrevStateNo = [150,153]
TriggerAll = Time = 0
TriggerAll = Var(45) = 0
Trigger1 = FVar(29) >= 1000
Trigger1 = Var(13) = 0
Trigger2 = Var(13) = [1,5]
V = 45
Value = 2210
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(57)/100%10 = 3
TriggerAll = Command = "623a" || Command = "623b"
TriggerAll = Var(45) = 0
Trigger1 = PrevStateNo = [150,153]
Trigger1 = Time = 0
V = 45
Value = IfElse(Command = "623a",1210,1260)
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(57)/100%10 = 3
TriggerAll = Command = "623c"
TriggerAll = PrevStateNo = [150,153]
TriggerAll = Time = 0
TriggerAll = Var(45) = 0
Trigger1 = FVar(29) >= 1000
Trigger1 = Var(13) = 0
Trigger2 = Var(13) = [1,5]
V = 45
Value = 2210
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(57)/100%10 = [1,2]
TriggerAll = Command = "236a" || Command = "236b"
TriggerAll = Var(45) = 0
Trigger1 = PrevStateNo = [150,153]
Trigger1 = Time = 0
V = 45
Value = IfElse(Command = "236a",1100,1150)
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(57)/100%10 = [1,2]
TriggerAll = Command = "236c"
TriggerAll = PrevStateNo = [150,153]
TriggerAll = Time = 0
TriggerAll = Var(45) = 0
Trigger1 = FVar(29) >= 1000
Trigger1 = Var(13) = 0
Trigger2 = Var(13) = [1,5]
V = 45
Value = 2100
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(57)/100%10 = 3
TriggerAll = NumHelper(1850) + NumHelper(1860) + NumHelper(2850) = 0
TriggerAll = Command = "236a" || Command = "236b"
TriggerAll = Var(45) = 0
Trigger1 = PrevStateNo = [150,153]
Trigger1 = Time = 0
V = 45
Value = IfElse(Command = "236a",1100,1150)
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(57)/100%10 = 3
TriggerAll = NumHelper(1850) + NumHelper(1860) + NumHelper(2850) = 0
TriggerAll = Command = "236c"
TriggerAll = PrevStateNo = [150,153]
TriggerAll = Time = 0
TriggerAll = Var(45) = 0
Trigger1 = FVar(29) >= 1000
Trigger1 = Var(13) = 0
Trigger2 = Var(13) = [1,5]
V = 45
Value = 2100
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(57)/100%10 = 4
TriggerAll = Command = "236a" || Command = "236b" || Command = "236c"
TriggerAll = Var(45) = 0
Trigger1 = PrevStateNo = [150,153]
Trigger1 = Time = 0
V = 45
Value = IfElse(Command = "236a",1100,IfElse(Command = "236b",1150,2100))
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(57)/100%10 = 1
TriggerAll = Command = "63214c"
TriggerAll = NumHelper(1505) + NumHelper(1506) <= 1
TriggerAll = Var(45) = 0
Trigger1 = PrevStateNo = [150,153]
Trigger1 = Time = 0
V = 45
Value = 2700
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(57)/100%10 = 4
TriggerAll = Command = "63214c"
TriggerAll = NumHelper(1550) = 0
TriggerAll = Var(45) = 0
Trigger1 = PrevStateNo = [150,153]
Trigger1 = Time = 0
V = 45
Value = 2700
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(57)/100%10 = 1||Var(57)/100%10 = 4
TriggerAll = Command = "421a" || Command = "421b" || Command = "421c"
TriggerAll = Var(45) = 0
Trigger1 = PrevStateNo = [150,153]
Trigger1 = Time = 0
V = 45
Value = IfElse(Command = "421a",1300,IfElse(Command = "421b",1350,2310))
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(57)/100%10 = 2 || Var(57)/100%10 = 3
TriggerAll = Command = "421a" || Command = "421b" || Command = "421c"
TriggerAll = Var(45) = 0
Trigger1 = PrevStateNo = [150,153]
Trigger1 = Time = 0
V = 45
Value = IfElse(Command = "421a",1600,IfElse(Command = "421b",1610,1620))
IgnoreHitPause = 1



[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = NumHelper(1705) + NumHelper(1715) = 0
TriggerAll = Command = "214a" || Command = "214b"
TriggerAll = Var(45) = 0
Trigger1 = PrevStateNo = [150,153]
Trigger1 = Time = 0
V = 45
Value = IfElse(Command = "214a",1000,1050)
IgnoreHitPause = 1

[State -1]
Type = VarSet
TriggerAll = Var(59) <= 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Command = "214c"
TriggerAll = PrevStateNo = [150,153]
TriggerAll = Time = 0
TriggerAll = Var(45) = 0
TriggerAll = NumHelper(2705) + NumHelper(2755) = 0
Trigger1 = FVar(29) >= 1000
Trigger1 = Var(13) = 0
Trigger2 = Var(13) = [1,5]
V = 45
Value = 2000
IgnoreHitPause = 1



[State -1]
Type = VarSet
TriggerAll = Var(59) = 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(45) = 0
TriggerAll = PrevStateNo = [150,153]
TriggerAll = Command = "az" || Command = "x" && Command != "holddown"
TriggerAll = Time = 0
Trigger1 = Command = "holdfwd"
Trigger2 = Command = "holdback"
V = 45
Value = 800
IgnoreHitPause = 1


[State -1]
Type = Helper
TriggerAll = Var(0)%10 = 0
TriggerAll = Var(57)%10 = 4
TriggerAll = Var(45) >= 1
Trigger1 = PrevStateNo = [150,153]
Trigger1 = NumHelper(8060) = 0
Trigger1 = Time = 0
StateNo = 8060
PosType = P1
Pos = 0, -55
Ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 99999
PauseMoveTime = 99999
ID = 8060

[State -1]
Type = ChangeState
TriggerAll = Var(57)%10 = 4
Trigger1 = Var(45) >= 1
Value = Var(45)

[State -1]
Type = Helper
TriggerAll = Var(0)%10 = 0
Trigger1 = PrevStateNo = [150,153]
Trigger1 = NumHelper(8050) = 0
Trigger1 = Time = 0
StateNo = 8050
PosType = P1
Pos = 0, -55
Ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 99999
PauseMoveTime = 99999
ID = 8050

[State -1]
Type = HitOverRide
Trigger1 =! MoveHit
Trigger1 = Time = [0,9]
Attr = SCA, NP, SP, HP
StateNo = 931
IgnoreHitPause = 1

[State -1]
Type = ReversalDef
TriggerAll = AnimElem = 1
Trigger1 = Anim != 934
Reversal.Attr = SCA, NA,SA,HA,NP,SP,HP
Pausetime = 16,16
HitSound = S901,0+Random%2
SparkNo = -1
Guard.SparkNo = -1
GetPower = 20,0

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s900, 0

[State -1]
Type = Explod
Trigger1 = Anim = 934
Trigger1 = Time = 0
Anim = 10935
ID = 10935
Pos = 20,-63
Scale = 0.5,0.5
PosType = P1
Ownpal = 1
SprPriority = 5
BindTime = -1
IgnoreHitPause = 1

[State -1]
Type = Helper
Trigger1 = Anim = 934
Trigger1 = Time = 0
StateNo = 940
ID = 932
Name = "Helper"
Pos = 0,0
PosType = P1
Ownpal = 1

[State -1]
Type = Helper
TriggerAll = Time = 0
Trigger1 = Anim != 934
StateNo = 940
ID = 931
Name = "Helper"
Pos = 0,0
PosType = P1
Ownpal = 1

[State -1]
Type = Helper
Trigger1 = MoveHit
StateNo = 10930
ID = 10930
PosType = P1
Pos = 30,-65
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 932

[State -1]
Type = ChangeState
Trigger1 = MoveHit = 1
Value = 933

[State -1]
Type = NotHitBy
Trigger1 = Anim = 934
Value = , NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
type = PlaySnd
Trigger1 = Anim = 934
Trigger1 = Time = 0
value = s901, 0 + Random%2

[State -1]
Type = ChangeState
Trigger1 = Anim = 934
Trigger1 = Time = 0
Value = 934


;---------------------------------------------------------------------------
; シールドバンカー2
[Statedef 931]
Type      = S
Physics   = S
Ctrl      = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = PowerSet
Trigger1 = Time = 0
Value = Var(15)
IgnoreHitPause = 1

[State -1]
Type = PowerAdd
Trigger1 = Time = 0
Value = 20
IgnoreHitPause = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 15
Value = 0

[State -1]
Type = Helper
Trigger1 = Time = 0
StateNo = 10930
ID = 10930
PosType = P1
Pos = 30,-65
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s901, 0+Random%2
Channel = 4
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Pause
Trigger1 = Time = 0
Time = 16
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = ChangeState
Trigger1 = Time = 1
Value = 933


;---------------------------------------------------------------------------
;シールドバンカー
[Statedef 932]
Type      = S
Movetype  = A
Physics   = S
Ctrl      = 0
Anim      = 932



[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 2
trigger1 = random < 550
Value = s1800, 3
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s30, 2
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 3
ID = 935
PosType = P1
Pos = 0,-70
Anim = 208
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
BindTime = -1
Removetime = -2
Removeongethit = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 5
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 6
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 7
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 8
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = MoveHit = 1
Trigger1 = FVar(1) > 0.30
FV = 1
Value = 0.30
IgnoreHitPause = 1

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(57)%10 != 4
Trigger1 = AnimElem = 3
Attr = S, SA
Damage = Ceil(FVar(0)*(50-Var(4)%2))
AnimType = Up
HitFlag = MAFD
GuardFlag = M
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 6, 6+6*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 6,6
HitSound = s20, 0
GuardSound = s120, 0
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = High
Air.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0,-11.5*FVar(36)
Guard.Velocity = -7
Air.Velocity = IfElse(Var(50)=1,0,-6),IfElse(Var(50)=1,-11.5*FVar(36),-2)
Down.Velocity = -6,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Fall.XVelocity = 0
YAccel = .54
ID = 930
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = Ceil(36+Var(41)-FVar(35))
GetPower = Ceil(FVar(30)*100), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*100)
GivePower = Floor(FVar(31)*100), Floor(0.50*FVar(31)*100)
Down.Bounce = 1


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(57)%10 = 4
Trigger1 = AnimElem = 3
Attr = S, SA
Damage = Ceil(FVar(0)*(110-Var(4)%2))
AnimType = Up
HitFlag = MAFD
GuardFlag = M
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 6, 6+6*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 6,6
HitSound = s20, 0
GuardSound = s120, 0
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = High
Air.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0,-11.5*FVar(36)
Guard.Velocity = -7
Air.Velocity = IfElse(Var(50)=1,0,-6),IfElse(Var(50)=1,-11.5*FVar(36),-2)
Down.Velocity = -6,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Fall.XVelocity = 0
YAccel = .54
ID = 930
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*100), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*100)
GivePower = Floor(FVar(31)*100), Floor(0.50*FVar(31)*100)
Down.Bounce = 1


[State -1] 
Type = VarSet
Trigger1 = EnemyNear(Var(3)),BackEdgeBodyDist <= 0 || EnemyNear(Var(3)),FrontEdgeBodyDist <= 0
Trigger1 = MoveContact = 1
FV = 25
Value = IfElse(Var(50)=2,-4,-EnemyNear(Var(3)),GetHitVar(XVel)*Facing)
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;シールド成立/強化シールドバンカー
[Statedef 933]
Type      = S
Movetype  = A
Physics   = S
Ctrl      = 0
Anim      = 933

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 3
trigger1 = random < 550
Value = s1110, 3
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s30, 2
Channel = 3
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 8
Value = s30, 3
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 3
ID = 935
PosType = P1
Pos = 0,-70
Anim = 208
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
BindTime = -1
Removetime = -2
Removeongethit = 1


[State -1]
Type = Explod
Trigger1 = AnimElem = 8
ID = 935
PosType = P1
Pos = 20,-50
Anim = 217
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
BindTime = -1
Removetime = -2
Removeongethit = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 5
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 6
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 7
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 8
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = MoveHit = 1
Trigger1 = FVar(1) > 0.30
FV = 1
Value = 0.30
IgnoreHitPause = 1

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(57)%10 != 4
Trigger1 = AnimElem = 3
Attr = S, SA
Damage = Ceil(FVar(0)*(30-Var(4)%2))
AnimType = Up
HitFlag = MAFD
GuardFlag = M
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 3, 6+6*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 6,6
HitSound = s20, 0
GuardSound = s120, 0
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = High
Air.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0,-11.5*FVar(36)
Guard.Velocity = -7
Air.Velocity = IfElse(Var(50)=1,0,-6),IfElse(Var(50)=1,-11.5*FVar(36),-2)
Down.Velocity = -6,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Fall.XVelocity = 0
YAccel = .54
ID = 930
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = Ceil(36+Var(41)-FVar(35))
GetPower = Ceil(FVar(30)*100), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*100)
GivePower = Floor(FVar(31)*100), Floor(0.50*FVar(31)*100)
Down.Bounce = 1


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(57)%10 = 2
Trigger1 = Var(55) = 1
Trigger1 = AnimElem = 3
Attr = S, SA
Damage = Ceil(FVar(0)*(0-Var(4)%2))
AnimType = Hard
HitFlag = MAFD
GuardFlag = M
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 3, 6+6*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 6,6
HitSound = s20, 0
GuardSound = s120, 0
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = High
Air.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1,-7.6
Guard.Velocity = -7
Air.Velocity = IfElse(Var(50)=1,-1,-6),IfElse(Var(50)=1,-7.6,-2)
Down.Velocity = -6,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Fall.XVelocity = 0
YAccel = .54
ID = 930
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = Ceil(36+Var(41)-FVar(35))
GetPower = Ceil(FVar(30)*100), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*100)
GivePower = Floor(FVar(31)*100), Floor(0.50*FVar(31)*100)
Down.Bounce = 1


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(57)%10 = 4
Trigger1 = AnimElem = 3
Attr = S, SA
Damage = Ceil(FVar(0)*(60-Var(4)%2))
AnimType = Up
HitFlag = MAFD
GuardFlag = M
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 3, 6+6*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 6,6
HitSound = s20, 0
GuardSound = s120, 0
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = High
Air.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0,-11.5*FVar(36)
Guard.Velocity = -7
Air.Velocity = IfElse(Var(50)=1,0,-6),IfElse(Var(50)=1,-11.5*FVar(36),-2)
Down.Velocity = -6,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Fall.XVelocity = 0
YAccel = .54
ID = 930
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*100), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*100)
GivePower = Floor(FVar(31)*100), Floor(0.50*FVar(31)*100)
Down.Bounce = 1


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(57)%10 != 4
Trigger1 = AnimElem = 8
Attr = S, SA
Damage = Ceil(FVar(0)*(30-Var(4)%2))
AnimType = Up
HitFlag = MAFD
GuardFlag = M
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 6, 6+6*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 6,6
HitSound = s20, 0
GuardSound = s120, 0
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = High
Air.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0,-11.5*FVar(36)
Guard.Velocity = -7
Air.Velocity = IfElse(Var(50)=1,0,-6),IfElse(Var(50)=1,-11.5*FVar(36),-2)
Down.Velocity = -6,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Fall.XVelocity = 0
YAccel = .54
ID = 931
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = Ceil(36+Var(41)-FVar(35))
GetPower = Ceil(FVar(30)*100), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*100)
GivePower = Floor(FVar(31)*100), Floor(0.50*FVar(31)*100)
Down.Bounce = 1


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(57)%10 = 2
Trigger1 = Var(55) = 1
Trigger1 = AnimElem = 8
Attr = S, SA
Damage = Ceil(FVar(0)*(0-Var(4)%2))
AnimType = Hard
HitFlag = MAFD
GuardFlag = M
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 6, 6+6*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 6,6
HitSound = s20, 0
GuardSound = s120, 0
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = High
Air.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1,-7.6
Guard.Velocity = -7
Air.Velocity = IfElse(Var(50)=1,-1,-6),IfElse(Var(50)=1,-7.6,-2)
Down.Velocity = -6,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Fall.XVelocity = 0
YAccel = .54
ID = 931
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = Ceil(36+Var(41)-FVar(35))
GetPower = Ceil(FVar(30)*100), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*100)
GivePower = Floor(FVar(31)*100), Floor(0.50*FVar(31)*100)
Down.Bounce = 1


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(57)%10 = 4
Trigger1 = AnimElem = 8
Attr = S, SA
Damage = Ceil(FVar(0)*(60-Var(4)%2))
AnimType = Up
HitFlag = MAFD
GuardFlag = M
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 6, 6+6*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 6,6
HitSound = s20, 0
GuardSound = s120, 0
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = High
Air.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0,-11.5*FVar(36)
Guard.Velocity = -7
Air.Velocity = IfElse(Var(50)=1,0,-6),IfElse(Var(50)=1,-11.5*FVar(36),-2)
Down.Velocity = -6,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Fall.XVelocity = 0
YAccel = .54
ID = 931
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*100), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*100)
GivePower = Floor(FVar(31)*100), Floor(0.50*FVar(31)*100)
Down.Bounce = 1


[State -1] 
Type = VarSet
Trigger1 = EnemyNear(Var(3)),BackEdgeBodyDist <= 0 || EnemyNear(Var(3)),FrontEdgeBodyDist <= 0
Trigger1 = MoveContact = 1
FV = 25
Value = IfElse(Var(50)=2,-4,-EnemyNear(Var(3)),GetHitVar(XVel)*Facing)
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;Hガーキャンシールドバンカー
[Statedef 934]
Type      = S
Movetype  = A
Physics   = S
Ctrl      = 0

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = , NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = PalFX
Trigger1 = Time = [0,14]
Time = 1
Add = 210-Var(54),210-Var(54),210-Var(54)

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 5
Value = s30, 2
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 5
ID = 935
PosType = P1
Pos = 0,-70
Anim = 208
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
BindTime = -1
Removetime = -2
Removeongethit = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 5
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 6
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 7
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 8
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = MoveHit = 1
Trigger1 = FVar(1) > 0.30
FV = 1
Value = 0.30
IgnoreHitPause = 1

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(57)%10 != 4
Trigger1 = AnimElem = 5
Attr = S, SA
Damage = Ceil(FVar(0)*(50-Var(4)%2))
AnimType = Up
HitFlag = MAFD
GuardFlag = M
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 6, 6+6*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 6,6
HitSound = s20, 0
GuardSound = s120, 0
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = High
Air.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0,-11.5*FVar(36)
Guard.Velocity = -7
Air.Velocity = IfElse(Var(50)=1,0,-6),IfElse(Var(50)=1,-11.5*FVar(36),-2)
Down.Velocity = -6,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Fall.XVelocity = 0
YAccel = .54
ID = 930
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = Ceil(36+Var(41)-FVar(35))
GetPower = Ceil(FVar(30)*100), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*100)
GivePower = Floor(FVar(31)*100), Floor(0.50*FVar(31)*100)
Down.Bounce = 1


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(57)%10 = 4
Trigger1 = AnimElem = 5
Attr = S, SA
Damage = Ceil(FVar(0)*(110-Var(4)%2))
AnimType = Up
HitFlag = MAFD
GuardFlag = M
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 11,11+11*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 11,11
HitSound = s10, 5
GuardSound = s120, 0
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = High
Air.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1,-9*FVar(36)
Guard.Velocity = -9.5
Air.Velocity = IfElse(Var(50)=1,-1,-4),IfElse(Var(50)=1,-9*FVar(36),-2)
AirGuard.Velocity = -4,-1
Down.Velocity = -4,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Fall.XVelocity = 0
Down.Bounce = 1
EnvShake.Time = 11
EnvShake.Ampl = 3
EnvShake.Freq = 90
P2StateNo = 938
ID = 930
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*100), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*100)
GivePower = Floor(FVar(31)*100), Floor(0.50*FVar(31)*100)
Down.Bounce = 1


[State -1] 
Type = VarSet
Trigger1 = EnemyNear(Var(3)),BackEdgeBodyDist <= 0 || EnemyNear(Var(3)),FrontEdgeBodyDist <= 0
Trigger1 = MoveContact = 1
FV = 25
Value = IfElse(Var(50)=2,-4,-EnemyNear(Var(3)),GetHitVar(XVel)*Facing)
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; Hガードキャンセルシールドバンカー・投げられている相手
[Statedef 938]
Type     = A
MoveType = H
Physics  = N
Ctrl     = 0
VelSet   = 0,0

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
Persistent = 1

[State -1]
Type = HitFallSet
Trigger1 = 1
Value = 0
Persistent = 0

[State -1]
Type = OffSet
Trigger1 = Time >= 0
X = 1
Persistent = 4

[State -1]
Type = OffSet
Trigger1 = Time >= 2
X = -1
Persistent = 4

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5030)
Trigger1 = 1
Value = 5030

[State -1]
Type = ChangeState
Trigger1 = GetHitVar(HitShakeTime) = 0
Value = 939

;---------------------------------------------------------------------------
; Hガードキャンセルシールドバンカー・相手の空中の状態
[Statedef 939]
Type     = A
MoveType = H
Physics  = N
Ctrl     = 0
VelSet = -1,-9

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
Persistent = 1

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5030)
Trigger1 = Time = 0
Value = 5030

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5035)
Trigger1 =! SelfAnimExist(5030)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Value = 5035

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5050)
Trigger1 =! SelfAnimExist(5030)
Trigger1 =! SelfAnimExist(5035)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Trigger3 = Anim = 5035
Trigger3 = AnimTime = 0
Value = 5050

[State -1] ;これは重力これは毎フレーム事に0.4の力が加わります
Type = VelAdd
Trigger1 = 1
y = .6

[State -1] 
Type = HitFallSet
Trigger1 = Vel Y > 0
Trigger1 = Pos Y >= 0
Value = 1

[State -1] 
Type = SelfState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y >= 0
Value = 5100



;---------------------------------------------------------------------------
; イニシアティブヒート
[Statedef 950]
Type    = U
Physics = U
Ctrl    = 0
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
FV = 24
Value = 16
IgnoreHitPause = 1

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State -1]
Type = EnvShake
Trigger1 = Time = 0
Time  = 10
Ampl  = 5
Freq  = 90
IgnoreHitPause = 1

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 0
V = 14
Value = 10
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 0
V = 13
Value = 2
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Time = 0
V = 36
Value = 100
IgnoreHitPause = 1

[State -2]
Type = PlaySnd
TriggerAll = Var(0)/100%10 = 0
Trigger1 = RoundState = 2
Trigger1 = Time = 0
Value = s25000, 0

[State -1]
Type = LifeSet
TriggerAll = Life < FVar(9)
TriggerAll = Alive && Life > 0 && !LoseKO && RoundState = 2
TriggerAll = Var(57)%10 = 3
Trigger1 = RoundState = 2
Trigger1 = Time = 0
Value = Ceil(FVar(9))
IgnoreHitPause = 1

[State -1]
Type = Explod
Trigger1 = NumExplod(10955) = 0
Trigger1 = Time = 0
Anim = 10955
ID = 10955
Postype = P1
Pos = 0,-115
Scale = 0.5,0.5
Ownpal = 1
SprPriority = -5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = StateType != A
Trigger1 = Time = 0
Anim = 10952
ID = 10952
Postype = P1
Pos = 0,0
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = StateType != A
Trigger1 = Time = 0
Anim = 10950
ID = 10950
Postype = P1
Pos = 0,0
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = StateType != A
Trigger1 = Time = 0
Anim = 10951
ID = 10951
Postype = P1
Pos = 0,0
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Helper
TriggerAll = Var(0)%10 = 0
Trigger1 = NumHelper(8040) = 0
Trigger1 = Time = 0
StateNo = 8040
PosType = P1
Pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ID = 8040

[State -1] 
Type = Pause
Trigger1 = Time = 0
Time = 1
MoveTime = 1
IgnoreHitPause = 1
Persistent = 0

[State -1] 
Type = ChangeState
Trigger1 = Time = 0
Value = IfElse(StateType=A,51,0)

;---------------------------------------------------------------------------
;強制開放
[Statedef 960]
Type     = S
MoveType = A
Physics  = S
Anim     = 960
Ctrl     = 0
VelSet = 0,0
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 55
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = [0,20]
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = NotHitBy
Trigger1 = Var(57)%10 = 4
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = EnvShake
Trigger1 = Time = 10
Time  = 25
Ampl  = 5
Freq  = 90

[State -1]
Type = PlaySnd
Trigger1 = Time = 10
Value = s960, 0
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 10
Trigger1 = random < 330
Value = s960, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 10
Trigger1 = random >= 330
Trigger1 = random < 660
Value = s960, 2
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = PalFX
Trigger1 = Time = [9,29]
Time = 1
Add = 160-Var(55),160-Var(55),160-Var(55)
IgnoreHitPause = 1

[State -1]
Type = VarAdd
Trigger1 = Time = [10,29]
V = 55
Value = 8

[State -1]
Type = VarSet
Trigger1 = AnimTime = 0
V = 55
Value = 0

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 9
V = 14
Value = IfElse(Var(13)=0,10,60)
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 9
V = 13
Value = IfElse(Var(13)=0,2,4)
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Time = 15
V = 36
Value = 100
IgnoreHitPause = 1

[State -2]
Type = PlaySnd
TriggerAll = Var(0)/100%10 = 0
Trigger1 = RoundState = 2
Trigger1 = Time = 15
Value = s25000, 0


[State -1]
Type = LifeSet
TriggerAll = Life < FVar(9)
TriggerAll = Alive && Life > 0 && !LoseKO && RoundState = 2
TriggerAll = Var(57)%10 = 3
Trigger1 = RoundState = 2
Trigger1 = Time = 9
Value = Ceil(FVar(9))
IgnoreHitPause = 1

[State -1]
Type = Explod
TriggerAll = Var(57)%10 != 3
Trigger1 = Time = 9
Anim = 10965
ID = 10965
Postype = Left
Pos = Ceil(160*FVar(37)),0
Scale = 0.5,0.5
Ownpal = 1
BindTime = -1
SprPriority = 5
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = Time = 11
Anim = 10952
ID = 10952
Postype = P1
Pos = 10,10
Scale = 0.5,0.5
Vel = 1,0
Accel = .25,0
Facing = -1
Ownpal = 1
SprPriority = 3
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = Time = 11
Anim = 10950
ID = 10950
Postype = P1
Pos = 10,10
Scale = 0.5,0.5
Vel = 1,0
Accel = .25,0
Facing = -1
Ownpal = 1
SprPriority = 3
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = Time = 17
Anim = 10951
ID = 10951
Postype = P1
Pos = 10,10
Scale = 0.5,0.5
Vel = 1,0
Accel = .25,0
Facing = -1
Ownpal = 1
SprPriority = 3
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = Time = 13
Anim = 10952
ID = 10952
Postype = P1
Pos = 26,2
Scale = 0.5,0.5
Vel = -1,0
Accel = -.25,0
Ownpal = 1
SprPriority = 3
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = Time = 19
Anim = 10950
ID = 10950
Postype = P1
Pos = 26,2
Scale = 0.5,0.5
Vel = -1,0
Accel = -.25,0
Ownpal = 1
SprPriority = 3
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = Time = 13
Anim = 10951
ID = 10951
Postype = P1
Pos = 26,2
Scale = 0.5,0.5
Vel = -1,0
Accel = -.25,0
Ownpal = 1
SprPriority = 3
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Helper
TriggerAll = Var(0)%10 = 0
Trigger1 = Time = 11
StateNo = 8030
PosType = P1
Pos = 0, -98
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ID = 8030

[State -1]
Type = Explod
Trigger1 = Time = [17,29]
Anim = 10952
ID = 10952
Postype = P1
Pos = 10,8
Scale = 0.5,0.5
Vel = 1,0
Accel = .25,0
Facing = -1
Ownpal = 1
SprPriority = 3
Persistent = 6
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = Time = [17,29]
Anim = 10950
ID = 10950
Postype = P1
Pos = 10,8
Scale = 0.5,0.5
Vel = 1,0
Accel = .25,0
Facing = -1
Ownpal = 1
SprPriority = 3
Persistent = 6
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = Time = [17,29]
Anim = 10951
ID = 10951
Postype = P1
Pos = 10,8
Scale = 0.5,0.5
Vel = 1,0
Accel = .25,0
Facing = -1
Ownpal = 1
SprPriority = 3
Persistent = 6
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = Time = [17,29]
Anim = 10952
ID = 10952
Postype = P1
Pos = 26,8
Scale = 0.5,0.5
Vel = -1,0
Accel = -.25,0
Ownpal = 1
SprPriority = 3
Persistent = 6
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = Time = [17,29]
Anim = 10950
ID = 10950
Postype = P1
Pos = 26,8
Scale = 0.5,0.5
Vel = -1,0
Accel = -.25,0
Ownpal = 1
SprPriority = 3
Persistent = 6
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = Time = [17,29]
Anim = 10951
ID = 10951
Postype = P1
Pos = 26,8
Scale = 0.5,0.5
Vel = -1,0
Accel = -.25,0
Ownpal = 1
SprPriority = 3
Persistent = 6
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 5
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 6
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 7
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 8
Range = 0,31
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(50) = 1
Trigger1 = Time = 10
Attr = S, NA
Damage = Ceil(FVar(0)*(10-Var(4)%2))
AnimType = Hard
HitFlag = MAFD
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 0, 7+7*IfElse(Var(38)>0,1,0)+Var(41)
SparkNo = -1
Guard.SparkNo = -1
HitSound = s10, 2
Ground.Type = High
Air.Type = High
Ground.SlideTime = 10
Ground.HitTime  = 10
Ground.Velocity = 0
Air.Velocity = IfElse(Var(50)=1,0,-4),IfElse(Var(50)=1,-9*FVar(36),-2)
Down.Velocity = -4,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
Fall.XVelocity = 0
Down.Bounce = 1
P2Facing = 1
Kill = 0
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(0.50*FVar(31)*37)
P2StateNo = 5630
ID = 5600

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(50) = 2
Trigger1 = Time = 10
Attr = S, NA
Damage = Ceil(FVar(0)*(10-Var(4)%2))
AnimType = Hard
HitFlag = MAFD
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 0, 7+7*IfElse(Var(38)>0,1,0)+Var(41)
SparkNo = -1
Guard.SparkNo = -1
HitSound = s10, 2
Ground.Type = High
Air.Type = High
Ground.SlideTime = 10
Ground.HitTime  = 10
Ground.Velocity = 0
Air.Velocity = IfElse(Var(50)=1,0,-4),IfElse(Var(50)=1,-9*FVar(36),-2)
Down.Velocity = -4,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
Fall.XVelocity = 0
Down.Bounce = 1
YAccel = .6
Kill = 0
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = Ceil(37+Var(41)-FVar(35))
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(0.50*FVar(31)*37)
ID = 960

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1

[State -1] 
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1


;---------------------------------------------------------------------------
;空中強制開放
[Statedef 970]
Type     = A
MoveType = A
Physics  = A
Anim     = 970
Ctrl     = 0
VelSet = 0,0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 55
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = [0,12]
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = NotHitBy
Trigger1 = Var(57)%10 = 4
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 14

[State -1]
Type = EnvShake
Trigger1 = Time = 10
Time  = 25
Ampl  = 5
Freq  = 90

[State -1]
Type = PlaySnd
Trigger1 = Time = 10
Value = s960, 0
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 10
Trigger1 = random < 330
Value = s960, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 10
Trigger1 = random >= 330
Trigger1 = random < 660
Value = s960, 2
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PalFX
Trigger1 = Time = [9,29]
Time = 1
Add = 160-Var(55),160-Var(55),160-Var(55)
IgnoreHitPause = 1

[State -1]
Type = VarAdd
Trigger1 = Time = [10,29]
V = 55
Value = 8

[State -1]
Type = VarSet
Trigger1 = AnimTime = 0
V = 55
Value = 0

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 9
V = 14
Value = IfElse(Var(13)=0,10,60)
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = RoundState = 2
Trigger1 = Time = 9
V = 13
Value = IfElse(Var(13)=0,2,4)
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
TriggerAll = Var(0)/10000%10 = 0
Trigger1 = Time = 9
V = 36
Value = 100
IgnoreHitPause = 1

[State -2]
Type = PlaySnd
TriggerAll = Var(0)/100%10 = 0
Trigger1 = RoundState = 2
Trigger1 = Time = 9
Value = s25000, 0


[State -1]
Type = VelSet
Trigger1 = Time <= 28
Y = 0

[State -1]
Type = Helper
TriggerAll = Var(0)%10 = 0
Trigger1 = Time = 4
StateNo = 8040
PosType = P1
Pos = 0, -50
Ownpal = 1
IgnoreHitPause = 1
SuperMoveTime = 99999
PauseMoveTime = 99999
SprPriority = 5
ID = 8040

[State -1]
Type = Explod
TriggerAll = Var(57)%10 != 3
Trigger1 = Time = 9
Anim = 10965
ID = 10965
Postype = Left
Pos = Ceil(160*FVar(37)),0
Scale = 0.5,0.5
Ownpal = 1
BindTime = -1
SprPriority = 5
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = Time = 6
Anim = 10970
ID = 10970
Postype = P1
Pos = 0,0
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 5
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 6
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 7
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 8
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(50) = 1
Trigger1 = Time = 10
Attr = A, NA
Damage = Ceil(FVar(0)*(10-Var(4)%2))
AnimType = Hard
HitFlag = MAFD
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 0, 7+7*IfElse(Var(38)>0,1,0)+Var(41)
SparkNo = -1
Guard.SparkNo = -1
HitSound = s10, 2
Ground.Type = High
Air.Type = High
Ground.SlideTime = 10
Ground.HitTime  = 10
Ground.Velocity = 0
Air.Velocity = IfElse(Var(50)=1,0,-4),IfElse(Var(50)=1,-9*FVar(36),-2)
Down.Velocity = -4,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
Fall.XVelocity = 0
Down.Bounce = 1
P2Facing = 1
Kill = 0
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(0.50*FVar(31)*37)
P2StateNo = 5630
ID = 5600

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(50) = 2
Trigger1 = Time = 10
Attr = A, NA
Damage = Ceil(FVar(0)*(10-Var(4)%2))
AnimType = Hard
HitFlag = MAFD
Priority = IfElse(Var(57)%10=4,4,3), Hit
PauseTime = 0, 7+7*IfElse(Var(38)>0,1,0)+Var(41)
SparkNo = -1
Guard.SparkNo = -1
HitSound = s10, 2
Ground.Type = High
Air.Type = High
Ground.SlideTime = 10
Ground.HitTime  = 10
Ground.Velocity = 0
Air.Velocity = IfElse(Var(50)=1,0,-4),IfElse(Var(50)=1,-9*FVar(36),-2)
Down.Velocity = -4,-2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
Fall.XVelocity = 0
Down.Bounce = 1
YAccel = .6
Kill = 0
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = Ceil(37+Var(41)-FVar(35))
GetPower = 0
GivePower = Floor(FVar(31)*37), Floor(0.50*FVar(31)*37)
ID = 970

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State 50, 1]
type = VarSet
trigger1 = animelem = 8
sysvar(1) = 0

[State -1]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;無名の月-ＥＸ
[Statedef 2000]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
Anim      = 2000
PowerAdd  = 0
Facep2 = 1


[State -1]
Type = PowerAdd
Triggerall = anim = 2000
Trigger1 = AnimElem = 4
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))

[State -1]
Type = VarAdd
Trigger1 = AnimElem = 4
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)


[State -1]
Type = Helper
Trigger1 = anim = 2000
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 2,-50
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 7
Value = 0


[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 43

[State -1]
Type = SuperPause
Trigger1 = anim = 2000
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = anim = 2000
Trigger1 = AnimElem = 1
V = 44
Value = 35


[State -1]
Type = PlaySnd
Trigger1 = anim = 2000
Trigger1 = AnimElem = 1
Value = s2000, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = PlaySnd
Trigger1 = anim = 2000
Trigger1 = AnimElem = 12
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = anim = 2000
Trigger1 = AnimElem = 1
Value = s2000, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = anim = 2000
Trigger1 = AnimElem = 12
Value = s1050, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Explod
Trigger1 = anim = 2000
Trigger1 = AnimElem = 12
ID = 2005
PosType = P1
Pos = 10,-40
Anim = 2005
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
RemoveTime = -2
BindTime = -1
RemoveOnGetHit = 1



[State 105, 1]
type = Veladd
Trigger1 = anim = 2000
trigger1 = AnimElemTime(5) = 0
x = 7.0
y = -7.6


[State 105, 1]
type = VelSet
Trigger1 = anim = 2000
trigger1 = AnimElemtime(18) = 1
Trigger2 = anim = 1001
trigger2 = AnimElemtime(4) = 1
x = 0
y = 0

[State 105, 1]
type = posSet
Trigger1 = anim = 2000
trigger1 = AnimElemTime(18) = 1
Trigger2 = anim = 1001
trigger2 = AnimElemtime(4) = 1
y = 0

[State 100]
type = VelAdd
Trigger1 = anim = 2000
trigger1 = AnimElemtime(5) >= 1
trigger1 = AnimElemtime(18) <= 0
Trigger2 = anim = 1001
trigger2 = AnimElemtime(4) <= 0
x = -0.1
y = 0.4

[State 100]
type = StateTypeSet
Trigger1 = anim = 2000
trigger1 = AnimElemtime(5) >= 1
trigger1 = AnimElemtime(18) <= 0
Trigger2 = anim = 1001
trigger2 = AnimElemtime(4) <= 0
statetype = A
Physics = N

[State 100]
type = StateTypeSet
Trigger1 = anim = 2000
trigger1 = AnimElemtime(18) >= 1
Trigger2 = anim = 1001
trigger2 = AnimElemtime(4) >= 1
statetype = S
Physics = N


[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = anim = 2000
Trigger1 = AnimElem = 12
Attr = C, SA
Damage = Ceil(FVar(0)*(150-Var(4)%2))
HitFlag = MAFD
GuardFlag = HA
Priority = 2, Hit
PauseTime = 18,25+25*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 8,8
HitSound = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = Hard
Ground.Type = Trip
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -0.5,-8
Guard.Velocity = -6
Air.Velocity = IfElse(Var(50)=1,-0.5,-3),IfElse(Var(50)=1,-3.8,FVar(25))
Down.Velocity = -3,-2.5
Ground.CornerPush.VelOff = -1.5
Guard.CornerPush.VelOff = -7
Air.CornerPush.VelOff = IfElse(Var(50)=1,-1.5,-4)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*120), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*120)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 2000
Down.Bounce = 1


[State -1]
Type = ctrlset
Triggerall = anim = 2000
Triggerall = animelemtime(12) >= 0
Trigger1 = numtarget(2000) >= 1
Trigger2 = moveguarded
value = 1
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = changeanim
Triggerall = anim = 2000
Triggerall = animelemtime(12) = 4
Triggerall = anim != 1001
trigger1 = facing = 1
trigger1 = (enemynear,ScreenPos x) - (ScreenPos x) <= 15
trigger2 = facing = -1
trigger2 = (ScreenPos x) - (enemynear,ScreenPos x) <= 15
Value = 1001
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = PlayerPush
Trigger1 = anim = 2000
trigger1 = animelemtime(5) >= 0
trigger1 = animelemtime(18) <= 0
Trigger2 = anim = 1001
trigger2 = animelemtime(4) <= 0
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 105, 1]
type = null;posadd
Trigger1 = anim = 1001
trigger1 = AnimElemtime(4) = 0
x = 8

[State -1]
Type = turn
Trigger1 = anim = 1001
Trigger1 = AnimTime = 0
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = Explod
Trigger1 = anim = 2000
Trigger1 = animelemtime(18) = 1
Trigger2 = anim = 1001
trigger2 = animelemtime(4) = 1
Anim = 10052
ID = 10052
PosType = P1
Pos = 0,0
Ownpal = 1
Scale = 0.5,0.5
SprPriority = 0
IgnoreHitPause = 1
RemoveTime = -2
RemoveOnGetHit = 1

[State -2]
Type = VarSet
Triggerall = numtarget(2000) >= 1
Trigger1 = anim = 2000
Trigger1 = animelemtime(18) = 3
Trigger2 = anim = 1001
trigger2 = animelemtime(4) = 3
V = 2
Value = 412
IgnoreHitPause = 1


[State -1]
Type = PlaySnd
Trigger1 = anim = 2000
Trigger1 = animelemtime(18) = 1
Trigger2 = anim = 1001
trigger2 = animelemtime(4) = 1
Value = s40, 1



[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1






;---------------------------------------------------------------------------
;双ね鐘楼　EX
[Statedef 2100]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
PowerAdd= 0
Ctrl = 0
VelSet = 0,0
Anim = 2100
SprPriority = 2
Facep2 = 1


[State -1]
Type = PowerAdd
Trigger1 = AnimElem = 3
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))


[State -1]
Type = VarAdd
Trigger1 = AnimElem = 3
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -2]
Type = Width
Trigger1 = 1
Edge = 25,0
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 35

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 0,-25
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 4
Value = s110, 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 1
Range = 0,1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = var(1) = 0
Trigger1 = AnimElem = 1
Value = s2100, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = var(1) = 1
Trigger1 = AnimElem = 1
Value = s2110, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 9
Value = s2100, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = var(1) = 0
Trigger1 = AnimElem = 29
Value = s2100, 2
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = var(1) = 1
Trigger1 = AnimElem = 29
Value = s1110, 3
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElemtime(4) = 0 || AnimElemtime(9) = 0|| AnimElemtime(13) = 0|| AnimElemtime(17) = 0|| AnimElemtime(21) = 0|| AnimElemtime(25) = 0|| AnimElemtime(29) = 0
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -1]
Type = null;PosAdd
Trigger1 = animelemTime(4) = 0
X = 15


[State -1]
Type = veladd
Trigger1 = animelemTime(4) = 0
X = 15


[State -1]
Type = PosAdd
Trigger1 = AnimElem = 9 || AnimElem = 13 || AnimElem = 17
trigger2 = AnimElem = 21|| AnimElem = 25 || AnimElem = 29
X = 10


[State -1]
Type = Explod
Trigger1 = AnimElem = 4 
ID = 1105
PosType = P1
Pos = 15,-35
Anim = 1105
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = Explod
Trigger1 = AnimElem = 9 || AnimElem = 17 || AnimElem = 25
ID = 1115
PosType = P1
Pos = -20,-30
Anim = 1115
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = Explod
Trigger1 = AnimElem = 13 || AnimElem = 21
ID = 1125
PosType = P1
Pos = -30,-80
Anim = 1125
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 1
RemoveTime = -2
RemoveOnGetHit = 1


[State -1]
Type = Explod
Trigger1 = AnimElem = 29
ID = 1127
PosType = P1
Pos = -20,-70
Anim = 626
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1


[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarRandom
Trigger1 = MoveHit = 1
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = animelem = 4
Attr = S, SA
Damage = Ceil(FVar(0)*(80-Var(4)%2)), Ceil(FVar(1)*6)
HitFlag = MAFD
GuardFlag = M
Priority = 2, Hit
PauseTime = 6,6+6*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 6,6
HitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -70-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = Hard
Ground.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -3.5
Air.Velocity = -.5*Var(50),IfElse(Var(50)=1,-7,FVar(25))
Down.Velocity = -.5,-4
Ground.CornerPush.VelOff = -6.5
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = Ceil(36+Var(41)-FVar(35))
GetPower = 0, 0
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 2100
Down.Bounce = 1

[State -1]
Type = VarSet
Trigger1 = Var(50) = 2
Trigger1 = MoveHit = 1
Trigger1 = FVar(1) > 0.01
FV = 1
Value = 0.65*FVar(1)
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Explod
Trigger1 = Var(50) = 2
Trigger1 = MoveHit = 1
ID = 10840
PosType = P2
Pos = 0,Const(Size.Mid.Pos.Y)
Anim = 10840
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(50) = 2
Trigger1 = NumTarget(2200) > 0
Trigger1 = Target(2200),StateNo = 5030 || Target(2200),StateNo = 5080
V = 50
Value = 1
IgnoreHitPause = 1



[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 9 || AnimElem = 17
trigger2 = AnimElem = 25
Attr = S, SA
Damage = Ceil(FVar(0)*(10-Var(4)%2)), Ceil(FVar(1)*8)
HitFlag = MAFD
GuardFlag = M
Priority = 2, Hit
PauseTime = 2,5+5*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 2,5
HitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -70-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = hard
Ground.Type = low
Air.type = low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -.5
Air.Velocity = -.2,-3
Down.Velocity = -.2,-3
Ground.CornerPush.VelOff = -6.5
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = Ceil(35+Var(41)-FVar(35))
GetPower = 0, 0
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 2110
Down.Bounce = 1

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 13
trigger2 = AnimElem = 21
Attr = S, SA
Damage = Ceil(FVar(0)*(10-Var(4)%2)), Ceil(FVar(1)*8)
HitFlag = MAFD
GuardFlag = M
Priority = 2, Hit
PauseTime = 2,5+5*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 2,5
HitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -70-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = hard
Ground.Type = high
Air.type = high
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -.5
Air.Velocity = -.2,-3
Down.Velocity = -.2,-3
Ground.CornerPush.VelOff = -6.5
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = Ceil(35+Var(41)-FVar(35))
GetPower = 0, 0
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 2110
Down.Bounce = 1




[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 29
Attr = S, SA
Damage = Ceil(FVar(0)*(80-Var(4)%2)), Ceil(FVar(1)*12)
HitFlag = MAFD
GuardFlag = M
Priority = 2, Hit
PauseTime = 20,20+20*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 20,20
HitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -70-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = up
Ground.Type = High
air.type = high
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1,-10
Air.Velocity = -.05*Var(50),-10
Down.Velocity = -3,-10
Ground.CornerPush.VelOff = -13
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = Ceil(50+Var(41)-FVar(35))
GetPower = 0, 0
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 2150
Down.Bounce = 1


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1


;---------------------------------------------------------------------------
;鐘楼・清姫通し-EX
[Statedef 2150]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
PowerAdd= 0
Ctrl = 0
VelSet = 0,0
Anim = 2200
SprPriority = 2
Facep2 = 1


[State -1]
Type = PowerAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))

[State -1]
Type = VarAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 35

[State -1]
Type = Helper
Trigger1 = anim = 2200
Trigger1 = AnimElem = 1
Trigger1 = numhelper(2170) = 0
StateNo = 2170
ID = 2170
Ownpal = 1
Keyctrl = 0
SprPriority = -5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = SuperPause
Trigger1 = anim = 2200
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = anim = 2200
Trigger1 = AnimElem = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = anim = 2200
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 0,-25
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = anim = 2200
Trigger1 = AnimElem = 4
Value = s110, 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = anim = 2200
Trigger1 = AnimElem = 1
Value = s2000, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = PlaySnd
Trigger1 = anim = 2200
Trigger1 = AnimElemtime(4) = 0
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = veladd
Trigger1 = anim = 2200
Trigger1 = animelemTime(4) = 0
X = 15

[State -1]
Type = velset
Trigger1 = anim = 2200
Trigger1 = vel x < 10
Trigger1 = animelemTime(4) >= 0
Trigger1 = animelemTime(8) <= 0
X = 10

[State -1]
Type = Explod
Trigger1 = anim = 2200
Trigger1 = AnimElem = 4 
ID = 2150
PosType = P1
Pos = 15,-35
Anim = 1105
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 1
RemoveTime = -2
RemoveOnGetHit = 1


[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarRandom
Trigger1 = MoveHit = 1
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = anim = 2200
Trigger1 = animelem = 4
Attr = S, SA
Damage = Ceil(FVar(0)*(120-Var(4)%2)), Ceil(FVar(1)*6)
HitFlag = MAFD
GuardFlag = M
Priority = 2, Hit
PauseTime = 0,6+6*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 6,6
HitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -70-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = Hard
Ground.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -3.5
Air.Velocity = -.5*Var(50),IfElse(Var(50)=1,-7,FVar(25))
Down.Velocity = -3,-2.5
Ground.CornerPush.VelOff = -6.5
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 0
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = Ceil(36+Var(41)-FVar(35))
GetPower = 0, 0
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 2150
p2facing = 1
Down.Bounce = 1


[State 1450]
type = targetstate
Trigger1 = anim = 2200
trigger1 = animelemtime(4) >= 0
trigger1 = movehit
value = 2160
IgnoreHitPause = 1
Persistent = 1

[State -1test]
Type = changeanim
Trigger1 = Movehit
Trigger1 = anim = 2200
Trigger1 = anim != 2210
Value = 2210
IgnoreHitPause = 1
Persistent = 0


[State -1]
Type = PlaySnd
Trigger1 = anim = 2210
Trigger1 = AnimElem = 3
Value = s2150, ifelse(random<=500,0,1)
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = velset
Trigger1 = anim = 2210
Trigger1 = animelemTime(1) >= 0
Trigger1 = animelemTime(7) <= 3
X = 6

[State 1450]
type = targetstate
Trigger1 = anim = 2210
trigger1 = animelemtime(10) = 0
trigger1 = numtarget(2150) >= 1
value = 2161
IgnoreHitPause = 1
Persistent = 1

[State 1450]
type = playsnd
Trigger1 = anim = 2210
trigger1 = animelemtime(10) = 0
value = s20, 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -2]
Type = Helper
Trigger1 = anim = 2210
trigger1 = animelemtime(10) = 0
StateNo = 16200;160000
ID = 16200+IfElse(Var(38)=0,0,10);160003
PosType = P2
Pos = IfElse(MoveType=H,Ceil(P2Dist X/2),0),-60-Ceil(P2BodyDist Y)
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = TargetLifeAdd
Trigger1 = anim = 2210
trigger1 = animelemtime(10) = 0
Value = -Ceil(FVar(0)*(180-Var(4)%2))
kill = 1

[State -1]
Type = Pause
Trigger1 = anim = 2210
Trigger1 = animelemtime(1) >= 1
trigger1 = RoundState = 2
Anim = -1
Time = 2
P2DefMul = 1
Persistent = 1

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1



[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1


[State -1test]
Type = changeanim
Triggerall = anim = 2200
Triggerall = animelemtime(6) = 2
Triggerall = anim != 1250
trigger1 = facing = 1
trigger1 = (enemynear,ScreenPos x) - (ScreenPos x) <= 15
trigger2 = facing = -1
trigger2 = (ScreenPos x) - (enemynear,ScreenPos x) <= 15
Value = 1250
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = PlayerPush
Trigger1 = anim = 2200
trigger1 = animelemtime(4) >= 0
trigger1 = animelemtime(8) <= 2
Trigger2 = anim = 1250
trigger2 = animelemtime(3) <= 2
Trigger3 = anim = 2210
trigger3 = animelemtime(11) <= 2
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = turn
Triggerall = AnimTime = 0
Trigger1 = anim = 1250 || anim = 2210
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1



;---------------------------------------------------------------------------
;鐘楼・清姫通し-EX ヘルパー
[Statedef 2170]
Type = A
Physics = N
SprPriority = -5

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = VarAdd
Trigger1 = Parent,Anim = 2200 || Parent,Anim = 2210 || Parent,Anim = 1250
Trigger1 = Parent,Time = 1
V = 7
Value = 80
IgnoreHitPause = 1

[State -1]
Type = AllPalFx
Trigger1 = Parent,Anim = 2200 || Parent,Anim = 2210 || Parent,Anim = 1250
Trigger1 = Parent,Time = [0,1]
Time = 1
Add = 200-Var(7),200-Var(7),200-Var(7)
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = EnvColor
Trigger1 = Parent,Anim = 2200 || Parent,Anim = 2210 || Parent,Anim = 1250
Trigger1 = Parent,Time = [0,1]
Time = 1
Value = 200,200,200
Under = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = BGPalFx
Trigger1 = Parent,Time >= 0
Time = 2
Add = -255,-255,-255
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -2]
Type = AssertSpecial
Trigger1 = 1
Flag = Noshadow
Flag2 = Invisible
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = DestroySelf
Trigger1 = Parent,Anim = 2200
Trigger1 = Parent,AnimTime = 3
Trigger2 = Parent,Anim = 2210
Trigger2 = Parent,AnimTime = 3
Trigger3 = Parent,Anim = 1250
Trigger3 = Parent,AnimTime = 3
Trigger4 = Parent,Anim != 2200 && Parent,Anim != 2210 && Parent,Anim != 1250
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999




;---------------------------------------------------------------------------
;隠しナイフ-EX ヘルパー
[Statedef 250010]
Type = A
Physics = N
SprPriority = -5

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = VarAdd

Trigger1 = Parent,Time = 1
V = 7
Value = 80
IgnoreHitPause = 1

[State -1]
Type = AllPalFx
Trigger1 = Parent,Anim = 250000
Trigger1 = Parent,Time = [0,1]
Time = 1
Add = 200-Var(7),200-Var(7),200-Var(7)
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = EnvColor
Trigger1 = Parent,Anim = 250000
Trigger1 = Parent,Time = [0,1]
Time = 1
Value = 200,200,200
Under = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = BGPalFx
Trigger1 = Parent,Time >= 0
Time = 2
Add = -255,-255,-255
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -2]
Type = AssertSpecial
Trigger1 = 1
Flag = Noshadow
Flag2 = Invisible
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = DestroySelf
Trigger1 = Parent,Anim = [250000,250005]
Trigger1 = Parent,AnimTime = 3
Trigger2 = Parent,Anim != [250000,250005]
Trigger2 = Parent,Anim != 1123
Trigger3 = Parent,Anim = 1123
Trigger3 = Parent,AnimTime = 3
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


;---------------------------------------------------------------------------
;投げられている相手
[Statedef 2160]
Type    = A
MoveType= H
Physics = N
VelSet = 0,0

[State 9000, 1]
type = ScreenBound
trigger1 = 1
movecamera = 0,0

[State 105, 1]
type = posSet
Trigger1 = time = 0
Trigger1 = pos y > 0
y = 0

[State 105, 1]
type = posadd
Trigger1 = BackEdgeDist <= 15
x = 30

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitOverRide
Trigger1 = 1
Attr = , NT, ST, HT
Time = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
Trigger1 = 1
Value = 5011

[State -1] 
Type = SelfState
Trigger1 = Time >= 30
Trigger1 = P2MoveType != A
Value = 5035

;---------------------------------------------------------------------------
;相手の空中の状態
[Statedef 2161]
Type    = A
MoveType= H
Physics = N

[State 9000, 1]
type = ScreenBound
trigger1 = 1
movecamera = 0,0

[State -1]
Type = veladd
Trigger1 = time = 0
X = -.4
Y = -9.5

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 30
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5061)
Trigger1 = Time = 0
Value = 5061

[State -1]
Type = ChangeAnim
TriggerAll =! SelfAnimExist(5061)
TriggerAll = SelfAnimExist(5030)
Trigger1 = Time = 0
Value = 5030

[State -1]
Type = ChangeAnim
TriggerAll =! SelfAnimExist(5061)
TriggerAll = SelfAnimExist(5035)
Trigger1 =! SelfAnimExist(5030)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Value = 5035

[State -1]
Type = ChangeAnim
TriggerAll =! SelfAnimExist(5061)
TriggerAll = SelfAnimExist(5050)
Trigger1 =! SelfAnimExist(5030)
Trigger1 =! SelfAnimExist(5035)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Trigger3 = Anim = 5035
Trigger3 = AnimTime = 0
Value = 5050

[State -1]
Type = VelAdd
Trigger1 = 1
Y = .45

[State -1] 
Type = HitFallSet
Trigger1 = 1
Value = 1 

[State -1] 
Type = SelfState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y >= 0
Value = 5100 




;---------------------------------------------------------------------------
;鐘楼 追い兎　EX
[Statedef 1125]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
PowerAdd= 0
Ctrl = 0
VelSet = 0,0
Anim = 11250
SprPriority = 2
Facep2 = 1


[State -1]
Type = PowerAdd
Trigger1 = AnimElem = 3
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))


[State -1]
Type = VarAdd
Trigger1 = AnimElem = 3
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)


[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 1
Range = 0,1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -2]
Type = Width
Trigger1 = 1
Edge = 25,0
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 35

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 0,-25
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 9
ID = 107
PosType = P1
Pos = -15,0
Anim = 107
Ownpal = 1
bindtime = 1
SprPriority = 4
Persistent = 0
RemoveTime = -2


[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 9
Value = s110, 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
trigger1 = var(1) = 0
Trigger1 = AnimElem = 1
Value = s2100, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = PlaySnd
trigger1 = var(1) = 1
Trigger1 = AnimElem = 1
Value = s2110, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
trigger1 = var(1) = 0
Trigger1 = AnimElem = 20
Value = s2800, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
trigger1 = var(1) = 1
Trigger1 = AnimElem = 20
Value = s1122, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = PlaySnd
Trigger1 = AnimElemtime(3) = 0 || AnimElemtime(9) = 0|| AnimElemtime(14) = 0|| AnimElemtime(21) = 0
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = null;PosAdd
Trigger1 = animelemTime(4) = 0
X = 15

[State -1]
Type = veladd
Trigger1 = animelemTime(9) = 0
X = 18

[State -1]
Type = Explod
Trigger1 = AnimElem = 3
ID = 11250
PosType = P1
Pos = -30,-80
Anim = 1125
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = Explod
Trigger1 = AnimElem = 9
ID = 11250
PosType = P1
Pos = 15,-35
Anim = 1105
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = Explod
Trigger1 = AnimElem = 14
ID = 11250
PosType = P1
Pos = -20,-30
Anim = 1115
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarRandom
Trigger1 = MoveHit = 1
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = animelem = 3
Attr = S, SA
Damage = Ceil(FVar(0)*(100-Var(4)%2)), Ceil(FVar(1)*6)
HitFlag = MAFD
GuardFlag = M
Priority = 2, Hit
PauseTime = 8,20+20*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 6,6
HitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -70-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = Hard
Ground.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -20
Air.Velocity = -2.5*Var(50),IfElse(Var(50)=1,-7,FVar(25))
Down.Velocity = -3,-2.5
Ground.CornerPush.VelOff = -6.5
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 0
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = Ceil(50+Var(41)-FVar(35))
GetPower = 0, 0
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 1124
Down.Bounce = 1

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 9
Attr = S, SA
Damage = Ceil(FVar(0)*(15-Var(4)%2)), Ceil(FVar(1)*8)
HitFlag = MAFD
GuardFlag = M
Priority = 2, Hit
PauseTime = 2,5+5*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 2,5
HitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -70-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = hard
Ground.Type = low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -.5
Air.Velocity = -.5*Var(50),IfElse(Var(50)=1,-7,FVar(25))
Down.Velocity = -3,-2.5
Ground.CornerPush.VelOff = -6.5
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 0
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = Ceil(35+Var(41)-FVar(35))
GetPower = 0, 0
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 1125
Down.Bounce = 1


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 14
Attr = S, SA
Damage = Ceil(FVar(0)*(15-Var(4)%2)), Ceil(FVar(1)*8)
HitFlag = MAFD
GuardFlag = M
Priority = 2, Hit
PauseTime = 8,15+15*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 2,5
HitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -70-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = hard
Ground.Type = low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -.5
Air.Velocity = -.5*Var(50),IfElse(Var(50)=1,-7,FVar(25))
Down.Velocity = -3,-2.5
Ground.CornerPush.VelOff = -6.5
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 0
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = Ceil(45+Var(41)-FVar(35))
GetPower = 0, 0
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 1125
Down.Bounce = 1

[State -1]
type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = animelem = 24
Attr = S, NA
AnimType  = hard
Damage    = Ceil(FVar(0)*(150-Var(4)%2)), Ceil(FVar(1)*8)
HitFlag = MAFD
GuardFlag = H
Priority = 2, Hit
PauseTime = 3,8+8*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 3,8
HitSound = s10, 5
GuardSound = s120,0
SparkXY = -Random%20, -55-Random%20
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = trip
Ground.SlideTime = 13
Ground.HitTime  = 13
Ground.Velocity = -5,-1
Air.Velocity = -0.5*Var(50),IfElse(Var(50)=1,-6.6,FVar(25))
Down.Velocity = -4,-2.5
Ground.CornerPush.VelOff = -6
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -6
YAccel = .48
Kill = 1
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(16)*120), Ceil(0.85*FVar(16)*120)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
ID = 5600
Down.Bounce = 1

[State 1450]
type = targetstate
trigger1 = animelemtime(21) >= 0
trigger1 = movehit
value = 5600
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
type = varset
trigger1 = RoundState >= 3
trigger1 = animtime = 0
trigger1 = numtarget(5600) > 0
v = 54
value = 6
ignorehitpause = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1





;---------------------------------------------------------------------------
;虎落笛-EX
[Statedef 2210]
Type    = S
MoveType= A
Physics = N
Juggle  = 0
PowerAdd= 0
Ctrl = 0
VelSet = 0,0
Anim = 2310
SprPriority = 2
Facep2 = 1



[State -1]
Type = PowerAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))

[State -1]
Type = VarAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 7
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 43

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 0,-50
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s2200, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1


[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 5
Value = s100, 0
Channel = 3
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElemtime(6) = 0
Anim = 102
ID = 102
Postype = P1
Pos = -30,0
Scale = 1,1
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 1
Removetime = -2
Removeongethit = 1

[State -1]
Type = Explod
Trigger1 = AnimElemtime(10) = 0
Anim = 103
ID = 103
Postype = P1
Pos = -30,0
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 1
Removetime = -2
Removeongethit = 1



[State -1]
type = AfterImage
trigger1 = time = 35
time = 30
length = 15
framegap = 3
TimeGap  = 1
;FrameFap = 1
trans = add
palcontrast = 150,150,150
Peresistent = 1
IgnoreHitPause = 1
PalAdd = -10,-10,-10
palmul = 0.5,0.5,0.5


[State 100, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 100, 1]
type = VelSet
trigger1 = animelemtime(5) >= 0
x = 6



[State 100, 5]
type = ChangeState
Trigger1 = time >= 35
Trigger1 = time <= 65
Trigger1 = Command != "A溜め"
Trigger1 = Command != "B溜め"
Trigger1 = Command != "C溜め"
value = 2200
ctrl = 0

[State -1]
Type = PlaySnd
Trigger1 = Time = 66
Value = s700, 0

[State -1]
Type = Explod
Trigger1 = Time = 66
Anim = 10700
ID = 10700
PosType = P1
Pos = 0,-66
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State 100, 5]
type = ChangeState
Trigger1 = time = 70
value = 2220
ctrl = 0



[Statedef 2200]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
Anim      = 1200
PowerAdd  = 0


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 1
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 1
Range = 0,1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
trigger1 = anim = 1200
trigger1 = var(1) = 0
Trigger1 = AnimElem = 3
Value = s2200, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
trigger1 = anim = 1200
trigger1 = var(1) = 1
Trigger1 = AnimElem = 3
Value = s1200, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
trigger1 = anim = 1200
Trigger1 = AnimElem = 3
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PosAdd
trigger1 = anim = 1200
Trigger1 = AnimElemtime(3) = 0
X = 15

[State -1]
Type = veladd
trigger1 = anim = 1200
Trigger1 = AnimElemtime(3) = 0
X = 20

[State -1]
Type = velset
trigger1 = anim = 1200
trigger1 = AnimElemtime(3) >= 1
trigger1 = AnimElemtime(5) <= 2
X = ifelse(prevstateno = 1210,10,12)

[State -1]
Type = Explod
trigger1 = anim = 1200
Trigger1 = AnimElem = 3
ID = 1205
PosType = P1
Pos = 15,-35
Anim = 1105
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1


[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
trigger1 = anim = 1200
Trigger1 = NumTarget(2200) = 0
numhits = 0
Attr = S, SA
Damage = 0,0
HitFlag = MAFD
GuardFlag = M
Priority = 2, Hit
PauseTime = 1,1
Guard.PauseTime = 1,1
HitSound   = s999,0
GuardSound = s999,0
SparkXY = -Random%20, -50-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = up
Ground.Type = high
Air.Type = high
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -.5,-10
Air.Velocity = -.5,-10
Down.Velocity = -.5,-10
Ground.CornerPush.VelOff = -13
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .47
Kill = 1
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = Ceil(IfElse(Parent,Var(50)=1,31+Parent,Var(41),31))
GetPower = Ceil(FVar(30)*130), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*130)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 9999
Down.Bounce = 1

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
trigger1 = anim = 1200
trigger1 = NumTarget(9999) >= 1
trigger1 = NumTarget(2200) = 0
;Trigger1 = time = 0
Attr = S, SA
Damage = Ceil(FVar(0)*(120-Var(4)%2)), Ceil(FVar(1)*14)
HitFlag = MAFD
GuardFlag = M
Priority = 2, Hit
PauseTime = 10,15+15*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 10,10
HitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -50-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = up
Ground.Type = high
Air.Type = high
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -.5,-10
Air.Velocity = -.5,-10
Down.Velocity = -.5,-10
Ground.CornerPush.VelOff = -13
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .47
Kill = 1
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = Ceil(IfElse(Parent,Var(50)=1,45+Parent,Var(41),45))
GetPower = Ceil(FVar(30)*130), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*130)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 2200
Down.Bounce = 1



[State -1] 
Type = VarSet
Trigger1 = MoveContact = 1
Trigger1 = EnemyNear(Var(3)),BackEdgeBodyDist <= 0 || EnemyNear(Var(3)),FrontEdgeBodyDist <= 0
FV = 25
Value = 0
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = VarSet
Trigger1 = Var(50) = 2
Trigger1 = MoveHit = 1
Trigger1 = FVar(1) > 0.01
FV = 1
Value = 0.65*FVar(1)
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Explod
Trigger1 = Var(50) = 2
Trigger1 = MoveHit = 1
ID = 10840
PosType = P2
Pos = 0,Const(Size.Mid.Pos.Y)
Anim = 10840
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(50) = 2
Trigger1 = NumTarget(2200) > 0
Trigger1 = Target(2200),StateNo = 5030 || Target(2200),StateNo = 5080
V = 50
Value = 1
IgnoreHitPause = 1

[State -1]
Type = VarSet
Trigger1 = MoveHit = 1
Trigger1 = FVar(1) > 0.90
FV = 1
Value = 0.90
IgnoreHitPause = 1


[State -2]
Type = VarSet
Triggerall = time >= 25
Trigger1 = movecontact
Trigger2 = numtarget(2200) >= 1
V = 2
Value = 412
IgnoreHitPause = 1


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1


[State -1test]
Type = changeanim
Triggerall = anim = 1200
Triggerall = animelemtime(5) = 2
Triggerall = anim != 1250
trigger1 = facing = 1
trigger1 = (enemynear,ScreenPos x) - (ScreenPos x) <= 15
trigger2 = facing = -1
trigger2 = (ScreenPos x) - (enemynear,ScreenPos x) <= 15
Value = 1250
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = PlayerPush
Trigger1 = anim = 1200
trigger1 = animelemtime(3) >= 0
trigger1 = animelemtime(8) <= 2
Trigger2 = anim = 1250
trigger2 = animelemtime(3) <= 2
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = turn
Trigger1 = anim = 1250
Trigger1 = AnimTime = 0
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1



[Statedef 2220]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
Anim      = 1200
PowerAdd  = 0


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 1
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 1
Range = 0,1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
trigger1 = anim = 1200
trigger1 = var(1) = 0
Trigger1 = AnimElem = 3
Value = s1200, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
trigger1 = anim = 1200
trigger1 = var(1) = 1
Trigger1 = AnimElem = 3
Value = s1200, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
trigger1 = anim = 1200
Trigger1 = AnimElem = 3
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PosAdd
trigger1 = anim = 1200
Trigger1 = AnimElemtime(3) = 0
X = 15

[State -1]
Type = veladd
trigger1 = anim = 1200
Trigger1 = AnimElemtime(3) = 0
X = 20


[State -1]
Type = velset
trigger1 = anim = 1200
trigger1 = AnimElemtime(3) >= 1
trigger1 = AnimElemtime(5) <= 2
X = 14

[State -1]
Type = Explod
trigger1 = anim = 1200
Trigger1 = AnimElem = 3
ID = 1205
PosType = P1
Pos = 15,-35
Anim = 1105
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1


[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
trigger1 = anim = 1200
Trigger1 = time = 0
Attr = S, SA
Damage = Ceil(FVar(0)*(250-Var(4)%2)), Ceil(FVar(1)*14)
HitFlag = MAFD
GuardFlag =
Priority = 2, Hit
PauseTime = 10,15+15*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 10,10
HitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -50-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = up
Ground.Type = high
air.type = high
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -.5,-10
Air.Velocity = -.5*Var(50),IfElse(Var(50)=1,-10,FVar(25))
Down.Velocity = -.5,-13
Ground.CornerPush.VelOff = -13
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 1
Fall = 1
Air.Fall = 1
GetPower = Ceil(FVar(30)*130), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*130)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 2220
Down.Bounce = 1

[State -1]
Type = VarSet
Trigger1 = Var(50) = 2
Trigger1 = MoveHit = 1
Trigger1 = FVar(1) > 0.01
FV = 1
Value = 0.65*FVar(1)
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Explod
Trigger1 = Var(50) = 2
Trigger1 = MoveHit = 1
ID = 10840
PosType = P2
Pos = 0,Const(Size.Mid.Pos.Y)
Anim = 10840
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(50) = 2
Trigger1 = NumTarget(2220) > 0
Trigger1 = Target(2220),StateNo = 5030 || Target(2220),StateNo = 5080
V = 50
Value = 1
IgnoreHitPause = 1

[State -1]
Type = VarSet
Trigger1 = MoveHit = 1
Trigger1 = FVar(1) > 0.90
FV = 1
Value = 0.90
IgnoreHitPause = 1



[State -2]
Type = Helper
TriggerAll = MoveHit = 1
TriggerAll = P2MoveType = H
Trigger1 = NumHelper(170000) = 0
Trigger1 = NumTarget(2220) > 0
Trigger1 = Target(2220),Time = 0
StateNo = 170000
ID = 170000
PosType = P1
Pos = 40,-40
random = 20,20
Ownpal = 1
Persistent = 0
SprPriority = 5
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999





[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1


[State -1test]
Type = changeanim
Triggerall = anim = 1200
Triggerall = animelemtime(5) = 2
Triggerall = anim != 1250
trigger1 = facing = 1
trigger1 = (enemynear,ScreenPos x) - (ScreenPos x) <= 15
trigger2 = facing = -1
trigger2 = (ScreenPos x) - (enemynear,ScreenPos x) <= 15
Value = 1250
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = PlayerPush
Trigger1 = anim = 1200
trigger1 = animelemtime(3) >= 0
trigger1 = animelemtime(8) <= 2
Trigger2 = anim = 1250
trigger2 = animelemtime(3) <= 2
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = turn
Trigger1 = anim = 1250
Trigger1 = AnimTime = 0
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1





;---------------------------------------------------------------------------
;はりの月舎迦-EX
[Statedef 2310]
Type    = S
MoveType= A
Physics = N
Juggle  = 0
PowerAdd= 0
Ctrl = 0
VelSet = 0,0
Anim = 2310
SprPriority = 2
Facep2 = 1



[State 100, 5]
type = ChangeState
triggerall = time = 0
trigger1 = facing = 1
trigger1 = (enemynear,ScreenPos x) - (ScreenPos x) <= 100
trigger2 = facing = -1
trigger2 = (ScreenPos x) - (enemynear,ScreenPos x) <= 100
value = 2305
ctrl = 0


[State -1]
Type = PowerAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))

[State -1]
Type = VarAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 7
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 43

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 0,-50
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s2000, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 5
Value = s100, 10
Channel = 3
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Explod
Trigger1 = AnimElemtime(6) = 0
Anim = 102
ID = 102
Postype = P1
Pos = -30,0
Scale = 1,1
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 1
Removetime = -2
Removeongethit = 1

[State -1]
Type = Explod
Trigger1 = AnimElemtime(10) = 0
Anim = 103
ID = 103
Postype = P1
Pos = -30,0
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 1
Removetime = -2
Removeongethit = 1

[State 100, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 100, 1]
type = VelSet
trigger1 = animelemtime(5) >= 0
x = 6

[State 100, 5]
type = ChangeState
triggerall = animelemtime(6) >= 0
trigger1 = facing = 1
trigger1 = (enemynear,ScreenPos x) - (ScreenPos x) <= 100
trigger2 = facing = -1
trigger2 = (ScreenPos x) - (enemynear,ScreenPos x) <= 100
value = 2300
ctrl = 0

;-----------------------------------------------------
;はりの月舎迦-EX

[Statedef 2300]
Type    = S
MoveType= A
Physics = N
Juggle  = 0
PowerAdd= 0
Ctrl = 0
VelSet = 0,0
Anim = 2300
SprPriority = 2
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 12
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 12
Value = s2000, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Explod
Trigger1 = AnimElem = 12
ID = 2325
PosType = P1
Pos = -15,-30
Anim = 1325
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
RemoveTime = -2
BindTime = -1
RemoveOnGetHit = 1



[State 105, 1]
type = Veladd
trigger1 = AnimElemTime(5) = 0
x = 8.5
y = -7.6


[State 105, 1]
type = VelSet
trigger1 = facing = 1
trigger1 = AnimElemtime(5) = 1
trigger1 = vel x >= 7.0
x = ((enemynear,ScreenPos x) - (ScreenPos x))/14.5


[State 105, 1]
type = VelSet
trigger1 = facing = -1
trigger1 = AnimElemtime(5) = 1
trigger1 = vel x >= 7.0
x = ((ScreenPos x) - (enemynear,ScreenPos x))/14.5

[State 105, 1]
type = VelSet
trigger1 = AnimElemtime(5) = 2
trigger1 = vel x <= 5.2
x = 5.2

[State 100]
type = VelAdd
trigger1 = AnimElemtime(5) >= 1
trigger1 = AnimElemtime(17) <= 0
y = 0.4

[State 100]
type = VelAdd
trigger1 = AnimElemtime(5) >= 1
trigger1 = AnimElemtime(12) <= 0
x = -0.1

[State 100]
type = VelAdd
trigger1 = AnimElemtime(12) >= 1
trigger1 = AnimElemtime(17) <= 0
x = -0.2


[State 105, 1]
type = VelSet
trigger1 = AnimElemtime(17) = 1
x = 0
y = 0

[State 105, 1]
type = posSet
trigger1 = AnimElemTime(17) = 1
y = 0

[State 100]
type = StateTypeSet
trigger1 = AnimElemtime(5) >= 1
trigger1 = AnimElemtime(17) <= 0
statetype = A
Physics = N

[State 100]
type = StateTypeSet
trigger1 = AnimElemtime(17) >= 0
statetype = S
Physics = N

[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 12
Attr = C, SA
Damage = Ceil(FVar(0)*(150-Var(4)%2))
HitFlag = MAFD
GuardFlag = HA
Priority = 2, Hit
PauseTime = 18,25+25*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 8,8
HitSound = s20, 0
GuardSound = s120, 0
SparkXY = -Random%20, -Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = Hard
Ground.Type = Trip
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -0.5,-8
Guard.Velocity = -6
Air.Velocity = IfElse(Var(50)=1,-0.5,-3),IfElse(Var(50)=1,-3.8,FVar(25))
Down.Velocity = -3,-2.5
Ground.CornerPush.VelOff = -1.5
Guard.CornerPush.VelOff = -7
Air.CornerPush.VelOff = IfElse(Var(50)=1,-1.5,-4)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*120), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*120)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 2300
Down.Bounce = 1

[State -1]
Type = ctrlset
Triggerall = animelemtime(12) >= 0 || animelemtime(16) < 2
Trigger1 = numtarget(2300) >= 1
Trigger2 = moveguarded
value = 1
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = ctrlset
Trigger1 = animelemtime(17) = 0
value = 0
IgnoreHitPause = 1
Persistent = 0


[State -1]
Type = PlayerPush
trigger1 = animelemtime(5) >= 0
trigger1 = animelemtime(17) <= 0
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 105, 1]
type = null;posadd
trigger1 = AnimElemtime(17) = 0
x = 8

[State -1]
Type = turn
Trigger1 = AnimTime = 0
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = Explod
Trigger1 = animelemtime(17) = 1
Anim = 10052
ID = 10052
PosType = P1
Pos = 0,0
Ownpal = 1
Scale = 0.5,0.5
SprPriority = 0
IgnoreHitPause = 1
RemoveTime = -2
RemoveOnGetHit = 1

[State -2]
Type = VarSet
Triggerall = numtarget(2300) >= 1
Trigger1 = animelemtime(17) = 3
V = 2
Value = 412
IgnoreHitPause = 1


[State -1]
Type = PlaySnd
Trigger1 = animelemtime(17) = 1
Value = s40, 1


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1


;---------------------------------------------------------------------------
;はりの月舎迦-EX
[Statedef 2305]
Type    = S
MoveType= A
Physics = N
Juggle  = 0
PowerAdd= 0
Facep2 = 1
Ctrl = 0
VelSet = 0,0
Anim      = 2305
PowerAdd  = 0


[State -1]
Type = PowerAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))

[State -1]
Type = VarAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 7
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 43

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 0,-50
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s2000, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 12
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 12
Value = s2000, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Explod
Trigger1 = AnimElem = 12
ID = 2325
PosType = P1
Pos = 0,-40
Anim = 1325
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
RemoveTime = -2
BindTime = -1
RemoveOnGetHit = 1



[State 105, 1]
type = Veladd
trigger1 = AnimElemTime(5) = 0
x = 8.5
y = -7.6


[State 105, 1]
type = VelSet
trigger1 = facing = 1
trigger1 = AnimElemtime(5) = 1
trigger1 = vel x >= 7.0
x = ((enemynear,ScreenPos x) - (ScreenPos x))/14.5


[State 105, 1]
type = VelSet
trigger1 = facing = -1
trigger1 = AnimElemtime(5) = 1
trigger1 = vel x >= 7.0
x = ((ScreenPos x) - (enemynear,ScreenPos x))/14.5

[State 105, 1]
type = VelSet
trigger1 = AnimElemtime(5) = 2
trigger1 = vel x <= 5.2
x = 5.2

[State 100]
type = VelAdd
trigger1 = AnimElemtime(5) >= 1
trigger1 = AnimElemtime(17) <= 0
y = 0.4

[State 100]
type = VelAdd
trigger1 = AnimElemtime(5) >= 1
trigger1 = AnimElemtime(12) <= 0
x = -0.1

[State 100]
type = VelAdd
trigger1 = AnimElemtime(12) >= 1
trigger1 = AnimElemtime(17) <= 0
x = -0.2

[State 105, 1]
type = VelSet
trigger1 = AnimElemtime(17) = 1
x = 0
y = 0

[State 105, 1]
type = posSet
trigger1 = AnimElemTime(17) = 1
y = 0

[State 100]
type = StateTypeSet
trigger1 = AnimElemtime(5) >= 1
trigger1 = AnimElemtime(17) <= 0
statetype = A
Physics = N

[State 100]
type = StateTypeSet
trigger1 = AnimElemtime(17) >= 1
statetype = S
Physics = N

[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 12
Attr = C, SA
Damage = Ceil(FVar(0)*(150-Var(4)%2))
HitFlag = MAFD
GuardFlag = HA
Priority = 2, Hit
PauseTime = 20,25+25*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 8,8
HitSound = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = Hard
Ground.Type = Trip
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -0.5,-6
Guard.Velocity = -6
Air.Velocity = IfElse(Var(50)=1,-0.5,-3),IfElse(Var(50)=1,-3.8,FVar(25))
Down.Velocity = -3,-2.5
Ground.CornerPush.VelOff = -1.5
Guard.CornerPush.VelOff = -7
Air.CornerPush.VelOff = IfElse(Var(50)=1,-1.5,-4)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*120), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*120)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 2305
Down.Bounce = 1

[State -1]
Type = ctrlset
Triggerall = animelemtime(12) >= 0
Trigger1 = numtarget(2305) >= 1
Trigger2 = moveguarded
value = 1
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = ctrlset
Trigger1 = animelemtime(17) = 0
value = 0
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = PlayerPush
trigger1 = animelemtime(5) >= 0
trigger1 = animelemtime(17) <= 0
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 105, 1]
type = null;posadd
trigger1 = AnimElemtime(17) = 0
x = 8

[State -1]
Type = turn
Trigger1 = AnimTime = 0
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = Explod
Trigger1 = animelemtime(17) = 1
Anim = 10052
ID = 10052
PosType = P1
Pos = 0,0
Ownpal = 1
Scale = 0.5,0.5
SprPriority = 0
IgnoreHitPause = 1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = PlaySnd
Trigger1 = animelemtime(17) = 1
Value = s41, IfElse((Var(26)=[2,3]),1,11)


[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1


;---------------------------------------------------------------------------
;瑠璃の月-EX

[Statedef 2400]
Type    = A
MoveType= A
Physics = A
Juggle  = 0
Ctrl = 0
Anim = 2400
SprPriority = 2

[State -1]
Type = PowerAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))

[State -1]
Type = VarAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = 1
Trigger1 = Var(22)/100 = 0
V = 22
Value = Var(22)+100


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 7
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 43

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 0,-55
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s2400, (ifelse(random<500,0,1))
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1


[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 6
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Explod
Trigger1 = AnimElem = 6
ID = 1405
PosType = P1
Pos = 5,-50
Anim = 1405
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1


[State 105, 1]
type = Velset
trigger1 = time = [0,35]
x = 0
y = 0


[State 105, 1]
type = Veladd
trigger1 = Time = 38
y = -8.5

[State 105, 1]
type = Velset
trigger1 = Time = 38
x = 1.3

[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = MoveHit = 1
Trigger1 = FVar(1) > 0.90
FV = 1
Value = 0.90
IgnoreHitPause = 1

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 6
Attr = A, NA
Damage = Ceil(FVar(0)*(160-Var(4)%2))
HitFlag = MAF
GuardFlag = HA
Priority = 3, Hit
PauseTime = 10,10+10*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 10,10
HitSound = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -30-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = Hard
Ground.Type = High
Ground.SlideTime = 15
Ground.HitTime  = 15
Ground.Velocity = -5
Guard.Velocity = -7
Air.Velocity = -1.5*Var(50),IfElse(Var(50)=1,-7.4,FVar(25))
AirGuard.Velocity = -3,-1.4
Down.Velocity = -3.2,-2.5
Ground.CornerPush.VelOff = -6
Air.CornerPush.VelOff = -2.5*Var(50)
Down.CornerPush.VelOff = -5.2
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = Ceil(40+Var(41)-FVar(35))
GetPower = Ceil(FVar(30)*130), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*130)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 5600
p2facing = 1
Down.Bounce = 1


[State 1450]
type = targetstate
trigger1 = animelemtime(6) >= 0
trigger1 = movehit
value = 5600
IgnoreHitPause = 1
Persistent = 1

[State 50, 1]
type = VarSet
trigger1 = animelem = 6
sysvar(1) = -1

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1



;---------------------------------------------------------------------------
;隠しナイフ-EX（斜め投げ）

[Statedef 2500]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
Anim = 2500
SprPriority = 2
facep2 = 1

[State -1]
Type = PowerAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))

[State -1]
Type = VarAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = 1
Trigger1 = Var(22)/100 = 0
V = 22
Value = Var(22)+100


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 7
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 43

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 0,-50
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s2500, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 6
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 6
Value = s1500, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Helper
Trigger1 = AnimElem = 6
Trigger1 = Var(57)/100%10 = 1
StateNo = 2505
ID = 1505
PosType = P1
pos = 36, -73
Ownpal = 1
SprPriority = 5

[State -1]
Type = Helper
Trigger1 = AnimElem = 6
Trigger1 = Var(57)/100%10 = 2
StateNo = 2506
ID = 1505
PosType = P1
pos = 36, -73
Ownpal = 1
SprPriority = 5

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1


;---------------------------------------------------------------------------
;隠しナイフ-EX（水平投げ）

[Statedef 2501]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
Anim = 250000
SprPriority = 2
facep2 = 1



[State -1]
Type = PowerAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))

[State -1]
Type = VarAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = 1
Trigger1 = Var(22)/100 = 0
V = 22
Value = Var(22)+100


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 7
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 43

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 0,-50
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 8
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 7
Value = s1500, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Helper
Trigger1 = AnimElem = 8
StateNo = 2905
ID = 1505
PosType = P1
pos = 36, -73
Ownpal = 1
SprPriority = 5


[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1



;---------------------------------------------------------------------------
;隠しナイフ-EX

[Statedef 250000]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
Anim = 250000
SprPriority = 2
facep2 = 1

[State -1]
Type = VarSet
Trigger1 = time = 0
V = 1
Value = 0

[State -1]
Type = Helper
Trigger1 = AnimElem = 1
Trigger1 = numhelper(250010) = 0
StateNo = 250010
ID = 250010
Ownpal = 1
Keyctrl = 0
SprPriority = -5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PowerAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))

[State -1]
Type = VarAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = 1
Trigger1 = Var(22)/100 = 0
V = 22
Value = Var(22)+100


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 7
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 43

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 0,-50
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 8
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 7
Value = s2500, 5
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Helper
Trigger1 = AnimElem = 8
StateNo = 250005
ID = 1505
PosType = P1
pos = 36, -73
Ownpal = 1
SprPriority = 5


[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = ChangeState
Trigger1 = Animelem = 12
Trigger1 = var(1) = 0
Value = 250001
Ctrl = 0


[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Trigger1 = var(1) = 1
Value = 0
Ctrl = 1



;---------------------------------------------------------------------------
;隠しナイフ-EX

[Statedef 250001]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
Anim = 250001
SprPriority = 2
facep2 = 1

[State -1]
Type = VarSet
Trigger1 = time = 0
V = 1
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 43

[State 840,0]
type = palfx
trigger1 = time >= 0
trigger1 = time <= 20
time = 2
add = -255*time/20,-255*time/20,-255*time/20
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State 840,0]
type = palfx
trigger1 = time > 20
time = 6
add = -255,-255,-255
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
Type = ChangeState
Triggerall = var(1) = 11
trigger1 = time > 30
trigger2 = numhelper(1505)
trigger2 = helper(1505),stateno = 1503
trigger2 = helper(1505),time >= 10
Value = 250002
Ctrl = 0


[State -1]
Type = ChangeState
Triggerall = var(1) = 0
trigger1 = time > 20
trigger2 = numhelper(1505)
trigger2 = helper(1505),stateno = 1503
trigger2 = helper(1505),time >= 10
Value = 250003
Ctrl = 0


;---------------------------------------------------------------------------
;隠しナイフ-EX 菊華

[Statedef 250002]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
Anim      = 250002
PowerAdd  = 0
Facep2 = 1

[State 840,0]
type = palfx
trigger1 = time <= 20
time = 2
add = -255*(20-time)/20,-255*(20-time)/20,-255*(20-time)/20
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
Type = posadd
Trigger1 = Time = 0
X = enemynear,p2bodydist x -50
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 1
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = PosAdd
Trigger1 = Anim = 250002
Trigger1 = AnimElemtime(3) = 0
X = 10

[State -1]
Type = velset
Trigger1 = Anim = 250002
Trigger1 = AnimElemtime(3) >= 0
Trigger1 = AnimElemtime(6) <= 4
X = 8



[State -1]
Type = PlaySnd
Trigger1 = Anim = 250002
Trigger1 = AnimElem = 3
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Explod
Trigger1 = anim = 250002
Trigger1 = AnimElem = 3
ID = 1128
PosType = P1
Pos = 20,-47
Anim = 1127
Ownpal = 1
scale = 1,0.5
bindtime = -1
SprPriority = 4
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1



[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = time = 0
Attr = S, SA
Damage = Ceil(FVar(0)*(200-Var(4)%2)), Ceil(FVar(1)*14)
HitFlag = MAFD
GuardFlag = 
Priority = 2, Hit
PauseTime = 10,10+10*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 10,10
HitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -60-Random%20
SparkNo = -1
Guard.SparkNo = s161
AnimType = back
Ground.Type = high
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -.5,-8.5
Air.Velocity = -.05*Var(50),IfElse(Var(50)=1,-8,FVar(25))
Down.Velocity = -3,-2.5
Ground.CornerPush.VelOff = -13
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = Ceil(40+Var(41)-FVar(35))
GetPower = Ceil(FVar(30)*120), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*120)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
ID = 1120
Down.Bounce = 1


[State -1]
Type = VarSet
Triggerall = anim = 250002
Trigger1 = animelemtime(2) >= 0
Trigger1 = movehit = 1
V = 1
Value = 1
IgnoreHitPause = 1
Persistent = 0




[State -1]
Type = Explod
Triggerall = anim = 250002
Trigger1 = movehit = 1
Anim = 3207
PosType = left
Pos = ifelse(facing = 1,0,320), 0
facing = ifelse(facing = 1,1,-1)
Ownpal = 1
ontop = 1
SprPriority = 80
BindTime = 999
removetime = 20
IgnoreHitPause = 1
Persistent = 0
PauseMoveTime = 999

[State -1]
Type = Explod
Triggerall = anim = 250002
Trigger1 = movehit = 1
Anim = 178000
PosType = left
Pos = ifelse(facing = 1,0,320), 0
facing = ifelse(facing = 1,1,-1)
scale = 1.1,1
Ownpal = 1
ontop = 1
SprPriority = 90
BindTime = 999
IgnoreHitPause = 1
Persistent = 0
PauseMoveTime = 999


[State -1]
Type = Pause
Triggerall = var(1) = 1
trigger1 = RoundState = 2
Trigger1 = anim = 250002
Trigger1 = animelemtime(4) >= 0
Trigger1 = animelemtime(8) <= 4
Anim = -1
Time = 2
P2DefMul = 1
Persistent = 1

[state -1]
type = TargetBind
Triggerall = anim = 250002
Trigger1 = movehit = 1
pos = 10,floor(Pos y)-0
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1


[state -1]
type = posadd
Triggerall = anim = 250002
Trigger1 = movehit = 1
x = -ceil(160-frontedgedist)
ignorehitpause = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1


[State -2]
Type = Helper
TriggerAll = MoveHit = 1
TriggerAll = P2MoveType = H
Trigger1 = NumHelper(170000) = 0
Trigger1 = NumTarget(1120) > 0
Trigger1 = Target(1120),Time = 0
StateNo = 170000
ID = 170000
PosType = P1
Pos = 30,-50
random = 20,20
Ownpal = 1
Persistent = 0
SprPriority = 5
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 0


[State -1]
Type = changeanim
Triggerall = anim = 250002
Triggerall = animelemtime(9) = 3
Triggerall = anim != 1123
Trigger1 = enemynear,p2bodydist x <= 0
trigger2 = facing = 1
trigger2 = ScreenPos x >= enemynear,ScreenPos x
trigger3 = facing = -1
trigger3 = ScreenPos x <= enemynear,ScreenPos x
Value = 1123
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = PlayerPush
Trigger1 = anim = 250002
trigger1 = animelemtime(2) >= 0
trigger1 = animelemtime(11) <= 0
Trigger2 = anim = 1123
trigger2 = animelemtime(2) <= 0
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -1]
Type = turn
Trigger1 = anim = 1123
Trigger1 = AnimTime = 0
IgnoreHitPause = 1
Persistent = 1



[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1



[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1



;---------------------------------------------------------------------------
;隠しナイフ-EX 桜華

[Statedef 250003]
Type      = A
MoveType  = A
Physics   = N
Ctrl      = 0
Anim      = 250003
SprPriority = 0
PowerAdd  = 0
Facep2 = 1

[State -1]
Type = Pause
trigger1 = time = 0
Anim = -1
Time = 15
P2DefMul = 1
movetime = 15
Persistent = 1


[State 840,0]
type = palfx
trigger1 = time >= 0
trigger1 = time <= 15
time = 2
add = -255*(15-time)/15,-255*(15-time)/15,-255*(15-time)/15
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
Type = posadd
Trigger1 = Time = 0
X = enemynear,p2bodydist x
y = -50
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 1
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0


[State -1]
Type = velset
Trigger1 = AnimElemtime(1) >= 0
Trigger1 = AnimElemtime(9) <= 4
X = 4.2

[State 105, 1]
type = Veladd
trigger1 = AnimElemTime(1) = 0
y = -6

[State 100]
type = VelAdd
trigger1 = AnimElemtime(1) >= 1
trigger1 = AnimElemtime(10) <= 0
y = 0.4


[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 4
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 4
ID = 2325
PosType = P1
Pos = -15,-30
Anim = 2325
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
RemoveTime = -2
BindTime = -1
RemoveOnGetHit = 1



[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = animelem = 4
Attr = S, SA
Damage = Ceil(FVar(0)*(200-Var(4)%2)), Ceil(FVar(1)*14)
HitFlag = MAFD
GuardFlag = 
Priority = 2, Hit
PauseTime = 10,10+10*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 10,10
HitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -60-Random%20
SparkNo = -1
Guard.SparkNo = s161
AnimType = back
Ground.Type = high
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -.5,-5
Air.Velocity = -.05*Var(50),IfElse(Var(50)=1,-5,FVar(25))
Down.Velocity = -3,-2.5
Ground.CornerPush.VelOff = -13
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = Ceil(40+Var(41)-FVar(35))
GetPower = Ceil(FVar(30)*120), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*120)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
ID = 1120
Down.Bounce = 1


[State -1]
Type = VarSet
Trigger1 = animelemtime(2) >= 0
Trigger1 = movehit = 1
V = 1
Value = 1
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Explod
Trigger1 = movehit = 1
Anim = 3207
PosType = left
Pos = ifelse(facing = 1,0,320), 0
facing = ifelse(facing = 1,1,-1)
Ownpal = 1
ontop = 1
SprPriority = 80
BindTime = 999
removetime = 20
IgnoreHitPause = 1
Persistent = 0
PauseMoveTime = 999

[State -1]
Type = Explod
Trigger1 = movehit = 1
Anim = 178000
PosType = left
Pos = ifelse(facing = 1,0,320), 0
facing = ifelse(facing = 1,1,-1)
scale = 1.1,1
Ownpal = 1
ontop = 1
SprPriority = 90
BindTime = 999
IgnoreHitPause = 1
Persistent = 0
PauseMoveTime = 999


[State -1]
Type = Pause
Triggerall = var(1) = 1
trigger1 = RoundState = 2
Trigger1 = animelemtime(4) >= 0
Trigger1 = animelemtime(7) <= 1
Anim = -1
Time = 2
P2DefMul = 1
Persistent = 1


[state -1]
type = TargetBind
Trigger1 = movehit = 1
pos = -30,20
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1


[state -1]
type = posadd
Trigger1 = movehit = 1
x = -ceil(130-frontedgedist)
ignorehitpause = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -2]
Type = Helper
TriggerAll = MoveHit = 1
TriggerAll = P2MoveType = H
Trigger1 = NumHelper(170000) = 0
Trigger1 = NumTarget(1120) > 0
Trigger1 = Target(1120),Time = 0
StateNo = 170000
ID = 170000
PosType = P1
Pos = -30,-50
random = 20,20
Ownpal = 1
Persistent = 0
SprPriority = 5
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 0


[State 105, 1]
type = VelSet
trigger1 = AnimElemtime(10) = 1
x = 0
y = 0

[State 105, 1]
type = posSet
trigger1 = AnimElemTime(10) = 1
y = 0


[State 100]
type = StateTypeSet
trigger1 = AnimElemtime(1) >= 0
trigger1 = AnimElemtime(10) <= 0
statetype = A
Physics = N

[State 100]
type = StateTypeSet
trigger1 = AnimElemtime(10) >= 1
statetype = S
Physics = N

[State -1]
Type = PlayerPush
trigger1 = animelemtime(1) >= 0
trigger1 = animelemtime(11) <= 0
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Explod
Trigger1 = animelemtime(11) = 1
Anim = 10052
ID = 10052
PosType = P1
Pos = 0,0
Ownpal = 1
Scale = 0.5,0.5
SprPriority = 0
IgnoreHitPause = 1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = PlaySnd
Trigger1 = animelemtime(11) = 1
Value = s40, 1

[State -1]
Type = turn
Trigger1 = AnimTime = 0
IgnoreHitPause = 1
Persistent = 1



[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1



[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1




;---------------------------------------------------------------------------
;隠しナイフ空中-EX

[Statedef 2510]
Type    = A
MoveType= A
Physics = A
Juggle  = 0
Ctrl = 0
Anim = 2510
SprPriority = 2
facep2 = 1


[State -1]
Type = PowerAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))

[State -1]
Type = VarAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)


[State 105, 1]
type = Velset
trigger1 = Time = [0,35]
x = 0
y = 0

[State 105, 1]
type = Veladd
trigger1 = Time = 36
y = -8.5

[State 105, 1]
type = Velset
trigger1 = Time = 36
x = -1.3


[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = 1
Trigger1 = Var(22)/100 = 0
V = 22
Value = Var(22)+100


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 7
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 43

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 0,-50
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s2500, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999




[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 7
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 7
Value = s1500, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Helper
Trigger1 = AnimElem = 7
TriggerAll = Var(57)/100%10 = 4
StateNo = 2506
ID = 1505
PosType = P1
pos = 25, -30
Ownpal = 1
SprPriority = 5

[State -1]
Type = Helper
Trigger1 = AnimElem = 7
TriggerAll = Var(57)/100%10 != 4
StateNo = 2507
ID = 1505
PosType = P1
pos = 25, -30
Ownpal = 1
SprPriority = 5


[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999




;------------------------------------------------------------------------
;ナイフ水平飛び（吹き飛び）
[Statedef 2505]
Type    = S
MoveType= A
Physics = N
Juggle  = 0
Ctrl = 0
Anim = 1572
SprPriority = 5


[State -1]
Type     = NotHitBy
Trigger1 = 1
Value    = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time     = 1

[State -1]
Type = velset
Trigger1 = time >= 0
x = 11.2
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = HitDef
TriggerAll = parent,Var(25)/10%10 < 3
Trigger1 = time = 0
Attr = C, NA
Damage    = Ceil(parent,FVar(0)*(150-parent,Var(4)%2))
AnimType  = Hard
HitFlag = MAFD
GuardFlag = M
Priority  = 2, Hit
PauseTime = 2,20+20*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 2,10
HitSound = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -Random%20
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = Trip
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -0.5,-3.6
Guard.Velocity = -10
Air.Velocity = IfElse(parent,Var(50)=1,-0.5,-5),IfElse(parent,Var(50)=1,-3.2,parent,FVar(25))
Down.Velocity = -4,-2.5
Ground.CornerPush.VelOff = 0
Guard.CornerPush.VelOff = -12
Air.CornerPush.VelOff = IfElse(parent,Var(50)=1,0,-6)
Down.CornerPush.VelOff = -6
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*120), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*120)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 5600
p2facing = 1
Down.Bounce = 1


[State 1450]
type = targetstate
trigger1 = time >= 1
trigger1 = movehit
value = 5600
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = parentVarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = parentVarSet
Trigger1 = MoveHit = 1
Trigger1 = parent,FVar(1) > 0.90
FV = 1
Value = 0.90
IgnoreHitPause = 1



[State -2]
Type = Helper
Trigger1 = time%2 = 0
Trigger1 = Pos Y <= -5
StateNo = 1580
ID = 1580
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = -1
IgnoreHitPause = 1
size.yscale = 0.8
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -2]
Type = Helper
TriggerAll = MoveHit = 1
TriggerAll = P2MoveType = H
Trigger1 = NumHelper(16200) = 0 && NumHelper(16210) = 0
Trigger2 = NumTarget(5600) > 0
Trigger2 = Target(5600),Time = 0
StateNo = 16200;160000
ID = 16200+IfElse(Var(38)=0,0,10);160003
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 5
BindTime = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -2]
Type = Explod
TriggerAll = MoveGuarded = 1
TriggerAll = P2MoveType = H
Trigger1 = MoveType = H
Trigger1 = NumExplod(10120) = 0
Trigger2 = NumTarget(5600) > 0
Trigger2 = Target(5600),Time = 0
Anim = IfElse((1.00*Parent,Var(35)/Parent,Var(32)=[0.00,0.34]),10122,10121)
ID = 10120
PosType = P1
Pos = 0,0
Random = 10,10
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -2]
Type = parentVarAdd
TriggerAll = parent,Var(0)/10000%10 = 0
TriggerAll = MoveGuarded = 1
Trigger1 = parent,FVar(7) = [40,99]
Trigger2 = (parent,FVar(7) = [1,39]) && (Target,Var(42)%10 != [1,5]) && (Target,PrevStateNo != [150,159]) || (parent,FVar(7) = [1,39]) && (Target,Var(42)%10 != 1) && (Target,PrevStateNo = [150,159])
V = 35
Value = -Floor(100*parent,FVar(22))
IgnoreHitPause = 1

[State -2]
Type = parentVarAdd
TriggerAll = parent,Var(58) = 0
TriggerAll = RoundState = 2
Trigger1 = parent,Var(35) < 0
Trigger1 = parent,FVar(23) = 0
V = 2
Value = -1000
IgnoreHitPause = 1

[State -2]
Type = TargetState
TriggerAll = parent,Var(58) = 0
TriggerAll = RoundState = 2
Trigger1 = parent,Var(35) < 0
Trigger1 = parent,FVar(23) = 0
Trigger1 = EnemyNear(parent,Var(3)),StateNo = 150 || EnemyNear(parent,Var(3)),StateNo = 152 || EnemyNear(parent,Var(3)),StateNo = 154
Value = 5310
IgnoreHitPause = 1

[State -2]
Type = Helper
TriggerAll = parent,Var(58) = 0
TriggerAll = RoundState = 2
Trigger1 = NumHelper(5315) = 0
Trigger1 = parent,Var(35) < 0
Trigger1 = parent,FVar(23) = 0
Trigger1 = EnemyNear(Var(3)),StateNo = 5310
StateNo = 5315
PosType = P2
Pos = 0, 0
Ownpal = 1
ID = 5315
IgnoreHitPause = 1





[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = ChangeState
Trigger1 = Time > 1
Trigger1 = FrontEdgeDist <= 0
IgnoreHitPause = 0
Value = 1503
Ctrl = 0



;------------------------------------------------------------------------
;ナイフ水平飛び（多段ヒット）
[Statedef 2506]
Type    = S
MoveType= A
Physics = N
Juggle  = 0
Ctrl = 0
Anim = 1572
SprPriority = 5


[State -1]
Type     = NotHitBy
Trigger1 = 1
Value    = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time     = 1

[State -1]
Type = velset
Trigger1 = time >= 0
x = 11.2
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = HitDef
TriggerAll = parent,Var(25)/10%10 < 3
Trigger1 = time >= 1
Trigger1 = time%3 = 0
Attr = C, NA
Damage    = Ceil(parent,FVar(0)*(80-parent,Var(4)%2))
AnimType  = Hard
HitFlag = MAFD
GuardFlag = M
Priority  = 2, Hit
PauseTime = 2,10+10*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 2,10
HitSound = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -Random%20
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = Trip
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -0.5,-7.5
Guard.Velocity = -10
Air.Velocity = IfElse(parent,Var(50)=1,-0.5,-5),IfElse(parent,Var(50)=1,-3.2,parent,FVar(25))
Down.Velocity = -4,-2.5
Ground.CornerPush.VelOff = 0
Guard.CornerPush.VelOff = -12
Air.CornerPush.VelOff = IfElse(parent,Var(50)=1,0,-6)
Down.CornerPush.VelOff = -6
YAccel = .47
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*120), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*120)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 2506
Down.Bounce = 1


[State -1]
Type = parentVarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = parentVarSet
Trigger1 = MoveHit = 1
Trigger1 = parent,FVar(1) > 0.90
FV = 1
Value = 0.90
IgnoreHitPause = 1



[State -2]
Type = Helper
Trigger1 = time%2 = 0
Trigger1 = Pos Y <= -5
StateNo = 1580
ID = 1580
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = -1
IgnoreHitPause = 1
size.yscale = 0.8
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -2]
Type = Helper
TriggerAll = MoveHit = 1
TriggerAll = P2MoveType = H
Trigger1 = NumHelper(16200) <= 2 && NumHelper(16210) <= 2 
Trigger2 = NumTarget(2506) > 0
Trigger2 = Target(2506),Time = 0
StateNo = 16200;160000
ID = 16201+IfElse(Var(38)=0,0,10);160001
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 5
BindTime = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -2]
Type = Explod
TriggerAll = MoveGuarded = 1
TriggerAll = P2MoveType = H
Trigger1 = MoveType = H
Trigger1 = NumExplod(10120) = 0
Trigger2 = NumTarget(2506) > 0
Trigger2 = Target(2506),Time = 0
Anim = IfElse((1.00*Parent,Var(35)/Parent,Var(32)=[0.00,0.34]),10122,10121)
ID = 10120
PosType = P1
Pos = 0,0
Random = 10,10
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -2]
Type = parentVarAdd
TriggerAll = parent,Var(0)/10000%10 = 0
TriggerAll = MoveGuarded = 1
Trigger1 = parent,FVar(7) = [40,99]
Trigger2 = (parent,FVar(7) = [1,39]) && (Target,Var(42)%10 != [1,5]) && (Target,PrevStateNo != [150,159]) || (parent,FVar(7) = [1,39]) && (Target,Var(42)%10 != 1) && (Target,PrevStateNo = [150,159])
V = 35
Value = -Floor(100*parent,FVar(22))
IgnoreHitPause = 1

[State -2]
Type = parentVarAdd
TriggerAll = parent,Var(58) = 0
TriggerAll = RoundState = 2
Trigger1 = parent,Var(35) < 0
Trigger1 = parent,FVar(23) = 0
V = 2
Value = -1000
IgnoreHitPause = 1

[State -2]
Type = TargetState
TriggerAll = parent,Var(58) = 0
TriggerAll = RoundState = 2
Trigger1 = parent,Var(35) < 0
Trigger1 = parent,FVar(23) = 0
Trigger1 = EnemyNear(parent,Var(3)),StateNo = 150 || EnemyNear(parent,Var(3)),StateNo = 152 || EnemyNear(parent,Var(3)),StateNo = 154
Value = 5310
IgnoreHitPause = 1

[State -2]
Type = Helper
TriggerAll = parent,Var(58) = 0
TriggerAll = RoundState = 2
Trigger1 = NumHelper(5315) = 0
Trigger1 = parent,Var(35) < 0
Trigger1 = parent,FVar(23) = 0
Trigger1 = EnemyNear(Var(3)),StateNo = 5310
StateNo = 5315
PosType = P2
Pos = 0, 0
Ownpal = 1
ID = 5315
IgnoreHitPause = 1




[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = ChangeState
Trigger1 = Time > 1
Trigger1 = FrontEdgeDist <= 0
IgnoreHitPause = 0
Value = 1503
Ctrl = 0


;------------------------------------------------------------------------
;ナイフ水平飛び
[Statedef 2507]
Type    = S
MoveType= A
Physics = N
Juggle  = 0
Ctrl = 0
Anim = 1572
SprPriority = 5


[State -1]
Type     = NotHitBy
Trigger1 = 1
Value    = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time     = 1

[State -1]
Type = velset
Trigger1 = time >= 0
x = 11.2
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = HitDef
TriggerAll = parent,Var(25)/10%10 < 3
Trigger1 = time = 0
Attr = C, NA
Damage    = Ceil(parent,FVar(0)*(150-parent,Var(4)%2))
AnimType  = Hard
HitFlag = MAFD
GuardFlag = M
Priority  = 2, Hit
PauseTime = 2,20+20*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 2,10
HitSound = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -Random%20
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = Trip
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -0.5,-3.6
Guard.Velocity = -10
Air.Velocity = IfElse(parent,Var(50)=1,-0.5,-5),IfElse(parent,Var(50)=1,-3.2,parent,FVar(25))
Down.Velocity = -4,-2.5
Ground.CornerPush.VelOff = 0
Guard.CornerPush.VelOff = -12
Air.CornerPush.VelOff = IfElse(parent,Var(50)=1,0,-6)
Down.CornerPush.VelOff = -6
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*120), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*120)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 2507
p2facing = 1
Down.Bounce = 1



[State -1]
Type = parentVarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = parentVarSet
Trigger1 = MoveHit = 1
Trigger1 = parent,FVar(1) > 0.90
FV = 1
Value = 0.90
IgnoreHitPause = 1


[State -2]
Type = Helper
Trigger1 = time%2 = 0
Trigger1 = Pos Y <= -5
StateNo = 1580
ID = 1580
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = -1
IgnoreHitPause = 1
size.yscale = 0.8
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -2]
Type = Helper
TriggerAll = MoveHit = 1
TriggerAll = P2MoveType = H
Trigger1 = NumHelper(16200) <= 2 && NumHelper(16210) <= 2 
Trigger1 = NumTarget(2507) > 0
Trigger1 = Target(2507),Time = 0
StateNo = 16200;160000
ID = 16200+IfElse(Var(38)=0,0,10);160003
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 5
BindTime = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -2]
Type = Explod
TriggerAll = MoveGuarded = 1
TriggerAll = P2MoveType = H
Trigger1 = MoveType = H
Trigger1 = NumExplod(10120) = 0
Trigger2 = NumTarget(2507) > 0
Trigger2 = Target(2507),Time = 0
Anim = IfElse((1.00*Parent,Var(35)/Parent,Var(32)=[0.00,0.34]),10122,10121)
ID = 10120
PosType = P1
Pos = 0,0
Random = 10,10
Scale = 0.5,0.5
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -2]
Type = parentVarAdd
TriggerAll = parent,Var(0)/10000%10 = 0
TriggerAll = MoveGuarded = 1
Trigger1 = parent,FVar(7) = [40,99]
Trigger2 = (parent,FVar(7) = [1,39]) && (Target,Var(42)%10 != [1,5]) && (Target,PrevStateNo != [150,159]) || (parent,FVar(7) = [1,39]) && (Target,Var(42)%10 != 1) && (Target,PrevStateNo = [150,159])
V = 35
Value = -Floor(100*parent,FVar(22))
IgnoreHitPause = 1

[State -2]
Type = parentVarAdd
TriggerAll = parent,Var(58) = 0
TriggerAll = RoundState = 2
Trigger1 = parent,Var(35) < 0
Trigger1 = parent,FVar(23) = 0
V = 2
Value = -1000
IgnoreHitPause = 1

[State -2]
Type = TargetState
TriggerAll = parent,Var(58) = 0
TriggerAll = RoundState = 2
Trigger1 = parent,Var(35) < 0
Trigger1 = parent,FVar(23) = 0
Trigger1 = EnemyNear(parent,Var(3)),StateNo = 150 || EnemyNear(parent,Var(3)),StateNo = 152 || EnemyNear(parent,Var(3)),StateNo = 154
Value = 5310
IgnoreHitPause = 1

[State -2]
Type = Helper
TriggerAll = parent,Var(58) = 0
TriggerAll = RoundState = 2
Trigger1 = NumHelper(5315) = 0
Trigger1 = parent,Var(35) < 0
Trigger1 = parent,FVar(23) = 0
Trigger1 = EnemyNear(Var(3)),StateNo = 5310
StateNo = 5315
PosType = P2
Pos = 0, 0
Ownpal = 1
ID = 5315
IgnoreHitPause = 1


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = Time > 1
Trigger1 = FrontEdgeDist <= 0
IgnoreHitPause = 0
Value = 1503
Ctrl = 0

;---------------------------------------------------------------------
;ナイフ斜め飛び-近距離
[Statedef 250005]
Type    = S
MoveType= A
Physics = N
Juggle  = 0
Ctrl = 0
Anim = 1572
SprPriority = 5

[State -1]
Type     = NotHitBy
Trigger1 = 1
Value    = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time     = 1

[State -1]
Type = velset
Trigger1 = time >= 0
x = 9
y = 6
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State 3201, Angle 4]
type = Angleset
trigger1 = Time = 0
value = -180/pi * atan((vel y) / (vel x))


[State 3201, Facing]
type = AngleDraw
trigger1 = time >= 0
scale = 1, 1


[State -1]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = HitDef
TriggerAll = parent,Var(25)/10%10 < 3
Trigger1 = time = 0
Attr = C, NA
Damage    = Ceil(parent,FVar(0)*(110-parent,Var(4)%2))
AnimType  = Hard
HitFlag = MAFD
GuardFlag = 
Priority  = 2, Hit
PauseTime = 2,10+10*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 2,10
HitSound = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -Random%20
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = Trip
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -0.5,-3.6
Guard.Velocity = -10
Air.Velocity = IfElse(parent,Var(50)=1,-0.5,-5),IfElse(parent,Var(50)=1,-3.2,parent,FVar(25))
Down.Velocity = -4,-2.5
Ground.CornerPush.VelOff = 0
Guard.CornerPush.VelOff = -12
Air.CornerPush.VelOff = IfElse(parent,Var(50)=1,0,-6)
Down.CornerPush.VelOff = -6
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*120), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*120)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 1501
Down.Bounce = 1


[State -2]
Type = Helper
Trigger1 = time%2 = 0
Trigger1 = Pos Y <= -5
StateNo = 1580
ID = 1580
PosType = P1
Pos = -4,-3
Ownpal = 1
SprPriority = 4
BindTime = -1
IgnoreHitPause = 1
size.yscale = 0.8
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -2]
Type = Helper
TriggerAll = MoveHit = 1
TriggerAll = P2MoveType = H
Trigger1 = NumHelper(170000) = 0
Trigger1 = NumTarget(1501) > 0
Trigger1 = Target(1501),Time = 0
StateNo = 170000
ID = 170000
PosType = P1
Pos = 10,0
random = 20,20
Ownpal = 1
Persistent = 0
SprPriority = 5
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = parentVarSet
Trigger1 = MoveHit = 1
V = 1
Value = 1
IgnoreHitPause = 1

[State -1]
Type = parentVarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = parentVarSet
Trigger1 = MoveHit = 1
Trigger1 = parent,FVar(1) > 0.90
FV = 1
Value = 0.90
IgnoreHitPause = 1


[State -1]
Type = ChangeState
Trigger1 = (Vel Y > 0) && (Pos Y >= -1)
Trigger1 = parent,var(1) = 0
Value = 250006
Ctrl = 0

[State -1]
Type = ChangeState
Trigger1 = (Vel Y > 0) && (Pos Y >= -1)
Trigger1 = parent,var(1) = 1
Value = 1502
Ctrl = 0

[State -1]
Type = ChangeState
Trigger1 = Time > 1
Trigger1 = FrontEdgeDist <= 0
IgnoreHitPause = 0
Value = 1503
Ctrl = 0


;---------------------------------------------------------------------
;ナイフ斜め飛び-遠距離
[Statedef 250006]
Type    = S
MoveType= A
Physics = N
Juggle  = 0
Ctrl = 0
Anim = 1572
SprPriority = 5

[State -1]
Type = velset
Trigger1 = time = 0
y = 0
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = posadd
Trigger1 = time = 0
x = 10
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = posset
Trigger1 = time = 0
y = 0
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 1000, 0]
type = Explod
trigger1 = time = 0
anim = 1579
ID = 1579
postype = p1
pos = -15,10
;bindtime = 1
removetime = -2
sprpriority = 5
ownpal = 1

[State -1]
Type = PlaySnd
trigger1 = time = 0
Value = s1579, 1
Channel = 3
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type     = NotHitBy
Trigger1 = 1
Value    = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time     = 1

[State -1]
Type = veladd
Trigger1 = time = 0
y = -6
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = veladd
Trigger1 = time >= 0
y = .45
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 3201, Angle 4]
type = Angleset
trigger1 = Time = 0
value = -180/pi * atan((vel y) / (vel x))

[State 3201, Angle 4]
type = Angleadd
trigger1 = Time >= 1
value = 10
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 3201, Facing]
type = AngleDraw
trigger1 = time >= 0
scale = 1, 1

[State -1]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = HitDef
TriggerAll = parent,Var(25)/10%10 < 3
Trigger1 = time = 0
Attr = C, NA
Damage    = Ceil(parent,FVar(0)*(40-parent,Var(4)%2))
AnimType  = Hard
HitFlag = MAFD
GuardFlag = M
Priority  = 2, Hit
PauseTime = 2,30+30*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 2,30+Var(41)
HitSound = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -Random%20
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -0.5
Guard.Velocity = -10
Air.Velocity = IfElse(parent,Var(50)=1,-0.5,-5),IfElse(parent,Var(50)=1,-3.2,parent,FVar(25))
Down.Velocity = -4,-2.5
Ground.CornerPush.VelOff = 0
Guard.CornerPush.VelOff = -12
Air.CornerPush.VelOff = IfElse(parent,Var(50)=1,0,-6)
Down.CornerPush.VelOff = -6
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(FVar(30)*120), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*120)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 1501
Down.Bounce = 1


[State -2]
Type = Helper
Trigger1 = time >= 1
Trigger1 = time%2 = 0
Trigger1 = Pos Y <= -5
StateNo = 1580
ID = 1580
PosType = P1
Pos = -4,-3
Ownpal = 1
SprPriority = 4
BindTime = -1
IgnoreHitPause = 1
size.yscale = 0.8
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -2]
Type = Helper
TriggerAll = MoveHit = 1
TriggerAll = P2MoveType = H
Trigger1 = NumHelper(16100) = 0 && NumHelper(16110) = 0
Trigger2 = NumTarget(1501) > 0
Trigger2 = Target(1501),Time = 0
StateNo = 16100
ID = 16100+IfElse(Var(38)=0,0,10)
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 5
BindTime = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = explod
Trigger1 = Moveguarded
ID = 10120
PosType = P1
Pos = 0,0
Scale = 0.5,0.5
Anim = IfElse((1.00*Parent,Var(35)/Parent,Var(32)=[0.00,0.34]),10122,10121)
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
BindTime = 1
RemoveTime = -2

[State -2]
Type = parentVarAdd
TriggerAll = parent,Var(0)/10000%10 = 0
TriggerAll = MoveGuarded = 1
Trigger1 = parent,FVar(7) = [40,99]
Trigger2 = (parent,FVar(7) = [1,39]) && (Target,Var(42)%10 != [1,5]) && (Target,PrevStateNo != [150,159]) || (parent,FVar(7) = [1,39]) && (Target,Var(42)%10 != 1) && (Target,PrevStateNo = [150,159])
V = 35
Value = -Floor(100*parent,FVar(22))
IgnoreHitPause = 1

[State -2]
Type = parentVarAdd
TriggerAll = parent,Var(58) = 0
TriggerAll = RoundState = 2
Trigger1 = parent,Var(35) < 0
Trigger1 = parent,FVar(23) = 0
V = 2
Value = -1000
IgnoreHitPause = 1

[State -2]
Type = TargetState
TriggerAll = parent,Var(58) = 0
TriggerAll = RoundState = 2
Trigger1 = parent,Var(35) < 0
Trigger1 = parent,FVar(23) = 0
Trigger1 = EnemyNear(parent,Var(3)),StateNo = 150 || EnemyNear(parent,Var(3)),StateNo = 152 || EnemyNear(parent,Var(3)),StateNo = 154
Value = 5310
IgnoreHitPause = 1

[State -2]
Type = Helper
TriggerAll = parent,Var(58) = 0
TriggerAll = RoundState = 2
Trigger1 = NumHelper(5315) = 0
Trigger1 = parent,Var(35) < 0
Trigger1 = parent,FVar(23) = 0
Trigger1 = EnemyNear(Var(3)),StateNo = 5310
StateNo = 5315
PosType = P2
Pos = 0, 0
Ownpal = 1
ID = 5315
IgnoreHitPause = 1



[State -1]
Type = parentVarSet
Trigger1 = Movecontact = 1
V = 1
Value = 11
IgnoreHitPause = 1

[State -1]
Type = parentVarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = parentVarSet
Trigger1 = MoveHit = 1
Trigger1 = parent,FVar(1) > 0.90
FV = 1
Value = 0.90
IgnoreHitPause = 1


[State -1]
Type = ChangeState
Trigger1 = Time > 1
Trigger1 = FrontEdgeDist <= 0
IgnoreHitPause = 0
Value = 1503
Ctrl = 0

;---------------------------------------------------------------------------
;淘の振り袖 EX
[Statedef 2600]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
PowerAdd= 0
Ctrl = 0
VelSet = 0,0
Anim = 2600

[State 1000, 0]
type = SprPriority
trigger1 = time = 0
value = 4

[State -1]
Type = PowerAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))

[State -1]
Type = VarAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)


[State -1]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 35

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 12,-60
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s2600, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = PosAdd
Trigger1 = AnimElem = 1
X = -10

[State -1]
Type = PosAdd
Trigger1 = AnimElem = 2 || AnimElem = 3 
X = 10

[State -1]
Type = PosAdd
Trigger1 = AnimElem = 4
X = -20

[State -1]
Type = PosAdd
Trigger1 = AnimElem = 8 || AnimElem = 10
X = 15



[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarRandom
Trigger1 = MoveHit = 1
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 5
Attr = S, SA
Damage = Ceil(FVar(0)*(180-Var(4)%2)), Ceil(FVar(1)*12)
HitFlag = MAFD
GuardFlag = 
Priority = 2, Hit
PauseTime = 20,30+30*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 20,30
HitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -70-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = medium
Ground.Type = low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0,0
Air.Velocity = 0,0
Down.Velocity = 0,0
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
YAccel = 0
Kill = 0
Guard.Kill = 0
Fall = 0
Air.Fall = 0
Fall.Recover = 0
Fall.RecoverTime = 0
GetPower = 0, 0
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
sprpriority = -4
Down.Bounce = 1


[State -1]
Type = HitDef
Trigger1 = AnimElemtime(7) >= 4
Trigger1 = AnimElemtime(8) <= 0
Attr = S, SA
Damage = 5,5
HitFlag = MAFD
GuardFlag = 
Priority = 2, Hit
PauseTime = 0,0
Guard.PauseTime = 0,0
HitSound   = s65535
GuardSound = s65535
SparkXY = -Random%20, -70-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = Hard
Ground.Type = low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0,-6.5
Air.Velocity = -.05*Var(50),IfElse(Var(50)=1,-4,FVar(25))
Down.Velocity = -3,-2.5
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = 0, 0
numhits = 0
sprpriority = -4
Down.Bounce = 1


[State -2]
Type = Helper
TriggerAll = MoveHit = 1
TriggerAll = P2MoveType = H
Trigger1 = NumHelper(16200) = 0 && NumHelper(16210) = 0  
Trigger1 = AnimElemtime(6) <= 0
StateNo = 16200;160000
ID = 16200+IfElse(Var(38)=0,0,10);160003
PosType = P1
Pos = -30,-62
Ownpal = 1
SprPriority = 5
BindTime = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -2]
Type = Helper
TriggerAll = MoveHit = 1
TriggerAll = P2MoveType = H
Trigger1 = NumHelper(2600) = 0
Trigger1 = AnimElemtime(6) <= 0
StateNo = 2605
ID = 2600
PosType = P1
Pos = -30,-62
Ownpal = 1
SprPriority = 5
BindTime = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State 1000, 0]
type = SprPriority
trigger1 = animelemtime(4) >= 0
value = -4
persistent = 1

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = turn
Trigger1 = AnimTime = 0
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1


;---------------------------------------------------------------------------
; 淘の振り袖-EX-エフェクト
[Statedef 2605]
Type      = S
Movetype  = A
Physics   = S
Ctrl      = 0
Anim      = 2605
sprpriority = 5

[State -1]
Type = BindToParent
Trigger1 = 1
pos = -30,-62
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Trans
Trigger1 = 1
Trans = Add

[State -1]
Type = AngleDraw
Trigger1 = 1
Scale = 1, 1

[State -1]
Type = AngleAdd
Trigger1 = Time = 0
Value = 90

[State -1]
Type = DestroySelf
Trigger1 = AnimTime = 0
Trigger2 = Parent,MoveType = H






;---------------------------------------------------------------------------
;;無我識・心空妙有-EX
[Statedef 2700]
Type    = S
MoveType= A
Physics = N
Juggle  = 0
PowerAdd= 0
Ctrl = 0
VelSet = 0,0
Anim = 2700
SprPriority = 2
Facep2 = 1

[State -1]
Type = PowerAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))

[State -1]
Type = VarAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 7
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 43

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 0,-50
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s2700, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1


[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 5
Value = s100, 0
Channel = 3
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Explod
Trigger1 = AnimElemtime(6) = 0
Anim = 102
ID = 102
Postype = P1
Pos = -30,0
Scale = 1,1
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 1
Removetime = -2
Removeongethit = 1

[State -1]
Type = Explod
Trigger1 = AnimElemtime(10) = 0
Anim = 103
ID = 103
Postype = P1
Pos = -30,0
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 1
Removetime = -2
Removeongethit = 1




[State 100, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 100, 1]
type = VelSet
trigger1 = animelemtime(5) >= 0
x = 6

[State -1]
Type = VarSet
Trigger1 = Time = 30
V = 1
Value = 120

[State -1]
Type = Varadd
Trigger1 = Time >= 31
Trigger1 = var(1) > 0
V = 1
Value = -1

[State -1]
Type = ChangeState
triggerall = time >= 35
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command != "holdup" && command != "holddown"
Value = 2702
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = time >= 35
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command = "holdback" && command != "holdup" && command != "holddown"
Value = 2703
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = time >= 35
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command = "holdfwd" && command != "holdback" && command != "holdup" && command != "holddown"
Value = 2704
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = time >= 35
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command = "holdup" && command != "holddown"
Value = 2705
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = time >= 35
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command != "holdup" && command = "holddown"
Value = 2706
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = time >= 35
trigger1 = var(1) > 0
trigger1 = command = "z"
Value = 2710
Ctrl = 0

[State 100, 5]
type = ChangeState
triggerall = time >= 35
trigger1 = var(1) <= 0
trigger2 = time >= 90
value = 101
ctrl = 0


;---------------------------------------------------------------------------
;ニュートラル
[Statedef 2701]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
Anim      = 2701
PowerAdd  = 0
Facep2 = 1


[State -1]
Type = Explod
Trigger1 = AnimElemtime(2) = 0
Anim = 102
ID = 102
Postype = P1
Pos = -30,0
Scale = 1,1
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 1
Removetime = -2
Removeongethit = 1

[State -1]
Type = Explod
Trigger1 = AnimElemtime(6) = 0
Anim = 103
ID = 103
Postype = P1
Pos = -30,0
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 1
Removetime = -2
Removeongethit = 1


[State 100, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 100, 1]
type = VelSet
trigger1 = animelemtime(1) >= 0
x = 6

[State -1]
Type = Varadd
Trigger1 = var(1) > 0
V = 1
Value = -1

[State -1]
Type = ChangeState
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command != "holdup" && command != "holddown"
Value = 2702
Ctrl = 0

[State -1]
Type = ChangeState
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command = "holdback" && command != "holdup" && command != "holddown"
Value = 2703
Ctrl = 0

[State -1]
Type = ChangeState
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command = "holdfwd" && command != "holdback" && command != "holdup" && command != "holddown"
Value = 2704
Ctrl = 0

[State -1]
Type = ChangeState
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command = "holdup" && command != "holddown"
Value = 2705
Ctrl = 0

[State -1]
Type = ChangeState
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command != "holdup" && command = "holddown"
Value = 2706
Ctrl = 0

[State -1]
Type = ChangeState
trigger1 = var(1) > 0
trigger1 = command = "z"
Value = 2710
Ctrl = 0

[State -1]
Type = ChangeState
trigger1 = var(1) <= 0
trigger2 = time >= 60
Value = 101
Ctrl = 0

;---------------------------------------------------------------------------

;ニュートラルアタック
[Statedef 2702]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
Anim      = 2702
PowerAdd  = 0
Facep2 = 1

[State -1]
Type = velset
Trigger1 = AnimElemtime(7) < 3
X = 6

[State -1]
Type = Varadd
Trigger1 = var(1) > 0
V = 1
Value = -1


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 4
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Explod
Trigger1 = AnimElem = 4
ID = 1105
PosType = P1
Pos = 15,-35
Anim = 1105
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1


[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 4
Attr = S, SA
Damage = Ceil(FVar(0)*(50-Var(4)%2)), Ceil(FVar(1)*14)
HitFlag = MAFD
GuardFlag = M
Priority = 2, Hit
PauseTime = 10,10+10*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 10,10
HitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -50-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = Hard
Ground.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -7
Air.Velocity = -2*Var(50),IfElse(Var(50)=1,-7,FVar(25))
Down.Velocity = -7,-2.5
Ground.CornerPush.VelOff = -13
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = Ceil(40+Var(41)-FVar(35))
GetPower = Ceil(FVar(30)*120), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*120)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 2700
Down.Bounce = 1


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 1
Triggerall = AnimelemTime(6) < 1
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command != "holdup" && command != "holddown"
Value = 2702
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 1
Triggerall = AnimelemTime(6) < 1
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command = "holdback" && command != "holdup" && command != "holddown"
Value = 2703
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 1
Triggerall = AnimelemTime(6) < 1
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command = "holdfwd" && command != "holdback" && command != "holdup" && command != "holddown"
Value = 2704
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 1
Triggerall = AnimelemTime(6) < 1
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command = "holdup" && command != "holddown"
Value = 2705
Ctrl = 0


[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 1
Triggerall = AnimelemTime(6) < 1
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command != "holdup" && command = "holddown"
Value = 2706
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 1
Triggerall = AnimelemTime(6) < 1
trigger1 = var(1) > 0
trigger1 = command = "z" 
Value = 2710
Ctrl = 0

[State -1]
Type = ChangeState
trigger1 = var(1) > 0
Trigger1 = AnimelemTime(6) >= 1
Value = 2701
Ctrl = 0

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;-------------------------------------------------------------------
;←アタック
[Statedef 2703]
Type      = S
MoveType  = A
Physics   = N
Ctrl      = 0
Anim      = 2703
PowerAdd  = 0
Facep2 = 1

[State -1]
Type = velset
Trigger1 = AnimElemtime(4) < 0
X = 6

[State -1]
Type = velset
Trigger1 = AnimElemtime(4) >= 0
X = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -1]
Type = Explod
Trigger1 = AnimElem = 4
ID = 1115
PosType = P1
Pos = -20,-30
Anim = 1115
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1


[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 4
Attr = S, SA
Damage = Ceil(FVar(0)*(50-Var(4)%2)), Ceil(FVar(1)*14)
HitFlag = MAFD
GuardFlag = M
Priority = 2, Hit
PauseTime = 10,10+10*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 10,10
HitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -50-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = Hard
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -7
Air.Velocity = -2*Var(50),IfElse(Var(50)=1,-7,FVar(25))
Down.Velocity = -7,-2.5
Ground.CornerPush.VelOff = -13
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = Ceil(40+Var(41)-FVar(35))
GetPower = Ceil(FVar(30)*120), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*120)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 2700
Down.Bounce = 1


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 3
Triggerall = AnimelemTime(6) <= 5
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command != "holdup" && command != "holddown"
Value = 2702
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 3
Triggerall = AnimelemTime(6) <= 5
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command = "holdback" && command != "holdup" && command != "holddown"
Value = 2703
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 3
Triggerall = AnimelemTime(6) <= 5
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command = "holdfwd" && command != "holdback" && command != "holdup" && command != "holddown"
Value = 2704
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 3
Triggerall = AnimelemTime(6) <= 5
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command = "holdup" && command != "holddown"
Value = 2705
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 3
Triggerall = AnimelemTime(6) <= 5
trigger1 = var(1) > 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command != "holdup" && command = "holddown"
Value = 2706
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 3
Triggerall = AnimelemTime(6) <= 5
trigger1 = var(1) > 0
trigger1 = command = "z" 
Value = 2710
Ctrl = 0

[State -1]
Type = Varadd
Trigger1 = var(1) > 0
V = 1
Value = -1


[State -1]
Type = ChangeState
trigger1 = var(1) > 0
Trigger1 = AnimelemTime(7) >= 0
Value = 2701
Ctrl = 0

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;-------------------------------------------------------------------
;→アタック
[Statedef 2704]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
Anim      = 2704
PowerAdd  = 0
Facep2 = 1


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0


[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 12
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = velset
Trigger1 = AnimElemtime(4) = 0
X = 6
y = -6

[State -1]
Type = veladd
Trigger1 = AnimElemtime(4) >= 1
Trigger1 = AnimElemtime(11) <= 2
X = -0.04
y = 0.6

[State -1]
Type = velset
Trigger1 = AnimElemtime(12) = 0
x = 0
y = 0


[State 100]
type = StateTypeSet
trigger1 = AnimElemtime(4) >= 1
trigger1 = AnimElemtime(11) <= 2
statetype = A
Physics = N

[State 100]
type = StateTypeSet
trigger1 = AnimElemtime(12) >= 0
statetype = S
Physics = N


[State -1]
Type = posset
Trigger1 = AnimElemtime(12) = 0
y = 0


[State -1]
Type = Explod
Trigger1 = AnimElem = 12
ID = 1116
PosType = P1
Pos = -40,-30
Anim = 1116
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1


[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 12
Attr = S, SA
Damage = Ceil(FVar(0)*(50-Var(4)%2)), Ceil(FVar(1)*14)
HitFlag = MAFD
GuardFlag = H
Priority = 2, Hit
PauseTime = 10,10+10*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 10,10
HitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -50-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = Hard
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -7
Air.Velocity = -2*Var(50),IfElse(Var(50)=1,-7,FVar(25))
Down.Velocity = -7,-2.5
Ground.CornerPush.VelOff = -13
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = Ceil(40+Var(41)-FVar(35))
GetPower = Ceil(FVar(30)*120), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*120)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 2700
Down.Bounce = 1


[State -1]
Type = Explod
Trigger1 = animelemtime(12) = 0
Anim = 10052
ID = 10052
PosType = P1
Pos = 0,0
Ownpal = 1
Scale = 0.5,0.5
SprPriority = 0
IgnoreHitPause = 1
RemoveTime = -2
RemoveOnGetHit = 1



[State -1]
Type = PlaySnd
Trigger1 = animelemtime(12) = 0
Value = s40, 1


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = ChangeState
triggerall = animelemtime(12) >= 4
Triggerall = AnimelemTime(14) <= 0
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command != "holdup" && command != "holddown"
Value = 2702
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(12) >= 4
Triggerall = AnimelemTime(14) <= 0
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command = "holdback" && command != "holdup" && command != "holddown"
Value = 2703
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(12) >= 4
Triggerall = AnimelemTime(14) <= 0
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command = "holdfwd" && command != "holdback" && command != "holdup" && command != "holddown"
Value = 2704
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(12) >= 4
Triggerall = AnimelemTime(14) <= 0
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command = "holdup" && command != "holddown"
Value = 2705
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(12) >= 4
Triggerall = AnimelemTime(14) <= 0
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command != "holdup" && command = "holddown"
Value = 2706
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(12) >= 4
Triggerall = AnimelemTime(14) <= 0
trigger1 = var(1) >= 0
trigger1 = command = "z" 
Value = 2710
Ctrl = 0

[State -1]
Type = Varadd
Trigger1 = var(1) > 0
V = 1
Value = -1


[State -1]
Type = ChangeState
trigger1 = var(1) > 0
Trigger1 = AnimelemTime(14) >= 0
Value = 2701
Ctrl = 0

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1


;------------------------------------------------------------------
;↑アタック
[Statedef 2705]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
Anim      = 2705
PowerAdd  = 0
Facep2 = 1

[State -1]
Type = velset
Trigger1 = time = 0
X = 6

[State -1]
Type = velset
Trigger1 = AnimElemtime(3) = 0
X = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0


[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Explod
Trigger1 = AnimElem = 3
ID = 1127
PosType = P1
Pos = -20,-70
Anim = 626
Ownpal = 1
bindtime = -1
SprPriority = 4
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1


[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 3
trigger1 = NumTarget(2700) = 0
Attr = S, SA
Damage = 0, 0
numhits = 0
HitFlag = MAFD
GuardFlag = M
Priority = 2, Hit
PauseTime = 1,1
Guard.PauseTime = 1,1
HitSound   = s999, 0
GuardSound = s999,0
SparkXY = -Random%20, -70-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = Hard
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1,-5.5
Air.Velocity = -.05,-7
Down.Velocity = -.05,-7
Ground.CornerPush.VelOff = -13
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = Ceil(31+Var(41)-FVar(35))
GetPower = Ceil(FVar(30)*120), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*120)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 9999
Down.Bounce = 1



[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 3
Attr = S, SA
Damage = Ceil(FVar(0)*(50-Var(4)%2)), Ceil(FVar(1)*14)
HitFlag = MAFD
GuardFlag = M
Priority = 2, Hit
PauseTime = 10,10+10*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 10,10
HitSound   = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -70-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = Hard
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1,-5.5
Air.Velocity = -.05,-7
Down.Velocity = -.05,-7
Ground.CornerPush.VelOff = -13
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = Ceil(40+Var(41)-FVar(35))
GetPower = Ceil(FVar(30)*120), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*120)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 2700
Down.Bounce = 1




[State -1] 
Type = VarSet
Trigger1 = MoveContact = 1
Trigger1 = EnemyNear(Var(3)),BackEdgeBodyDist <= 0 || EnemyNear(Var(3)),FrontEdgeBodyDist <= 0
FV = 25
Value = 0
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = VarSet
Trigger1 = Var(50) = 2
Trigger1 = MoveHit = 1
Trigger1 = FVar(1) > 0.01
FV = 1
Value = 0.65*FVar(1)
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Explod
Trigger1 = Var(50) = 2
Trigger1 = MoveHit = 1
ID = 10840
PosType = P2
Pos = 0,Const(Size.Mid.Pos.Y)
Anim = 10840
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
TriggerAll = Var(50) = 2
Trigger1 = NumTarget(2200) > 0
Trigger1 = Target(2200),StateNo = 5030 || Target(2200),StateNo = 5080
V = 50
Value = 1
IgnoreHitPause = 1

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 3
Triggerall = AnimelemTime(6) <= 4
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command != "holdup" && command != "holddown"
Value = 2702
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 3
Triggerall = AnimelemTime(6) <= 3
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command = "holdback" && command != "holdup" && command != "holddown"
Value = 2703
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 3
Triggerall = AnimelemTime(6) <= 3
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command = "holdfwd" && command != "holdback" && command != "holdup" && command != "holddown"
Value = 2704
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 3
Triggerall = AnimelemTime(6) <= 3
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command = "holdup" && command != "holddown"
Value = 2705
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 3
Triggerall = AnimelemTime(6) <= 3
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command != "holdup" && command = "holddown"
Value = 2706
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(5) >= 3
Triggerall = AnimelemTime(6) <= 3
trigger1 = var(1) >= 0
trigger1 = command = "z" 
Value = 2710
Ctrl = 0

[State -1]
Type = Varadd
Trigger1 = var(1) > 0
V = 1
Value = -1

[State -1]
Type = ChangeState
trigger1 = var(1) > 0
Trigger1 = AnimelemTime(6) >= 4
Value = 2701
Ctrl = 0

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1


;-------------------------------------------------------------------
;↓アタック
[Statedef 2706]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
Anim      = 2706
PowerAdd  = 0
Facep2 = 1

[State -1]
Type = velset
Trigger1 = time = 0
X = 6

[State -1]
Type = velset
Trigger1 = AnimElemtime(3) = 0
X = 0


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0


[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 4
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 3
Attr = S, SA
Damage = Ceil(FVar(0)*(50-Var(4)%2)), Ceil(FVar(1)*14)
HitFlag = MAFD
GuardFlag = L
Priority = 2, Hit
PauseTime = 10,10+10*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 10,10
HitSound   = s10, 5
GuardSound = s120,0
SparkXY = -Random%20, -30-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = hard
Ground.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -5,0
Air.Velocity = -.5*Var(50),IfElse(Var(50)=1,-5,FVar(25))
Down.Velocity = -7,-2.5
Ground.CornerPush.VelOff = -13
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -4
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 1
Fall.RecoverTime = Ceil(40+Var(41)-FVar(35))
GetPower = 0,0
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 2706
Down.Bounce = 1

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = ChangeState
triggerall = animelemtime(6) >= 1
Triggerall = AnimelemTime(7) <= 2
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command != "holdup" && command != "holddown"
Value = 2705
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(6) >= 1
Triggerall = AnimelemTime(7) <= 2
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command = "holdback" && command != "holdup" && command != "holddown"
Value = 2703
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(6) >= 1
Triggerall = AnimelemTime(7) <= 2
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command = "holdfwd" && command != "holdback" && command != "holdup" && command != "holddown"
Value = 2704
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(6) >= 1
Triggerall = AnimelemTime(7) <= 2
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command = "holdup" && command != "holddown"
Value = 2705
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(6) >= 1
Triggerall = AnimelemTime(7) <= 2
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command != "holdup" && command = "holddown"
Value = 2706
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(6) >= 1
Triggerall = AnimelemTime(7) <= 2
trigger1 = var(1) >= 0
trigger1 = command = "z"
Value = 2710
Ctrl = 0

[State -1]
Type = Varadd
Trigger1 = var(1) > 0
V = 1
Value = -1

[State -1]
Type = ChangeState
trigger1 = var(1) > 0
Trigger1 = AnimelemTime(8) >= 0
Value = 2701
Ctrl = 0


[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1



;-------------------------------------------------------------------
;前転
[Statedef 2710]
Type      = S
MoveType  = I
Physics   = S
Ctrl      = 0
Anim      = 2710
PowerAdd  = 0
Facep2 = 1

[State -1]
Type = PlayerPush
Trigger1 = AnimElemtime(3) >= 0
Trigger1 = AnimElemtime(7) <= 3
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlayerPush
Trigger1 = AnimElemtime(8) >= 0
Value = 1
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = velset
Trigger1 = AnimElemtime(3) = 0
X = 6.3
y = -6.2

[State -1]
Type = veladd
Trigger1 = AnimElemtime(3) >= 1
Trigger1 = AnimElemtime(7) <= 3
X = -0.01
y = 0.6

[State -1]
Type = velset
Trigger1 = AnimElemtime(8) = 0
y = 0

[State -1]
Type = null;velset
Trigger1 = AnimElemtime(11) = 0
x = 0

[State 100]
type = StateTypeSet
trigger1 = AnimElemtime(3) >= 1
trigger1 = AnimElemtime(7) <= 3
statetype = A
Physics = N

[State 100]
type = StateTypeSet
trigger1 = AnimElemtime(8) >= 0
statetype = C
Physics = C

[State -1]
Type = posset
Trigger1 = AnimElemtime(8) = 0
y = 0

[State -1]
Type = Explod
Trigger1 = animelemtime(8) = 0
Anim = 10052
ID = 10052
PosType = P1
Pos = 0,0
Ownpal = 1
Scale = 0.5,0.5
SprPriority = 0
IgnoreHitPause = 1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = PlaySnd
Trigger1 = animelemtime(8) = 0
Value = s40, 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0


[State -1]
Type = ChangeState
triggerall = animelemtime(10) >= 0
Triggerall = AnimelemTime(11) <= 3
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command != "holdup" && command != "holddown"
Value = 2702
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(10) >= 0
Triggerall = AnimelemTime(11) <= 3
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command = "holdback" && command != "holdup" && command != "holddown"
Value = 2703
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(10) >= 0
Triggerall = AnimelemTime(11) <= 3
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command = "holdfwd" && command != "holdback" && command != "holdup" && command != "holddown"
Value = 2704
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(10) >= 0
Triggerall = AnimelemTime(11) <= 3
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command = "holdup" && command != "holddown"
Value = 2705
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(10) >= 0
Triggerall = AnimelemTime(11) <= 3
trigger1 = var(1) >= 0
trigger1 = command = "a" || command = "b" || command = "c"
trigger1 = command != "holdfwd" && command != "holdback" && command != "holdup" && command = "holddown"
Value = 2706
Ctrl = 0

[State -1]
Type = ChangeState
triggerall = animelemtime(10) >= 0
Triggerall = AnimelemTime(11) <= 3
trigger1 = var(1) >= 0
trigger1 = command = "z"
Value = 2710
Ctrl = 0

[State -1]
Type = Varadd
Trigger1 = var(1) > 0
V = 1
Value = -1


[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 11
Ctrl = 1




;---------------------------------------------------------------------------
;転猫-EX

[Statedef 2800]
type    = A
movetype= A
physics = N
anim = 2800
ctrl = 0

[State -1]
Type = PowerAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))

[State -1]
Type = VarAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)



[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0


[State -1]
Type = VarSet
Trigger1 = Time = [0,3]
Trigger1 = command = "holdback"
V = 1
Value = -1
pausemovetime = 999
ignorehitpause = 1

[State -1]
Type = VarSet
Trigger1 = Time = [0,3]
Trigger1 = command = "holdfwd" 
V = 1
Value = 1
pausemovetime = 999
ignorehitpause = 1

[State -1]
Type = VarSet
Trigger1 = 1
Trigger1 = Var(22)/100 = 0
V = 22
Value = Var(22)+100

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 7
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 43

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 0,-55
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s2800, ifelse(random>500,0,1)
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = Helper
TriggerAll = Var(0)%10 = 0
Trigger1 = Time = 36
StateNo = 8000
ID = 8000
PosType = P1
Pos = 0,-60
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = VarSet
Trigger1 = Time = 36
sysvar(1) = 1

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 36
time = 19
add = 96,96,96 ;256,256,256
sinadd = 96,96,96,3

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 36
value = 1

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 36
trigger1 = p2dist X < -20

[State 5210, 1]
type = VelSet
trigger1 = Time = [0,35]
x = 0
y = 0

[State 5210, 1] 
type = VelMul
trigger1 = Time = 37
x = .8
y = .8

[State 5210, 1]
type = VelAdd
trigger1 = Time = 37
y = -4.5

[State 5210, 1] 
type = VelMul
trigger1 = Time = 37
trigger1 = Vel Y > 0
y = .5

[State 5210, 1]
type = VelAdd
trigger1 = Time = 37
trigger1 = Vel Y > -3
y = -2

[State 5210, 1]
type = VelAdd
trigger1 = Time = 37
trigger1 = Vel Y > -2
y = -1

[State 5210, 2] ;Go up
type = VelSet
TriggerAll = Var(59) <= 0
trigger1 = Time = 37
trigger1 = var(1) = 0
y = -5.4

[State 5210, 2] ;Go fwd
type = VelSet
TriggerAll = Var(59) <= 0
trigger1 = Time = 37
trigger1 = var(1) = 1
x = 2.6
y = -8.4

[State 5210, 2] ;Go back
type = VelSet
TriggerAll = Var(59) <= 0
trigger1 = Time = 37
trigger1 = var(1) = -1
x = -2.6
y = -8.4

[State -1, AI]
type = VelSet
TriggerAll = Var(59) > 0
triggerAll = Time = 37
trigger1 = P2BodyDist X != [-60,60]
Trigger1 = Var(58) = [0,59]
Trigger2 = EnemyNear,MoveType != A
trigger2 = P2BodyDist X = [-60,60]
Trigger2 = Var(58) = [0,59]
Trigger3 = EnemyNear,MoveType = A
trigger3 = P2BodyDist X = [-60,60]
Trigger3 = Var(58) = [0,19]
y = -5.4

[State -1, AI]
type = VelSet
TriggerAll = Var(59) > 0
triggerAll = Time = 37
trigger1 = P2BodyDist X != [-80,80]
Trigger1 = Var(58) = [60,69]
Trigger2 = EnemyNear,MoveType != A
trigger2 = P2BodyDist X = [-80,80]
Trigger2 = Var(58) = [60,69]
Trigger3 = EnemyNear,MoveType = A
trigger3 = P2BodyDist X = [-80,80]
Trigger3 = Var(58) = [20,89]
x = 2.6
y = -8.4

[State -1, AI]
type = VelSet
TriggerAll = Var(59) > 0
triggerAll = Time = 37
trigger1 = P2BodyDist X != [-80,80]
Trigger1 = Var(58) = [70,99]
Trigger2 = EnemyNear,MoveType != A
trigger2 = P2BodyDist X = [-80,80]
Trigger2 = Var(58) = [70,99]
Trigger3 = EnemyNear,MoveType = A
trigger3 = P2BodyDist X = [-80,80]
Trigger3 = Var(58) = [90,99]
x = -2.6
y = -8.4

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 19

[State 5210, 4]
type = CtrlSet
trigger1 = animelemTime(9) >= 0
value = 1

[State 5210, 5]
type = StateTypeSet
trigger1 = Time = 1
Physics  = A


[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 8
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Explod
Trigger1 = AnimElem = 8
ID = 1805
PosType = P1
Pos = 35,-35
Anim = 1805
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 8
Attr = A, NA
Damage = Ceil(FVar(0)*(150-Var(4)%2))
HitFlag = MAF
GuardFlag = 
Priority = 3, Hit
PauseTime = 10,10+10*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 10,10
HitSound = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -30-Random%20
SparkNo = -1
Guard.SparkNo = -1
AnimType = Hard
Ground.Type = High
Ground.SlideTime = 15
Ground.HitTime  = 15
Ground.Velocity = -5
Guard.Velocity = -7
Air.Velocity = -1.5*Var(50),IfElse(Var(50)=1,-7.4,FVar(25))
AirGuard.Velocity = -3,-1.4
Down.Velocity = -3.2,-2.5
Ground.CornerPush.VelOff = -6
Air.CornerPush.VelOff = -2.5*Var(50)
Down.CornerPush.VelOff = -5.2
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = Ceil(40+Var(41)-FVar(35))
GetPower = Ceil(FVar(30)*120), Ceil(IfElse(Var(43)>0,0.88,0.85)*FVar(30)*120)
GivePower = Floor(FVar(31)*50), Floor(0.50*FVar(31)*50)
id = 5600
p2facing = 1
Down.Bounce = 1


[State 1450]
type = targetstate
trigger1 = animelemtime(5) >= 0
trigger1 = movehit
value = 5600
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1



[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Time > 1
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1



;---------------------------------------------------------------------------
;月鳶・稲荷返し

[Statedef 2900]
type    = S
movetype= A
physics = N
anim = 2900
ctrl = 0

[State -1]
Type = PowerAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))

[State -1]
Type = VarAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0


[State -1]
Type = VarSet
Trigger1 = 1
Trigger1 = Var(22)/100 = 0
V = 22
Value = Var(22)+100

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 7
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 43

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 0,-55
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s2900, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1



[State -1]
Type = VarSet
Trigger1 = Time = 36
sysvar(1) = 1


[State 5210, 1]
type = VelSet
trigger1 = Time = [0,25]
x = 0
y = 0


[State 5210, 1]
type = VelAdd
trigger1 = animelemtime(7) = 0
x = -2.6
y = -10



[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 25



[State 5210, 5]
type = StateTypeSet
trigger1 = animelemtime(7) > 0
Physics  = A


[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 13
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -1]
Type = Helper
Trigger1 = AnimElem = 14
StateNo = 2905
ID = 1505
PosType = P1
pos = 29, -37
Ownpal = 1
facaing = -1
SprPriority = 5


[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Time > 1
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1



;---------------------------------------------------------------------
;ナイフ斜め飛び-月鳶・稲荷返し
[Statedef 2905]
Type    = S
MoveType= A
Physics = N
Juggle  = 0
Ctrl = 0
Anim = 1572
SprPriority = 5
facaing = -1


[State -1]
Type     = NotHitBy
Trigger1 = 1
Value    = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time     = 1

[State -1]
Type = velset
Trigger1 = time = 0
trigger1 = parent,stateno != 2501
trigger1 = enemynear,p2dist x >= 100
x = 9*cos(atan(150/p2dist x))
y = 9*sin(atan(150/p2dist x))
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = velset
Trigger1 = time = 0
trigger1 = parent,stateno != 2501
trigger1 = enemynear,p2dist x < 100
x = 5
y = 10
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = velset
Trigger1 = time = 0
trigger1 = parent,stateno = 2501
trigger1 = enemynear,p2dist x >= 100
x = 9*cos(atan(55/p2dist x))
y = 9*sin(atan(55/p2dist x))
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = velset
Trigger1 = time = 0
trigger1 = parent,stateno = 2501
trigger1 = enemynear,p2dist x < 100
x = 10
y = 5
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State 3201, Angle 4]
type = Angleset
trigger1 = Time >= 0
value = -180/pi * atan((vel y) / (vel x))

[State 3201, Facing]
type = AngleDraw
trigger1 = time >= 0
scale = 1, 1


[State -1]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = HitDef
TriggerAll = parent,Var(25)/10%10 < 3
Trigger1 = time = 0
Attr = C, NA
Damage    = Ceil(parent,FVar(0)*(250-parent,Var(4)%2))
AnimType  = Hard
HitFlag = MAFD
GuardFlag = MA
Priority  = 2, Hit
PauseTime = 2,15+15*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 2,10
HitSound = s20, 0
GuardSound = s120,0
SparkXY = -Random%20, -Random%20
SparkNo = -1
Guard.SparkNo = -1
Ground.Type = Trip
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -0.5,-7.5
Guard.Velocity = -10
Air.Velocity = IfElse(parent,Var(50)=1,-0.5,-5),IfElse(parent,Var(50)=1,-3.2,parent,FVar(25))
Down.Velocity = -4,-2.5
Ground.CornerPush.VelOff = 0
Guard.CornerPush.VelOff = -12
Air.CornerPush.VelOff = IfElse(parent,Var(50)=1,0,-6)
Down.CornerPush.VelOff = -6
YAccel = .47
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = Ceil(parent,FVar(30)*30), Ceil(0.85*parent,FVar(30)*30)
GivePower = Floor(parent,FVar(31)*30), Floor(0.50*parent,FVar(31)*30)
id = 1501
Down.Bounce = 1




[State -2]
Type = Helper
Trigger1 = time%2 = 0
Trigger1 = Pos Y <= -5
StateNo = 1580
ID = 1580
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 4
BindTime = -1
IgnoreHitPause = 1
size.yscale = 0.8
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -2]
Type = Helper
TriggerAll = MoveHit = 1
TriggerAll = P2MoveType = H
Trigger1 = NumHelper(16200) = 0 && NumHelper(16210) = 0
Trigger2 = NumTarget(1501) > 0
Trigger2 = Target(1501),Time = 0
StateNo = 16200;16100
ID = 16200+IfElse(Var(38)=0,0,10);16100+IfElse(Var(38)=0,0,10)
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 5
BindTime = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = explod
Trigger1 = Moveguarded
ID = 10120
PosType = P1
Pos = 0,0
Scale = 0.5,0.5
Anim = IfElse((1.00*Parent,Var(35)/Parent,Var(32)=[0.00,0.34]),10122,10121)
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
BindTime = 1
RemoveTime = -2


[State -2]
Type = parentVarAdd
TriggerAll = parent,Var(0)/10000%10 = 0
TriggerAll = MoveGuarded = 1
Trigger1 = parent,FVar(7) = [40,99]
Trigger2 = (parent,FVar(7) = [1,39]) && (Target,Var(42)%10 != [1,5]) && (Target,PrevStateNo != [150,159]) || (parent,FVar(7) = [1,39]) && (Target,Var(42)%10 != 1) && (Target,PrevStateNo = [150,159])
V = 35
Value = -Floor(100*parent,FVar(22))
IgnoreHitPause = 1

[State -2]
Type = parentVarAdd
TriggerAll = parent,Var(58) = 0
TriggerAll = RoundState = 2
Trigger1 = parent,Var(35) < 0
Trigger1 = parent,FVar(23) = 0
V = 2
Value = -1000
IgnoreHitPause = 1

[State -2]
Type = TargetState
TriggerAll = parent,Var(58) = 0
TriggerAll = RoundState = 2
Trigger1 = parent,Var(35) < 0
Trigger1 = parent,FVar(23) = 0
Trigger1 = EnemyNear(parent,Var(3)),StateNo = 150 || EnemyNear(parent,Var(3)),StateNo = 152 || EnemyNear(parent,Var(3)),StateNo = 154
Value = 5310
IgnoreHitPause = 1

[State -2]
Type = Helper
TriggerAll = parent,Var(58) = 0
TriggerAll = RoundState = 2
Trigger1 = NumHelper(5315) = 0
Trigger1 = parent,Var(35) < 0
Trigger1 = parent,FVar(23) = 0
Trigger1 = EnemyNear(Var(3)),StateNo = 5310
StateNo = 5315
PosType = P2
Pos = 0, 0
Ownpal = 1
ID = 5315
IgnoreHitPause = 1


[State -1]
Type = ChangeState
Trigger1 = (Vel Y > 0) && (Pos Y >= -1)
Value = 1502
Ctrl = 0


[State -1]
Type = ChangeState
Trigger1 = Time > 1
Trigger1 = FrontEdgeDist <= 0
IgnoreHitPause = 0
Value = 1503
Ctrl = 0


;---------------------------------------------------------------------------
;陰陽螺旋-EX（投げ）
[Statedef 1620]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
Anim      = 1670
PowerAdd  = 0
Facep2 = 1


[State -1]
Type = PowerAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))

[State -1]
Type = VarAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 7
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 43

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 0,-50
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = null;PlaySnd
Trigger1 = AnimElem = 1
Value = s2200, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1



[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0


[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 2
Value = s1600, ifelse(random <= 499,0,1)
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State 1510,ReversalDef]
type = ReversalDef
trigger1 = AnimElem >= 4
attr = SCA
reversal.attr = SCA,NA,SA,HA
sparkxy = 0,0
sparkno = s1650
pausetime = 8,8
hitsound = s10, 0
p1stateno = 1675
p2stateno = 1630


[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;陰陽螺旋-2
[Statedef 1675]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
PowerAdd  = 50
Sprpriority = 4

[State -1]
Type = ChangeAnim
Trigger1 = Time = 0
Value = 1620

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 1
Trigger1 = random <= 599
Value = s1800, 8
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = TargetBind
Trigger1 = AnimElem = 1
Pos = 0, 0

[State -1]
Type = Width
Trigger1 = AnimElem = 1
Edge = 30,5

[State -1]
Type = TargetBind
Trigger1 = AnimElem = 2
Pos = -10, 0

[State -1]
Type = TargetLifeAdd
Trigger1 = AnimElem = 3
Value = -Ceil(FVar(0)/(1.00-(0.08*FVar(4)))*(140-Var(4)%2))


[State -1]
Type = TargetState
Trigger1 = AnimElemTime(3) = 0
Value = 1631
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = turn
Trigger1 = AnimTime = 0
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1




;---------------------------------------------------------------------------
;陰陽螺鈿-EX（空かし）
[Statedef 1670]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
Anim      = 1670
PowerAdd  = 0
Facep2 = 1



[State -1]
Type = PowerAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = 0
Value = Ceil(-1000*IfElse(Var(57)%10=2,1.334,IfElse(Var(57)%10=3,1.115,1.0000)))

[State -1]
Type = VarAdd
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = IfElse(Var(13)=4,-500,-1000)


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 7
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 43

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = 0,-50
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0


[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 2
Value = s1600, ifelse(random <= 499,0,1)
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State 1510,ReversalDef]
type = ReversalDef
trigger1 = AnimElem >= 4
attr = SCA
reversal.attr = SCA,NA,SA,HA
sparkxy = 0,0
sparkno = s1650
pausetime = 8,8
hitsound = s10, 0
p1stateno = 1680
p2stateno = 1640


[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1



;---------------------------------------------------------------------------
;陰陽螺鈿-2
[Statedef 1680]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
PowerAdd  = 50
Sprpriority = 4

[State -1]
Type = ChangeAnim
Trigger1 = Time = 0
Value = 1610

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 1
Trigger1 = random <= 599
Value = s1800, 5
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s30, 4
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = TargetBind
Trigger1 = AnimElem = 1
Pos = 0, 0

[State -1]
Type = Width
Trigger1 = AnimElem = 1
Edge = 30,5

[State -1]
Type = TargetBind
Trigger1 = AnimElem = 2
Pos = -5, 0


[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = turn
Trigger1 = AnimTime = 0
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = Ctrlset
Trigger1 = AnimelemTime(4) >= 2
value = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1






;---------------------------------------------------------------------------
; 直死の魔眼 五景崩落
[Statedef 3000]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
VelSet = 0,0
Anim = 3000
SprPriority = 4
Facep2 = 1

[State -1]
Type = VarSet
Triggerall = anim = 3000
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Triggerall = anim = 3000
Trigger1 = Time = [0,70]
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = SuperPause
Triggerall = anim = 3000
Trigger1 = AnimElem = 5
Anim = -1
Time = 57
MoveTime = 57
P2DefMul = 1
Darken = 0

[State -1]
Type = Helper
Triggerall = anim = 3000
Trigger1 = AnimElem = 5
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = -3,-47
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Helper
Triggerall = anim = 3000
Trigger1 = AnimElem = 3
StateNo = 3105
ID = 3105
Ownpal = 1
Keyctrl = 0
SprPriority = -5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Helper
Triggerall = anim = 3000
Trigger1 = AnimElem = 17 || Animelem = 18
Trigger1 = MoveHit = 1
StateNo = 3106
ID = 3006
Ownpal = 1
Keyctrl = 0
SprPriority = -5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Triggerall = anim = 3000
Trigger1 = AnimElem = 3
Trigger1 = Var(13) = [1,4]
FV = 29
Value = 0

[State -1]
Type = PlaySnd
Triggerall = anim = 3000
Trigger1 = AnimElem = 5
Value = s3000, 5
Channel = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = VarSet
Triggerall = anim = 3000
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1


[State -1]
type = HitDef
Triggerall = anim = 3000
trigger1 = p2bodydist X <= 60
trigger1 = p2bodydist Y >= -20
;trigger1 = p2stateno != [133,159]
trigger1 = p2statetype != L
trigger1 = animelem = 12
attr = S, HT
damage = 0
numhits = 0
animtype = hight
guardflag = 
hitflag = MAF
priority = 3, Hit
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = -5,-73
hitsound = -1
guardsound = -1
ground.slidetime = 1
ground.hittime = 1
guard.velocity = 0
ground.velocity = 0
air.velocity = 0,0
getpower = 0,0
givepower = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
ID = 3001
p2stateno = 3001
Down.Bounce = 1

[State -1]
type = pause
Triggerall = anim = 3000
trigger1 = animelemtime(13) = 1
trigger1 = EnemyNear,statetype != L
;trigger1 = EnemyNear,statetype != A
trigger1 = numtarget(3001) >= 1
time = 60
movetime = 60
persistent = 0
ignorehitpause = 1


[State -1]
type = PlaySnd
Triggerall = anim = 3000
trigger1 = animelemtime(13) = 1
trigger1 = EnemyNear,statetype != L
;trigger1 = EnemyNear,statetype != A
trigger1 = numtarget(3001) >= 1
value = S3000,1
Channel = 0
persistent = 0
ignorehitpause = 1

[State -1]
type = PlaySnd
Triggerall = anim = 3000
trigger1 = animelemtime(13) = 1
trigger1 = EnemyNear,statetype != L
;trigger1 = EnemyNear,statetype != A
trigger1 = numtarget(3001) >= 1
value = S3000,7
Channel = 4
persistent = 0
ignorehitpause = 1


[State -1]
type = Helper
Triggerall = anim = 3000
trigger1 = animelemtime(13) = 1
trigger1 = !Numhelper(3015)
trigger1 = EnemyNear,statetype != L
;trigger1 = EnemyNear,statetype != A
trigger1 = numtarget(3001) >= 1
id = 3015
stateno = 3015
postype = p2
pos = enemy,const(size.mid.pos.x)+4,enemy,const(size.mid.pos.y)+7
pausemovetime = 999
supermovetime = 999
ownpal = 1
persistent = 0
ignorehitpause = 1


[State -1]
type = ChangeAnim
Triggerall = anim = 3000
trigger1 = numtarget(3001) = 0
trigger1 = animelemtime(13) = 8
value = anim
elem = 14
persistent = 0
ignorehitpause = 1

[State -1]
Type = Helper
Triggerall = anim = 3000
Trigger1 = animelemTime(18) >= 0
Trigger1 = animelemTime(19) <= 0
StateNo = 755
ID = 756
Ownpal = 1
Keyctrl = 0
SprPriority = -5
IgnoreHitPause = 0
Persistent = 8


[State -1]
Type = Veladd
Triggerall = anim = 3000
Trigger1 = animelemTime(17) = 0
X = 18

[State -1]
Type = Velset
Triggerall = anim = 3000
Trigger1 = animelemTime(17) >= 1
Trigger1 = animelemTime(18) <= 12
X = 8

[State -1]
Type = posadd
Triggerall = anim = 3000
Trigger1 = animelemTime(19) = 0
X = 15

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
triggerAll = numtarget(3001) = 0
Triggerall = anim = 3000
Trigger1 = Var(50) = 1
Trigger1 = Animelem = 18
Attr = S, HA
Damage = Ceil(FVar(0)*(0-Var(4)%2))
AnimType = Hard
HitFlag = MAF
GuardFlag = MA
Priority = 4, Hit
PauseTime = 1, 11+11*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 6,11
SparkNo = -1
Guard.SparkNo = -1
SparkXY = -Random%20, -50-Random%20
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = High
Air.Type = High
GuardSound = s120,0
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0
Air.Velocity = 0,-3
AirGuard.Velocity = -3,-1.4
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
hitonce = 1
P2Facing = 1
Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = 0
ID = 3000
p2stateno = 3002
p1stateno = 3010
Down.Bounce = 1


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
triggerall = numtarget(3001) = 1
Triggerall = anim = 3000
Trigger1 = Var(50) = 1
Trigger1 = Animelem = 17 || Animelem = 18
Attr = S, HA
Damage = Ceil(FVar(0)*(0-Var(4)%2))
AnimType = Hard
HitFlag = MAF
GuardFlag = 
Priority = 4, Hit
PauseTime = 1, 11+11*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 6,11
SparkNo = -1
Guard.SparkNo = -1
SparkXY = -Random%20, -50-Random%20
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = High
Air.Type = High
GuardSound = s120,0
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0
Air.Velocity = 0,-3
AirGuard.Velocity = -3,-1.4
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
hitonce = 1
P2Facing = 1
Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = 0
ID = 3000
p2stateno = 3002
p1stateno = 3010
Down.Bounce = 1


[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1


[State -1test]
Type = changeanim
Triggerall = anim = 3000
Triggerall = animelemtime(19) = 1
Triggerall = anim != 3001
trigger1 = facing = 1
trigger1 = (enemynear,ScreenPos x) - (ScreenPos x) <= 15
trigger2 = facing = -1
trigger2 = (ScreenPos x) - (enemynear,ScreenPos x) <= 15
Value = 3001
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = turn
Trigger1 = anim = 3001
Trigger1 = AnimTime = 0
IgnoreHitPause = 1
Persistent = 1


[State -1] 
Type = ChangeState
Triggerall = anim = 3000
Trigger1 = numtarget(3001) >= 1
Trigger1 = Animelem = 18
Value = 3010


[State -1] 
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1



;---------------------------------------------------------------------------
;直死の魔眼 死の線エフェクト
[Statedef 3015]
type = S
physics = N
anim = 3008
sprpriority = 1
ctrl = 0


[State -1]
Type = AssertSpecial
Trigger1 = 1
Flag = Noshadow
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -1]
type = trans
trigger1 = time >= 0
trans = sub
ignorehitpause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
type = VarSet
trigger1 = time = 0
v = 1
value = -255
persistent = 0
ignorehitpause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
type = VarAdd
trigger1 = time >= 0
v = 1
value = 5
persistent = 1
ignorehitpause = 1

[State -1]
type = PalFx
trigger1 = 1
time = 999
add = var(1),0,0
invertall = 0
persistent = 1


[State -1]
type = DestroySelf
trigger1 = root,stateno = 3010 && time >= 3
trigger2 = root,stateno = 3060 && time >= 3
trigger3 = root,ctrl
ignorehitpause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999




;---------------------------------------------------------------------------
;直死の魔眼 五景崩落　成功
[Statedef 3010]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
VelSet = 0,0
Anim = 3002
SprPriority = 2

[State -1]
Type = Helper
Trigger1 = animelemTime(1) >= 0
Trigger1 = animelemTime(11) <= 2
StateNo = 755
ID = 756
Ownpal = 1
Keyctrl = 0
SprPriority = -5
IgnoreHitPause = 0
Persistent = 8


[State -1]
Type = Explod
Trigger1 = time = 0
Anim = 3009
PosType = p1
Pos = 27,-46
Ownpal = 1
SprPriority = 5
BindTime = 1
IgnoreHitPause = 1
Persistent = 0
pausemovetime = 999

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = Explod
Trigger1 = animelemtime(4) = 0
Anim = 3005
PosType = p1
Pos = 0,-30
Ownpal = 1
SprPriority = 5
BindTime = 1
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Explod
Trigger1 = animelemtime(11) = 0
Anim = 3006
PosType = p1
Pos = -50,-60
Ownpal = 1
SprPriority = 5
BindTime = 1
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Explod
Trigger1 = animelemtime(18) = 0
Anim = 3007
PosType = p1
Pos = -60,-65
Ownpal = 1
SprPriority = 5
BindTime = 1
IgnoreHitPause = 1
Persistent = 0
pausemovetime = 999

[State -1]
Type = null;Explod
Trigger1 = animelemtime(21) = 0
Anim = 3010
PosType = left
Pos = ifelse(facing = 1,0,320), 240
facing = ifelse(facing = 1,1,-1)
Ownpal = 1
SprPriority = 5
BindTime = 999
IgnoreHitPause = 1
Persistent = 0


[State -1]
Type = null;Explod
Trigger1 = animelemtime(21) = 0
Anim = 3011
PosType = left
Pos = ifelse(facing = 1,0,320), 240
facing = ifelse(facing = 1,1,-1)
Ownpal = 1
SprPriority = 5
BindTime = 999
IgnoreHitPause = 1
Persistent = 0

[State -2]
Type = Helper
Trigger1 = animelemtime(21) = 0
StateNo = 170000
ID = 170005
PosType = P1
Pos = target(3000),p2dist x,-70
random = 20,20
Ownpal = 1
Persistent = 0
SprPriority = 5
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = Pause
Trigger1 = animelemtime(19) >= 0
Trigger1 = animelemtime(22) <= 25
Anim = -1
Time = 1
P2DefMul = 1
Darken = 0
Persistent = 1

[State -1]
Type = PlaySnd
Trigger1 = animelemtime(21) = 0
Value = s20, 0
Channel = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = velset
Trigger1 = animelemtime(9) <= 0
X = 9

[State -1]
Type = velset
Trigger1 = animelemtime(9) = 1
X = 0

[State -1]
Type = velset
Trigger1 = animelemtime(13) >= 0
Trigger1 = animelemtime(17) <= 0
X = 7

[State -1]
Type = velset
Trigger1 = animelemtime(19) = 0
X = 0

[State -1]
Type = TargetPowerAdd
Trigger1 = AnimElem = 21, = 0
Value = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11)

[State -1]
Type = TargetLifeAdd
Trigger1 = AnimElem = 21
Value = -Ceil(FVar(0)/(1.00-(0.08*FVar(4)))*(320-Var(4)%2))




[State -1]
Type = VarAdd
Trigger1 = AnimElem = 21
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = TargetState
Trigger1 = animelemtime(21) <= 0
Value = 3002
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = TargetState
Trigger1 = animelemtime(21) = 1
Value = 3003
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = 1
FV = 26
Value = 0.50
IgnoreHitPause = 1

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1] 
Type = turn
Trigger1 = AnimTime = 0

[State -1] 
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1




;---------------------------------------------------------------------------
;;直死の魔眼 相手1
[Statedef 3001]
type = S
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 0

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitOverRide
Trigger1 = 1
Attr = , NT, ST, HT
Time = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State 9000, 1]
type = ScreenBound
trigger1 = 1
movecamera = 0,0


[State -1]
type = null;ChangeAnim
trigger1 = 1
value = anim
;elem = animelemno
ignorehitpause = 1



;---------------------------------------------------------------------------
;;直死の魔眼 相手2
[Statedef 3002]
Type    = A
MoveType= H
Physics = N
VelSet = 0,0


[State 9000, 1]
type = ScreenBound
trigger1 = 1
movecamera = 0,0

[State 105, 1]
type = posSet
Trigger1 = time = 0
Trigger1 = pos y > 0
y = 0

[State 105, 1]
type = posadd
Trigger1 = BackEdgeDist <= 40
x = 50

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitOverRide
Trigger1 = 1
Attr = , NT, ST, HT
Time = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
Trigger1 = 1
Value = 5011

[State -1] 
Type = SelfState
Trigger1 = Time >= 10
Trigger1 = P2MoveType != A
Value = 5035

;---------------------------------------------------------------------------
;直死の魔眼 相手3
[Statedef 3003]
Type    = A
MoveType= H
Physics = N


[State 9000, 1]
type = ScreenBound
trigger1 = 1
movecamera = 0,0

[State -1]
Type = veladd
Trigger1 = time = 0
X = -.3
Y = -9.5

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 30
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5061)
Trigger1 = Time = 0
Value = 5061

[State -1]
Type = ChangeAnim
TriggerAll =! SelfAnimExist(5061)
TriggerAll = SelfAnimExist(5030)
Trigger1 = Time = 0
Value = 5030

[State -1]
Type = ChangeAnim
TriggerAll =! SelfAnimExist(5061)
TriggerAll = SelfAnimExist(5035)
Trigger1 =! SelfAnimExist(5030)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Value = 5035

[State -1]
Type = ChangeAnim
TriggerAll =! SelfAnimExist(5061)
TriggerAll = SelfAnimExist(5050)
Trigger1 =! SelfAnimExist(5030)
Trigger1 =! SelfAnimExist(5035)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Trigger3 = Anim = 5035
Trigger3 = AnimTime = 0
Value = 5050

[State -1]
Type = VelAdd
Trigger1 = 1
Y = .45

[State -1] 
Type = HitFallSet
Trigger1 = 1
Value = 1 

[State -1] 
Type = SelfState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y >= 0
Value = 5100 




;---------------------------------------------------------------------------
; 直死の魔眼 七景終落
[Statedef 3050]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
VelSet = 0,0
Anim = 3050
SprPriority = 4
Facep2 = 1


[State -1]
Type = VarSet
Trigger1 = AnimElem = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = 0

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1


[State -1]
Type = VarSet
Triggerall = anim = 3050
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Triggerall = anim = 3050
Trigger1 = Time = [0,70]
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1


[State -1]
Type = Helper
Triggerall = anim = 3050
Trigger1 = AnimElem = 1
StateNo = 3105
ID = 3105
Ownpal = 1
Keyctrl = 0
SprPriority = -5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = SuperPause
Triggerall = anim = 3050
Trigger1 = AnimElem = 1
Anim = -1
Time = 63
MoveTime = 63
P2DefMul = 1
Darken = 0

[State -1]
Type = Helper
Triggerall = anim = 3050
Trigger1 = AnimElem = 1
StateNo = 6010
ID = 10001
Name = "EX_Effect"
Pos = -3,-47
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -1]
Type = Helper
Triggerall = anim = 3050
Trigger1 = AnimElem = 17 || Animelem = 18
Trigger1 = MoveHit = 1
StateNo = 3106
ID = 3006
Ownpal = 1
Keyctrl = 0
SprPriority = -5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Triggerall = anim = 3050
Trigger1 = AnimElem = 3
Trigger1 = Var(13) = [1,4]
FV = 29
Value = 0

[State -1]
Type = PlaySnd
Triggerall = anim = 3050
Trigger1 = AnimElem = 1
Value = s3000, 5
Channel = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
type = HitDef
Triggerall = anim = 3050
trigger1 = p2bodydist X <= 70
trigger1 = p2bodydist Y >= -30
;trigger1 = p2stateno != [133,159]
trigger1 = p2statetype != L
trigger1 = animelem = 12
attr = S, HT
damage = 0
numhits = 0
animtype = hight
guardflag = 
hitflag = MAF
priority = 3, Hit
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = -5,-73
hitsound = -1
guardsound = -1
ground.slidetime = 1
ground.hittime = 1
guard.velocity = 0
ground.velocity = 0
air.velocity = 0,0
getpower = 0,0
givepower = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
ID = 3001
p2stateno = 3001
Down.Bounce = 1

[State -1]
type = pause
Triggerall = anim = 3050
trigger1 = animelemtime(13) = 1
trigger1 = EnemyNear,statetype != L
;trigger1 = EnemyNear,statetype != A
trigger1 = numtarget(3001) >= 1
time = 65
movetime = 65
persistent = 0
ignorehitpause = 1

[State -1]
type = PlaySnd
Triggerall = anim = 3050
trigger1 = animelemtime(13) = 1
trigger1 = EnemyNear,statetype != L
;trigger1 = EnemyNear,statetype != A
trigger1 = numtarget(3001) >= 1
value = S3000,1
Channel = 0
persistent = 0
ignorehitpause = 1

[State -1]
type = PlaySnd
Triggerall = anim = 3050
trigger1 = animelemtime(13) = 1
trigger1 = EnemyNear,statetype != L
;trigger1 = EnemyNear,statetype != A
trigger1 = numtarget(3001) >= 1
value = S3000,7
Channel = 4
persistent = 0
ignorehitpause = 1


[State -1]
type = Helper
Triggerall = anim = 3050
trigger1 = animelemtime(13) = 1
trigger1 = !Numhelper(3015)
trigger1 = EnemyNear,statetype != L
;trigger1 = EnemyNear,statetype != A
trigger1 = numtarget(3001) >= 1
id = 3015
stateno = 3015
postype = p2
pos = enemy,const(size.mid.pos.x)+4,enemy,const(size.mid.pos.y)+7
pausemovetime = 999
supermovetime = 999
ownpal = 1
persistent = 0
ignorehitpause = 1


[State -1]
type = ChangeAnim
Triggerall = anim = 3050
trigger1 = numtarget(3001) = 0
trigger1 = animelemtime(13) = 8
value = anim
elem = 14
persistent = 0
ignorehitpause = 1

[State -1]
Type = Helper
Triggerall = anim = 3050
Trigger1 = animelemTime(18) >= 0
Trigger1 = animelemTime(19) <= 0
StateNo = 755
ID = 756
Ownpal = 1
Keyctrl = 0
SprPriority = -5
IgnoreHitPause = 0
Persistent = 8


[State -1]
Type = Veladd
Triggerall = anim = 3050
Trigger1 = animelemTime(17) = 0
X = 18

[State -1]
Type = Velset
Triggerall = anim = 3050
Trigger1 = animelemTime(17) >= 1
Trigger1 = animelemTime(18) <= 12
X = 8

[State -1]
Type = posadd
Triggerall = anim = 3050
Trigger1 = animelemTime(19) = 0
X = 15


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
triggerall = numtarget(3001) = 0
Triggerall = anim = 3050
Trigger1 = Var(50) = 1
Trigger1 = Animelem = 18
Attr = S, HA
Damage = Ceil(FVar(0)*(0-Var(4)%2))
AnimType = Hard
HitFlag = MAF
GuardFlag = MA
Priority = 4, Hit
PauseTime = 1, 11+11*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 1,11
SparkNo = -1
Guard.SparkNo = -1
SparkXY = -Random%20, -50-Random%20
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = High
Air.Type = High
GuardSound = s120,0
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0
Air.Velocity = 0,-3
AirGuard.Velocity = -3,-1.4
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
P2Facing = 1
Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = 0
ID = 3000
p2stateno = 3002
p1stateno = 3060
Down.Bounce = 1


[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
triggerall = numtarget(3001) = 1
Triggerall = anim = 3050
Trigger1 = Var(50) = 1
Trigger1 = Animelem = 17 || Animelem = 18
Attr = S, HA
Damage = Ceil(FVar(0)*(0-Var(4)%2))
AnimType = Hard
HitFlag = MAF
GuardFlag = 
Priority = 4, Hit
PauseTime = 1, 11+11*IfElse(Var(38)>0,1,0)+Var(41)
Guard.PauseTime = 1,11
SparkNo = -1
Guard.SparkNo = -1
SparkXY = -Random%20, -50-Random%20
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = High
Air.Type = High
GuardSound = s120,0
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0
Air.Velocity = 0,-3
AirGuard.Velocity = -3,-1.4
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
P2Facing = 1
Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = 0
ID = 3000
p2stateno = 3002
p1stateno = 3060
Down.Bounce = 1



[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1


[State -1]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1


[State -1test]
Type = changeanim
Triggerall = anim = 3050
Triggerall = animelemtime(19) = 1
Triggerall = anim != 3001
trigger1 = facing = 1
trigger1 = (enemynear,ScreenPos x) - (ScreenPos x) <= 15
trigger2 = facing = -1
trigger2 = (ScreenPos x) - (enemynear,ScreenPos x) <= 15
Value = 3001
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = turn
Trigger1 = anim = 3001
Trigger1 = AnimTime = 0
IgnoreHitPause = 1
Persistent = 1


[State -1] 
Type = ChangeState
Triggerall = anim = 3050
Trigger1 = numtarget(3001) >= 1
Trigger1 = Animelem = 18
Value = 3060


[State -1] 
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1






;---------------------------------------------------------------------------
;直死の魔眼 七景終落　成功
[Statedef 3060]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
VelSet = 0,0
Anim = 3002
SprPriority = 2


[State -1]
Type = Helper
Trigger1 = animelemTime(1) >= 0
Trigger1 = animelemTime(11) <= 2
StateNo = 755
ID = 756
Ownpal = 1
Keyctrl = 0
SprPriority = -5
IgnoreHitPause = 0
Persistent = 8
pausemovetime = 999
supermovetime = 999

[State -1]
Type = Explod
Trigger1 = time = 0
Anim = 3009
PosType = p1
Pos = 27,-46
Ownpal = 1
SprPriority = 5
BindTime = 1
IgnoreHitPause = 1
Persistent = 0
pausemovetime = 999
supermovetime = 999


[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = Explod
Trigger1 = animelemtime(4) = 0
Anim = 3005
PosType = p1
Pos = 0,-30
Ownpal = 1
SprPriority = 5
BindTime = 1
IgnoreHitPause = 1
Persistent = 0
pausemovetime = 999
supermovetime = 999

[State -1]
Type = Explod
Trigger1 = animelemtime(11) = 0
Anim = 3006
PosType = p1
Pos = -50,-60
Ownpal = 1
SprPriority = 5
BindTime = 1
IgnoreHitPause = 1
Persistent = 0
pausemovetime = 999
supermovetime = 999

[State -1]
Type = Explod
Trigger1 = animelemtime(18) = 0
Anim = 3007
PosType = p1
Pos = -60,-65
Ownpal = 1
SprPriority = 5
BindTime = 1
IgnoreHitPause = 1
Persistent = 0
pausemovetime = 999
supermovetime = 999

[State -1]
Type = Explod
Trigger1 = animelemtime(20) = 0
Anim = 3010
PosType = left
Pos = ifelse(facing = 1,0,320), 240
facing = ifelse(facing = 1,1,-1)
Ownpal = 1
SprPriority = -5
BindTime = 999
IgnoreHitPause = 1
Persistent = 0


[State -1]
Type = Explod
Trigger1 = animelemtime(20) = 5
Anim = 3011
PosType = left
Pos = ifelse(facing = 1,0,320), 240
facing = ifelse(facing = 1,1,-1)
Ownpal = 1
SprPriority = 5
BindTime = 999
IgnoreHitPause = 1
Persistent = 0



[State -1]
Type = Pause
Trigger1 = animelemtime(19) >= 0
Trigger1 = animelemtime(22) <= 25
Anim = -1
Time = 1
P2DefMul = 1
Darken = 0
Persistent = 1

[State -1]
Type = PlaySnd
Trigger1 = animelemtime(21) = 0
Value = s3000, 6
Channel = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
Type = velset
Trigger1 = animelemtime(9) <= 0
X = 9

[State -1]
Type = velset
Trigger1 = animelemtime(9) = 1
X = 0

[State -1]
Type = velset
Trigger1 = animelemtime(13) >= 0
Trigger1 = animelemtime(17) <= 0
X = 7

[State -1]
Type = velset
Trigger1 = animelemtime(19) = 0
X = 0

[State -1]
Type = TargetPowerAdd
Trigger1 = AnimElem = 21, = 0
Value = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11)

[State -1]
Type = TargetLifeAdd
Trigger1 = AnimElem = 21
Value = -Ceil(FVar(0)/(1.00-(0.08*FVar(4)))*(340-Var(4)%2))

[State -1]
Type = VarAdd
Trigger1 = AnimElem = 21
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = TargetState
Trigger1 = animelemtime(21) <= 0
Value = 3002
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = TargetState
Trigger1 = animelemtime(21) = 1
Value = 3003
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = 1
FV = 26
Value = 0.50
IgnoreHitPause = 1

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1] 
Type = turn
Trigger1 = AnimTime = 0

[State -1] 
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1







;---------------------------------------------------------------------------
; 空の境界
[Statedef 3100]
Type    = S
MoveType = A
Physics = N
Anim    = 3100
Ctrl    = 0

[State -1]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VelSet
triggerall = anim = 3100
Trigger1 = AnimElem = 1
X = 0
Y = 0


[State -1]
type = HitDef
triggerall = anim = 3100
trigger1 = time = 0
attr = S, HA
damage = 0
numhits = 0
animtype = hight
guardflag = 
hitflag = MAFD
priority = 3, Hit
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = -5,-73
hitsound = -1
guardsound = -1
ground.slidetime = 1
ground.hittime = 1
guard.velocity = 0
ground.velocity = 0
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
id = 3100
p2facing = 1
Down.Bounce = 1


[State -1]
Type = VarSet
triggerall = anim = 3100
Trigger1 = Time = 1
V = 44
Value = 30


[State -1]
Type = VarSet
triggerall = anim = 3100
Trigger1 = Time = 1
V = 2
Value = 0


[State -1]
type = Helper
triggerall = anim = 3100
trigger1 = !Numhelper(310000)
trigger1 = movehit
id = 310000
stateno = 310000
postype = left
pos = 0,0
ownpal = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
type = AllPalfx
triggerall = anim = 3100
trigger1 = movehit
sinadd = 256, 256, 256, 50
time = 25
persistent = 0
ignorehitpause = 1


[State -1]
type = TargetState
triggerall = anim = 3100
trigger1 = movehit
value = 3110
persistent = 0
ignorehitpause = 1

[State -1]
Type = ChangeAnim
triggerall = anim = 3100
TriggerAll = anim != 903
Trigger1 = numtarget(3100) = 0
Trigger1 = Time = 1
Value = 903


[state -1]
type = TargetBind
triggerall = anim = 3100
trigger1 = time = 14
pos = 100,floor(Pos y)
ignorehitpause = 1

[state -1]
type = posadd
triggerall = anim = 3100
trigger1 = time = 14
x = -ceil(230-frontedgedist)
ignorehitpause = 1




[State -1]
type = PlaySnd
triggerall = anim = 3100
trigger1 = time = 17
value = S3100, 0


[State -1]
type = Explod
triggerall = anim = 3100
trigger1 = time = 14
anim = 3105
id = 3105
pos = 0,0
postype = back
ownpal = 1
scale = .5,.5
sprpriority = -99
bindtime = 999
ignorehitpause = 1


[State -1]
type = Explod
triggerall = anim = 3100
trigger1 = time >= 14 && time <= 99
trigger1 = timemod = 10,0
anim = 3110
id = 3110
pos = -20+(random%90),-1+(random%40)
vel = ifelse(facing=1,-13,13),7.2
postype = front
ownpal = 1
scale = 1,1
removetime = 99
sprpriority = 3
persistent = 1
ignorehitpause = 1

[State -1]
type = Explod
triggerall = anim = 3100
trigger1 = time >= 14 && time <= 99
trigger1 = timemod = 16,0
anim = 3111
id = 3110
pos = -10+(random%99),-33+(random%40)
vel = ifelse(facing=1,-13,13),6
postype = front
ownpal = 1
scale = 1,1
removetime = 99
sprpriority = 3
persistent = 1
ignorehitpause = 1

[State -1]
type = Explod
triggerall = anim = 3100
trigger1 = time >= 14 && time <= 99
trigger1 = timemod = 11,0
anim = 3112
id = 3110
pos = -40+(random%90),-52+(random%40)
vel = ifelse(facing=1,-13,13),5.1
postype = front
ownpal = 1
removetime = 99
sprpriority = 3
persistent = 1
ignorehitpause = 1

[State -1]
type = Explod
triggerall = anim = 3100
trigger1 = time >= 100 && time <= 120
trigger1 = timemod = 17,0
anim = 3113
id = 3110
pos = -22+(random%30),-60
vel = ifelse(facing=1,-10,10),7.6
accel = ifelse(facing=1,.075,-.075),ifelse(facing=1,.025,-.025)
postype = front
ownpal = 1
removetime = 99
sprpriority = 3
persistent = 2
ignorehitpause = 1

[State -1]
type = Explod
triggerall = anim = 3100
trigger1 = time >= 100 && time <= 120
trigger1 = timemod = 14,0
anim = 3114
id = 3110
pos = -16+(random%30),-60
vel = ifelse(facing=1,-10,10),4.6
accel = ifelse(facing=1,.075,-.075),ifelse(facing=1,.05,-.05)
postype = front
ownpal = 1
removetime = 99
sprpriority = 3
persistent = 2
ignorehitpause = 1

[State -1]
type = Explod
triggerall = anim = 3100
trigger1 = time >= 100 && time <= 125
trigger1 = timemod = 13,0
anim = 3115
id = 3110
pos = -10+(random%30),-55
vel = ifelse(facing=1,-10,10),7.8
accel = ifelse(facing=1,.075,-.075),ifelse(facing=1,.025,-.025)
postype = front
ownpal = 1
removetime = 99
persistent = 2
sprpriority = 3
ignorehitpause = 1

[State -1]
type = Explod
triggerall = anim = 3100
trigger1 = time >= 100 && time <= 125
trigger1 = timemod = 14,0
anim = 3116
id = 3110
pos = -10+(random%40),-60
vel = ifelse(facing=1,-7,7),7.6
accel = ifelse(facing=1,.075,-.075),ifelse(facing=1,.025,-.025)
postype = front
ownpal = 1
removetime = 99
sprpriority = 3
persistent = 2
ignorehitpause = 1

[State -1]
type = Explod
triggerall = anim = 3100
trigger1 = time >= 120 && time <= 135
trigger1 = timemod = 13,0
anim = 3110
id = 3110
pos = 0+(random%30),-55
vel = ifelse(facing=1,-3,3),4.8
postype = front
ownpal = 1
removetime = 99
persistent = 2
sprpriority = 3
ignorehitpause = 1

[State -1]
type = Explod
triggerall = anim = 3100
trigger1 = time >= 100 && time <= 135
trigger1 = timemod = 14,0
anim = 3111
id = 3110
pos = 0+(random%60),-60
vel = ifelse(facing=1,-3,3),4.5
postype = front
ownpal = 1
removetime = 99
sprpriority = 3
persistent = 2
ignorehitpause = 1

[State -1]
type = Explod
triggerall = anim = 3100
trigger1 = time >= 100 && time <= 135
trigger1 = timemod = 14,0
anim = 3112
id = 3110
pos = 0+(random%60),-60
vel = ifelse(facing=1,-3,3),4.5
postype = front
ownpal = 1
removetime = 99
sprpriority = 3
persistent = 2
ignorehitpause = 1


[State -1]
type = Explod
triggerall = anim = 3100
trigger1 = time >= 130 && time <= 150
trigger1 = timemod = 14,0
anim = 3114
id = 3110
pos = ifelse(facing=1,-15,15)+(random%60),-60
vel = ifelse(facing=1,-2,2),4
accel = ifelse(facing=1,.01,-.01),0
postype = front
ownpal = 1
removetime = 99
sprpriority = 3
persistent = 2
ignorehitpause = 1

[State -1]
type = Explod
triggerall = anim = 3100
trigger1 = time >= 130 && time <= 150
trigger1 = timemod = 13,0
anim = 3113
id = 3110
pos = -40+(random%50),-31
vel = ifelse(facing=1,-2,2),-31
accel = ifelse(facing=1,.01,-.01),0
postype = front
ownpal = 1
removetime = 99
persistent = 1
sprpriority = 3
ignorehitpause = 1

[State -1]
type = Explod
triggerall = anim = 3100
trigger1 = time >= 130 && time <= 150
trigger1 = timemod = 13,0
anim = 3110
id = 3110
pos = -90+(random%30),-55
vel = ifelse(facing=1,-2,2),3
accel = ifelse(facing=1,.01,-.01),0
postype = front
ownpal = 1
removetime = 99
persistent = 2
sprpriority = 3
ignorehitpause = 1

[State -1]
type = Explod
trigger1 = time = 160
anim = 3114
id = 3114
pos = -60+(random%10),0
vel = ifelse(facing=1,-0.8,0.8),1.2
postype = front
ownpal = 1
scale = 1,1
removetime = 112
persistent = 0
sprpriority = 8
ignorehitpause = 1



[State -1]
Type = VarSet
triggerall = anim = 3100
Trigger1 = time = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = 0


[State -1]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1

[State -1]
type = ChangeState
triggerall = anim = 903
trigger1 = !movehit
trigger1 = animtime = 0
value = 0
Ctrl = 1


[State -1]
type = ChangeState
triggerall = anim = 3100
trigger1 = animtime = 0
Value = 3101
Ctrl = 0


;---------------------------------------------------------------------------
; 空の境界
[Statedef 3101]
Type    = S
MoveType = A
Physics = S
Anim    = 3101
Ctrl    = 0

[State -1]
type = PlaySnd
trigger1 = animelem = 1
value = S3100, 1

[State -1]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 1
Range = 0,2
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
type = PlaySnd
trigger1 = var(1) = 0
trigger1 = time = 1
value = S3100, 5
channel = 1

[State -1]
type = PlaySnd
trigger1 = var(1) = 1
trigger1 = time = 1
value = S3100, 6
channel = 1

[State -1]
type = PlaySnd
trigger1 = var(1) = 2
trigger1 = time = 1
value = S3100, 7
channel = 1


[State -1]
Type = Helper
Trigger1 = AnimElem = 1
StateNo = 60100
ID = 60100
Name = "EX_Effect"
Pos = 0,0
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
type = PosAdd
trigger1 = time = 64
x = 41
persistent = 0

[State -1]
type = VelSet
trigger1 = time = 65
x = 0

[State -1]
type = VelSet
trigger1 = time >= 66
x = 2

[State -1]
type = AllPalfx
trigger1 = time = 65
sinadd = 256, 256, 256, 45
time = 9
persistent = 0

[State -1]
type = Envcolor
trigger1 = time = 75
value = 255,255,255
time = 11
under = 1
sprpriority = 2

[State -1]
type = AssertSpecial
trigger1 = time >= 75 && time <= 92
flag = invisible

[State -1]
type = RemoveExplod
trigger1 = NumExplod(3105)
trigger1 = time = 75
id = 3105

[State -1]
type = Explod
trigger1 = !NumExplod(3106)
trigger1 = time = 75
anim = 3106
id = 3106
pos = 160,120
postype = back
bindtime = 99
ownpal = 1
scale = 1,1
sprpriority = 3

[State -1]
type = Explod
trigger1 = !NumExplod(3105)
trigger1 = time = 87
anim = 3105
id = 3105
pos = 0,0
postype = back
ownpal = 1
scale = .5,.5
sprpriority = -99
bindtime = 999
ignorehitpause = 1

[State -1]
type = AllPalfx
trigger1 = time = 81
sinadd = 256, 256, 256, 20
time = 10
persistent = 0



[State -1]
type = Explod
trigger1 = time = 82
anim = 3117
id = 3110
pos = -140+(random%10),130
vel = ifelse(facing=1,-0.9,0.9),0.8
postype = front
ownpal = 1
scale = 1,1
removetime = 80
persistent = 0
sprpriority = 8
ignorehitpause = 1

[State -1]
type = Explod
trigger1 = time = 88
anim = 3118
id = 3110
pos = -145+(random%10),135
vel = ifelse(facing=1,-1.3,1.3),0.8
postype = front
ownpal = 1
scale = 1,1
removetime = 80
persistent = 0
sprpriority = 8
ignorehitpause = 1


[State -1]
type = PlaySnd
trigger1 = time = 75
value = S3100, 2
channel= 4

[State -1]
type = PlaySnd
trigger1 = time = 75
value = S30, 4

[State -1]
type = TargetLifeAdd
trigger1 = time = 75
trigger1 = EnemyNear,power != powermax
Value = -Ceil(FVar(0)*(600-Var(4)%2))
absolute = 1
kill = 0

[State -1]
type = TargetLifeAdd
trigger1 = time = 75
trigger1 = EnemyNear,power = powermax
Value = -Ceil(FVar(0)*(100000-Var(4)%2))
absolute = 1
kill = 0

[State -1]
Type = ChangeState
trigger1 = time >= 88
Value = 3102
Ctrl = 0


;---------------------------------------------------------------------------
; 空の境界
[Statedef 3102]
type    = S
movetype= A
physics = N
anim = 3102
velset = 0,0
ctrl = 0

[State -1]
type = AssertSpecial
trigger1 = time <= 110
flag = noshadow
ignorehitpause = 1


[State -1]
type = PosAdd
trigger1 = time = 0
x = 100
persistent = 0


[State -1]
type = PlaySnd
trigger1 = var(1) = 0
trigger1 = animelem = 6
value = S3100, 8
channel = 1
persistent = 0


[State -1]
type = PlaySnd
trigger1 = var(1) >= 1
trigger1 = animelem = 6
value = S3100, 9
channel = 1
persistent = 0


[State -1]
type = PlaySnd
trigger1 = animelem = 12
value = S3100, 3




[State -1]
type = Explod
trigger1 = !NumExplod(3107)
trigger1 = animelem = 14
anim = 3107
id = 3107
pos = 0,240
postype = back
bindtime = 999
ownpal = 1
sprpriority = 5

[State -1]
type = AllPalfx
trigger1 = animelem = 28
sinadd = 256, 256, 256, 80
time = 40
persistent = 0

[State -1]
type = RemoveExplod
trigger1 = NumExplod(3105)
trigger1 = animelem = 31
id = 3105


[State -1]
type = Explod
trigger1 = !NumExplod(3108)
trigger1 = animelem = 31
anim = 3108
id = 3108
pos = 0,240
postype = back
ownpal = 1
scale = 1,1
sprpriority = 5

[State -1]
Type = Pause
Trigger1 = animelemtime(18) >= 0
Trigger1 = animelemtime(39) <= 2
movetime = 100
Anim = -1
Time = 1
P2DefMul = 1
Darken = 0
Persistent = 1


[State -1]
type = TargetLifeAdd
trigger1 = animelem = 25
value = -10
absolute = 1

[State -1]
type = changeanim
trigger1 = animelem = 34
trigger1 = RoundState >= 3
value = 3103
absolute = 1

[State -1]
type = Explod
triggerall = anim = 3103
trigger1 = animelemtime(1) = 10
anim = 3104
id = 3104
pos = 8,-82
postype = p1
ownpal = 0
scale = 1,1
sprpriority = 5
bindtime = -1
ignorehitpause = 1

[State -1]
type = PlaySnd
triggerall = anim = 3103
trigger1 = animelemtime(1) = 10
value = S3100, 10
channel = 1
persistent = 0

[State -1]
type = varset
trigger1 = RoundState >= 3
trigger1 = animtime = 0
v = 54
value = 60
ignorehitpause = 1


[State -1]
type = Turn
trigger1 = animtime = 0

[State -1]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; 空の境界 相手1
[Statedef 3110]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State -1]
type = SelfState
trigger1 = EnemyNear,movetype = H
trigger1 = 1
value = 5050
ignorehitpause = 1

[State -1]
type = DestroySelf
trigger1 = Ishelper
trigger1 = 1
ignorehitpause = 1

[State -1]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State -1]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1

[State -1]
type = PlayerPush
trigger1 = 1
value = 0

[State -1]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State -1]
type = AssertSpecial
trigger1 = time >= 272 && time <= 285
flag = invisible

[State -1]
type = ChangeAnim
trigger1 = time >= 0 && time <= 13
value = anim
elem = animelemno(0)
ignorehitpause = 1

[State -1]
type = ChangeAnim
trigger1 = time = 14
value = 0
ignorehitpause = 1

[State -1]
type = ChangeAnim
trigger1 = time >= 14
value = anim
elem = 1
ignorehitpause = 1

[State -1]
type = ChangeAnim
trigger1 = time = 284
value = 5010

[State -1]
type = ChangeState
trigger1 = time = 372
value = 3111
ignorehitpause = 1

;---------------------------------------------------------------------------
; 空の境界　相手2
[Statedef 3111]
type    = A
movetype= H
physics = N
ctrl = 0

[State -1]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 9000, 1]
type = ScreenBound
trigger1 = 1
movecamera = 0,0

[State -1]
Type = veladd
Trigger1 = time = 0
X = 0
Y = -9.8

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 30
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5061)
Trigger1 = Time = 0
Value = 5061

[State -1]
Type = ChangeAnim
TriggerAll =! SelfAnimExist(5061)
TriggerAll = SelfAnimExist(5030)
Trigger1 = Time = 0
Value = 5030

[State -1]
Type = ChangeAnim
TriggerAll =! SelfAnimExist(5061)
TriggerAll = SelfAnimExist(5035)
Trigger1 =! SelfAnimExist(5030)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Value = 5035

[State -1]
Type = ChangeAnim
TriggerAll =! SelfAnimExist(5061)
TriggerAll = SelfAnimExist(5050)
Trigger1 =! SelfAnimExist(5030)
Trigger1 =! SelfAnimExist(5035)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Trigger3 = Anim = 5035
Trigger3 = AnimTime = 0
Value = 5050

[State -1]
Type = VelAdd
Trigger1 = 1
Y = .45

[State -1] 
Type = HitFallSet
Trigger1 = 1
Value = 1 

[State -1] 
Type = SelfState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y >= 0
Value = 5100 


;---------------------------------------------------------------------------
; 「　」
[Statedef 3200]
Type    = A
MoveType = A
Physics = A
Anim    = 3200
Ctrl    = 0

[State -1]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VelSet
triggerall = anim = 3200
Trigger1 = time = 0
X = 0
Y = 0


[State -1]
type = Helper
trigger1 = time = 0
id = 32005
stateno = 32005
postype = left
pos = 0,0
ownpal = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1



[State -1]
type = HitDef
triggerall = anim = 3200
trigger1 = time = 0
attr = S, HA
damage = 0
numhits = 0
animtype = hight
guardflag = 
hitflag = MAFD
priority = 3, Hit
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = -5,-73
hitsound = -1
guardsound = -1
ground.slidetime = 1
ground.hittime = 1
guard.velocity = 0
ground.velocity = 0
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
id = 3200
p2facing = 1
Down.Bounce = 1


[State -1]
Type = VarSet
triggerall = anim = 3200
Trigger1 = Time = 1
V = 44
Value = 30


[State -1]
Type = VarSet
triggerall = anim = 3200
Trigger1 = Time = 1
V = 2
Value = 0

[State -1]
Type = Pause
triggerall = anim = 3200
trigger1 = movehit
Anim = -1
Time = 5
movetime = 5
P2DefMul = 1
Darken = 0
Persistent = 1


[State -1]
type = Helper
triggerall = anim = 3200
trigger1 = !Numhelper(320000)
trigger1 = movehit
id = 320000
stateno = 320000
postype = left
pos = 0,0
ownpal = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
type = AllPalfx
triggerall = anim = 3200
trigger1 = movehit
sinadd = 256, 256, 256, 50
time = 25
persistent = 0
ignorehitpause = 1


[State -1]
type = TargetState
triggerall = anim = 3200
trigger1 = movehit
value = 3210
persistent = 0
ignorehitpause = 1


[State -1]
type = TargetState
triggerall = anim = 3200
trigger1 = animelemtime(8) = 0
value = 3211
persistent = 0
ignorehitpause = 1

[state -1]
type = TargetBind
triggerall = anim = 3200
trigger1 = time >= 17
trigger1 = animelemtime(8) < 0
pos = 80,0
ignorehitpause = 1

[state -1]
type = posadd
triggerall = anim = 3200
trigger1 = time = 17
x = -ceil(170-frontedgedist)
ignorehitpause = 1


[state -1]
type = posset
triggerall = anim = 3200
trigger1 = time = 17
y = -100
ignorehitpause = 1




[State -1]
type = PlaySnd
triggerall = anim = 3200
trigger1 = time = 17
value = S3100, 0


[State -1]
type = PlaySnd
triggerall = anim = 3200
trigger1 = time = 17
value = S3200, 0

[State -1]
type = PlaySnd
triggerall = anim = 3200
trigger1 = time = 700
value = S3200, 1

[State -1]
type = Helper
triggerall = anim = 3200
trigger1 = time = 17
id = 3206
stateno = 3206
postype = back
pos = 0, pos y - screenpos y
;pos = 0,-260
ownpal = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
type = Helper
triggerall = anim = 3200
trigger1 = time = 17
id = 3205
stateno = 3205
postype = back
pos = 0, pos y - screenpos y
;pos = 0,-260
ownpal = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
type = Helper
triggerall = anim = 3200
trigger1 = time = 590
id = 3208
stateno = 3208
postype = back
pos = 0,-260
ownpal = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
type = Helper
triggerall = anim = 3200
trigger1 = !Numhelper(3210)
trigger1 = time = 460
id = 3210
stateno = 321000
postype = back
pos = 150,-140
bindtime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
type = Helper
triggerall = anim = 3200
trigger1 = !Numhelper(3211)
trigger1 = time = 480
id = 3211
stateno = 321000
postype = back
pos = 150,-140
bindtime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
type = Helper
triggerall = anim = 3200
trigger1 = !Numhelper(3212)
trigger1 = time = 500
id = 3212
stateno = 321000
postype = back
pos = 150,-140
bindtime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
type = Helper
triggerall = anim = 3200
trigger1 = !Numhelper(3213)
trigger1 = time = 520
id = 3213
stateno = 321000
postype = back
pos = 150,-140
bindtime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
type = Helper
triggerall = anim = 3200
trigger1 = !Numhelper(3214)
trigger1 = time = 540
id = 3214
stateno = 321000
postype = back
pos = 150,-140
bindtime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1


[State -1]
type = AllPalfx
trigger1 = time = 620
sinadd = 256, 256, 256, 150
time = 75
persistent = 1
ignorehitpause = 1

[State -1]
type = Helper
triggerall = anim = 3200
trigger1 = !Numhelper(3207)
trigger1 = time = 655
id = 3207
stateno = 3207
postype = back
pos = 0,-260
bindtime = -1
ownpal = 1
ontop = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
type = Explod
triggerall = anim = 3200
trigger1 = animelemtime(8) = 0
anim = 3206
id = 3206
pos = 0,0
postype = back
ownpal = 0
scale = 1,1
sprpriority = 100
ontop = 1
bindtime = 999
ignorehitpause = 1


[State -1]
Type = VarSet
triggerall = anim = 3200
Trigger1 = time = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = 0


[State -1]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1

[State -1]
Type = ChangeAnim
triggerall = anim = 3200
TriggerAll = anim != 923
Trigger1 = numtarget(3200) = 0
Trigger1 = Time = 1
Value = 923

[State -1]
Type = VelAdd
Trigger1 = anim = 3200
Trigger1 = animelemtime(8) = 3
Y = -12

[State -1]
Type = VelAdd
Trigger1 = anim = 923
Trigger2 = anim = 3200
Trigger2 = animelemtime(8) >= 0
Y = .45

[State -1]
type = PlaySnd
triggerall = anim = 3200
Trigger1 = animelemtime(8) = 0
value = S3000, 6

[State -1]
type = AllPalfx
Trigger1 = animelemtime(7) = 0
add = 255, 255, 255
time = 5
persistent = 1
ignorehitpause = 1

[State -1]
Type = TargetPowerAdd
Trigger1 = animelemtime(8) = 0
Value = -10000

[State -1]
Type = TargetLifeAdd
Trigger1 = animelemtime(8) = 0
Value = -Ceil(FVar(0)*(1200-Var(4)%2))

[State -1]
Type = Pause
TriggerAll = RoundState != 3
Trigger1 = animelemtime(7) >= 0
Trigger1 = animelemtime(20) <= 2
Anim = -1
Time = 2
P2DefMul = 1
Darken = 0
Persistent = 1

[State -1]
Type = Pause
TriggerAll = RoundState = 3
Trigger1 = animelemtime(7) >= 0
Trigger1 = animelemtime(20) <= 2
Anim = -1
Time = 1
P2DefMul = 1
Darken = 0
Persistent = 1


[State -1]
Type = VelSet
triggerall = anim = 3200
Trigger1 = time >= 2
Trigger1 = animelemtime(6) <= 3
X = 0
Y = 0


[State 50, 1]
type = VarSet
triggerall = anim = 3200
trigger1 = animelem = 5
sysvar(1) = -1


[State 50, 1]
type = VarSet
triggerall = anim = 923
trigger1 = animelem = 5
sysvar(1) = 0



;---------------------------------------------------------------------------
; 「　」 相手1
[Statedef 3210]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State -1]
type = SelfState
trigger1 = EnemyNear,movetype = H
trigger1 = 1
value = 5050
ignorehitpause = 1

[State -1]
type = DestroySelf
trigger1 = Ishelper
trigger1 = 1
ignorehitpause = 1

[State -1]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State -1]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1

[State -1]
type = PlayerPush
trigger1 = 1
value = 0

[State -1]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State -1]
type = AssertSpecial
trigger1 = time >= 272 && time <= 285
flag = invisible

[State -1]
type = ChangeAnim
trigger1 = time >= 0 && time <= 13
value = anim
elem = animelemno(0)
ignorehitpause = 1

[State -1]
type = ChangeAnim
trigger1 = time = 14
value = 0
ignorehitpause = 1

[State -1]
type = ChangeAnim
trigger1 = time >= 14
value = anim
elem = 1
ignorehitpause = 1

[State -1]
type = ChangeAnim
trigger1 = time = 800
value = 5010

[State -1]
type = ChangeState
trigger1 = time = 1500
value = 3211
ignorehitpause = 1

;---------------------------------------------------------------------------
; 「　」　相手2
[Statedef 3211]
type    = A
movetype= H
physics = N
ctrl = 0

[State -1]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 9000, 1]
type = ScreenBound
trigger1 = 1
movecamera = 0,0

[State -1]
Type = veladd
Trigger1 = time = 0
X = 0
Y = -4.8

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 30
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5061)
Trigger1 = Time = 0
Value = 5061

[State -1]
Type = ChangeAnim
TriggerAll =! SelfAnimExist(5061)
TriggerAll = SelfAnimExist(5030)
Trigger1 = Time = 0
Value = 5030

[State -1]
Type = ChangeAnim
TriggerAll =! SelfAnimExist(5061)
TriggerAll = SelfAnimExist(5035)
Trigger1 =! SelfAnimExist(5030)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Value = 5035

[State -1]
Type = ChangeAnim
TriggerAll =! SelfAnimExist(5061)
TriggerAll = SelfAnimExist(5050)
Trigger1 =! SelfAnimExist(5030)
Trigger1 =! SelfAnimExist(5035)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Trigger3 = Anim = 5035
Trigger3 = AnimTime = 0
Value = 5050

[State -1]
Type = VelAdd
Trigger1 = 1
Y = .45

[State -1] 
Type = HitFallSet
Trigger1 = 1
Value = 1 

[State -1] 
Type = SelfState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y >= 0
Value = 5100 


;---------------------------------------------------------------------------
; 偽・殺人考察
[Statedef 3300]
Type    = C
MoveType = A
Physics = N
Anim    = 3300
Ctrl    = 0

[State -1]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VelSet
triggerall = anim = 3300
Trigger1 = AnimElem = 1
X = 0
Y = 0


[State -1]
type = HitDef
triggerall = anim = 3300
trigger1 = time = 0
attr = S, HA
damage = 0
numhits = 0
animtype = hight
guardflag = 
hitflag = MAFD
priority = 3, Hit
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = -5,-73
hitsound = -1
guardsound = -1
ground.slidetime = 1
ground.hittime = 1
guard.velocity = 0
ground.velocity = 0
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
id = 3300
p2facing = 1
Down.Bounce = 1



[State -1]
Type = VarSet
triggerall = anim = 3300
Trigger1 = Time = 1
V = 44
Value = 30


[State -1]
Type = VarSet
triggerall = anim = 3300
Trigger1 = Time = 1
V = 2
Value = 0


[State -1]
type = Helper
triggerall = anim = 3300
trigger1 = !Numhelper(330000)
trigger1 = movehit
id = 330000
stateno = 330000
postype = left
pos = 0,0
ownpal = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1



[State -1]
type = TargetState
triggerall = anim = 3300
trigger1 = movehit
value = 3310
persistent = 0
ignorehitpause = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1



[State -1]
Type = ChangeAnim
triggerall = anim = 3100
TriggerAll = anim != 913
Trigger1 = numtarget(3300) = 0
Trigger1 = Time = 1
Value = 913
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1


[state -1]
type = TargetBind
triggerall = anim = 3300
trigger1 = time = 14
pos = 50,floor(Pos y)
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[state -1]
type = posadd
triggerall = anim = 3300
trigger1 = time = 14
x = -ceil(150-frontedgedist)
ignorehitpause = 1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
type = PlaySnd
triggerall = anim = 3300
trigger1 = animelemtime(6) = 0
value = S3300, 0
Channel = 4
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State 810, Bind 1]
type = varset
trigger1 = time = 0
var(1) = 0
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[state 190]
type = varadd
triggerall = anim = 3300
trigger1 = animelem = 1, >= 0
trigger1 = var(1) >= -250
var(1) = -15
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State 840,0]
type = palfx
triggerall = anim = 3300
trigger1 = time > 1
trigger1 = animelemtime(14) <= 30
time = 2
add = var(1),var(1),var(1)
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1


[State 240, 4]
type = Envcolor
triggerall = anim = 3300
trigger1 = animelem = 6
trigger2 = animelem = 10
time = 7
value = 255,255,255
under = -1
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -2]
Type = Helper
triggerall = anim = 3300
Trigger1 = animelem = 5
Trigger2 = animelem = 9
StateNo = 16200;160000
ID = 16201+IfElse(Var(38)=0,0,10);160002
PosType = P1
Pos = 50,-75
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
type = TargetState
triggerall = anim = 3300
trigger1 = animelem = 6
value = 3311
persistent = 0
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
type = TargetState
triggerall = anim = 3300
trigger1 = animelem = 10
value = 3312
persistent = 0
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
type = TargetState
triggerall = anim = 3300
trigger1 = animelem = 16
value = 3313
persistent = 0
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[state -1]
type = TargetBind
triggerall = anim = 3300
trigger1 = animelem = 16
pos = 45,0
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1


[State -1]
type = TargetLifeAdd
triggerall = anim = 3300
trigger1 = animelem = 16
Value = -Ceil(FVar(0)*(1100-Var(4)%2))
absolute = 1
kill = 1

[State -1]
type = PlaySnd
triggerall = anim = 3300
trigger1 = animelemtime(16) = 0
value = S3000, 6
Channel = 3


[State -1]
Type = Explod
Trigger1 = animelemtime(16) = 0
Anim = 3010
PosType = left
Pos = ifelse(facing = 1,320,0), 240
facing = ifelse(facing = 1,-1,1)
Ownpal = 1
SprPriority = 5
BindTime = 999
IgnoreHitPause = 1
Persistent = 0


[State -1]
Type = Explod
Trigger1 = animelemtime(16) = 0
Anim = 3011
PosType = left
Pos = ifelse(facing = 1,320,0), 240
facing = ifelse(facing = 1,-1,1)
Ownpal = 1
SprPriority = 5
BindTime = 999
IgnoreHitPause = 1
Persistent = 0



[State -1]
Type = VarSet
triggerall = anim = 3300
Trigger1 = time = 1
Trigger1 = Var(13) = [1,4]
FV = 29
Value = 0




[State -1]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1

[State -1]
type = ChangeState
triggerall = anim = 903
trigger1 = !movehit
trigger1 = animtime = 0
value = 0
Ctrl = 1


[State -1]
type = Changeanim
triggerall = anim = 3300
trigger1 = animelemtime(19) = 75
trigger1 = roundstate <= 2
trigger2 = animelemtime(19) = 90
trigger2 = roundstate >= 3
Value = 3305


[State -1]
Type = Veladd
triggerall = anim = 3305
Trigger1 = animelemTime(3) = 0
X = -4.5
Y = -2.5

[State -1]
Type = Veladd
triggerall = anim = 3305
Trigger1 = animelemTime(3) >= 1
Trigger1 = animelemTime(7) <= 3
X = .05
Y = .35

[State -1]
Type = Velset
triggerall = anim = 3305
Trigger1 = animelemTime(8) = 0
X = 0
Y = 0

[State -1]
Type = posset
triggerall = anim = 3305
Trigger1 = animelemTime(8) = 0
Y = 0


[State -1]
Type = Explod
triggerall = anim = 3305
Trigger1 = animelemTime(8) = 0
Anim = 10052
ID = 10052
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 0
IgnoreHitPause = 1
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = PlaySnd
triggerall = anim = 3305
Trigger1 = animelemTime(8) = 0
Value = s40, 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = TargetState
triggerall = anim = 3305
Trigger1 = animelemTime(7) = 0
Value = 8150
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State -1]
type = ChangeState
triggerall = anim = 3305
trigger1 = animtime = 0
value = 0
Ctrl = 1



;---------------------------------------------------------------------------
;偽・殺人考察 相手1
[Statedef 3310]
type = S
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 0

[State -1]
type = ChangeAnim
trigger1 = time >= 0
value = anim
elem = animelemno(0)
ignorehitpause = 1

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 810, Bind 1]
type = varset
trigger1 = time = 0
var(55) = 0
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State 840,0]
type = palfx
trigger1 = 1
time = 2
add = var(55),var(55),var(55)
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[state 190]
type = varadd
trigger1 = var(55) >= -250
var(55) = -15
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1

[State -1]
Type = HitOverRide
Trigger1 = 1
Attr = , NT, ST, HT
Time = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999


[State 9000, 1]
type = ScreenBound
trigger1 = 1
movecamera = 0,0
pausemovetime = 999
supermovetime = 999
ignorehitpause = 1




;---------------------------------------------------------------------------
;偽・殺人考察 相手2
[Statedef 3311]
Type    = A
MoveType= H
Physics = N
VelSet = 0,0



[State 840,0]
type = palfx
trigger1 = 1
time = 2
add = -255,-255,-255


[State 9000, 1]
type = ScreenBound
trigger1 = 1
movecamera = 0,0

[State 105, 1]
type = posSet
Trigger1 = time = 0
Trigger1 = pos y > 0
y = 0


[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitOverRide
Trigger1 = 1
Attr = , NT, ST, HT
Time = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
Trigger1 = 1
Value = 5002

[State -1] 
Type = SelfState
Trigger1 = Time >= 10
Trigger1 = P2MoveType != A
Value = 5035

;---------------------------------------------------------------------------
;偽・殺人考察 相手3
[Statedef 3312]
Type    = A
MoveType= H
Physics = N


[State 840,0]
type = palfx
trigger1 = 1
time = 2
add = -255,-255,-255

[State 9000, 1]
type = ScreenBound
trigger1 = 1
movecamera = 0,0

[State -1]
Type = veladd
Trigger1 = time = 0
X = 0
Y = -6

[State -1]
Type = veladd
Trigger1 = time >= 0
X = 0
Y = .2

[State 1000, 0]
type = AfterImageTime
trigger1 = time = 0
time = 1
ignorehitpause = 1
persistent = 1


[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 30
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999



[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5030)
Trigger1 =! SelfAnimExist(5035)
Trigger1 = Time = 0
Value = 5030

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5035)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Value = 5035

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5050)
Trigger1 = Anim = 5030
Trigger1 = AnimTime = 0
Trigger2 = Anim = 5035
Trigger2 = AnimTime = 0
Value = 5050

[State -1]
Type = null;VelAdd
Trigger1 = 1
Y = .3

[State -1] 
Type = HitFallSet
Trigger1 = 1
Value = 1 

[State -1] 
Type = SelfState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y >= 0
Value = 5100 



;---------------------------------------------------------------------------
;偽・殺人考察 相手4
[Statedef 3313]
Type    = A
MoveType= H
Physics = N
VelSet = 0,0

[State 9000, 1]
type = ScreenBound
trigger1 = 1
movecamera = 1,0

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 30
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim2
Trigger1 = Time <= 30
Value = 814

[State -1]
Type = selfstate
trigger1 = alive = 0
Trigger1 = Time = 8
Value = 5150




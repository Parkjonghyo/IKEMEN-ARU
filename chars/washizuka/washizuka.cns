;Var(1-4)= 防御補正管理用
;Var(5)  = 大ジャンプ用
;Var(6-9)= タッグAI管理用
;Var(10) = 刀の光用
;Var(11) = 狼牙・コマンド入力用
;Var(12) = カウンター用
;Var(13) = キャラの向き用
;Var(14) = 駆け引き用
;var(17) = ライフゲージ用
;Var(18) = 投げ用弾き制御用
;Var(19) = 起き上がり投げ無敵用
;Var(20) = 先行入力用
;Var(21) = winKO用
;Var(22) = 通常技用
;Var(23) = 連殺斬用
;Var(24) = 蒼龍用
;Var(25) = 俊殺用
;Var(26) = 
;Var(27) = 昇華用
;Var(29) = ガード不能攻撃用
;Var(30) = 剣質用
;Var(31) = タイプ用
;Var(32) = 勝利メッセージ用
;Var(33) = 最終狼牙用
;Var(34) = 剣質選択用
;Var(35) = 血１用
;Var(36) = 血２用
;Var(37) = 血３用
;Var(38) = 血４用
;Var(39) = 剣質表示用
;Var(40) = 最終狼牙・追撃用
;Var(43) = 剣質ゲージ重複防止
;Var(48) = AI用コンボ制御
;Var(49) = AI乱舞奥義ループ防止用
;Var(50) = 乱舞奥義用
;Var(53) = AI固め投げ乱数用
;Var(58) = AI行動乱数用
;Var(59) = AIフラグ

;fvar(10) = 弾きインターバル設定用
;fvar(11) = 弾き精度設定用
;fvar(12) = 弾き反応速度設定用
;fvar(13) = AI弾き確率指定用
;fvar(14) = AIガードキャンセル使用率設定
;fvar(15) = 投げ回避率設定用
;fvar(16) = AI連続技・固め制御用
;fvar(17) = AI連続技・固め制御用
;fvar(18) = AI固め投げ頻度用
;fvar(19) = AI固め投げ精度用

;fvar(20) = 根性値のオン/オフ設定用スイッチ
;fvar(21) = 極の防御力設定スイッチ
;--------------------------------------------
[Data]
life = 1000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 40
airjuggle = 10
KO.echo = 0
volume = 70
IntPersistIndex = 1

[Size]
xscale = 1
yscale = 1
ground.back = 16
ground.front = 15
stand.height = 80
head.pos = -22,-96
mid.pos = -14,-58
air.back =15
air.front = 15
z.width = 3
attack.width = 4,4
attack.dist = 160
proj.attack.dist = 90

[Velocity]
walk.fwd  = 2.1
walk.back = -2.0
runjump.fwd = 4,-25
jump.neu = 0,-10
jump.back = -2.5
jump.fwd = 3

[Movement]
airjump.num = 0
yaccel = .5
stand.friction = .85
crouch.friction = .82

;立ち
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 0

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3]
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

;---------------------------------------------------------------------------
;ジャンプ（スタート）
[Statedef 40]
type = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 7]
type = StopSnd
trigger1 = time = 0
channel = 1

[State 40, 1]
type = ChangeState
triggerall = Time = 0
triggerall = var(59) != 0
trigger1 = var(8) = 1
trigger2 = p2stateno = 5400 || p2stateno = 9940 || p2stateno = 9950
trigger3 = p2stateno = 9910 || p2stateno = 9920 || p2stateno = 243 || p2stateno = 244
trigger4 = p2stateno = 8140 || p2stateno = 8145
trigger5 = fvar(16) != 0
value = ifelse(prevstateno = 100,101,0)
ctrl = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 40, 3]
type = VarSet
trigger1 = prevstateno = 100 && command = "holdfwd"
var(5) = 1

[State 40, 4]
type = VarSet
trigger1 = var(59) = 0
trigger1 = command = "holdfwd"
trigger2 = var(59) != 0
trigger2 = p2bodydist X >= 60
sysvar(1) = 1

[State 40, 5]
type = VarSet
trigger1 = var(59) = 0
trigger1 = command = "holdback"
trigger2 = var(59) != 0
trigger2 = NumPartner
trigger2 = Partner,Alive
trigger2 = (life-partner,Life) < -100
trigger2 = NumEnemy >= 2
trigger2 = EnemyNear(0),movetype != H
trigger2 = EnemyNear(1),movetype != H
trigger3 = var(59) != 0
trigger3 = NumPartner
trigger3 = Partner,Alive
trigger3 = (life-partner,Life) < -100
trigger3 = NumEnemy = 1
trigger3 = EnemyNear(0),movetype != H
sysvar(1) = -1

[State 40, 6]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 8]
type = PlaySnd
trigger1 = Time = 2
value = 40,0

[State 40, 9]
type = ChangeState
trigger1 = AnimTime = 0 && command != "holdup"
value = 950
ctrl = 1

[State 40, 10]
type = ChangeState
trigger1 = command = "弱虚空殺" || (command = "弱虚空殺_乱" && var(50) > 0)
value = 1500

[State 40, 11]
type = ChangeState
trigger1 = command = "強虚空殺" || (command = "強虚空殺_乱" && var(50) > 0)
value = 1600

[State 40, 15]
type = ChangeState
trigger1 = AnimTime = 0
value = 41
ctrl = 1

;ジャンプ（空中）
[Statedef 41]
type    = A
physics = A
ctrl = 1

[State 41, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 42, 2]
type = VelSet
trigger1 = Time = 0 && Var(5)
x = IfElse(vel x = 0,0,IfElse(vel x < 0,const(velocity.jump.back.x),4))

[State 42, 3]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

;---------------------------------------------------------------------------
;ジャンプ（着地）
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = Turn
trigger1 = P2bodydist X <= -30
trigger1 = Time = 1
value = 0

[State 52, 4]
type = CtrlSet
trigger1 = Time = 1
value = 1

[State 52, 5]
type = PlaySnd
trigger1 = Time = 1
value = 52,0

[State 52, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ランニング
[Statedef 100]
type = S
physics = S
anim = 100
ctrl = 0

[State 100, 1]
type = PlaySnd
trigger1 = Time = 0
value = 100,0
channel = 1
loop = 1

[State 100, 3]
type = VelSet
trigger1 = Time >= 3
x = 7

[State 100, 4]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 101, 3]
type = ChangeState
trigger1 = Time >= 0
trigger1 = command = "holdup"
value = 40
ctrl = 0

[State 101, 3]
type = PlaySnd
trigger1 = Time >= 0
trigger1 = command = "holdup"
value = 40,1

[State 100, 6]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "a"
trigger1 = command = "b" 
value = 210

[State 100, 6]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = Time >= 12
trigger1 = command = "a" || command = "b" 
value = 250

[State 100, 6]
type = ChangeState
trigger1 = var(20)!=0
value = var(20)
ctrl = 0

[State 100, 6]
type = ChangeState
trigger1 = var(22)!=0
value = var(22)
ctrl = 0

[State 100, 7]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdfwd"
value = 101

;ランニング（ストップ）
[Statedef 101]
type = S
physics = S
anim = 101
sprpriority = 1
ctrl = ifelse(var(59)!=0,1,0)

[State 101, 2]
type = PlaySnd
trigger1 = animelem = 1
value = 101,0

[State 101, 3]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = Time <= 9
trigger1 = command = "holdup"
trigger1 = command = "holdback"
trigger1 = prevstateno != 2002
value = 40
ctrl = 0

[State 101, 3]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "holdback"
trigger1 = p2movetype = A
trigger1 = prevstateno != 2002
value = 120
ctrl = 0

[State 101, 4]
type = ChangeState
trigger1 = var(20)!=0
trigger1 = prevstateno != 2002
value = var(20)
ctrl = 0

[State 100, 6]
type = ChangeState
trigger1 = var(22)!=0
trigger1 = prevstateno != 2002
value = var(22)
ctrl = 0

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 101, 5]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;バックダッシュ（スタート）
[Statedef 105]
type = S
physics = N
anim = 105
ctrl = 0

[State 105, 1]
type = ChangeAnim
trigger1 = time = 0
trigger1 = P2Dist X < 0
value = 5

[State 105, 2]
type = Turn
trigger1 = time = 0
trigger1 = P2Dist X < 0

[State 105, 3]
type = VelMul
trigger1 = 1
x = 0.88

[State 105, 4]
type = VelSet
trigger1 = AnimElem = 3, = 10
x = 0

[State 105, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 106

;バックダッシュ（空中）
[Statedef 106]
type = A
physics = N
anim = 106

[State 106, 1]
type = VelSet
trigger1 = Time = 0
x = -8
y = -5

[State 106, 2]
type = PlaySnd
trigger1 = Time = 0
value = 105,0

[State 106, 3]
type = VelAdd
trigger1 = Time > 0
x = .2
y = .5

[State 106, 4]
type = VelAdd
trigger1 = Time >= 10
y = .2

[State 106, 7]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 107

;バックダッシュ（着地）
[Statedef 107]
type = S
physics = S
anim = 107
velset = 0,0

[State 107, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 107, 2]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 107, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------
;小ジャンプ
[Statedef 950]
type = A
movetype = I
physics = A
anim = 950
ctrl = 1

[State 1100, 5]
type = PlayerPush
trigger1 = Time > 6
trigger1 = Time < 18
value = 0

[State 950, 1]
type = VelSet
trigger1 = var(59) = 0
trigger1 = Time = 0
x = IfElse(vel x = 0,0,IfElse(vel x < 0,-2,2))
y = -7

[State 950, 1]
type = VelSet
triggerall = var(59) != 0
triggerall = Time = 0
trigger1 = p2bodydist X < 50
trigger1 = P2StateType != L
trigger2 = BackEdgebodyDist < 20
trigger2 = P2bodydist X <= 30
trigger2 = P2StateType = L
x = 0
y = -7

[State 950, 1]
type = VelSet
triggerall = var(59) != 0
triggerall = Time = 0
trigger1 = p2bodydist X >= 50
trigger2 = p2bodydist X >= 30
trigger2 = enemynear,HitDefAttr = SC, NT,ST,HT
x = const(velocity.jump.fwd.x)
y = -7

[State 950, 2]
type = VelSet
trigger1 = var(59) = 0
trigger1 = Time = 0 && Var(5)
x = IfElse(vel x = 0,0,IfElse(vel x < 0,-4,4))

[State 950, 4]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;勝ちポーズ判定
[Statedef 180]
type = S
velset = 0

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
trigger1 = Matchover = 0
value = 181

[State 180, 2]
type = ChangeState
trigger1 = Time = 0
trigger1 = Matchover = 1
trigger1 = Life != 1023
trigger1 = var(30) = 1
value = ifelse(var(14)=1,185,ifelse(var(14)=2,186,182))

[State 180, 2]
type = ChangeState
trigger1 = Time = 0 
trigger1 = Matchover = 1
trigger1 = Life != 1023
trigger1 = var(30) != 1
value = ifelse(var(14)=1,185,ifelse(var(14)=2,186,183))

[State 180, 2]
type = ChangeState
trigger1 = Time = 0
trigger1 = Matchover = 1
trigger1 = Life = 1023
value = ifelse(var(14)=1,185,ifelse(var(14)=2,186,184))

; 勝ちポーズ１
[Statedef 181]
type = S
movetype = I
physics = S
anim = 181

[State 181, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 181,0

[State 181, 2]
type = AssertSpecial
trigger1 = Time = [0,300]
flag = RoundNotOver

[State 181, 3]
type = SprPriority
trigger1 = Time = 0
value = 0

;勝ちポーズ２（力）
[Statedef 182]
type = S
movetype = I
physics = S
anim = 182

[State 182, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 182,0

[State 182, 1]
type = PlaySnd
trigger1 = animelem = 11
value = 182,1

[State 180, 1]
type = ChangeState
triggerall = Matchover = 1
trigger1 = time = 300
trigger2 = command = "s"
value = 187

[State 182, 2]
type = AssertSpecial
trigger1 = Time = [0,300]
flag = RoundNotOver

;勝ちポーズ（技・極）
[Statedef 183]
type = S
movetype = I
physics = S
anim = 183

[State 183, 1]
type = PlaySnd
trigger1 = animelem = 20
value = 182,0

[State 183, 1]
type = PlaySnd
trigger1 = animelem = 28
value = 182,1

[State 180, 1]
type = ChangeState
triggerall = Matchover = 1
trigger1 = time = 300
trigger2 = command = "s"
value = 187

[State 183, 3]
type = AssertSpecial
trigger1 = Time = [0,300]
flag = RoundNotOver

;勝ちポーズ（完全勝利）
[Statedef 184]
type = S
movetype = I
physics = S
anim = 184

[State 183, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 183,0

[State 183, 2]
type = PlaySnd
trigger1 = animelem = 15
value = 183,1

[State 180, 1]
type = ChangeState
triggerall = Matchover = 1
trigger1 = time = 300
trigger2 = command = "s"
value = 187

[State 183, 3]
type = AssertSpecial
trigger1 = Time = [0,300]
flag = RoundNotOver

;勝ちポーズ（小次郎用）
[Statedef 185]
type = S
movetype = I
physics = S
anim = 185

[State 183, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 185,0

[State 183, 2]
type = PlaySnd
trigger1 = animelem = 22
value = 185,1

[State 180, 1]
type = ChangeState
triggerall = Matchover = 1
trigger1 = time = 300
trigger2 = command = "s"
value = 187

[State 183, 3]
type = AssertSpecial
trigger1 = Time = [0,300]
flag = RoundNotOver

;勝ちポーズ（骸用）
[Statedef 186]
type = S
movetype = I
physics = S
anim = 186

[State 182, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 184,0

[State 182, 1]
type = PlaySnd
trigger1 = animelem = 11
value = 184,1

[State 180, 1]
type = ChangeState
triggerall = Matchover = 1
trigger1 = time = 300
trigger2 = command = "s"
value = 187

[State 182, 2]
type = AssertSpecial
trigger1 = Time = [0,300]
flag = RoundNotOver

;勝利メッセージ
[Statedef 187]
type = S
ctrl = 0
velset = 0,0
sprpriority = 6

[State 2060, 12]
type = EnvColor
trigger1 = time = 1
time = 10
value = 0,0,0
ontop = 1
ignorehitpause = 1

[State 181,1]
type = VarSet
trigger1= time = 1
var(32) = ifelse(Life>650,1,ifelse(Life<350,3,2))

[State 181,1]
type = PlaySnd
trigger1 = Time = 2
value = 9000,0

[State 801, 0]
type = Explod
trigger1 = time = 1
anim = ifelse(var(7) = 1,10185,10180)
pos = 0,0
sprpriority = 1000
postype = left
ownpal = 1

[State 801, 0]
type = Explod
trigger1= var(32) = 1
trigger1= Var(26) = 0
trigger1 = time = 1
anim = 10181
pos = ifelse(var(7) = 1,160,55),ifelse(var(7) = 1,185,180)
sprpriority = 1001
postype = left
ownpal = 1
scale = ifelse(var(7) = 1,0.75,1),ifelse(var(7) = 1,0.75,1)

[State 801, 0]
type = Explod
trigger1= var(32) = 2
trigger1= Var(26) = 0
trigger1 = time = 1
anim = 10182
pos = ifelse(var(7) = 1,195,87),ifelse(var(7) = 1,185,180)
sprpriority = 1001
postype = left
ownpal = 1
scale = ifelse(var(7) = 1,0.75,1),ifelse(var(7) = 1,0.75,1)

[State 801, 0]
type = Explod
trigger1= var(32) = 3
trigger1= Var(26) = 0
trigger1 = time = 1
anim = 10183
pos = ifelse(var(7) = 1,165,62),ifelse(var(7) = 1,185,180)
sprpriority = 1001
postype = left
ownpal = 1
scale = ifelse(var(7) = 1,0.75,1),ifelse(var(7) = 1,0.75,1)

[State 801, 0]
type = Explod
trigger1= Var(26) = 1
trigger1 = time = 1
anim = 10184
pos = ifelse(var(7) = 1,164,84),ifelse(var(7) = 1,185,180)
sprpriority = 1001
postype = left
ownpal = 1
scale = ifelse(var(7) = 1,0.75,1),ifelse(var(7) = 1,0.75,1)

[state 189, nofg]
type = assertspecial
trigger1 = time = [0,1200]
flag = NoFG
flag2=nobardisplay
flag3= invisible

[state 189, nofg]
type = assertspecial
trigger1 = time = [0,1200]
flag = NoBG
flag2= nomusic

[state 180, 1]
type = assertspecial
trigger1 = time = [0,400]
flag = roundnotover

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;イントロ
[Statedef 191]
type = S
anim = 191
velset = 0,0

[State 230, 7]
type = Explod
trigger1 = Var(30) = 1
trigger1 = numexplod(21000)=0
anim = ifelse(facing=1,21000,21010)
id = 21000
pos = 0,-140
postype = p1
removetime = 3
sprpriority = 30
bindtime = -1
ownpal = 1
[State 230, 7]
type = Explod
trigger1 = Var(30) = 2
trigger1 = numexplod(21001)=0
anim = ifelse(facing=1,21001,21011)
id = 21001
pos = 0,-140
postype = p1
removetime = 3
sprpriority = 30
bindtime = -1
ownpal = 1
[State 230, 7]
type = Explod
trigger1 = Var(30) = 3
trigger1 = numexplod(21002)=0
anim = ifelse(facing=1,21002,21012)
id = 21002
pos = 0,-140
postype = p1
removetime = 3
sprpriority = 30
bindtime = -1
ownpal = 1

[State 181,1]
type = VarSet
trigger1= time = 0
var(17) = life / 4

[State 191, 1]
type = PlaySnd
trigger1 = time = 10
value = 191,0

[State 191, 2]
type = PlaySnd
trigger1 = AnimElem = 9
value = 191,1

[State 191, 3]
type = AssertSpecial
trigger1 = animtime <= 0
flag = Intro

[State 191, 4]
type = ChangeState
trigger1 = var(30) > 0
trigger1 = var(14) = 1
value = 192

[State 191, 4]
type = ChangeState
trigger1 = var(30) > 0
trigger1 = var(14) = 2
value = 193

[State 191, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;イントロ(小次郎用)
[Statedef 192]
type = S
anim = 192
velset = 0,0

[State 230, 7]
type = Explod
trigger1 = Var(30) = 1
trigger1 = numexplod(21000)=0
anim = ifelse(facing=1,21000,21010)
id = 21000
pos = 0,-140
postype = p1
removetime = 3
sprpriority = 30
bindtime = -1
ownpal = 1
[State 230, 7]
type = Explod
trigger1 = Var(30) = 2
trigger1 = numexplod(21001)=0
anim = ifelse(facing=1,21001,21011)
id = 21001
pos = 0,-140
postype = p1
removetime = 3
sprpriority = 30
bindtime = -1
ownpal = 1
[State 230, 7]
type = Explod
trigger1 = Var(30) = 3
trigger1 = numexplod(21002)=0
anim = ifelse(facing=1,21002,21012)
id = 21002
pos = 0,-140
postype = p1
removetime = 3
sprpriority = 30
bindtime = -1
ownpal = 1

[State 191, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 192,0

[State 191, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 192,1

[State 191, 2]
type = PlaySnd
trigger1 = animtime = 0
value = 192,2

[State 191, 3]
type = AssertSpecial
trigger1 = animtime <= 0
flag = Intro

[State 191, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;イントロ(骸用)
[Statedef 193]
type = S
anim = 193
velset = 0,0

[State 230, 7]
type = Explod
trigger1 = Var(30) = 1
trigger1 = numexplod(21000)=0
anim = ifelse(facing=1,21000,21010)
id = 21000
pos = 0,-140
postype = p1
removetime = 3
sprpriority = 30
bindtime = -1
ownpal = 1
[State 230, 7]
type = Explod
trigger1 = Var(30) = 2
trigger1 = numexplod(21001)=0
anim = ifelse(facing=1,21001,21011)
id = 21001
pos = 0,-140
postype = p1
removetime = 3
sprpriority = 30
bindtime = -1
ownpal = 1
[State 230, 7]
type = Explod
trigger1 = Var(30) = 3
trigger1 = numexplod(21002)=0
anim = ifelse(facing=1,21002,21012)
id = 21002
pos = 0,-140
postype = p1
removetime = 3
sprpriority = 30
bindtime = -1
ownpal = 1

[State 191, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 193,0

[State 191, 2]
type = PlaySnd
trigger1 = AnimElem = 36
value = 193,1

[State 191, 3]
type = AssertSpecial
trigger1 = animtime <= 0
flag = Intro

[State 191, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;挑発
[Statedef 195]
type = S
movetype = I
physics = S
anim = 195
velset = 0
ctrl = 0

[State 195, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 195,0

[State 195, 1]
type = Varset
trigger1 = command = "holdup"
trigger1 = command = "a"
var(30) = 1

[State 195, 1]
type = Varset
trigger1 = command = "holdup"
trigger1 = command = "b"
var(30) = 2

[State 195, 1]
type = Varset
trigger1 = command = "holdup"
trigger1 = command = "x"
var(30) = 3

[State 195, 1]
type = Varset
trigger1 = command = "holdup"
trigger1 = command = "y"
var(31) = ifelse(var(31)=0,1,0)

[State 195, 1]
type = Varset
triggerall = command = "holdup"
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "x"
var(39) = 1
persistent = 0

[State 200, 1]
type =Palfx
trigger1 = command = "holdup"
trigger1 = command = "y" && var(31) = 0
time = 2
add = 0,0,200
ignorehitpause = 1

[State 200, 1]
type =Palfx
trigger1 = command = "holdup"
trigger1 = command = "y" && var(31) = 1
time = 2
add = 200,0,0
ignorehitpause = 1

[State 3121, 1]
type = Helper
trigger1 = var(39) = 1
id = 21000
postype = p1
pos = 0, -175
stateno = 21000
helpertype = normal
keyctrl = 0
ownpal = 1
facing = ifelse(facing=1,1,-1)

[State 210, 6]
type = Explod
trigger1 = var(39) = 1
anim = 21003
postype = p1
pos = 0, -125
sprpriority = 5
ownpal = 1
facing = ifelse(facing=1,1,-1)
ignorehitpause = 1

[State 195, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち　後　弱斬り
[Statedef 200]
type = S
movetype = A
physics = S
anim = 200
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 5

[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,0+floor(Random/250.0)

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,5

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = Light
damage = 39,ifelse(var(30)=1,3,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,9,5),ifelse(var(50)=0,9,5)
guard.pausetime =ifelse(var(30)=1,0,5),ifelse(var(30)=1,0,5)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-84
hitsound = S200,5
guardsound = S210,0+floor(Random/500.0)
ground.type = High
ground.slidetime = 18
ground.hittime =  18
ground.velocity = -4
guard.velocity = -3
ground.cornerpush.veloff = -5
guard.cornerpush.veloff = -4

[State 200, 4]
type = HitDef
trigger1 = AnimElem = 3
trigger1 = p2statetype = A
attr = S, NA
animtype = Light
damage = 39,ifelse(var(30)=1,3,0)
hitflag = AF
pausetime = ifelse(var(50)=0,9,5),ifelse(var(50)=0,9,5)
guard.pausetime =ifelse(var(30)=1,0,5),ifelse(var(30)=1,0,5)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-84
hitsound = S200,5
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3     
p2stateno = ifelse(var(50) > 0,243,9910)

[State 200, 5]
type = ChangeState
trigger1 = var(30) = 1 && moveguarded
ignorehitpause = 1
value = 350

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 200, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち　弱斬り
[Statedef 210]
type = S
movetype = A
physics = S
anim = 210
poweradd = 0
velset = 0
ctrl = 0

[State 210, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 210, 1]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 5

[State 210, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,0+floor(Random/250.0)

[State 210, 3]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,2

[State 210, 4]
type = VarSet
trigger1 = AnimElem = 4
v = 10
value = 1

[State 210, 4]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 5
v = 10
value = 0

[State 210, 6]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 211
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 7]
type = Explod
trigger1 = AnimElem = 5
anim = 212
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 7]
type = Explod
trigger1 = AnimElem = 5, = 2
anim = 213
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 7]
type = Explod
trigger1 = AnimElem = 5, = 4
anim = 214
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 7]
type = Explod
trigger1 = AnimElem = 5
anim = 212
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 8]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype = Light
damage = 39,ifelse(var(30)=1,3,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,5,3),ifelse(var(50)=0,5,3)
guard.pausetime =ifelse(var(30)=1,0,5),ifelse(var(30)=1,0,5)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20111
guard.sparkno = S20310
sparkxy = -10,-76
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = ifelse(var(23) > 0,-4,-5)
guard.velocity = ifelse(var(23) > 0,-3,-4)
ground.cornerpush.veloff = ifelse(var(23) > 0,-3,-5)
guard.cornerpush.veloff = ifelse(var(23) > 0,-4,-5)

[State 210, 9]
type = HitDef
trigger1 = AnimElem = 4
trigger1 = p2statetype = A
attr = S, NA
animtype = Light
damage = 39,ifelse(var(30)=1,3,0)
hitflag = AF
pausetime = ifelse(var(50)=0,5,3),ifelse(var(50)=0,5,3)
guard.pausetime =ifelse(var(30)=1,0,5),ifelse(var(30)=1,0,5)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20111
guard.sparkno = S20310
sparkxy = -10,-76
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 210, 3]
type = ctrlset
trigger1 = var(50) > 0
trigger1 = movecontact
trigger1 = animelem = 5
value = 1

[State 200, 5]
type = ChangeState
trigger1 = var(30) = 1 && moveguarded
value = 350
ignorehitpause = 1

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 210, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち　弱斬り２
[Statedef 220]
type = S
movetype = A
physics = S
anim = 220
poweradd = 0
velset = 0
ctrl = 0

[State 210, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 210, 1]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 5

[State 193, 2]
type = posadd
trigger1 = time = 0
x = 16;8

[State 210, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,0+floor(Random/250.0)

[State 210, 3]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,2

[State 230, 4]
type = VarSet
trigger1 = AnimElem = 3
v = 10
value = 1

[State 230, 5]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 4
v = 10
value = 0

[State 230, 7]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 221
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 8]
type = Explod
trigger1 = AnimElem = 4
anim = 222
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 8]
type = Explod
trigger1 = AnimElem = 4, = 2
anim = 223
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 9]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = light
damage = 39
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,5,3),ifelse(var(50)=0,5,3)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20120
guard.sparkno = S20310
sparkxy = -10,-55
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = ifelse(var(23) > 0,-4,-5)
guard.velocity = ifelse(var(23) > 0,-3,-4)
ground.cornerpush.veloff = ifelse(var(23) > 0,-3,-5)
guard.cornerpush.veloff = ifelse(var(23) > 0,-4,-5)

[State 230, 10]
type = HitDef
trigger1 = AnimElem = 3
trigger1 = p2statetype = A
attr = S, NA
animtype = Light
damage = 39
hitflag = AF
pausetime = ifelse(var(50)=0,5,3),ifelse(var(50)=0,5,3)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20120
guard.sparkno = S20310
sparkxy = -10,-50
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 210, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち　強斬り
[Statedef 230]
type = S
movetype = A
physics = S
anim = 230
poweradd = 0
VelSet = 0,0 
ctrl = 0

[State 230, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 230, 1]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 6

[State 193, 2]
type = ChangeAnim
trigger1 = time = 0 && var(23) > 0 && prevstateno = 210
value = 235

[State 193, 2]
type = posadd
trigger1 = time = 0 && var(23) > 0 && prevstateno = 210
x = 8

[State 230, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 220,2+floor(Random/250.0)

[State 230, 3]
type = PlaySnd
trigger1 = AnimElem = 4
value = 210,2

[State 230, 4]
type = VarSet
trigger1 = animtime = 0
v = 28
value = 0

[State 230, 4]
type = VarSet
trigger1 = AnimElem = 5
v = 10
value = 1

[State 230, 5]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 6
v = 10
value = 0

[State 230, 6]
type = Explod
trigger1 = Var(10) = 1
anim = 232
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1

[State 230, 7]
type = Explod
trigger1 = AnimElem = 6
anim = 232
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 8]
type = Explod
trigger1 = AnimElem = 6, = 2
anim = 233
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 9]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype = Hard
damage = 93,ifelse(var(30)=1,9,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
guard.pausetime =ifelse(var(30)=1,0,12),ifelse(var(30)=1,0,12)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = ifelse(var(23)>0,-6.2,-9)
guard.velocity = -4
ground.cornerpush.veloff = ifelse(var(23)>0,-6.2,-9)
guard.cornerpush.veloff = -4

[State 230, 10]
type = HitDef
trigger1 = AnimElem = 5
trigger1 = p2statetype = A
attr = S, NA
animtype = Light
damage = 93,ifelse(var(30)=1,9,0)
hitflag = AF
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
guard.pausetime =ifelse(var(30)=1,0,12),ifelse(var(30)=1,0,12)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 230, 12]
type = ChangeState
trigger1 = var(23) = 1
trigger1 = prevstateno = 210
trigger1 = command = "x"
trigger1 = var(10) = 1 && movecontact
value = 290

[State 200, 5]
type = ChangeState
trigger1 = var(30) = 1 && moveguarded
ignorehitpause = 1
value = 350

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 230, 13]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち　前　強斬り
[Statedef 240]
type = S
movetype = A
physics = S
anim = 240
poweradd = 0
velset = 0
ctrl = 0

[State 240, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -160
persistent = 0
ignorehitpause = 1

[State 240, 1]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 6

[State 200, 0]
type = ChangeAnim
trigger1 = var(30) != 1
trigger1 = time = 0
value = 245

[State 240, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 220,2+floor(Random/250.0)

[State 240, 3]
type = PlaySnd
trigger1 = AnimElem = 4
value = 210,2

[State 240, 4]
type = VarSet
trigger1 = AnimElem = 6
v = 10
value = 1

[State 240, 5]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 7
v = 10
value = 0

[State 240, 8]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 241
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 240, 9]
type = Explod
trigger1 = AnimElem = 7
anim = 242
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 240, 9]
type = Explod
trigger1 = AnimElem = 7, = 2
anim = 243
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 240, 9]
type = Explod
trigger1 = AnimElem = 7, = 4
anim = 244
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 240, 10]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype = Hard
damage = 150,ifelse(var(30)=1,15,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(30)=1,15,12),ifelse(var(30)=1,15,12)
guard.pausetime =ifelse(var(30)=1,0,12),ifelse(var(30)=1,0,12)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,4
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = ifelse(var(50)>0,-7,-10)
guard.velocity = -5
ground.cornerpush.veloff = ifelse(var(50)>0,-7,-10)
guard.cornerpush.veloff = -5

[State 240, 11]
type = HitDef
trigger1 = AnimElem = 6
trigger1 = p2statetype = A
attr = S, NA
animtype = Light
damage = 150,ifelse(var(30)=1,15,0)
hitflag = AF
pausetime = ifelse(var(30)=1,15,12),ifelse(var(30)=1,15,12)
guard.pausetime =ifelse(var(30)=1,0,12),ifelse(var(30)=1,0,12)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,4
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
p2stateno = ifelse(var(50)> 0,243,9910)

[State 200, 5]
type = ChangeState
trigger1 = var(30) = 1 && moveguarded
ignorehitpause = 1
value = 350

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0) && (animtime = 0)

[State 240, 23]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 240, 24]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;ダッシュ斬り
[Statedef 250]
type = S
movetype = A
physics = N
anim = 250
poweradd = 0
VelSet = 0,0
ctrl = 0

[State 311, 0]
type = VelSet
trigger1 = time = 0
x = 6

[State 311, 0]
type = VelAdd
trigger1 = time > 0
trigger1 = Vel X > 0
x = -0.3

[State 311, 0]
type = VelSet
trigger1 = Vel X <= 0
x = 0

[State 240, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -160
persistent = 0
ignorehitpause = 1

[State 240, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 220,2+floor(Random/250.0)

[State 240, 3]
type = PlaySnd
trigger1 = AnimElem = 4
value = 210,2

[State 240, 4]
type = VarSet
trigger1 = AnimElem = 6
v = 10
value = 1

[State 240, 5]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 7
v = 10
value = 0

[State 240, 8]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 241
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 240, 9]
type = Explod
trigger1 = AnimElem = 7
anim = 242
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 240, 9]
type = Explod
trigger1 = AnimElem = 7, = 2
anim = 243
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 240, 9]
type = Explod
trigger1 = AnimElem = 7, = 4
anim = 244
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 240, 10]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype = Hard
damage = 96,ifelse(var(30)=1,15,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(30)=1,15,12),ifelse(var(30)=1,15,12)
guard.pausetime =ifelse(var(30)=1,0,12),ifelse(var(30)=1,0,12)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,0+floor(Random/250.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -10
guard.velocity = -5
ground.cornerpush.veloff = -10
guard.cornerpush.veloff = -5

[State 240, 11]
type = HitDef
trigger1 = AnimElem = 6
trigger1 = p2statetype = A
attr = S, NA
animtype = Light
damage = 96,ifelse(var(30)=1,15,0)
hitflag = AF
pausetime = ifelse(var(30)=1,15,12),ifelse(var(30)=1,15,12)
guard.pausetime =ifelse(var(30)=1,0,12),ifelse(var(30)=1,0,12)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,0+floor(Random/250.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
p2stateno = ifelse(var(50)>0,243,9910)

[State 200, 5]
type = ChangeState
trigger1 = var(30) = 1 && moveguarded
ignorehitpause = 1
value = 350

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 240, 24]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち　蹴り
[Statedef 260]
type = S
movetype = A
physics = S
anim = 260
poweradd = 0
velset = 0
ctrl = 0

[State 250, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 250, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 5

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 220,0+floor(Random/250.0)

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210,5

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 4
trigger1 = p2statetype != L
attr = S, NA
animtype = Light
damage = 39,ifelse(var(30)=1,3,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,10,5),ifelse(var(50)=0,10,5)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-10
envshake = 10
hitsound = S200,5
guardsound = S210,4
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -5
guard.velocity = -3
ground.cornerpush.veloff = -5
guard.cornerpush.veloff = -3

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 4
trigger1 = p2statetype != L
trigger1 = p2statetype = A
attr = S, NA
animtype = Light
damage = 39,ifelse(var(30)=1,3,0)
hitflag = AF
pausetime = ifelse(var(50)=0,10,5),ifelse(var(50)=0,10,5)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-10
hitsound = S200,5
guardsound = S210,4
air.velocity = -2,-3
airguard.velocity = -3     
p2stateno = ifelse(var(50) > 0,243,9910)

[State 200, 3]
type = HitDef
trigger1 = NumTarget(300) = 0
trigger1 = AnimElem = 4
trigger1 = p2stateno != 5100
trigger1 = p2stateno != 5101
trigger1 = p2statetype = L
id = 300
attr = S, NA
animtype = Light
damage = 39
hitflag = FD
pausetime = ifelse(var(50)=0,10,5),ifelse(var(50)=0,10,5)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-10
hitsound = S200,5
guardsound = S210,4
ground.hittime = 30

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち　前　蹴り
[Statedef 270]
type = S
movetype = A
physics = S
anim = 270
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 6

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -160
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 220,2+floor(Random/250.0)

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210,6

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype = Light
damage = 54,ifelse(var(30)=1,3,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = s20010
guard.sparkno = S20300
sparkxy = -10,-84
envshake = 10
hitsound = S200,5
guardsound = S210,4
p2facing = 1
ground.type = High
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 4
trigger1 = p2statetype = A
attr = S, NA
animtype = Light
damage = 54,ifelse(var(30)=1,3,0)
hitflag = AF
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20010
guard.sparkno = S20300
sparkxy = -10,-84
hitsound = S200,5
guardsound = S210,4
air.velocity = -2,-3
airguard.velocity = -3     
p2stateno = ifelse(var(50) > 0,243,9910)

[State 222, 3]
type = TargetState
trigger1 = MoveHit && hitpausetime = 1
trigger1 = p2statetype != A
ignorehitpause = 1
persistent = 0
value = 271

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 222, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;強蹴りやられ
[Statedef 271]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 271, 0]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 271, 0]
type = PlayerPush
trigger1 = time >= 0
value = 0

[State 271, 0]
type = ChangeAnim
trigger1 = time >= 0
value = 5017

[State 271,1]
type = VelSet
trigger1 = time = 1
x = -10

[State 271,1]
type = VelSet
trigger1 = time = 9
x = 0

[State 271,1]
type = PosAdd
trigger1 = time > 9
x = -10

[State 271, 6]
type = PlaySnd
trigger1 = time >= 1
trigger1 = backedgedist <= 5
value = F7, 2

[State 271, 6]
type = EnvShake
trigger1 = time >= 1
trigger1 = backedgedist <= 5
time = 10

[State 271, 7]
type = ChangeState
trigger1 = time >= 1
trigger1 = backedgedist <= 5
value = 272

;跳ね返り
[Statedef 272]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 272, 0]
type = ChangeAnim
trigger1 = time < 7
value = 5030

[State 272, 1]
type = ChangeAnim
trigger1 = time = 7
value = 5050

[State 272, 2]
type = VelSet
trigger1 = time = 7
x = 2
y = -6

[State 272, 3]
type = VelAdd
trigger1 = time >= 7
y = .5

[State 271, 2]
type = ScreenBound
trigger1 = time < 7
value = 1
movecamera = 0

[State 271, 6]
type = EnvShake
trigger1 = time > 7
trigger1 = Vel Y > 0
trigger1 = Pos Y > 15
time = 5

[State 272, 5]
type = SelfState
trigger1 = time > 7
trigger1 = Vel Y > 0
trigger1 = Pos Y > 15
value = 5100

;打ち上げ
[Statedef 280]
type = S
movetype = A
physics = S
anim = 280
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -160
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 6

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 4
value = 220,2+floor(Random/250.0)

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 210,2

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 6
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 7
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 281
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 282
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
anim = 283
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 7
anim = 284
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 7, = 2
anim = 285
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 6
trigger1 = p2stateno != 131 || p2stateno != 132
attr = S, NA
animtype = Hard
damage = 110
guardflag = H
hitflag = MAF
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,85),ifelse(var(50)>0,0,85)
givepower = 20,20
sparkno = S20150
guard.sparkno = S20310
sparkxy = -10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -2.5,-2.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -4
air.cornerpush.veloff = -4
p2stateno = ifelse(p2statetype=A,ifelse(var(50)>0,8140,9910),8140)

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 6
trigger1 = p2stateno = 131 || p2stateno = 132
attr = S, NA
animtype = Hard
damage = 110
guardflag = H
hitflag = MAF
pausetime = ifelse(var(50)=0,8,6),ifelse(var(50)=0,8,6)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,85),ifelse(var(50)>0,0,85)
givepower = 20,20
sparkno = S20150
guard.sparkno = S20310
sparkxy = -10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 150
ground.hittime  = 45
ground.velocity = -9
guard.velocity = -4
air.velocity = -2.5,-2.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -4
air.cornerpush.veloff = -4
p2stateno = 9980

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;特殊技（地上）
[Statedef 290]
type = S
movetype = A
physics = S
anim = 290
velset = 0,0
ctrl = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 291

;特殊技（空中）
[Statedef 291]
type = A
movetype = A
physics = N
anim = 291
velset = 0,0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 220, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 210,2

[State 220, 2]
type = PlaySnd
trigger1 = animelem = 2
value = 220,2+floor(Random/250.0)

[State 1505, 3]
type = PosAdd
trigger1 = AnimElem = 1
y = -15

[State 1505, 3]
type = VelSet
trigger1 = AnimElem = 1
y = -4

[State 1505, 3]
type = VelSet
trigger1 = AnimElem = 1
x = 4.2

[State 1505, 4]
type = VelAdd
trigger1 = Time >= 0
y = .5

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 3
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 4
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
anim = 611
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 612
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 613
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5, = 2
trigger2 = AnimElem = 6, = 1
anim = 614
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
animtype = Hard
damage = 82
guardflag = H
hitflag = MAF
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-50
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(var(50) > 0,243,ifelse(var(12) > 0,243,241))

[State 1505, 9]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 292

;特殊技（着地）
[Statedef 292]
type = S
movetype = A
physics = S
anim = 292
poweradd = 0
ctrl = 0

[State 1505, 3]
type = CtrlSet
trigger1 = var(50) > 0
trigger1 = time = 0
value = 1

[State 210, 0]
type = VelSet
trigger1 = time = 0
y = 0

[State 210, 0]
type = VarSet
trigger1 = time = 0
v = 10
value = 0

[State 410, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;ダウン追い撃ち
[Statedef 300]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 300

[State 230, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 220, 2]
type = PlaySnd
trigger1 = animelem = 2
value = 220,2+floor(Random/250.0)

[State 220, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 210,2

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 3
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 4
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
anim = 611
pos = 25,20
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 612
pos = 25,20
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4, = 2
anim = 613
pos = 25,20
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
trigger2 = AnimElem = 5, = 2
anim = 614
pos = 25,20
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 250, 3]
type = HitDef
trigger1 = NumTarget(300) = 0
trigger1 = p2stateno != 5100
trigger1 = p2stateno != 5101
trigger1 = p2stateno != 8146
trigger1 = AnimElem = 3
id = 300
attr = S, NA
damage = 63
hitflag = FD
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-50
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.hittime = 30

[State 250, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;ガード不能攻撃
[Statedef 310]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 310

[State 310, 0]
type = SprPriority
trigger1 = time = 0
value = 1

[State 311, 0]
type = PlaySnd
trigger1 = AnimElem = 8
value = 300,0

[State 310, 0]
type = PosAdd
trigger1 = animelem = 2
x = -11

[State 310, 0]
type = PosAdd
trigger1 = animelem = 3
x = -25

[State 310, 0]
type = PosAdd
trigger1 = animelem = 4
x = -24

[State 310, 0]
type = PosAdd
trigger1 = animelem = 5
x = -7

[State 310, 1]
type = Explod
trigger1 = time = 16
anim = 320
pos = 0,0
sprpriority = 2
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time = 22
anim = 321
pos = 0,0
sprpriority = 2
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time = 28
anim = 322
pos = 0,0
sprpriority = 2
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time = 34
anim = 323
pos = 0,0
sprpriority = 2
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time = 40
anim = 324
pos = 0,0
sprpriority = 2
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time >= 46
anim = 325
pos = 0,0
sprpriority = 2
ownpal = 1
persistent = 8
[State 310, 1]
type = Explod
trigger1 = time >= 50
anim = 326
pos = 0,0
sprpriority = 2
ownpal = 1
persistent = 8

[State 310, 1]
type = Explod
trigger1 = time = 16
anim = 330
pos = 0,0
sprpriority = 1
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time = 22
anim = 331
pos = 0,0
sprpriority = 1
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time = 28
anim = 332
pos = 0,0
sprpriority = 1
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time = 34
anim = 333
pos = 0,0
sprpriority = 1
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time = 40
anim = 334
pos = 0,0
sprpriority = 1
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time >= 46
anim = 335
pos = 0,0
sprpriority = 1
ownpal = 1
persistent = 8
[State 310, 1]
type = Explod
trigger1 = time >= 50
anim = 336
pos = 0,0
sprpriority = 1
ownpal = 1
persistent = 8

[State 310, 1]
type =Palfx
trigger1 = (GameTime%2)=0
trigger1 = time >= 100
time = 1
add = 210,10,10
ignorehitpause = 1

[State 310, 1]
type = varset
trigger1 = animtime = 0
var(29) = 0

[State 310, 1]
type = varset
trigger1 = time = 0
trigger1 = command = "hold_x" && command = "hold_b" 
var(29) = 1

[State 310, 1]
type = varset
trigger1 = time = 0
trigger1 = command = "hold_c"
var(29) = 2

[State 310, 7]
type = ChangeState
triggerall = var(59) = 0
trigger1 = time = [42,99]
trigger1 = var(29) = 2
trigger1 = command != "hold_c"
trigger2 = time = [42,99]
trigger2 = var(29) = 1
trigger2 = command != "hold_x" || command != "hold_b" 
value = 311

[State 310, 7]
type = ChangeState
triggerall = var(59) = 0
trigger2 = time >= 100
trigger2 = var(29) = 1
trigger2 = command != "hold_x" || command != "hold_b" 
trigger1 = time >= 100
trigger1 = var(29) = 2
trigger1 = command != "hold_c"
trigger3 = time >= 150
value = 312

;ガード不能攻撃(通常)
[Statedef 311]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 311

[State 311, 0]
type = PlaySnd
trigger1 = AnimElem = 2
value = 300,1

[State 311, 0]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,2

[State 1000, 2]
type = Width
trigger1 = animelem = 1
value = 20,0

[State 310, 0]
type = PosAdd
trigger1 = animelem = 2
x = 35

[State 310, 0]
type = PosAdd
trigger1 = animelem = 3
x = 25

[State 311, 0]
type = VarSet
trigger1 = AnimElem = 3
v = 10
value = 1

[State 311, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 4
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 314
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 315
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 4, = 2
anim = 316
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 4, = 4
anim = 317
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 4, = 6
anim = 318
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 4, = 8
anim = 319
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = Hard
damage = 183
hitflag = MAF
pausetime = 15,15
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20160
guard.sparkno = S20310
sparkxy = 0,-70
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = ifelse(var(23) > 0,-6.5,-10)
ground.cornerpush.veloff = -10
guard.cornerpush.veloff = -10
p2stateno = 8160

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)

[State 311, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;ガード不能攻撃(昇華可)
[Statedef 312]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 312

[State 311, 0]
type = PlaySnd
trigger1 = AnimElem = 3
value = 300,1

[State 311, 0]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210,2

[State 312, 5]
type = PlayerPush
trigger1 = Vel X != 0
trigger1 = Time >= 8
value = 0

[State 1000, 2]
type = Width
trigger1 = time = [5,8]
value = 30,0

[State 311, 0]
type = VelSet
trigger1 = time = 5
x = 6

[State 311, 0]
type = VelAdd
trigger1 = time >= 20
trigger1 = Vel X > 0
x = -0.2

[State 311, 0]
type = VelSet
trigger1 = Vel X <= 0
x = 0

[State 310, 0]
type = PosAdd
trigger1 = animelem = 3
x = 35

[State 310, 0]
type = PosAdd
trigger1 = animelem = 4
x = 25

[State 311, 0]
type = VarSet
trigger1 = AnimElem = 3
v = 10
value = 1

[State 311, 0]
type = VarSet
trigger1 = AnimElem = 4
v = 10
value = 2

[State 311, 0]
type = VarSet
trigger1 = AnimElem = 5
v = 10
value = 3

[State 311, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 6
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = Var(10) = 2
persistent = 2
ignorehitpause = 1
anim = 340
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = Var(10) = 3
persistent = 2
ignorehitpause = 1
anim = 341
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 5, = 2
anim = 342
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 5, = 4
anim = 343
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 5, = 6
anim = 344
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 5, = 8
anim = 345
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = Hard
damage = 228
hitflag = MAF
pausetime = 20,20
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20160
guard.sparkno = S20310
sparkxy = 0,-70
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype=A,8160,8210)

[State 2010, 昇華]
type = VarSet
trigger1 = var(27) = 0
trigger1 = var(10) = [1,3]
trigger1 = command = "真狼牙"
trigger1 = power >= 1000*ifelse(var(31)=1,3,1) || (var(31) = 1 && life <= var(17))
trigger1 = var(30) != 2
var(27) = 1
persistent = 0
ignorehitpause = 1

[State 2010, 昇華]
type = ChangeState
trigger1 = var(27) = 1
value = 11000

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)

[State 311, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;通常攻撃相手ガード時
[Statedef 350]
velset = 0,0
ctrl = 0

[State 350, 0]
type = ChangeAnim
trigger1 = time = 0 && prevstateno=200
value = 350

[State 350, 0]
type = ChangeAnim
trigger1 = time = 0 && prevstateno=210
value = 351

[State 350, 1]
type = ChangeAnim
trigger1 = time = 0 && prevstateno=230
trigger2 = time = 0 && prevstateno=250
value = 352

[State 350, 2]
type = ChangeAnim
trigger1 = time = 0 && prevstateno=240
value = 353

[State 350, 3]
type = ChangeAnim
trigger1 = time = 0 && prevstateno=400
value = 360

[State 350, 3]
type = ChangeAnim
trigger1 = time = 0 && prevstateno=410
value = 361

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && animtime = 0
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && animtime = 0
value = var(20)
ctrl = 0

[State 350, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = ifelse(prevstateno=400||prevstateno=410, 11, 0)
ctrl = 1

;しゃがみ　弱斬り
[Statedef 400]
type = C
movetype = A
physics = C
anim = 400
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 5

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,0+floor(Random/250.0)

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,5

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
animtype = Light
damage = 39,ifelse(var(30)=1,3,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,10,5),ifelse(var(50)=0,10,5)
guard.pausetime =ifelse(var(30)=1,0,5),ifelse(var(30)=1,0,5)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-40
hitsound = S200,5
guardsound = S210,0+floor(Random/500.0)
ground.type = low
ground.slidetime = 18
ground.hittime =  18
ground.velocity = ifelse(var(23) > 0,-3.5,-5)
guard.velocity = -3
ground.cornerpush.veloff = ifelse(var(23) > 0,-3.5,-5)
guard.cornerpush.veloff = -3

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 3
trigger1 = p2statetype = A
attr = C, NA
animtype = Light
damage = 39,ifelse(var(30)=1,3,0)
hitflag = AF
pausetime = ifelse(var(50)=0,10,5),ifelse(var(50)=0,10,5)
guard.pausetime =ifelse(var(30)=1,0,5),ifelse(var(30)=1,0,5)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-40
hitsound = S200,5
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3     
p2stateno = ifelse(var(50) > 0,243,9910)

[State 200, 5]
type = ChangeState
trigger1 = var(30) = 1 && moveguarded
ignorehitpause = 1
value = 350

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;しゃがみ　強斬り
[Statedef 410]
type = C
movetype = A
physics = C
anim = 410
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 6

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 220,2+floor(Random/250.0)

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210,2

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 5
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 6
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 411
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 412
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
anim = 413
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6, = 2
anim = 414
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = C, NA
animtype = Hard
damage = 78,ifelse(var(30)=1,6,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
guard.pausetime =ifelse(var(30)=1,0,12),ifelse(var(30)=1,0,12)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-40
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = ifelse(var(23) > 0,-6.2,-9)
guard.velocity = -4
ground.cornerpush.veloff = ifelse(var(23) > 0,-6.2,-9)
guard.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 5
trigger1 = p2statetype = A
attr = C, NA
animtype = Light
damage = 78,ifelse(var(30)=1,6,0)
hitflag = AF
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
guard.pausetime =ifelse(var(30)=1,0,12),12
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-40
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 200, 5]
type = ChangeState
trigger1 = var(30) = 1 && moveguarded
ignorehitpause = 1
value = 350

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;しゃがみ　弱蹴り
[Statedef 420]
type = C
movetype = A
physics = C
anim = 420
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 5

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,0+floor(Random/250.0)

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,5

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
animtype = Light
damage = 39,ifelse(var(30)=1,3,0)
guardflag = L
hitflag = M
pausetime = ifelse(var(50)=0,9,5),ifelse(var(50)=0,10,5)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-10
hitsound = S200,5
guardsound = S210,4
ground.type = low
ground.slidetime = 19
ground.hittime =  19
ground.velocity = -4.5
guard.velocity = -3
ground.cornerpush.veloff = -4.5
guard.cornerpush.veloff = -3

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 3
trigger1 = p2statetype = A
attr = C, NA
animtype = Light
damage = 39,ifelse(var(30)=1,3,0)
hitflag = AF
pausetime = ifelse(var(50)=0,10,5),ifelse(var(50)=0,10,5)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-10
hitsound = S200,5
guardsound = S210,4
air.velocity = -2,-3
airguard.velocity = -3     
p2stateno = ifelse(var(50) > 0,243,9910)

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 420, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;しゃがみ　強蹴り
[Statedef 430]
type = C
movetype = A
physics = C
anim = 430
poweradd = 0
VelSet = 0,0
ctrl = 0

[State 200, 0]
type = VelSet
trigger1 = prevstateno = 100
trigger1 = time = 0
x = 7

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 6

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,2+floor(Random/250.0)

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,6

[State 430, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = C, NA
damage   = ifelse(var(12)=1,98,72),ifelse(var(30)=1,3,0)
guardflag = L
hitflag = MA
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20010
guard.sparkno = S20300
sparkxy = -10,-20
hitsound   = S200,6
guardsound = S210,3
ground.type = Trip
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -2.5,-8
air.velocity = -2.4,-8
airguard.velocity = -3   
fall = 1
fall.recover = 0
yaccel = 0.62
p2stateno = 8190

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 430, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

; ジャンプ　弱斬り
[Statedef 600]
type = A
movetype = A
physics = A
anim = 600
poweradd = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 4
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 5
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 3
anim = 601
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 602
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 603
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 220, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 210,2

[State 220, 2]
type = PlaySnd
trigger1 = animelem = 2
value = 220,1+floor(Random/250.0)

[State 1100, 5]
type = PlayerPush
trigger1 = time >= 0 && time<= 5
trigger1 = Vel X >= 4
trigger1 = prevstateno = 950
value = 0

[State 220, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = A, NA
animtype = Hard
damage = 39,ifelse(var(30)=1,3,0)
guardflag = H
hitflag = M
pausetime = ifelse(var(50)=0,5,3),ifelse(var(50)=0,5,3)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-50
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4
ground.cornerpush.veloff = -4

[State 210, 3]
type = HitDef
trigger1 = AnimElem = 4
trigger1 = p2statetype = A
attr = A, NA
animtype = Light
damage = 39,ifelse(var(30)=1,3,0)
hitflag = AF
guardflag = A
pausetime = ifelse(var(50)=0,5,3),ifelse(var(50)=0,5,3)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-50
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 600, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50

;ジャンプ　強斬り
[Statedef 610]
type = A
movetype = A
physics = A
anim = 610
poweradd = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 3
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 4
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
anim = 611
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 612
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 613
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5, = 2
trigger2 = AnimElem = 6, = 1
anim = 614
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 220, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 210,2

[State 220, 2]
type = PlaySnd
trigger1 = animelem = 2
value = 220,2+floor(Random/250.0)

[State 1100, 5]
type = PlayerPush
trigger1 = time >= 0 && time<= 5
trigger1 = Vel X >= 4
trigger1 = prevstateno = 950
value = 0

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
animtype = Hard
damage = 72,ifelse(var(30)=1,6,0)
guardflag = H
hitflag = M
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-50
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
ground.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 3
trigger1 = p2statetype = A
attr = A, NA
animtype = Light
damage = 72,ifelse(var(30)=1,6,0)
hitflag = AF
guardflag = A
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-60
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 610, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50

;ジャンプ　蹴り
[Statedef 620]
type = A
movetype = A
physics = A
anim = 620
poweradd = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,0+floor(Random/250.0)

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,5

[State 1100, 5]
type = PlayerPush
trigger1 = time >= 0 && time<= 5
trigger1 = Vel X >= 4
trigger1 = prevstateno = 950
value = 0

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
animtype = Light
damage = 39,ifelse(var(30)=1,3,0)
guardflag = H
hitflag = M
pausetime = ifelse(var(50)=0,10,5),ifelse(var(50)=0,10,5)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-10
hitsound = S200,5
guardsound = S210,4
ground.type = High
ground.slidetime = 17
ground.hittime =  17
ground.velocity = -4
ground.cornerpush.veloff = -4

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 3
trigger1 = p2statetype = A
attr = A, NA
animtype = Light
damage = 39,ifelse(var(30)=1,3,0)
hitflag = AF
guardflag = A
pausetime = ifelse(var(50)=0,10,5),ifelse(var(50)=0,10,5)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-10
hitsound = S200,5
guardsound = S210,4
air.velocity = -2,-3
airguard.velocity = -3     
p2stateno = ifelse(var(50) > 0,243,9910)

[State 620, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50

;---------------------------------------------------------------------------
;背負い投げ
[Statedef 900]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 900

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 900,0

[State 900, 3]
type = HitDef
trigger1 = Time = 0
trigger1 = p2bodydist X <= 30
trigger1 = var(59) = 0
attr = S, NT
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
hitflag = M-
numhits = 0
priority = 7, Hit
sparkno = -1
sprpriority = -1
p2facing = 1
ground.hittime = 30
p1stateno = ifelse(command = "holdback",911,901)
p2stateno = ifelse(command = "holdback",912,902)

[State 900, 3]
type = HitDef
triggerall = Time = 0
triggerall = p2bodydist X <= 30
triggerall = var(59) != 0
trigger1 = NumEnemy = 1
trigger2 = NumEnemy >= 2
trigger2 = EnemyNear(1),life <= 0 || EnemyNear(0),life <= 0
attr = S, NT
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
hitflag = M-
numhits = 0
priority = 7, Hit
sparkno = -1
sprpriority = -1
p2facing = 1
ground.hittime = 30
p1stateno = ifelse(command = "holdback",911,901)
p2stateno = ifelse(command = "holdback",912,902)

[State 900, 3]
type = HitDef
trigger1 = Time = 0
trigger1 = p2bodydist X <= 30
trigger1 = var(59) != 0
trigger1 = NumEnemy >= 2
attr = S, NT
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
hitflag = M-
numhits = 0
priority = 7, Hit
sparkno = -1
sprpriority = -1
p2facing = 1
ground.hittime = 30
p1stateno = ifelse((EnemyNear(0),pos X - pos X)*(EnemyNear(1),pos X - pos X)>0,911,901)
p2stateno = ifelse((EnemyNear(0),pos X - pos X)*(EnemyNear(1),pos X - pos X)>0,912,902)


[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 900, 5]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;背負い投げ
[Statedef 901]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 901

[State 1000, 2]
type = Width
trigger1 = AnimElem = 1
value = 0,50

[state 1, 1]
type = sprpriority
trigger1 = Animelem = 1
value = 5

[state 1, 1]
type = sprpriority
trigger1 = Animelem = 3
value = -1

[state 1, 1]
type = sprpriority
trigger1 = Animelem = 6
value = 1

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 900,1

[State 271, 6]
type = PlaySnd
trigger1 = Animelem = 4
value = 220,2+floor(Random/250.0)

[State 271, 6]
type = PlaySnd
trigger1 = Animelem = 6
value = F7, 2

[State 271, 6]
type = EnvShake
trigger1 = Animelem = 6
time = 10

[State 1101, 1]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 1101, 1]
type = PosAdd
trigger1 = AnimElem = 3
x = 15

[State 911, 4]
type = targetbind
trigger1 = Animelem = 1
pos =  50,0
time = 1

[State 911, 4]
type = targetbind
trigger1 = Animelem = 3
pos =  30,-100
time = 1

[State 911, 4]
type = targetbind
trigger1 = Animelem = 4
pos =  30,-105
time = 1

[State 911, 4]
type = targetbind
trigger1 = Animelem = 5
pos =  10,-100
time = 1

[State 911, 4]
type = targetbind
trigger1 = Animelem = 6
pos =  -60,0
time = 1

[State 1105, 3]
type = HitAdd
trigger1 = AnimElem = 6
value = 1

[State 905, 11]
type = TargetLifeAdd
trigger1 = AnimElem = 6
value = -84

[State 105, 2]
type = Turn
trigger1 = animtime = 0

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 905, 13]
type = ChangeState
trigger1 = animtime = 0
value = 0
Ctrl = 1

;背負い投げやられ
[Statedef 902]
type    = S
movetype= H
physics = N
ctrl = 0
velset = 0,0
 
[State 5050, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 902

[State 1101, 1]
type = VelSet
trigger1 = animtime = 0
x = 3

[State 1101, 1]
type = PosSet
trigger1 = animtime = 0
y = 0

[State 1105, 3]
type = Selfstate
trigger1 = animtime = 0
value = 5100

;背負い投げ（逆）
[Statedef 911]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 901

[State 1000, 2]
type = Turn
trigger1 = Time = 0

[State 1000, 2]
type = Width
trigger1 = AnimElem = 1
value = 50,0

[state 1, 1]
type = sprpriority
trigger1 = Animelem = 1
value = -1

[state 1, 1]
type = sprpriority
trigger1 = Animelem = 6
value = 1

[state 1, 1]
type = sprpriority
trigger1 = Animelem = 3
value = -1

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 900,1

[State 271, 6]
type = PlaySnd
trigger1 = Animelem = 4
value = 220,2+floor(Random/250.0)

[State 271, 6]
type = PlaySnd
trigger1 = Animelem = 6
value = F7, 2

[State 271, 6]
type = EnvShake
trigger1 = Animelem = 6
time = 10

[State 1101, 1]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 1101, 1]
type = PosAdd
trigger1 = AnimElem = 3
x = 15

[State 911, 4]
type = targetbind
trigger1 = Animelem = 1
pos =  50,0
time = 1

[State 911, 4]
type = targetbind
trigger1 = Animelem = 3
pos =  30,-100
time = 1

[State 911, 4]
type = targetbind
trigger1 = Animelem = 4
pos =  30,-105
time = 1

[State 911, 4]
type = targetbind
trigger1 = Animelem = 5
pos =  10,-100
time = 1

[State 911, 4]
type = targetbind
trigger1 = Animelem = 6
pos =  -60,0
time = 1

[State 1105, 3]
type = HitAdd
trigger1 = AnimElem = 6
value = 1

[State 905, 11]
type = TargetLifeAdd
trigger1 = AnimElem = 6
value = -84

[State 105, 2]
type = Turn
trigger1 = animtime = 0

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 905, 13]
type = ChangeState
trigger1 = animtime = 0
value = 0
Ctrl = 1

;背負い投げやられ（逆）
[Statedef 912]
type    = S
movetype= H
physics = N
ctrl = 0
velset = 0,0

[State 1000, 2]
type = Turn
trigger1 = Time = 0

[State 5050, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 902

[State 1101, 1]
type = VelSet
trigger1 = animtime = 0
x = 3

[State 1101, 1]
type = PosSet
trigger1 = animtime = 0
y = 0

[State 1105, 3]
type = Selfstate
trigger1 = animtime = 0
value = 5100

;-------------------------------------------------
;小ジャンプ
[Statedef 950]
type = A
movetype = I
physics = A
anim = 950

[State 1100, 5]
type = PlayerPush
trigger1 = Time > 6
trigger1 = Time < 18
value = 0

[State 950, 1]
type = VelSet
trigger1 = Time = 0
x = IfElse(vel x = 0,0,IfElse(vel x < 0,-2.8,2.9))
y = -7

[State 950, 2]
type = VelSet
trigger1 = Time = 0 && Var(5)
x = IfElse(vel x = 0,0,IfElse(vel x < 0,-4.8,4.8))

[State 50, 4]
type = AfterImage
trigger1 = Time = 0 && Var(5) && Vel X != 0
time = 10
framegap = 2
length = 8
palbright = 0,0,0
PalContrast = 240,255,255
PalMul      = .8,.8,.8

[State 950, 4]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;-------------------------------------------------

;弱　疾空殺
[Statedef 1000]
type = S
movetype = A
physics = S
anim = 1000
poweradd = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50) = 0,90,0)*ifelse(var(31)=1,3,1)
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = animelem = 1
var(50) = -135

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1000,0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 6
value = 1000,1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
anim = 1010
pos = 10,-35
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1700, 4]
type = Projectile
trigger1 = AnimElem = 6
attr = S, SP
projID = 1000
projanim = 1020
projshadow = 68,68,68
projremovetime = 26
offset =  40,-49
hitflag = MAF
velocity = ifelse(var(50) > 0,10,7)
damage = ifelse(var(12)!=0,ifelse(var(30)=1,105,ifelse(var(30)=2,ifelse(var(50)>0,35,75),ifelse(var(50)>0,43,90))), ifelse(var(30)=1,84,ifelse(var(30)=2,ifelse(var(50)>0,30,60),ifelse(var(50)>0,40,75)))),9
animtype = Hard
guardflag = M
pausetime = 0,ifelse(p2statetype=A,0,12)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-40
hitsound = S1000,2
guardsound = S210,4
ground.type = Low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -2.5,-2.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 1000, 0]
type = ctrlset
trigger1 = var(50) > 0
trigger1 = animelem = 8
value = 1

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 1000, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;強　疾空殺（一発目）
[Statedef 1100]
type = S
movetype = A
physics = S
anim = 1100
poweradd = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50) = 0,90,0)*ifelse(var(31)=1,3,1)
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = animelem = 1
var(50) = -135

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 1000,0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 6
value = 1000,1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
anim = 1010
pos = 10,-30
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1700, 4]
type = Projectile
trigger1 = AnimElem = 6
attr = S, SP
projID = 1000
projanim = 1120
projshadow = 68,68,68
offset =  50,-49
hitflag = MAF
velocity = ifelse(var(50) > 0,10,7)
damage = ifelse(var(12)!=0,ifelse(var(30)=1,78,ifelse(var(30)=2,ifelse(var(50)>0,30,60),ifelse(var(50)>0,35,65))), ifelse(var(30)=1,57,ifelse(var(30)=2,ifelse(var(50)>0,20,40),ifelse(var(50)>0,25,47)))),6
animtype = Hard
guardflag = M
pausetime = 0,ifelse(p2statetype=A,0,12)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-40
hitsound = S1000,2
guardsound = S210,4
ground.type = Low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -2.5,-2.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 2100, 3]
type = Explod
trigger1 = ProjHit = 1
anim = 1030
pos =  10,-49
postype = p2
sprpriority = 10
supermove = 1
bindtime = 1
facing = -1

[State 1000, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 1101

;強　疾空殺（二発目）
[Statedef 1101]
type = S
movetype = A
physics = S
anim = 1101
poweradd = 0
velset = 0
ctrl = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1000,0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 6
value = 1000,1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
anim = 1110
pos = 25,-25
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1700, 4]
type = Projectile
trigger1 = AnimElem = 6
attr = S, SP
projID = 1100
projanim = 1125
projshadow = 68,68,68
offset =  40,-40
hitflag = MAF
velocity = ifelse(var(50) > 0,10,7)
damage = ifelse(var(12)!=0,ifelse(var(30)=1,70,ifelse(var(30)=2,ifelse(var(50)>0,27,55),ifelse(var(50)>0,30,62))), ifelse(var(30)=1,51,ifelse(var(30)=2,ifelse(var(50)>0,20,35),ifelse(var(50)>0,25,42)))),6
animtype = Hard
guardflag = M
pausetime = 0,ifelse(p2statetype=A,0,12)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-40
hitsound = S1000,2
guardsound = S210,4
ground.type = Low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -2.5,-2.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 1000, 0]
type = ctrlset
trigger1 = var(50) > 0
trigger1 = animelem = 8
value = 1

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 1000, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;弱　虚空殺
[Statedef 1500]
type = S
movetype = A
physics = S
anim = 1500
velset = 0,0
poweradd = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50) > 0,0,150)*ifelse(var(31)=1,3,1)
ctrl = 0

[State 240, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1500,0

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 1500,1

[State 1500, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 6

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
anim = 1510
pos = 45,-55
sprpriority = 3
ownpal = 1
ignorehitpause = 1

[State 1505, 6]
type = HitDef
trigger1 = AnimElem = 7
attr = A, SA
animtype = Hard
damage = 105,12
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-70
guardflag = M
hitflag = MAF
pausetime = ifelse(var(50)>0,5,8),ifelse(var(50)>0,5,8)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 13
ground.hittime = 18
ground.velocity = -3,-11   
air.velocity = -2.3,-10.5
fall = 1
fall.recover = 0
p2stateno = 8230
yaccel = 0.60

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 1500, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;強　虚空殺
[Statedef 1600]
type = S
movetype = A
physics = S
anim = 1600
velset = 0,0
poweradd = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50) > 0,0,150)*ifelse(var(31)=1,3,1)
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1500,0

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 1500,1

[State 1500, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 13

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
anim = 1610
pos = 45,-55
sprpriority = 3
ownpal = 1
ignorehitpause = 1

[State 1505, 6]
type = HitDef
trigger1 = AnimElem = 7
attr = A, SA
animtype = Hard
damage = 123,15
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-70
guardflag = M
hitflag = MAF
pausetime = ifelse(var(50)>0,6,12),ifelse(var(50)>0,6,11)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 13
ground.hittime = 18
ground.velocity = -3,-11   
air.velocity = -2.3,-10.5
fall = 1
fall.recover = 0
p2stateno = 8140
ignorehitpause = 1

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 1500, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;狼牙
[Statedef 2000]
type = S
movetype = A
physics = S
anim = ifelse(var(30)=1,2000,2001)
poweradd = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50) > 0,0,120)*ifelse(var(31)=1,3,1)
velset = 0
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = animtime = 0
value = 2002

;狼牙（ランニング）
[Statedef 2002]
type = S
movetype = A
physics = S
anim = 2002
velset = 0,0
ctrl = 0

[State 1000, 4]
type = PlaySnd
trigger1 = time = 0
value = 100,0
channel = 1

[State 1000, 4]
type = PlaySnd
trigger1 = time = 0
value = 2000,0

[State 311, 0]
type = PosAdd
trigger1 = time = 0
x = 15

[State 210, 0]
type = velset
trigger1 = time >= 0
x = 9

[State 200, 3]
type = HitDef
trigger1 = time >= 0
attr = S, SA
animtype = Hard
damage = 63,6
guardflag = M
hitflag = M
pausetime = 0,12
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,90,63),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20010
guard.sparkno = S20300
sparkxy = -10,-70
hitsound = S200,6
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 26
ground.hittime = 26
ground.velocity = ifelse(var(50)>0,-6,-9)
guard.velocity = -4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 200, 3]
type = HitDef
trigger1 = time >= 0
trigger1 = p2statetype = A
attr = S, SA
animtype = Light
damage = 63,6
hitflag = AF
pausetime = 0,12
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,90,63),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20010
guard.sparkno = S20300
sparkxy = -10,-70
hitsound = S200,6
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3     
air.cornerpush.veloff = 0
p2stateno = ifelse(var(50)>0,243,9910)

[State 2001, 昇華]
type = VarSet
trigger1 = var(59) = 0
trigger1 = var(27) = 0
trigger1 = movecontact
trigger1 = command = "真狼牙"
trigger1 = power >= 1000*ifelse(var(31)=1,3,1) || (var(31) = 1 && life <= var(17))
trigger1 = var(30) = 1
var(27) = 1
persistent = 0
ignorehitpause = 1

[State 2001, 昇華]
type = ChangeState
trigger1 = var(27) = 1
value = 11000

[State 410, 4]
type = ChangeState
trigger1 = movecontact
value = 2005

[State 410, 4]
type = ChangeState
trigger1 = time >= 19
value = 101

;狼牙（体当たり）
[Statedef 2005]
type = S
movetype = A
physics = S
anim = 2005
poweradd = 0
velset = 0,0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = time = 0
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 410, 4]
type = ChangeAnim
trigger1 = time < 12
value = 2005

[State 1000, 2]
type = Width
trigger1 = 1
value = 5,0

[State 311, 0]
type = VelSet
trigger1 = time = [12,17]
x = 8

[State 311, 0]
type = PosAdd
trigger1 = time = 0
x = 5

[State 311, 0]
type = PosAdd
trigger1 = animelem = 4
trigger2 = animelem = 5
x = -10

[State 311, 0]
type = PosAdd
triggerall = FrontEdgeDist <= 100
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
x = ifelse(FrontEdgeDist <= 50,-15,-10)

[State 2005, 昇華]
type = VarSet
trigger1 = var(59) = 0
trigger1 = var(27) = 0
trigger1 = command = "真狼牙"
trigger1 = power >= 1000*ifelse(var(31)=1,3,1) || (var(31) = 1 && life <= var(17))
trigger1 = var(30) = 1
var(27) = 1
ignorehitpause = 1

[State 2005, 昇華]
type = ChangeState
trigger1 = var(27) = 1
trigger1 = time >= 12
value = 11000

[State 311, 0]
type = VarSet
trigger1 = var(59) = 0
trigger1 = time < 15
trigger1 = command = "直式"
var(11) = 1

[State 311, 0]
type = VarSet
trigger1 = var(59) = 0
trigger1 = time < 12
trigger1 = command = "斜式"
var(11) = 2

[State 311, 0]
type = VarSet
trigger1 = var(59) = 0
trigger1 = time < 12
trigger1 = command = "伏式"
var(11) = 3

[State 311, 0]
type = VarSet
trigger1 = var(59) = 0
trigger1 = time < 12
trigger1 = command = "上式"
var(11) = 4

[State 410, 4]
type = ChangeState
triggerall = time >= 15
trigger1 = var(59) = 0
trigger1 = command = "直式"
trigger2 = var(11) = 1
value = 2100

[State 410, 4]
type = ChangeState
trigger1 = time >= 12
trigger1 = var(11) = 2
value = 2200

[State 410, 4]
type = ChangeState
trigger1 = time >= 12
trigger1 = var(11) = 3
value = 2300

[State 410, 4]
type = ChangeState
trigger1 = time >= 12
trigger1 = var(11) = 4
value = 2400

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 410, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;狼牙・直式
[Statedef 2100]
type = S
movetype = A
physics = N
anim = 2100
velset = 0,0
poweradd = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 311, 0]
type = PlaySnd
trigger1 = AnimElem = 4
value = 2010,0

[State 1000, 2]
type = Width
trigger1 = time = 0
value = 15,0

[State 310, 0]
type = PosAdd
trigger1 = time = 0
x = 30

[State 193, 2]
type = PosAdd
trigger1 = animelem = 9
trigger2 = animelem = 10
x = -20

[State 310, 0]
type = VelSet
trigger1 = animelem = 4
x = 9

[State 210, 0]
type = veladd
trigger1 = animelem = 4, > 0
x = -0.5

[State 210, 0]
type = velset
trigger1 = Vel X <= 0
x = 0

[State 311, 0]
type = VarSet
trigger1 = AnimElem = 4
v = 10
value = 1

[State 311, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 5
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 2101
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
trigger2 = AnimElem = 6
anim = 2102
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
anim = 2103
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype = Hard
damage = 39,9
hitflag = MAF
guardflag = M
pausetime = ifelse(var(50)>0,5,12),ifelse(var(50)>0,5,12)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-70
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4,-10
guard.velocity = -4
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -4
p2stateno = ifelse(var(30)=2,8160,243)

[State 2010, 昇華]
type = VarSet
trigger1 = var(59) = 0
trigger1 = var(27) = 0
trigger1 = command = "真狼牙"
trigger1 = power >= 1000*ifelse(var(31)=1,3,1) || (var(31) = 1 && life <= var(17))
trigger1 = var(30) != 2
var(27) = 1
persistent = 0
ignorehitpause = 1

[State 2010, 昇華]
type = ChangeState
trigger1 = var(27) = 1
value = 11000

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 311, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;狼牙・斜式（地上）
[Statedef 2200]
type = S
movetype = A
physics = S
anim = 2200
ctrl = 0

[State 1505, 3]
type = VelSet
trigger1 = time = 0
y = 0

[State 1505, 3]
type = VelSet
trigger1 = time = 1
x = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 2210

;狼牙・斜式（空中）
[Statedef 2210]
type = A
movetype = A
physics = N
anim = 2210
velset = 0,0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 220, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 210,2

[State 220, 2]
type = PlaySnd
trigger1 = animelem = 2
value = 2010,0

[State 1505, 3]
type = PosAdd
trigger1 = time = 0
x = -2
y = -2

[State 1505, 3]
type = VelSet
trigger1 = AnimElem = 1
x = 5
y = -8

[State 1505, 4]
type = VelAdd
trigger1 = Time > 0
y = .5

[State 1505, 4]
type = VelAdd
trigger1 = Time >= 3
y = .8

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 3
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 4
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
anim = 2201
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 2202
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 2203
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5, = 2
trigger2 = AnimElem = 6, = 1
anim = 2204
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = A, SA
animtype = Hard
damage = 69,6
guardflag = H
hitflag = MAF
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-50
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4
p2stateno = ifelse(var(50) > 0,243,241)

[State 1505, 9]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 2220

;狼牙・斜式（着地）
[Statedef 2220]
type = S
movetype = A
physics = S
anim = 2220
poweradd = 0
ctrl = 0

[State 1505, 3]
type = CtrlSet
trigger1 = var(50) > 0
trigger1 = time = 0
value = 1

[State 210, 0]
type = VelSet
trigger1 = time = 0
y = 0

[State 210, 0]
type = VarSet
trigger1 = time = 0
v = 10
value = 0

[State 410, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;狼牙・伏式
[Statedef 2300]
type = S
movetype = A
physics = S
anim = 2300
VelSet = 0
ctrl = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 2310

;狼牙・伏式（攻撃）
[Statedef 2310]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 2310

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 220, 2]
type = PlaySnd
trigger1 = animelem = 2
value = 2010,0

[State 220, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 210,2

[State 210, 0]
type = VelSet
trigger1 = time = 0
x = 8

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 3
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 4
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
anim = 2201
pos = 25,20
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 2202
pos = 25,20
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4, = 2
anim = 2203
pos = 25,20
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
trigger2 = AnimElem = 5, = 2
anim = 2204
pos = 25,20
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S, SA
animtype = Hard
damage = 69,6
guardflag = L
hitflag = M
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,50),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-50
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4
p2stateno = 8190

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 250, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;狼牙・上式
[Statedef 2400]
type = S
movetype = A
physics = S
anim = 2400
VelSet = 0,0
ctrl = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 2410

;打ち上げ
[Statedef 2410]
type = S
movetype = A
physics = S
anim = 2410
poweradd = 0
velset = 0,0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = time = 0
x = 8

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 2010,0

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,2

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 4
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 5
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 2
anim = 2411
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 3
anim = 2412
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
anim = 2413
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 2414
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5, = 2
anim = 2415
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype = Hard
damage = 30,6
guardflag = M
hitflag = MAF
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,85),ifelse(var(50)>0,0,85)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = -10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -2.5,-2.5
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -4
air.cornerpush.veloff = -4
p2stateno = 8140 ;ifelse(p2statetype=A,ifelse(var(50)>0,8140,9910),8230)

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;弱　俊殺
[Statedef 2500]
type = S
movetype = A
physics = S
anim = 2500
poweradd = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50) > 0,0,120)*ifelse(var(31)=1,3,1)
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 1050, 4]
type = VarSet
trigger1 = var(59) = 0
trigger1 = movecontact
trigger1 = command = "弱俊殺・連"
var(25) = 1

[State 220, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 3000,1

[State 220, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 3000,0
volume = 200

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 2501
pos = 0,0
sprpriority = 3
ownpal = 1

[State 210, 8]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype = Light
damage = 51,6
guardflag = M
hitflag = M
pausetime = 0,0
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-76
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -5

[State 210, 9]
type = HitDef
trigger1 = AnimElem = 4
trigger1 = p2statetype = A
attr = S, SA
animtype = Light
damage = 51,6
hitflag = AF
pausetime = 0,0
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-76
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 2500, 3]
type = Explod
trigger1 = NumExplod(20200) = 0
trigger1 = Movehit
id = 20200
anim = 20200
pos = 0, -60
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 1000, 0]
type = ctrlset
trigger1 = var(50) > 0
trigger1 = time = 35
value = 1

[State 1050, 4]
type = ChangeState
trigger1 = var(25) = 1
trigger1 = time = 22
value = 2510

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;2510
ctrl = 1

;弱　俊殺・連
[Statedef 2510]
type = S
movetype = A
physics = S
anim = 2510
poweradd = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50) > 0,0,120)*ifelse(var(31)=1,3,1)
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 220, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000,2

[State 220, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000,3
channel = 2

[State 100, 7]
type = StopSnd
trigger1 = animelem = 17
channel = 2

[State 210, 1]
type = Explod
trigger1 = AnimElem = 1
anim = 2511
pos = 145,-140
sprpriority = 3
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
anim = 2501
pos = 0,0
sprpriority = 3
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 11
anim = 2521
pos = 145,0
sprpriority = 3
ownpal = 1

[State 210, 8]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SA
animtype = Light
damage = 15,3
guardflag = M
hitflag = M
pausetime = 1,1
guard.pausetime =1,1
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-95
hitsound = S3000,4
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -3

[State 210, 8]
type = HitDef
trigger1 = AnimElem = 6
attr = S, SA
animtype = Light
damage = 15,3
guardflag = M
hitflag = M
pausetime = 1,1
guard.pausetime =1,1
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-76
hitsound = S3000,4
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -3

[State 210, 8]
type = HitDef
trigger1 = AnimElem = 11
attr = S, SA
animtype = Light
damage = 15,3
guardflag = M
hitflag = M
pausetime = 1,1
guard.pausetime =1,1
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-40
hitsound = S3000,4
guardsound = S210,0+floor(Random/500.0)
ground.type = low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -3

[State 210, 9]
type = HitDef
triggerall = p2statetype = A
trigger1 = AnimElem = 1
trigger2 = AnimElem = 6
trigger3 = AnimElem = 11
attr = S, SA
animtype = Light
damage = 15,3
hitflag = AF
pausetime = 1,1
guard.pausetime =1,1
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-76
hitsound = S3000,4
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3
p2stateno = ifelse(var(50)>0,243,9910)

[State 2500, 3]
type = Explod
trigger1 = NumExplod(20200) = 0
trigger1 = Movehit
id = 20200
anim = 20200
pos = 0, -60
postype = p2
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State 1000, 0]
type = ctrlset
trigger1 = var(50) > 0
trigger1 = time = 35
value = 1

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;強　俊殺
[Statedef 2600]
type = S
movetype = A
physics = S
anim = 2600
poweradd = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50) > 0,0,120)*ifelse(var(31)=1,3,1)
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 1050, 4]
type = VarSet
trigger1 = var(59) = 0
trigger1 = movecontact
trigger1 = command = "強俊殺・連"
var(25) = 1

[State 220, 2]
type = PlaySnd
trigger1 = animelem = 3 && anim = 2600
value = 3000,0
volume = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4 && anim = 2600
anim = 2501
pos = 0,0
sprpriority = 3
ownpal = 1

[State 210, 8]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype = Light
damage = 72,9
guardflag = M
hitflag = M
pausetime = 0,0
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-76
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 28
ground.hittime = 28
ground.velocity = ifelse(var(50)>0,-5,-8)
guard.velocity = -5
ground.cornerpush.veloff = -12
guard.cornerpush.veloff = -6

[State 210, 9]
type = HitDef
trigger1 = AnimElem = 4
trigger1 = p2statetype = A
attr = S, SA
animtype = Light
damage = 72,9
hitflag = AF
pausetime = 0,0
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-76
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 1050, 4]
type = ChangeAnim
trigger1 = movehit
value = 2650
persistent = 0
ignorehitpause = 1

[State 2500, 3]
type = Explod
trigger1 = NumExplod(20200) = 0
trigger1 = Movehit
id = 20200
anim = 20200
pos = 0, -60
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 1000, 0]
type = ctrlset
trigger1 = var(50) > 0
trigger1 = time = 27
value = 1

[State 1050, 4]
type = ChangeState
trigger1 = var(25) = 1
trigger1 = time = 26
value = 2610

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;強　俊殺・連
[Statedef 2610]
type = S
movetype = A
physics = S
anim = 2610
poweradd = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50) > 0,0,120)*ifelse(var(31)=1,3,1)
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 220, 2]
type = VelSet
trigger1 = time = [0,30]
x = 1

[State 220, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000,2

[State 220, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000,3
channel = 2

[State 100, 7]
type = StopSnd
trigger1 = animelem = 36
channel = 2

[State 210, 1]
type = Explod
trigger1 = AnimElem = 1
trigger2 = AnimElem = 16
trigger3 = AnimElem = 31
anim = 2511
pos = 145,-140
sprpriority = 3
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 21
anim = 2501
pos = 0,0
sprpriority = 3
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 11
trigger2 = AnimElem = 26
anim = 2521
pos = 145,0
sprpriority = 3
ownpal = 1

[State 210, 8]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SA
animtype = Light
damage = 15,3
guardflag = M
hitflag = M
pausetime = 1,1
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-95
hitsound = S3000,4
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4

[State 210, 8]
type = HitDef
trigger1 = AnimElem = 6
trigger2 = AnimElem = 21
attr = S, SA
animtype = Light
damage = 15,3
guardflag = M
hitflag = M
pausetime = 1,1
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-76
hitsound = S3000,4
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4

[State 210, 8]
type = HitDef
trigger1 = AnimElem = 11
trigger2 = AnimElem = 26
attr = S, SA
animtype = Light
damage = 15,3
guardflag = M
hitflag = M
pausetime = 1,ifelse(var(50)>0,6,1)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-40
hitsound = S3000,4
guardsound = S210,0+floor(Random/500.0)
ground.type = low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4

[State 210, 9]
type = HitDef
triggerall = p2statetype = A
trigger1 = AnimElem = 1
trigger2 = AnimElem = 6
trigger3 = AnimElem = 11
trigger4 = AnimElem = 21
trigger5 = AnimElem = 26
attr = S, SA
animtype = Light
damage = 15,3
hitflag = AF
pausetime = 1,1
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,25),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-76
hitsound = S3000,4
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 2500, 3]
type = Explod
trigger1 = NumExplod(20200) = 0
trigger1 = Movehit
trigger1 = AnimElem = 27, < 0
id = 20200
anim = 20200
pos = 0, -60
postype = p2
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State 1000, 0]
type = ctrlset
trigger1 = var(50) > 0
trigger1 = time = 30
value = 1

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;起き上がり前移動
[Statedef 3600]
type = S
movetype = I
physics = N
anim = 3600
poweradd = 0
velset = 0
ctrl = 0

[State 800, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 31

[State 250, 4]
type = VelSet
trigger1 = AnimElem = 2
x = ifelse(var(30)=1,7.5,9)

[State 250, 5]
type = VelAdd
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 8, < 0
trigger1 = vel X > 0
x = -0.4

[State 250, 6]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 800, 6]
type = PlayerPush
trigger1 = animelem = 2,>=0
trigger1 = animelem = 7,<0
value = 0

[State 3120, 0]
type = Width
trigger1 = animelem = 3,>=0
trigger1 = animtime <= 0
value =  -5, 0

[State 2060, 12]
type = CtrlSet
trigger1 = animelem = 8
value = 1

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = Ctrl = 1

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (AnimTime = 0)
trigger1 = (var(20)!=0) && (Ctrl = 1)
value = var(20)
ctrl = 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;起き上がり後移動
[Statedef 3650]
type = S
movetype = I
physics = N
anim = 3650
poweradd = 0
velset = 0
ctrl = 0

[State 800, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 31

[State 250, 4]
type = VelSet
trigger1 = time = 0
x = ifelse(var(30)=1,-7.5,-9)

[State 250, 5]
type = VelAdd
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 5, < 0
trigger1 = vel X < 0
x = 0.4

[State 250, 6]
type = VelSet
trigger1 = AnimElem = 5
x = 0

[State 800, 6]
type = PlayerPush
trigger1 = animelem = 1,>=0
trigger1 = animelem = 6,<0
value = 0

[State 3120, 0]
type = Width
trigger1 = animelem = 3,>=0
trigger1 = animtime <= 0
value =  0, -5

[State 2060, 12]
type = CtrlSet
trigger1 = animelem = 6
value = 1

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = Ctrl = 1

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち　弾き
[Statedef 4000]
type = S
movetype = I
physics = S
anim = 4000
velset = 0
ctrl = 0

[State 200, 1]
type =Palfx
trigger1 = time = 0
time = 2
add = 60,60,60
persistent = 0
ignorehitpause = 1

[State 50, 4]
type = AfterImage
trigger1 = time = 0 
time = 39
framegap = 3
length = 8
ignorehitpause = 1

[State 4000, 2]
type = ReversalDef
trigger1 = time = [0,12]
reversal.attr = SCA, NA,SA,HA
numhits = 0
pausetime = 0,12
sparkno = -1
sparkxy = 20,-30
p1stateno = 4010

[State 4000, 2]
type = ReversalDef
trigger1 = time = [13,15]
reversal.attr = SC, NA,SA,HA
numhits = 0
pausetime = 0,12
sparkno = -1
sparkxy = 20,-30
p1stateno = 4010

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 195, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち　弾き攻撃
[Statedef 4010]
type = S
movetype = A
physics = S
anim = 4010
poweradd = 0
velset = 0,0
ctrl = 0

[State 200, 1]
type =Palfx
trigger1 = time = 0
time = 2
add = 225,225,225
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,2+floor(Random/250.0)

[State 2060, 12]
type = EnvColor
trigger1 = time = 7
time = 1
value = 0,0,255
under = 1
persistent = 0
ignorehitpause = 1

[State 2060, 12]
type = EnvColor
trigger1 = time = 8
time = 1
value = 255,255,255
under = 1
persistent = 0
ignorehitpause = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype = Light
damage = 0
hitflag = MAF
guardflag = M
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S5401
guard.sparkno = S20310
sparkxy = 0,-150
hitsound = S210,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.slidetime = 21
ground.hittime = 21
ground.velocity = 0
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = A,9940,5400)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 0
triggerall = movehit
trigger1 = command = "x"
trigger1 = command = "b"
trigger2 = command = "y"
value = 4050

[State 1050, 4]
type = ChangeState
trigger1 = command = "holdfwd" && time >= 8
value = 20
ctrl = 1

[State 1050, 4]
type = ChangeState
trigger1 = command = "holdup" && time >= 8
value = 40
ctrl = 0

[State 105, 2]
type = Turn
triggerall = p2dist X < 0
trigger1 = (var(20)!=0) && (animtime = 0)
trigger2 = (var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (time >= 8)
value = var(20)
ctrl = 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(22)!=0) && (time >= 8)
value = var(22)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち／しゃがみ弾き後　攻撃
[Statedef 4050]
type = S
movetype = A
physics = S
anim = 4050
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = time = [0,10]
x = 4

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 4
value = 220,2+floor(Random/250.0)

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 210,2

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 6
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 7
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 281
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 282
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
anim = 283
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 7
anim = 284
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 7, = 2
anim = 285
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype = Hard
damage = 80
guardflag = H
hitflag = MAF
pausetime = 12,12
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,85),ifelse(var(50)>0,0,85)
givepower = 20,20
sparkno = S20150
guard.sparkno = S20310
sparkxy = -10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4
p2stateno = 241

[State 240, 12]
type = Explod
trigger1 = movehit
id = 20230
anim = 20230
pos = 0, -70
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;しゃがみ　弾き
[Statedef 4100]
type = C
movetype = I
physics = C
anim = 4100
velset = 0
ctrl = 0

[State 200, 1]
type =Palfx
trigger1 = time = 0
time = 2
add = 60,60,60
persistent = 0
ignorehitpause = 1

[State 50, 4]
type = AfterImage
trigger1 = time = 0
time = 39
framegap = 3
length = 8
ignorehitpause = 1
channel = 0

[State 1000, 2]
type = ReversalDef
trigger1 = time <= 15
reversal.attr = SC, NA,SA,HA
numhits = 0
pausetime = 0,12
sparkno = -1
sparkxy = 20,-30
p1stateno = 4110

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 195, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;しゃがみ　弾き攻撃
[Statedef 4110]
type = C
movetype = A
physics = C
anim = 4110
poweradd = 0
velset = 0,0
ctrl = 0

[State 200, 1]
type =Palfx
trigger1 = time = 0
time = 2
add = 225,225,225
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,2+floor(Random/250.0)

[State 2060, 12]
type = EnvColor
trigger1 = time = 6
time = 1
value = 0,0,255
under = 1
persistent = 0
ignorehitpause = 1

[State 2060, 12]
type = EnvColor
trigger1 = time = 7
time = 1
value = 255,255,255
under = 1
persistent = 0
ignorehitpause = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
animtype = Light
damage = 0
hitflag = MAF
guardflag = M
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S5401
guard.sparkno = S20310
sparkxy = 0,-150
hitsound = S210,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.slidetime = 21
ground.hittime = 21
ground.velocity = 0
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = A,9940,5400)

[State 410, 4]
type = ChangeState
triggerall = movehit
trigger1 = command = "x"
trigger1 = command = "b"
trigger2 = command = "y"
value = 4050

[State 1050, 4]
type = ChangeState
trigger1 = command = "holdfwd" && time >= 7
value = 20
ctrl = 1

[State 1050, 4]
type = ChangeState
trigger1 = command = "holdup" && time >= 7
value = 40
ctrl = 0

[State 105, 2]
type = Turn
triggerall = p2dist X < 0
trigger1 = (var(20)!=0) && (animtime = 0)
trigger2 = (var(21)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (time >= 7)
value = var(20)
ctrl = 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(22)!=0) && (time >= 7)
value = var(22)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;空中　弾き
[Statedef 4200]
type = A
movetype = I
physics = N
anim = 4200
ctrl = 0

[State 200, 1]
type =Palfx
trigger1 = time = 0
time = 2
add = 60,60,60
persistent = 0
ignorehitpause = 1

[State 50, 4]
type = AfterImage
trigger1 = time = 0
time = 39
framegap = 3
length = 8
ignorehitpause = 1

[State 1505, 9]
type = veladd
trigger1 = time >= 0
y = .5

[State 1000, 2]
type = ReversalDef
trigger1 = time <= 15
reversal.attr = SCA, NA,SA,HA
numhits = 0
pausetime = 0,6
sparkno = -1
sparkxy = 20,-30
p1stateno = 4220

[State 1505, 9]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4210

;空中　弾き（着地）
[Statedef 4210]
type = S
movetype = I
physics = S
anim = 4210
velset = 0,0

[State 1510, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1510, 2]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 1510, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;空中　弾き攻撃
[Statedef 4220]
type = A
movetype = A
physics = N
anim = 4220
velset = 0,0
poweradd = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 200, 1]
type =Palfx
trigger1 = time = 0
time = 2
add = 225,225,225
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,2+floor(Random/250.0)

[State 2060, 12]
type = VelSet
trigger1 = animelem = 5
x = 3
y = -5

[State 2060, 12]
type = veladd
trigger1 = animelem = 5, >= 0
y = .5

[State 2060, 12]
type = EnvColor
trigger1 = time = 4
time = 1
value = 0,0,255
under = 1
persistent = 0
ignorehitpause = 1

[State 2060, 12]
type = EnvColor
trigger1 = time = 5
time = 1
value = 255,255,255
under = 1
persistent = 0
ignorehitpause = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype = Light
damage = 0
hitflag = MAF
guardflag = M
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S5401
guard.sparkno = S20310
sparkxy = 0,-140
hitsound = S210,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.slidetime = 21
ground.hittime = 21
ground.velocity = 0
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = A,9940,5400)

[State 2060, 12]
type = CtrlSet
trigger1 = time = 6
value = 1

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 41

;ガードキャンセル
[Statedef 4300]
type = S
movetype = A
physics = S
anim = 4300
poweradd = -1000*ifelse(var(31)=1,3,1)
VelSet = 0,0
ctrl = 0

[State 3000, NotHitby]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 30


[State 1000, 1]
type = PlaySnd
trigger1 = time = 0
value = 2500,0

[State 2000, 4]
type = Explod
trigger1 = time = 0
anim = 10000
pos = -22,-57
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 195, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 4310


[Statedef 4310]
type = S
movetype = A
physics = S
anim = 4310
velset = 0,0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = time = 0
x = 4

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,5

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,2

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 4
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 5
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 2
anim = 2411
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 3
anim = 2412
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
anim = 2413
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 2414
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5, = 2
anim = 2415
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 4
trigger1 = p2statetype != A
attr = S, NA
animtype = Hard
damage = 50,6
guardflag = M
hitflag = MAF
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,85),ifelse(var(50)>0,0,85)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = -10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -6.2
guard.velocity = -4
ground.cornerpush.veloff = -6.2
guard.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 4
trigger1 = p2statetype = A
attr = S, NA
animtype = Hard
damage = 50,6
guardflag = M
hitflag = MAF
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(31)=1,3,1)*ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* ifelse(var(50)>0,0,85),ifelse(var(50)>0,0,85)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = -10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -2.5,-2.5
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -4
air.cornerpush.veloff = -4
fall = 1
fall.recover = 0
p2stateno = 8230

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち弾きやられ
[Statedef 5400]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0

[State 5000, 4]
type = StateTypeSet
trigger1 = Time = 20
type = I

[State 8140, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = animexist(5437)
value = 5437

[State 8140, 3]
type = ChangeAnim2
trigger1 = Time = 0
trigger1 = !animexist(5437)
value = 5402

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 5100,0

[State 8145, 4]
type = SelfState
trigger1 = animtime = 0
value = 0
ctrl = 1

;真・狼牙
[Statedef 11000]
type = S
movetype = A
physics = S
anim = 11000
poweradd = ifelse(var(31)=1&&Life <= var(17),0,-1000)*ifelse(var(31)=1,3,1)
velset = 0,0
ctrl = 0

[State 2000, 6]
type = SuperPause
trigger1 = animelem = 2
trigger1 = prevstateno = 2002 || prevstateno = 2005 || prevstateno = 2100 || prevstateno = 312
trigger1 = var(27) = 1
time = 30
anim = -1
darken = 0

[State 3000, 1]
type = Explod
trigger1 = animelem = 2
trigger1 = prevstateno = 2002 || prevstateno = 2005 || prevstateno = 2100 || prevstateno = 312
trigger1 = var(27) = 1
anim = 15000
pos = ifelse(facing=1,0,1),0
postype = back
bindtime = -1
removetime = 30
sprpriority = -31
supermovetime = -1
pausemovetime = -1
ownpal = 1

[State 210, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,2+floor(Random/250.0)

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 2500,0

[State 2000, 4]
type = Explod
trigger1 = animelem = 2
anim = 10000
pos = 0,-80
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 1000, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 11001

;真・狼牙（ランニング）
[Statedef 11001]
type = S
movetype = A
physics = S
anim = 11001
velset = 0,0
ctrl = 0

[State 1000, 4]
type = PlaySnd
trigger1 = time = 0
value = 100,0
channel = 1

[State 311, 0]
type = PosAdd
trigger1 = time = 0
x = 15

[State 210, 0]
type = velset
trigger1 = time >= 0
x = 9

[State 11001, 1]
type = Width
trigger1 = FrontEdgeDist <= 10
value = 2,0

[State 200, 3]
type = HitDef
trigger1 = time >= 0
attr = S, HA
animtype = Hard
damage = 30,3
guardflag = M
hitflag = MAF
numhits = 0
p2facing = 1
pausetime = 0,0
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = -1
guard.sparkno = S20300
sparkxy = -10,-70
hitsound = -1
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 26
ground.hittime = 26
ground.velocity = 0
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 11005
kill = 0

[State 1105, 3]
type = TargetBind
trigger1 = movehit
Pos = 40,-1
ignorehitpause = 1

[State 410, 4]
type = ChangeState
trigger1 = moveguarded
value = 11050

[State 410, 4]
type = ChangeState
trigger1 = movehit
value = 11002

[State 410, 4]
type = ChangeState
trigger1 = time >= 19
value = 101

;真・狼牙（ランニングヒット後）
[Statedef 11002]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0

[State 1000, 4]
type = PlaySnd
trigger1 = time = 0
value = 100,0
channel = 1

[State 900, 2]
type = PlayerPush
trigger1 = 1
value = 0

[State 210, 0]
type = velset
trigger1 = time >= 0
x = 7

[State 11001, 1]
type = Width
trigger1 = FrontEdgeDist <= 10
value = 2,0

[State 210, 10]
type = Explod
trigger1 = Animelem = 3
id = 20200
anim = 20200
pos = 0, -70
postype = p2
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State 200, 3]
type = HitDef
trigger1 = time = 0
attr = S, HA
animtype = Hard
damage = 30,3
guardflag = M
hitflag = MAF
numhits = 0
p2facing = 1
pausetime = 0,0
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = -1
guard.sparkno = S20300
sparkxy = -10,-70
hitsound = -1
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 26
ground.hittime = 26
ground.velocity = 0
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 11005
kill = 0

[State 1105, 3]
type = TargetBind
trigger1 = movehit
Pos = 40,-1
ignorehitpause = 1

[State 410, 4]
type = ChangeState
trigger1 = frontedgedist <= 30
trigger1 = time >= 1
value = 11010

;真・狼牙（バックステップ）
[Statedef 11010]
type = A
movetype = A
physics = N
anim = 11010


[State 11010, 0]
type = PlayerPush
trigger1 = time >= 0
value = 0

[State 271, 6]
type = PlaySnd
trigger1 = Time = 0
value = F7, 2

[State 183, 3]
type = EnvShake
trigger1 = Time = 0
time = 10

[State 106, 1]
type = VelSet
trigger1 = Time = 0
x = -12
y = -5

[State 106, 2]
type = PlaySnd
trigger1 = Time = 0
value = 105,0

[State 106, 3]
type = VelAdd
trigger1 = Time > 0
x = ifelse(vel X <-4,3,.2)
y = .5

[State 106, 4]
type = VelAdd
trigger1 = Time >= 10
y = .2

[State 200, 3]
type = HitDef
trigger1 = time = 0
attr = S, HA
animtype = Hard
damage = 0
guardflag = M
hitflag = MAF
numhits = 0
p2facing = 1
pausetime = 0,0
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S20010
guard.sparkno = S20300
sparkxy = -10,-70
hitsound = S200,6
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 26
ground.hittime = 26
ground.velocity = 0
guard.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 8215
kill = 0

[State 106, 7]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 11020

;真・狼牙（着地）
[Statedef 11020]
type = S
physics = S
anim = 11020
velset = 0,0

[State 107, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 107, 2]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 107, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11030

;真・狼牙（俊殺・連）
[Statedef 11030]
type = S
movetype = A
physics = S
anim = 11030
poweradd = 0
velset = 0
ctrl = 0

[State 3102, 0]
type = Helper
trigger1 = AnimElem = 1
trigger1 = facing = 1
stateno = 11060
pos = 0, 0
postype = Left
supermovetime = 130
helpertype = player
[State 3102, 0]
type = Helper
trigger1 = AnimElem = 1
trigger1 = facing = -1
stateno = 11060
pos = 0, 0
postype = Right
supermovetime = 130
helpertype = player

[State 220, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3100,0

[State 220, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000,3

[State 220, 2]
type = null;PlaySnd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 6
trigger3 = AnimElem = 11
trigger4 = AnimElem = 16
trigger5 = AnimElem = 21
trigger6 = AnimElem = 26
trigger7 = AnimElem = 32
value = 3000,0
cannel = 2

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 6
trigger3 = AnimElem = 11
trigger4 = AnimElem = 21
trigger5 = AnimElem = 26
trigger6 = AnimElem = 32
value = 3000,4
ignorehitpause = 1
channel = 3

[State 11030, 9]
type = StopSnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 7
trigger3 = AnimElem = 12
trigger4 = AnimElem = 22
trigger5 = AnimElem = 27
trigger6 = AnimElem = 33
channel = 2

[State 220, 2]
type = VelSet
trigger1 = AnimElem = 1
trigger2 = AnimElem = 6
trigger3 = AnimElem = 11
x = -1.5

[State 220, 2]
type = VelSet
trigger1 = AnimElem = 21
trigger2 = AnimElem = 26
trigger3 = AnimElem = 33
x = -4.5

[State 2060, 12]
type = EnvColor
triggerall = p2stateno = 11031
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
trigger3 = AnimElem = 6
trigger4 = AnimElem = 8
trigger5 = AnimElem = 11
trigger6 = AnimElem = 13
trigger7 = AnimElem = 21
trigger8 = AnimElem = 23
trigger9 = AnimElem = 26
trigger10 = AnimElem = 28
trigger11 = AnimElem = 32
time = 1
value = 245,0,0
under = 1
ignorehitpause = 1

[State 2060, 12]
type = EnvColor
trigger1 = animelem = 33
time = 1
value = 0,0,0

[State 2060, 12]
type = EnvColor
trigger1 = animelem = 34
time = 1
value = 255,255,255
ignorehitpause = 1

[State 2060, 12]
type = EnvColor
trigger1 = animelem = 35
time = 50
value = 0,0,0
under = 1
ignorehitpause = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 1
trigger2 = AnimElem = 16
trigger3 = AnimElem = 32
anim = 2511
pos = 145,-140
sprpriority = 3
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 21
anim = 2501
pos = 0,0
sprpriority = 3
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 11
trigger2 = AnimElem = 26
anim = 2521
pos = 145,0
sprpriority = 3
ownpal = 1

[State 1105, 3]
type = HitAdd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 11
trigger3 = AnimElem = 21
trigger4 = AnimElem = 26
value = 1

[State 905, 11]
type = TargetLifeAdd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 11
trigger3 = AnimElem = 21
trigger4 = AnimElem = 26
value = -20
kill = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 21
anim = 20100
pos = 0,-76
postype = p2
facing = -1
sprpriority = 3
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 11
trigger2 = AnimElem = 26
anim = 20100
pos = 0,-40
postype = p2
facing = -1
sprpriority = 3
ownpal = 1

[State 11020, 3]
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 11
trigger3 = AnimElem = 21
trigger4 = AnimElem = 26
id = 20200
anim = 20200
pos = 0, -60
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 210, 8]
type = HitDef
trigger1 = AnimElem = 1
attr = S, HA
animtype = Light
damage = 20
guardflag = M
hitflag = MAF
pausetime = 3,3
guard.pausetime =ifelse(var(30)=1,0,5),ifelse(var(30)=1,0,5)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-95
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 0
p2stateno = 11031
kill = 0

[State 210, 8]
type = HitDef
trigger1 = AnimElem = 32
attr = S, HA
animtype = Light
damage = 20
guardflag = M
hitflag = MAF
pausetime = 8,8
guard.pausetime =ifelse(var(30)=1,0,5),ifelse(var(30)=1,0,5)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-95
hitsound = S3000,4
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 0
p2stateno = 243
kill = 0

[State 9000, 最終狼牙・追撃]
type = VarSet
trigger1 = var(40) = 0
trigger1 = command = "最終狼牙"
trigger1 = power >= 500*ifelse(var(31)=1,3,1) || (var(31) = 1 && life <= var(17))
trigger1 = var(30) != 2
var(40) = 1
persistent = 0
ignorehitpause = 1

[State 9000, 最終狼牙・追撃]
type = ChangeState
trigger1 = var(40) = 1
trigger1 = AnimTime = 0
value = 12500

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11040

;真・狼牙（まいど）
[Statedef 11040]
type = S
movetype = A
physics = S
anim = 11040
velset = 0,0
poweradd = 0
ctrl = 0

[State 1100, 0]
type = Pause
trigger1 = timemod = 2,0
trigger1 = time = [17,30]
time = 1
movetime = 0

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3100,1

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3100,2

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 11041
pos = 0,0
sprpriority = 3
ownpal = 1
ignorehitpause = 1

[State 1000, 1]
type = PlaySnd
trigger1 = movehit
trigger1 = AnimElem = 7, <= 1
value = 200,0+floor(Random/500.0)
ignorehitpause = 1
channel = 3

[State 11100, 3]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1

[State 1505, 6]
type = HitDef
trigger1 = AnimElem = 7, = 0
trigger2 = AnimElem = 7, = 1
trigger3 = AnimElem = 7, = 2
trigger4 = AnimElem = 7, = 3
trigger5 = AnimElem = 7, = 4
trigger6 = AnimElem = 7, = 5
trigger7 = AnimElem = 7, = 6
trigger8 = AnimElem = 7, = 7
attr = S, HA
animtype = Hard
damage = 15,3
sparkno = S20130
guard.sparkno = S20310
sparkxy = 5,-140
guardflag = M
hitflag = MAF
pausetime = 1,10
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 0,0   
air.velocity = 0,-10.5
fall = 1
fall.recover = 0
p2stateno = 8140
kill = 0

[State 1505, 6]
type = HitDef
trigger1 = AnimElem = 7, = 8
attr = S, HA
animtype = Hard
damage = 15,3
sparkno = S20130
guard.sparkno = S20310
sparkxy = 5,-140
guardflag = M
hitflag = MAF
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 0,0   
air.velocity = 0,-10.5
fall = 1
fall.recover = 0
p2stateno = 8140

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 1500, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;真・狼牙（P2）
[Statedef 11005]
type = S
movetype = H
physics = S
velset = 0,0
ctrl = 0

[State 1000, 2]
type = PosSet
trigger1 = time >= 0
y = -1

[State 106, 1]
type = VelSet
trigger1 = Time >= 0
y = 0

[State 900, 2]
type = PlayerPush
trigger1 = 1
value = 1

[State 1000, 2]
type = Width
trigger1 = 1
value = 0,20

[State 1000, 9]
type = ChangeAnim2
trigger1 = 1
value = 11005

[State 1000, 9]
type = ChangeState
trigger1 = p2stateno != 11002
value = 8215

;真・狼牙（俊殺・連やられ）
[Statedef 11031]
type = S
movetype = H
physics = S
poweradd = 0
velset = 0
ctrl = 0

[State 1000, 2]
type = PosSet
trigger1 = time >= 0
y = 0

[State 106, 1]
type = VelSet
trigger1 = Time >= 0
y = 0

[State 410, 4]
type = ChangeAnim2
trigger1 = Time = 0
value = 11031

[State 220, 2]
type = VelSet
trigger1 = Time = 0
x = -3

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 243

;真・狼牙（失敗）
[Statedef 11050]
type = A
physics = N
anim = 106

[State 106, 1]
type = VelSet
trigger1 = Time = 0
x = -4
y = -5

[State 106, 3]
type = VelAdd
trigger1 = Time > 0
x = .2
y = .5

[State 106, 4]
type = VelAdd
trigger1 = Time >= 10
y = .2

[State 106, 7]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 11051

;真・狼牙（着地）
[Statedef 11051]
type = S
physics = S
anim = 11020
velset = 0,0

[State 107, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 107, 2]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 107, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
Ctrl = 1

;真・狼牙（ヘルパー）
[Statedef 11060]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 11060

[State 2305, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 900, 2]
type = PlayerPush
trigger1 = 1
value = 1

[State 3108, 0]
type = PosFreeze
trigger1 = 1

[State 3122, 7]
type = DestroySelf
trigger1 = parent,stateno != 11010
trigger1 = parent,stateno != 11020
trigger1 = parent,stateno != 11030
trigger1 = parent,stateno != 11040

;最終狼牙
[Statedef 12000]
type = S
movetype = A
physics = S
anim = 12000
poweradd = ifelse(var(31)=1&&Life <= var(17),-1000,-2000)*ifelse(var(31)=1,3,1)
velset = 0,0
ctrl = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 3500,0

[State 1000, 1]
type = PlaySnd
trigger1 = Time = 170
value = 3500,1

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 2500,0

[State 2000, 4]
type = Explod
trigger1 = animelem = 1
anim = 10500
pos = 0,-80
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 310, 1]
type =Palfx
trigger1 = (GameTime%2)=0
trigger1 = time >= 170
time = 1
add = 210,10,10;210,10,10
ignorehitpause = 1

[State 271, 6]
type = EnvShake
trigger1 = time = 170
time = 100
ampl = 2

[State 1000, 9]
type = ChangeState
trigger1 = command != "hold_b"
trigger1 = Time = [50,119]
value = 12010

[State 1000, 9]
type = ChangeState
trigger1 = command != "hold_b"
trigger1 = Time >= 120
value = 12020

[State 1000, 9]
type = ChangeState
trigger1 = command = "hold_b"
trigger1 = AnimTime = 0
value = 12030

;最終狼牙・直式（通常）
[Statedef 12010]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 12010

[State 271, 6]
type = EnvShake
trigger1 = time = 0
time = 1

[State 3121, 0]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3500,2

[State 3121, 0]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3500,4

[State 3121, 0]
type = PlaySnd
trigger1 = var(33) = 1
value = 3500,6

[State 3120, 0]
type = PosAdd
trigger1 = Time = 0
x = 10

[State 310, 0]
type = VelSet
trigger1 = time = [7,12]
x = 20

[State 12010, 5]
type = PlayerPush
trigger1 = time >= 8
value = 0

[State 3120, 0]
type = Width
trigger1 = movehit = 0
value =  20, 0

[State 3120, 0]
type = Width
trigger1 = movehit
value =  -5, 0

[State 12010, 1]
type = VarAdd
trigger1 = movehit
var(33) = 1
ignorehitpause = 1
ignorepausetime = 1

[State 2060, 12]
type = EnvColor
trigger1 = var(33) = 1
time = 1
value = 0,0,0
ignorehitpause = 1
ignorepausetime = 1

[State 2060, 12]
type = EnvColor
trigger1 = var(33) = 1
time = 1
value = 250,250,250
ignorehitpause = 1
ignorepausetime = 1

[State 2060, 12]
type = EnvColor
trigger1 = var(33) = 1
time = 1
under = 1
value = 0,0,0
ignorehitpause = 1
ignorepausetime = 1

[State 2060, 12]
type = EnvColor
trigger1 = var(33) = 1
time = 110
under = 1
value = 250,250,250
ignorehitpause = 1
ignorepausetime = 1

[State 200, 1]
type = helper
trigger1 = var(33) = 1
helpertype = normal
id = 6000
pos = 80,-170
postype = Left
stateno = 12110
keyctrl = 0
ownpal = 1
persistent = 0
ignorehitpause = 1
ignorepausetime = 1

[State 3121, 7]
type = ChangeState
trigger1 = var(33) = 1
trigger1 = AnimElem = 7
value = 12100

[State 2000, 4]
type = Explod
trigger1 = animelem = 3
anim = 12011
pos = 80,-80
postype = p1
sprpriority = 2
supermove = 1
ignorehitpause = 1
ignorepausetime = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
animtype = Hard
damage = 300,45
guardflag = M
hitflag = MAF
pausetime = 1,30
guard.pausetime = 1,1
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-70
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 12200
kill = 0

[State 410, 4]
type = ChangeState
trigger1 = moveguarded
value = 11050

[State 3121, 7]
type = ChangeState
trigger1 = movehit
trigger1 = AnimElem = 7
value = 12100

[State 3121, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;最終狼牙・直式（ガード不能）
[Statedef 12020]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 12010

[State 271, 6]
type = EnvShake
trigger1 = time = 0
time = 1

[State 3121, 0]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3500,2

[State 3121, 0]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3500,4

[State 3121, 0]
type = PlaySnd
trigger1 = var(33) = 12
value = 3500,6

[State 3120, 0]
type = PosAdd
trigger1 = Time = 0
x = 10

[State 310, 0]
type = VelSet
trigger1 = time = [7,12]
x = 20

[State 12010, 5]
type = PlayerPush
trigger1 = time >= 8
value = 0

[State 3120, 0]
type = Width
trigger1 = movehit = 0
value =  20, 0

[State 3120, 0]
type = Width
trigger1 = movehit
value =  -5, 0

[State 12010, 1]
type = VarAdd
trigger1 = movehit
var(33) = 1

[State 2060, 12]
type = EnvColor
trigger1 = var(33) = 1
time = 1
value = 0,0,0
ignorehitpause = 1

[State 2060, 12]
type = EnvColor
trigger1 = var(33) = 1
time = 1
value = 250,250,250
ignorehitpause = 1

[State 2060, 12]
type = EnvColor
trigger1 = var(33) = 1
time = 1
under = 1
value = 0,0,0
ignorehitpause = 1

[State 2060, 12]
type = EnvColor
trigger1 = var(33) = 1
time = 110
under = 1
value = 250,250,250
ignorehitpause = 1

[State 200, 1]
type = helper
trigger1 = var(33) = 1
helpertype = normal
id = 6000
pos = 80,-170
postype = Left
stateno = 12110
ownpal = 1
keyctrl = 0
persistent = 0
ignorehitpause = 1

[State 2000, 4]
type = Explod
trigger1 = animelem = 3
anim = 12011
pos = 80,-80
postype = p1
sprpriority = 2
supermove = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
animtype = Hard
damage = 350
hitflag = MAF
pausetime = 1,30
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S20160
guard.sparkno = S20310
sparkxy = 0,-70
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 12200
kill = 0

[State 3121, 7]
type = ChangeState
trigger1 = var(33) = 1
trigger1 = AnimElem = 7
value = 12100

[State 3121, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;最終狼牙・直式（一撃死）
[Statedef 12030]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 12010

[State 271, 6]
type = EnvShake
trigger1 = time = 0
time = 1

[State 3121, 0]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3500,2

[State 3121, 0]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3500,4

[State 3121, 0]
type = PlaySnd
trigger1 = var(33) = 12
value = 3500,6

[State 3120, 0]
type = PosAdd
trigger1 = Time = 0
x = 10

[State 310, 0]
type = VelSet
trigger1 = time = [7,12]
x = 20

[State 12010, 5]
type = PlayerPush
trigger1 = time >= 8
value = 0

[State 3120, 0]
type = Width
trigger1 = movehit = 0
value =  20, 0

[State 3120, 0]
type = Width
trigger1 = movehit
value =  -5, 0

[State 271, 6]
type = EnvShake
trigger1 = movehit
time = 10
persistent = 0

[State 12010, 1]
type = VarAdd
trigger1 = movehit
var(33) = 1

[State 2060, 12]
type = EnvColor
trigger1 = movehit
trigger1 = var(33) = 0
time = 12
value = 240,0,0;250,250,250
ignorehitpause = 1

[State 2060, 12]
type = EnvColor
trigger1 = var(33) = 1
time = 1
value = 0,0,0
ignorehitpause = 1

[State 2060, 12]
type = EnvColor
trigger1 = var(33) = 1
time = 1
value = 250,250,250
ignorehitpause = 1

[State 2060, 12]
type = EnvColor
trigger1 = var(33) = 1
time = 1
under = 1
value = 0,0,0
ignorehitpause = 1

[State 2060, 12]
type = EnvColor
trigger1 = var(33) = 1
time = 110
under = 1
value = 250,250,250
ignorehitpause = 1

[State 200, 1]
type = helper
trigger1 = var(33) = 1
helpertype = normal
id = 6000
pos = 80,-170
postype = Left
stateno = 12110
ownpal = 1
keyctrl = 0
persistent = 0
ignorehitpause = 1

[State 2000, 4]
type = Explod
trigger1 = animelem = 3
anim = 12011
pos = 80,-80
postype = p1
sprpriority = 2
supermove = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
animtype = Hard
damage = 999999
hitflag = MAF
pausetime = 12,42
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S20160
guard.sparkno = S20310
sparkxy = 0,-70
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 12200
kill = 0

[State 3121, 7]
type = ChangeState
trigger1 = var(33) = 1
trigger1 = AnimElem = 7
value = 12100

[State 3121, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;最終狼牙・追撃
[Statedef 12500]
type = S
movetype = A
physics = S
anim = 12000
poweradd = ifelse(var(31)=1&&Life <= var(17),0,-500)*ifelse(var(31)=1,3,1)
velset = 0,0
ctrl = 0

[State 1000, 0]
type = SuperPause
trigger1 = time = 0
trigger1 = var(40) = 1
time = 60
anim = -1
movetime = 60

[State 1000, 2]
type = VarSet
trigger1 = AnimElem = 1
v = 40
value = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 3500,0

[State 1000, 1]
type = PlaySnd
trigger1 = Time = 170
value = 3500,1

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 2500,0

[State 2000, 4]
type = Explod
trigger1 = animelem = 1
anim = 10500
pos = 0,-80
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 310, 1]
type =Palfx
trigger1 = (GameTime%2)=0
trigger1 = time >= 170
time = 1
add = 210,10,10;210,10,10
ignorehitpause = 1

[State 271, 6]
type = EnvShake
trigger1 = time = 170
time = 100
ampl = 2

[State 1000, 9]
type = ChangeState
trigger1 = Time = 50
value = 12510

;最終狼牙・追撃
[Statedef 12510]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 12010

[State 271, 6]
type = EnvShake
trigger1 = time = 0
time = 1

[State 3121, 0]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3500,2

[State 3121, 0]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3500,4

[State 3121, 0]
type = PlaySnd
trigger1 = var(33) = 1
value = 3500,6

[State 3120, 0]
type = PosAdd
trigger1 = Time = 0
x = 10

[State 310, 0]
type = VelSet
trigger1 = time = [7,12]
x = 20

[State 12010, 5]
type = PlayerPush
trigger1 = time >= 8
value = 0

[State 3120, 0]
type = Width
trigger1 = movehit = 0
value =  20, 0

[State 3120, 0]
type = Width
trigger1 = movehit
value =  -5, 0

[State 12010, 1]
type = VarAdd
trigger1 = movehit
var(33) = 1
ignorehitpause = 1
ignorepausetime = 1

[State 2060, 12]
type = EnvColor
trigger1 = var(33) = 1
time = 1
value = 0,0,0
ignorehitpause = 1
ignorepausetime = 1

[State 2060, 12]
type = EnvColor
trigger1 = var(33) = 1
time = 1
value = 250,250,250
ignorehitpause = 1
ignorepausetime = 1

[State 2060, 12]
type = EnvColor
trigger1 = var(33) = 1
time = 1
under = 1
value = 0,0,0
ignorehitpause = 1
ignorepausetime = 1

[State 2060, 12]
type = EnvColor
trigger1 = var(33) = 1
time = 110
under = 1
value = 250,250,250
ignorehitpause = 1
ignorepausetime = 1

[State 200, 1]
type = helper
trigger1 = var(33) = 1
helpertype = normal
id = 6000
pos = 80,-170
postype = Left
stateno = 12110
keyctrl = 0
ownpal = 1
persistent = 0
ignorehitpause = 1
ignorepausetime = 1

[State 3121, 7]
type = ChangeState
trigger1 = var(33) = 1
trigger1 = AnimElem = 7
value = 12100

[State 2000, 4]
type = Explod
trigger1 = animelem = 3
anim = 12011
pos = 80,-80
postype = p1
sprpriority = 2
supermove = 1
ignorehitpause = 1
ignorepausetime = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
animtype = Hard
damage = 50,45
guardflag = M
hitflag = MAF
pausetime = 1,30
guard.pausetime = 1,1
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-70
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 12200
kill = 0

[State 410, 4]
type = ChangeState
trigger1 = moveguarded
value = 11050

[State 3121, 7]
type = ChangeState
trigger1 = movehit
trigger1 = AnimElem = 7
value = 12100

[State 3121, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;最終狼牙（決め）
[Statedef 12100]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 12100

[State 3121, 0]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3500,5

[State 3121, 0]
type = PlaySnd
trigger1 = AnimElem = 9
trigger1 = p2Life > 1
value = 3500,3

[State 3121, 0]
type = PlaySnd
trigger1 = AnimElem = 9
trigger1 = p2Life <= 1
value = 3700,0

[State 181, 1]
type = TargetLifeAdd
trigger1 = Time = 122
trigger1 = p2Life <= 1
value = -1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3120, 0]
type = Width
trigger1 = 1
value =  -5, 0

[State 3121, 7]
type = ChangeState
trigger1 = Time = 140
value = 0
ctrl = 1

[State 3121, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;誠（ヘルパー）
[Statedef 12110]
type = S
movetype = I
physics = N
sprpriority = -1
velset = 0,0
anim = 12110

[State 12110,0]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 3108, 0]
type = PosSet
trigger1 = 1
x = -85

[State 12110,1]
type = EnvColor
trigger1 = time = 0
time = 110
under = 1
value = 250,250,250

[State 12110,2]
type = EnvColor
trigger1 = time = 110
time = 30
under = 1
value = 0,0,0

[State 12110,2]
type = EnvColor
trigger1 = time = 140
time = 2
under = 1
value = 0,0,0

[State 12110,2]
type = EnvColor
trigger1 = time = 142
time = 1
value = 250,250,250

[State 3122, 7]
type = DestroySelf
trigger1 = animtime = 0

;最終狼牙やられ
[Statedef 12200]
type = S
movetype = H
physics = S
velset = 0,0

[State 5000, 1]
type = PosSet
trigger1 = Time >= 0
y = 0

[State 5000, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5012

[State 5000, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 3]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 4]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = S

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[State 12200, 0]
type = LifeAdd
trigger1 = Time = 0
value = -150
kill = 0
absolute = 1

[State 5000, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 12201

;---------------------------------------------------------------------------
[Statedef 12201]
type    = S
movetype= H
physics = S
velset = 0,0

[State 5000, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 12201

[State 310, 0]
type = PosAdd
trigger1 = animtime = 0
x = -20

[State 12200, 1]
type = LifeAdd
trigger1 = animtime = 0
trigger1 = Life <= 1
value = -1

[State 8145, 2]
type = EnvShake
trigger1 = animtime = 0
time = 6

[State 8145, 4]
type = SelfState;ChangeState
trigger1 = animtime = 0
value = 5100;12203

[Statedef 12202]
type = A
movetype = H
physics = N

[State 8140, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = animexist(5060)
value = 5060

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !animexist(5060)
value = 5030

[State 8140, 4]
type = ChangeState
trigger1 = Time = 12
value = 12203

;うつぶせやられ
[Statedef 12203]
type = A
movetype = H
physics = N
velset = 0,0

[State 8145, 1]
type = Velset
trigger1 = Time = 0
x = 0
y = -10

[State 8145, 1]
type = VelAdd
trigger1 = Time > 0
y = .5

[State 8145, 1]
type = VelAdd
trigger1 = Time >= 30
y = .3

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 8

[State 8145, 2]
type = ChangeAnim
trigger1 = animexist(5061)
trigger1 = Time = 0
value = 5061

[State 8145, 3]
type = ChangeAnim
trigger1 = !animexist(5061)
trigger1 = Time = 0
value = 5050

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

; 乱舞奥義
[Statedef 13000]
type = S
movetype = I
physics = S
anim = 13000
velset = 0,0
ctrl = 0

[State 13000, 1]
type = Varadd
trigger1 = animtime = 0
v = 49
value = 1

[State 13000, 1]
type = VarSet
trigger1 = animtime = 0
v = 50
value = 1100

[State 2000, 2]
type = PlaySnd
trigger1 = animelem = 4
value = 3600,0

[State 2000, 2]
type = PlaySnd
trigger1 = animelem = 5
value = 2500,0

[State 2000, 4]
type = Explod
trigger1 = animelem = 2
anim = 10500
pos = 0,-80
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 2000, 6]
type = SuperPause
trigger1 = animelem = 1
time = 45
anim = -1
movetime = 45
darken = 0

[State 3200, 1]
type = Explod
trigger1 = animelem = 3
anim = 15100
pos = ifelse(facing=1,0,1),0
postype = back
bindtime = -1
removetime = 30
sprpriority = -9
supermovetime = -1
pausemovetime = -1
ownpal = 1

[State 780, 1]
type = PowerAdd
trigger1 = animelem = 5
value = ifelse(var(31)=1&&Life <= var(17),-1000,-2000)*ifelse(var(31)=1,3,1)

[State 6100, 1]
type = explod
trigger1 = var(13) = 1
trigger1 = animtime = 0
anim = 13010
ID = 13010
pos = 8,210+ifelse(var(31)=1,20,0)
postype = left
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 8
ownpal = 1
supermove = 1

[State 6100, 1]
type = explod
trigger1 = var(13) = 1
trigger1 = animtime = 0
anim = 13012
ID = 13012
pos = 75,212+ifelse(var(31)=1,20,0)
postype = left
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 9
ownpal = 1
scale = 0,1

[State 6100, 1]
type = explod
trigger1 = var(13) = 2
trigger1 = animtime = 0
anim = 13015
ID = 13015
pos = -80,210+ifelse(var(31)=1,20,0)
postype = right
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 8
ownpal = 1
supermove = 1

[State 6100, 1]
type = explod
trigger1 = var(13) = 2
trigger1 = animtime = 0
anim = 13013
ID = 13012
pos = -76,212+ifelse(var(31)=1,20,0)
postype = right
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 9
ownpal = 1
scale = 0,1

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 780, State]
type = ChangeState
trigger1 = animtime = 0
value = ifelse(Var(59) !=0,240,0)
ctrl = 1

;疾空狼牙
[Statedef 14000]
type = S
movetype = A
physics = S
anim = 14000
poweradd = ifelse(var(31)=1&&Life <= var(17),0,-1000)*ifelse(var(31)=1,3,1)
velset = 0,0
ctrl = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1000,0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 6
value = 1000,1

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 2500,0

[State 2000, 4]
type = Explod
trigger1 = animelem = 1
anim = 10000
pos = 0,-80
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
anim = 1010
pos = 10,-30
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1700, 4]
type = Projectile
trigger1 = AnimElem = 6
attr = S, SP
projID = 1000
projanim = 1120
projshadow = 68,68,68
offset =  50,-49
hitflag = MAF
velocity = ifelse(var(50) > 0,10,7)
damage = ifelse(var(12)!=0,ifelse(var(30)=1,68,ifelse(var(30)=2,50,55)), ifelse(var(30)=1,47,ifelse(var(30)=2,30,37))),6
animtype = Hard
guardflag = M
pausetime = 0,ifelse(p2statetype=A,0,ifelse(p2bodydist X<=30,8,12))
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-40
hitsound = S1000,2
guardsound = S210,4
ground.type = Low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -8
guard.velocity = -4
air.velocity = -2.5,-2.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 2100, 3]
type = Explod
trigger1 = ProjHit = 1
anim = 1030
pos =  10,-49
postype = p2
sprpriority = 10
supermove = 1
bindtime = 1
facing = -1

[State 2060, 12]
type = EnvColor
trigger1 = ProjHit = 1
time = 1
value = 250,250,250
under = 1
ignorehitpause = 1
ignorepausetime = 1

[State 1000, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 14010

;疾空狼牙2
[Statedef 14010]
type = S
movetype = A
physics = S
anim = 14010
poweradd = 0
velset = 0,0
ctrl = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 1000,1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 3
anim = 1110
pos = 25,-25
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1700, 4]
type = Projectile
trigger1 = AnimElem = 3
attr = S, SP
projID = 1100
projanim = 1125
projshadow = 68,68,68
offset =  40,-40
hitflag = MAF
velocity = ifelse(var(50) > 0,10,7)
damage = ifelse(var(12)!=0,ifelse(var(30)=1,60,ifelse(var(30)=2,45,52)), ifelse(var(30)=1,41,ifelse(var(30)=2,25,32))),6
animtype = Hard
guardflag = M
pausetime = 0,ifelse(p2statetype=A,0,ifelse(p2bodydist X<=30,8,12))
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-10
hitsound = S1000,2
guardsound = S210,4
ground.type = Low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -8
guard.velocity = -4
air.velocity = -2.5,-2.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 2060, 12]
type = EnvColor
trigger1 = ProjHit = 1
time = 1
value = 250,250,250
under = 1
ignorehitpause = 1
ignorepausetime = 1

[State 1000, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 14020

;疾空狼牙
[Statedef 14020]
type = S
movetype = A
physics = S
anim = 14020
poweradd = 0
velset = 0,0
ctrl = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 1000,1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 3
anim = 1010
pos = 10,-30
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1700, 4]
type = Projectile
trigger1 = AnimElem = 3
attr = S, SP
projID = 1000
projanim = 1120
projshadow = 68,68,68
offset =  50,-49
hitflag = MAF
velocity = ifelse(var(50) > 0,10,7)
damage = ifelse(var(12)!=0,ifelse(var(30)=1,68,ifelse(var(30)=2,50,55)), ifelse(var(30)=1,47,ifelse(var(30)=2,30,37))),6
animtype = Hard
guardflag = M
pausetime = 0,ifelse(p2statetype=A,0,ifelse(p2bodydist X<=30,8,12))
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-40
hitsound = S1000,2
guardsound = S210,4
ground.type = Low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -8
guard.velocity = -4
air.velocity = -2.5,-2.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 2100, 3]
type = Explod
trigger1 = ProjHit = 1
anim = 1030
pos =  10,-49
postype = p2
sprpriority = 10
supermove = 1
bindtime = 1
facing = -1

[State 2060, 12]
type = EnvColor
trigger1 = ProjHit = 1
time = 1
value = 250,250,250
under = 1
ignorehitpause = 1
ignorepausetime = 1

[State 1000, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 14030

;強　疾空殺（二発目）
[Statedef 14030]
type = S
movetype = A
physics = S
anim = 14030
poweradd = 0
velset = 0
ctrl = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 6
value = 1000,1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
anim = 1110
pos = 25,-25
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1700, 4]
type = Projectile
trigger1 = AnimElem = 6
attr = S, SP
projID = 1100
projanim = 1125
projshadow = 68,68,68
offset =  40,-40
hitflag = MAF
velocity = ifelse(var(50) > 0,10,7)
damage = ifelse(var(12)!=0,ifelse(var(30)=1,60,ifelse(var(30)=2,45,52)), ifelse(var(30)=1,41,ifelse(var(30)=2,25,32))),6
animtype = Hard
guardflag = M
pausetime = 0,ifelse(p2statetype=A,0,15)
guard.pausetime = 0,ifelse(p2statetype=A,0,12)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-10
hitsound = S1000,2
guardsound = S210,4
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -9
guard.velocity = -4
air.velocity = -2.5,-2.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 2060, 12]
type = EnvColor
trigger1 = ProjHit = 1
time = 1
value = 250,250,250
under = 1
ignorehitpause = 1
ignorepausetime = 1

[State 1000, 9]
type = ChangeState
trigger1 = p2stateno = [9960,9966]
trigger1 = time >= 13
value = 14040

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0 || var(22)!=0) && (animtime = 0)
value = ifelse(var(20)!=0,var(20),ifelse(var(22)!=0,var(22),0))
ctrl = ifelse(var(20)!=0 || var(22)!=0,0,1)

[State 1000, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;疾空狼牙
[Statedef 14040]
type = S
movetype = A
physics = S
anim = 2000
poweradd = 0
velset = 0
ctrl = 0

[State 2060, 12]
type = EnvColor
trigger1 = ProjHit = 1
time = 1
value = 250,250,250
under = 1
ignorehitpause = 1
ignorepausetime = 1

[State 410, 4]
type = ChangeState
trigger1 = animtime = 0
value = 14041

;疾空狼牙（ランニング）
[Statedef 14041]
type = S
movetype = A
physics = S
anim = 2002
velset = 0,0
ctrl = 0

[State 2060, 12]
type = EnvColor
trigger1 = ProjHit = 1
time = 1
value = 250,250,250
under = 1
ignorehitpause = 1
ignorepausetime = 1

[State 2002, armor]
type = HitOverRide
triggerall = life > 0
trigger1 = 1
time = 1
attr = SCA,NA,SA,HA,NP,SP,HP
stateno = 30005
IgnoreHitPause = 1
PauseMoveTime = 99999

[State 1000, 4]
type = PlaySnd
trigger1 = time = 0
value = 100,0
channel = 1

[State 311, 0]
type = PosAdd
trigger1 = time = 0
x = 15

[State 210, 0]
type = velset
trigger1 = time >= 0
x = 12

[State 200, 3]
type = HitDef
trigger1 = time >= 0
attr = S, SA
animtype = Hard
damage = 57,6
guardflag = M
hitflag = M
pausetime = 0,15
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
p2facing = 1
sparkno = S20010
guard.sparkno = S20300
sparkxy = -10,-70
hitsound = S200,6
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 26
ground.hittime = 26
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 200, 3]
type = HitDef
trigger1 = time >= 0
trigger1 = p2statetype = A
attr = S, SA
animtype = Light
damage = 57,6
hitflag = AF
pausetime = 0,15
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S20010
guard.sparkno = S20300
sparkxy = -10,-70
hitsound = S200,6
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3     
air.cornerpush.veloff = 0
p2stateno = ifelse(var(50)>0,243,9910)

[State 2060, 12]
type = EnvColor
trigger1 = movehit
time = 1
value = 250,250,250
under = 1
persistent = 0
ignorehitpause = 1
ignorepausetime = 1

[State 410, 4]
type = ChangeState
trigger1 = movecontact
value = 14045

[State 410, 4]
type = ChangeState
trigger1 = time >= 23
value = 101

;狼牙（体当たり）
[Statedef 14045]
type = S
movetype = A
physics = S
anim = 2005
poweradd = 0
velset = 0,0
ctrl = 0

[State 410, 4]
type = ChangeAnim
trigger1 = time < 12
value = 2005

[State 1000, 2]
type = Width
trigger1 = 1
value = 5,0

[State 311, 0]
type = PosAdd
trigger1 = time = 0
x = 5

[State 410, 4]
type = ChangeState
trigger1 = time = 12
trigger2 = p2stateno = 272
value = 14050

;ガード不能攻撃
[Statedef 14050]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 14050

[State 310, 0]
type = SprPriority
trigger1 = time = 0
value = 1

[State 2000, 6]
type = SuperPause
trigger1 = time = 21
time = 36
movetime = 36
anim = -1
darken = 0

[State 2060, 12]
type = EnvColor
trigger1 = time >= 20
time = 2
value = 0,0,0
under = 1
ignorehitpause = 1

[State 311, 0]
type = PlaySnd
trigger1 = AnimElem = 7
value = 3600,0

[State 310, 0]
type = PosAdd
trigger1 = animelem = 2
x = -11

[State 310, 0]
type = PosAdd
trigger1 = animelem = 3
x = -25

[State 310, 0]
type = PosAdd
trigger1 = animelem = 4
x = -24

[State 310, 0]
type = PosAdd
trigger1 = animelem = 5
x = -7

[State 310, 1]
type = Explod
trigger1 = time = 21
anim = 320
pos = 0,0
sprpriority = 2
ownpal = 1
supermove = 1
[State 310, 1]
type = Explod
trigger1 = time = 27
anim = 321
pos = 0,0
sprpriority = 2
ownpal = 1
supermove = 1
[State 310, 1]
type = Explod
trigger1 = time = 33
anim = 322
pos = 0,0
sprpriority = 2
ownpal = 1
supermove = 1
[State 310, 1]
type = Explod
trigger1 = time = 39
anim = 323
pos = 0,0
sprpriority = 2
ownpal = 1
supermove = 1
[State 310, 1]
type = Explod
trigger1 = time = 45
anim = 324
pos = 0,0
sprpriority = 2
ownpal = 1
supermove = 1
[State 310, 1]
type = Explod
trigger1 = time >= 51
anim = 325
pos = 0,0
sprpriority = 2
ownpal = 1
persistent = 8
[State 310, 1]
type = Explod
trigger1 = time >= 55
anim = 326
pos = 0,0
sprpriority = 2
ownpal = 1
persistent = 8
supermove = 1
[State 310, 1]
type = Explod
trigger1 = time = 21
anim = 330
pos = 0,0
sprpriority = 1
ownpal = 1
supermove = 1
[State 310, 1]
type = Explod
trigger1 = time = 27
anim = 331
pos = 0,0
sprpriority = 1
ownpal = 1
supermove = 1
[State 310, 1]
type = Explod
trigger1 = time = 33
anim = 332
pos = 0,0
sprpriority = 1
ownpal = 1
supermove = 1
[State 310, 1]
type = Explod
trigger1 = time = 39
anim = 333
pos = 0,0
sprpriority = 1
ownpal = 1
supermove = 1
[State 310, 1]
type = Explod
trigger1 = time = 45
anim = 334
pos = 0,0
sprpriority = 1
ownpal = 1
supermove = 1
[State 310, 1]
type = Explod
trigger1 = time >= 51
anim = 335
pos = 0,0
sprpriority = 1
ownpal = 1
persistent = 8
supermove = 1
[State 310, 1]
type = Explod
trigger1 = time >= 55
anim = 336
pos = 0,0
sprpriority = 1
ownpal = 1
persistent = 8
supermove = 1

[State 310, 7]
type = ChangeState
trigger1 = time = 54
value = 14060

;ガード不能攻撃
[Statedef 14060]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 14060

[State 2060, 12]
type = EnvColor
trigger1 = animelem = 5, < 0
time = 2
value = 0,0,0
under = 1
ignorehitpause = 1
ignorepausetime = 1

[State 311, 0]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3600,1

[State 311, 0]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,2

[State 311, 0]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3100,2

[State 312, 5]
type = PlayerPush
trigger1 = Vel X != 0
trigger1 = Time >= 8
value = 0

[State 1000, 2]
type = Width
trigger1 = time = [0,8]
value = 30,0

[State 311, 0]
type = VelSet
trigger1 = time = 0
x = 6

[State 311, 0]
type = VelAdd
trigger1 = time >= 5
trigger1 = Vel X > 0
x = -0.2

[State 311, 0]
type = VelSet
trigger1 = Vel X <= 0
trigger2 = Vel X <= 0
x = 0

[State 310, 0]
type = PosAdd
trigger1 = animelem = 3
x = 35

[State 310, 0]
type = PosAdd
trigger1 = animelem = 4
x = 25

[State 311, 0]
type = VarSet
trigger1 = AnimElem = 4, = 0
trigger2 = AnimElem = 4, = 4
trigger3 = AnimElem = 4, = 8
v = 10
value = 1

[State 311, 0]
type = VarSet
trigger1 = AnimElem = 4, = 2
trigger2 = AnimElem = 4, = 6
v = 10
value = 2

[State 311, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 5
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 3
anim = 14100
pos = 80,-80
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
anim = 14101
pos = 80,-80
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State 210, 1]
type = Explod
trigger1 = Var(10) = 2
anim = 14102
pos = 80,-80
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 14103
pos = 80,-80
sprpriority = 3
ownpal = 1

[State 2060, 12]
type = EnvColor
trigger1 = p2stateno = 8160 && p2movetype = H && animelem = 5, >= 0
time = 1
value = 245,245,245
under = 1
ignorehitpause = 1
ignorepausetime = 1

[State 2060, 12]
type = EnvColor
trigger1 = movehit
time = 1
value = 30,30,250
under = 1
ignorehitpause = 1
ignorepausetime = 1

[State 14060, 5]
type = Pause
trigger1 = timemod = 2,0
trigger1 = movehit
time = 1
movetime = 0

[State 2060, 1]
type = MoveHitReset
trigger1 = Movehit
ignorehitpause = 1

[State 230, 3]
type = HitDef
trigger1 = animelem = 4, = 0
attr = S, NA
animtype = Hard
damage = 20,3
hitflag = MAF
pausetime = 8,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-68
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = ifelse(var(23) > 0,-6.5,-10)
ground.cornerpush.veloff = -10
guard.cornerpush.veloff = -10
p2stateno = 8160

[State 230, 3]
type = HitDef
trigger1 = animelem = 4, >= 2
trigger1 = animelem = 5, < 0
attr = S, NA
animtype = Hard
damage = 20,3
hitflag = MAF
pausetime = 3,6
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-68
;hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = ifelse(var(23) > 0,-6.5,-10)
ground.cornerpush.veloff = -10
guard.cornerpush.veloff = -10
p2stateno = 8160
persistent = 2

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype = Hard
damage = 60,6
hitflag = MAF
pausetime = 15,15
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))* 0,0
givepower = 0,0
sparkno = S20160
guard.sparkno = S20310
sparkxy = 0,-70
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = ifelse(var(23) > 0,-6.5,-10)
ground.cornerpush.veloff = -10
guard.cornerpush.veloff = -10
p2stateno = 8160

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)

[State 311, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;斬りＫＯ(ヘルパー)
[Statedef 6000]
type = S
movetype = I
physics = N

[state 6000, 1]
type  = EnvColor 
trigger1 = timemod = 3,0 && time <= 35
time = 1
value = 240,0,0
under = 1
ignorehitpause = 1
ignorepausetime = 1

[state 6000, 2]
type  = EnvColor 
trigger1 = timemod = 3,1 && time <= 35
time = 1
value = -191,0,0
under = 1
ignorehitpause = 1
ignorepausetime = 1

[state 6000, 3]
type  = EnvColor 
trigger1 = timemod = 3,2 && time <= 35
time = 1
value = 192,0,0
under = 1
ignorehitpause = 1
ignorepausetime = 1

[State 6000, 4]
type = PlaySnd
trigger1 = Time = 0
value = 6000,0

[State 6000, 5]
type = DestroySelf
trigger1 = RoundState = 0

;打撃ＫＯ(ヘルパー)
[Statedef 6001]
type = S
movetype = I
physics = N

[state 6000, 1]
type  = EnvColor 
trigger1 = timemod = 3,0 && time <= 35
time = 1
value = 240,0,0
under = 1
ignorehitpause = 1
ignorepausetime = 1

[state 6000, 2]
type  = EnvColor 
trigger1 = timemod = 3,1 && time <= 35
time = 1
value = -191,0,0
under = 1
ignorehitpause = 1
ignorepausetime = 1

[state 6000, 3]
type  = EnvColor 
trigger1 = timemod = 3,2 && time <= 35
time = 1
value = 192,0,0
under = 1
ignorehitpause = 1
ignorepausetime = 1

[State 6000, 4]
type = PlaySnd
trigger1 = Time = 0
value = 6000,1

[State 6000, 5]
type = DestroySelf
trigger1 = RoundState = 0

;
[Statedef 21000]
type = S
movetype = I
physics = N
sprpriority = 5
velset = 0,0
anim = ifelse(parent,var(30)=1,21000,ifelse(parent,var(30)=2,21001,21002))

[State 3122, 0]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 3122, 2]
type = ChangeAnim
trigger1 = parent,var(30) = 1
value = 21000

[State 3122, 2]
type = ChangeAnim
trigger1 = parent,var(30) = 2
value = 21001

[State 3122, 2]
type = ChangeAnim
trigger1 = parent,var(30) = 3
value = 21002

[State 3122, 7]
type = DestroySelf
trigger1 = parent,stateno != 195

;＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿
;＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/投げやられ専用＿/＿/＿/＿/＿/＿/＿/＿/
;￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣
;吹っ飛び　やられ　無敵
[Statedef 241]
type = A
movetype = H
physics = N

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 5030

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 242

;吹っ飛び　やられ
[Statedef 242]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,3.5,-3.5)
y = -7.5

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-3.5,3.5)
y = -7.5

[State 8145, 1]
type = Velset
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
x = ifelse(Vel X >= 0,2,-2)

[State 5050, 3]
type = VelAdd
trigger1 = Time >= 0
y = .5

[State 1630, 1]
type = VelAdd
trigger1 = Time > 34
y = .6

[State 5050, 1]
type = ChangeAnim
triggerall = anim != 5060
trigger1 = AnimTime = 0
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5050

[State 1500, 1]
type = HitBy
trigger1 = Time >= 0
value = SCA, NT, ST, HT

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 6

[State 2160, 33]
type = Explod
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
anim = F61
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1

[State 5050, 4]
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
trigger1 = Command = "recovery"
value = 5200

[State 1281, 3]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;吹っ飛び　やられ　無敵なし
[Statedef 243]
type = A
movetype = H
physics = N

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 1280, 2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 5030

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 244

;吹っ飛び　やられ
[Statedef 244]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,3,-3)
y = -9

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-3,3)
y = -9

[State 8145, 1]
type = Velset
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
x = ifelse(Vel X >= 0,2,-2)

[State 5050, 3]
type = VelAdd
trigger1 = Time >= 0
y = .5

[State 1630, 1]
type = VelAdd
trigger1 = Time >= 25
y = .3

[State 5050, 1] ;Change anim when done with last
type = ChangeAnim
triggerall = anim != 5060 ;Not if in hit up anim
trigger1 = AnimTime = 0
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
value = 5050

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 6

[State 2160, 33]
type = Explod
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
anim = F61
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1

[State 5050, 4]
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
trigger1 = Command = "recovery"
value = 5200

[State 1281, 3]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;------------------------------------------------
;通常攻撃　空中ヒット用
[Statedef 9910]
type = A
movetype = H
physics = N

[State 8140, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
value = 5030

[State 8140, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 9920

;通常攻撃　空中ヒット用
[Statedef 9920]
type = A
movetype = H
physics = N
velset = 0,0

[State 8140, 4]
type = ChangeState
trigger1 = time = 1
trigger1 = Life <= 0
value = 242

[State 1500, 1]
type = HitBy
trigger1 = stateno = 9920
value = SCA,SA,HA,NP,SP,HP,NT,ST,HT

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,2,-2)
y = -7

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-2,2)
y = -7

[State 8145, 1]
type = VelAdd
trigger1 = Time > 0
y = .5

[State 8145, 1]
type = VelAdd
trigger1 = Time >= 35
y = .3

[State 8145, 3]
type = ChangeAnim
trigger1 = Time = 5
value = 5040

[State 1500, 1]
type = NotHitBy
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = SCA
time = 2

[State 8145, 4]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 9930

; 通常攻撃　空中ヒット用（着地）
[Statedef 9930]
type = S
movetype = I
physics = S
velset = 0,0

[State 8145, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 8145, 4]
type = SelfState
trigger1 = Time = 0
value = 52

[State 8145, 4]
type = ChangeState
trigger1 = Time = 0
value = 52

;------------------------------------------------
;弾き空中ヒット用
[Statedef 9940]
type = A
movetype = A
physics = N

[State 8140, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
value = 5030

[State 8140, 4]
type = ChangeState
trigger1 = time >= 12
value = 9950

;弾き空中ヒット用
[Statedef 9950]
type = A
movetype = A
physics = N
velset = 0,0

[State 8140, 4]
type = ChangeState
trigger1 = time = 0
trigger1 = Life <= 0
value = 242

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,2,-2)
y = -8

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-2,2)
y = -8

[State 8145, 1]
type = VelAdd
trigger1 = Time > 0
y = .4

[State 8145, 1]
type = VelAdd
trigger1 = Time >= 20
y = .3

[State 8145, 3]
type = ChangeAnim
trigger1 = Time = 5
value = 5040

[State 8145, 4]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 9930

;---------------------------------------------------------------------------
; 疾風 やられ
[Statedef 9960]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 5]
type = ChangeState
trigger1 = Life = 0
value = 9970

[State 5000, 5]
type = ChangeState
trigger1 = Pos Y != 0
value = 9910

[State 5000, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 3]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 4]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = a

[State 5000, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 9961

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
[Statedef 9961]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3]
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 8145, 4]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 疾風しゃがみやられ
[Statedef 9965]
type    = C
movetype= H
physics = N
velset = 0,0

[State 5000, 5]
type = ChangeState
trigger1 = Life = 0
value = 9970

[State 5000, 5]
type = ChangeState
trigger1 = Pos Y != 0 
value = 9910

[State 5010, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5010, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 9966

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
[Statedef 9966]
type    = C
movetype= H
physics = C

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)

[State 5011, 3]
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 8145, 4]
type = SelfState
trigger1 = HitOver
value = 11
ctrl = 1

;---------------------------------------------------
;疾風KO
[Statedef 9970]
type = A
movetype = H
physics = N

[state 6000, 1]
type  = EnvColor 
trigger1 = timemod = 3,0 && time <= 35
time = 1
value = 240,0,0
under = 1
ignorehitpause = 1

[state 6000, 2]
type  = EnvColor 
trigger1 = timemod = 3,1 && time <= 35
time = 1
value = -191,0,0
under = 1
ignorehitpause = 1

[state 6000, 3]
type  = EnvColor 
trigger1 = timemod = 3,2 && time <= 35
time = 1
value = 192,0,0
under = 1
ignorehitpause = 1

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 5030

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 242

;---------------------------------------------------------------------------
; 打ち上げ　しゃがみガードヒット用
[Statedef 9980]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 5]
type = ChangeState
trigger1 = Pos Y != 0 
value = 9910

[State 5000, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 3] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 4] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = a

[State 5000, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 9985 ;HITG_SLIDE

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------
[Statedef 9985]
type    = S
movetype= H
physics = S

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 2]
type = ChangeAnim
trigger1 = time = [10,16]
value = 5010

[State 5001, 2]
type = ChangeAnim
trigger1 = time = 17
value = 5015

[State 5001, 2]
type = ChangeAnim
trigger1 = time = 30
value = 5005

[State 5001, 4]
type = VelSet
trigger1 = time = [0,35]
x = -2

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 8145, 4]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1

;--------------------------------------------------
;うつぶせやられ
[Statedef 8140]
type = A
movetype = H
physics = N

[State 8140, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
value = 5030

[State 8140, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
trigger2 = Anim != 5030
value = 8145

;うつぶせやられ
[Statedef 8145]
type = A
movetype = H
physics = N
velset = 0,0

[State 8145, 1]
type = Velset
trigger1 = Time = 0
x = ifelse(p2dist X >= 0,-1.3,1.3)
y = -10

[State 8145, 1]
type = VelAdd
trigger1 = Time > 0
y = .5

[State 8145, 1]
type = VelAdd
trigger1 = Time >= 30
y = .3

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 8

[State 8145, 2]
type = ChangeAnim
trigger1 = animexist(5061)
trigger1 = Time = 0
value = 5061

[State 8145, 3]
type = ChangeAnim
trigger1 = !animexist(5061)
trigger1 = Time = 5
value = 5050

[State 5050, 4]
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
trigger1 = Command = "recovery"
value = 5200

[State 8145, 4]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 8146;5100

[Statedef 8146]
type = L
movetype = H
physics = N
sprpriority = -1

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, 4]
type = PosAdd
trigger1 = Time = 0
x = -10

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) = 0
sysvar(1) = floor(vel y)

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 12
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 12
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 2]
type = ChangeAnim
trigger1 = time = [1,5]
value = ifelse(anim=5100,5100,5101)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

[State 1270, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 1281, 3]
type = SelfState
trigger1 = time = 12
trigger1 = Life > 0
value = 5110

[State 1281, 3]
type = ChangeAnim
trigger1 = time = 12
trigger1 = Life <= 0
value = 5171

[State 1281, 3]
type = ChangeState
trigger1 = time = 12
trigger1 = Life <= 0
value = 5150

;---------------------------------------------------
;たたきつけ　やられ
[Statedef 8150]
type = A
movetype = H
physics = N

[State 8140, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 8145, 3]
type = ChangeAnim
trigger1 = Time >= 0
value = 5030

[State 8140, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 8155

;たたきつけ　やられ
[Statedef 8155]
type = A
movetype = H
physics = N
velset = 0,0

[State 8145, 3]
type = ChangeAnim
trigger1 = Time = 0
value = 5050

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,6,-6)
y = 18

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-6,6)
y = 18

[State 8145, 1]
type = Velset
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
x = ifelse(Vel X >= 0,2,-2)

[State 8145, 1]
type = VelAdd
trigger1 = Time >= 7
y = .5

[State 183, 3]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 15

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;---------------------------------------------------
;強連刃斬三発目やられ
[Statedef 8160]
type = A
movetype = H
physics = N
sprpriority = -1

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 5030

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 8161

;強連刃斬三発目やられ
[Statedef 8161]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,6,-6)
y = -6

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-6,6)
y = -6

[State 5050, 3]
type = VelAdd
trigger1 = Time >= 0
y = .4

[State 5050, 3]
type = VelAdd
trigger1 = Time >= 10
y = .5

[State 5050, 1]
type = ChangeAnim
triggerall = anim != 5060
trigger1 = AnimTime = 0
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5050

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 8

[State 271, 6]
type = PlaySnd
trigger1 = Vel Y > 0 && Pos Y >= 0
value = F7, 2

[State 2160, 33]
type = Explod
trigger1 = Vel Y > 0 && Pos Y >= 0
anim = F61
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;[State 1281, 3]
;type = ChangeState
;trigger1 = Vel Y > 0 && Pos Y >= 0
;value = 8162

;強連刃斬三発目やられ
[Statedef 8162]
type = L
movetype = H
physics = N
sprpriority = -1

[State 1270, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 10, 1]
type = VelMul
trigger1 = Time >= 0
x = .91

[State 1270, 2]
type = VelSet
trigger1 = Time >= 25
x = 0

[State 5050, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 8160

[State 1281, 3]
type = SelfState
trigger1 = time = 25
trigger1 = Life <= 0
value = 5150

[State 1281, 3]
type = SelfState
trigger1 = time = 50
trigger1 = Life > 0
value = 5120

;---------------------------------------------------
;真狼牙　やられ
[Statedef 8180]
type = A
movetype = H
physics = N

[State 8180, 1]
type = PalFX
trigger1 = GameTime % 2
time = 1
add = 0,15,75
color = 0
invertall = 1

[State 1280, 2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 5030

[State 8140, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 8140, 4]
type = ChangeState
trigger1 = time = 1
value = 8181

;真狼牙　やられ
[Statedef 8181]
type = A
movetype = H
physics = N

[State 8180, 1]
type = PalFX
trigger1 = GameTime % 2
time = 1
add = 0,15,75
color = 0
invertall = 1
ignorehitpause = 1

[State 1280, 2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 5030

[state 6000, 1]
type  = EnvColor 
trigger1 = timemod = 3,0 && time <= 35 && Life = 0
time = 1
value = 240,0,0
under = 1
ignorehitpause = 1

[state 6000, 2]
type  = EnvColor 
trigger1 = timemod = 3,1 && time <= 35 && Life = 0
time = 1
value = -191,0,0
under = 1
ignorehitpause = 1

[state 6000, 3]
type  = EnvColor 
trigger1 = timemod = 3,2 && time <= 35 && Life = 0
time = 1
value = 192,0,0
under = 1
ignorehitpause = 1

[State 8140, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 8140, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 8185

;真狼牙　やられ
[Statedef 8185]
type = A
movetype = H
physics = N
velset = 0,0

[State 8180, 1]
type = PalFX
trigger1 = GameTime % 2
time = 1
add = 0,15,75
color = 0
invertall = 1

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,3,-3)
y = -9

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-3,3)
y = -9

[State 8145, 1]
type = Velset
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
x = ifelse(Vel X >= 0,2,-2)

[State 5050, 3]
type = VelAdd
trigger1 = Time >= 0
y = .5

[State 1630, 1]
type = VelAdd
trigger1 = Time >= 25
y = .3

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 8

[State 5050, 1]
type = ChangeAnim
triggerall = anim != 5060 ;Not if in hit up anim
trigger1 = AnimTime = 0
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5050

[State 2160, 33]
type = Explod
trigger1 = Vel Y > 0 && Pos Y >= -10
anim = F61
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1

[State 5050, 4]
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
trigger1 = Command = "recovery"
value = 5200

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;足払いやられ
[Statedef 8190]
type = S
movetype = H
physics = S
poweradd = 0
velset = 0,0
ctrl = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1500, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = 5010

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 8191

;足払いやられ
[Statedef 8191]
type = S
movetype = H
physics = S
poweradd = 0
velset = 0,0
ctrl = 0

[State 1500, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 410, 4]
type = PosAdd
trigger1 = Time = 2
trigger2 = Time = 7
y = -4

[State 410, 4]
type = PosSet
trigger1 = Time = 12
y = 0

[State 410, 4]
type = ChangeAnim
trigger1 = Time = 0
value = 5000

[State 410, 4]
type = ChangeAnim
trigger1 = Time = 2
value = 5030

[State 410, 4]
type = ChangeAnim
trigger1 = Time = 7
value = 5050

[State 2160, 33]
type = Explod
trigger1 = Time = 12
anim = F61
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 12
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 8145, 2]
type = EnvShake
trigger1 = Time = 12
time = 6

[State 410, 4]
type = SelfState
trigger1 = Time = 12
value = 5110

;蒼龍　覚醒前やられ
[Statedef 8200]
type = A
movetype = H
physics = N

[State 8140, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = animexist(5060)
value = 5060

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !animexist(5060)
value = 5030

[State 8140, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 8201

;蒼龍　覚醒前やられ
[Statedef 8201]
type = A
movetype = H
physics = N
velset = 0,0

[State 8145, 1]
type = Velset
trigger1 = Time = 0
x = ifelse(p2dist X >= 0,-1.3,1.3)
y = -12

[State 8145, 1]
type = VelAdd
trigger1 = Time > 0
y = .5

[State 8145, 1]
type = VelAdd
trigger1 = Time >= 30
y = .3

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 8

[State 8145, 2]
type = ChangeAnim
trigger1 = animexist(5061)
trigger1 = Time = 0
value = 5061

[State 8145, 3]
type = ChangeAnim
trigger1 = !animexist(5061)
trigger1 = Time = 5
value = 5050

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;ガード不能技やられ
[Statedef 8210]
type = S
movetype = H
physics = S
velset = 0,0

[State 5000, 5]
type = ChangeState
trigger1 = Life = 0
value = 9970

[State 5000, 5]
type = ChangeState
trigger1 = Pos Y != 0 
value = 9910

[State 5000, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 3]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 4]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = a

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[State 5000, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 8211

;---------------------------------------------------------------------------
[Statedef 8211]
type    = S
movetype= H
physics = S
velset = 0,0

[State 5000, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 8210

[State 310, 0]
type = PosAdd
trigger1 = animtime = 0
x = -20

[State 8145, 2]
type = EnvShake
trigger1 = animtime = 0
time = 6

[State 8145, 4]
type = SelfState
trigger1 = animtime = 0
value = 5100

;---------------------------------------------------------------------------
;真・狼牙やられ
[Statedef 8215]
type = S
movetype = H
physics = S
velset = 0,0

[State 5000, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 3]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[State 5000, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 8211

;真・狼牙やられ
[Statedef 8220]
type = S
movetype = H
physics = S
velset = 0,0

[State 5000, 1]
type = ChangeAnim
trigger1 = Time <= 10
value = 5017

[State 5000, 5]
type = SelfState
trigger1 = time = 28
value = 0;8211
Ctrl = 1

;--------------------------------------------------
;うつぶせやられ２
[Statedef 8230]
type = A
movetype = H
physics = N

[State 8140, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
value = 5030

[State 8140, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 8235

;うつぶせやられ２
[Statedef 8235]
type = A
movetype = H
physics = N
velset = 0,0

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=1
x = ifelse(facing=1,1.3,-1.3)
y = -8

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = enemy,facing=-1
x = ifelse(facing=1,-1.3,1.3)
y = -8

[State 8145, 1]
type = VelAdd
trigger1 = Time > 0
y = .5

[State 8145, 1]
type = VelAdd
trigger1 = Time >= 30
y = .3

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 8

[State 8145, 2]
type = ChangeAnim
trigger1 = animexist(5061)
trigger1 = Time = 0
value = 5061

[State 8145, 3]
type = ChangeAnim
trigger1 = !animexist(5061)
trigger1 = Time = 5
value = 5050

[State 5050, 4]
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
trigger1 = Command = "recovery"
value = 5200

[State 8145, 4]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 8146

[Statedef 30005]
type = S
movetype = H
physics = S
ctrl = 0

[State 30000, 1]
type = ChangeState
trigger1 = life <= 0
value = 5040
ctrl = 0

[State 30000, 1]
type = ChangeState
trigger1 = time >= 1
value = 14041
ctrl = 0

;--------------------------------------------------
[StateDef 10000]
ctrl=0

[State 825]
type = assertspecial
trigger1 = 1
flag = invisible

[State 10000,間違いで本体が来たら立ちへ移行]
type=selfstate
trigger1=!ishelper
value=0

[State 10000,プレイヤー判定]
type=varset
Trigger1=command="up"&&root,command="up"
Trigger2=command="down"&&root,command="down"
Trigger3=command="back"&&root,command="back"
Trigger4=command="fwd"&&root,command="fwd"
Trigger5=command="a"&&root,command="a"
Trigger6=command="b"&&root,command="b"
Trigger7=command="c"&&root,command="c"
Trigger8=command="x"&&root,command="x"
Trigger9=command="y"&&root,command="y"
Trigger10=command="z"&&root,command="z"
Trigger11=command="s"&&root,command="s"
var(59)=0

[State 10000,立ったら消失]
Type = DestroySelf
TriggerAll=isHelper
Trigger1=root,var(59)||var(59)=-1
Trigger2=command="up"&&root,command="up"
Trigger3=command="down"&&root,command="down"
Trigger4=command="back"&&root,command="back"
Trigger5=command="fwd"&&root,command="fwd"
Trigger6=command="a"&&root,command="a"
Trigger7=command="b"&&root,command="b"
Trigger8=command="c"&&root,command="c"
Trigger9=command="x"&&root,command="x"
Trigger10=command="y"&&root,command="y"
Trigger11=command="z"&&root,command="z"
Trigger12=command="s"&&root,command="s"

[State 10000,AIﾌﾗｸﾞON]
Type=varset
TriggerAll=var(59)!=-1
Trigger1=root,command="up"
Trigger2=root,command="down"
Trigger3=root,command="back"
Trigger4=root,command="fwd"
Trigger5=root,command="a"
Trigger6=root,command="b"
Trigger7=root,command="c"
Trigger8=root,command="x"
Trigger9=root,command="y"
Trigger10=root,command="z"
Trigger11=root,command="s"
var(59)=-1

;＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿
;＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/Statedef -2＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/
;￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣
[Statedef -2]

[State -2, CPU小次郎]
type = VarSet
trigger1 = p2name = "Kojiro"
trigger2 = p4name = "Kojiro"
trigger3 = p2name = "Sanada Kojiro"
trigger4 = p4name = "Sanada Kojiro"
trigger5 = p2name = "Kojiroh Sanada"
trigger6 = p4name = "Kojiroh Sanada"
trigger7 = p2name = "真田 小次郎"
trigger8 = p4name = "真田 小次郎"
var(14) = 1

[State -2, CPU骸]
type = VarSet
trigger1 = p2name = "Mukuro"
trigger2 = p4name = "Mukuro"
var(14) = 2


[State -2, 剣質ゲージ重複防止]
type = VarSet
triggerall = stateno = [190,191]
triggerall = numpartner
triggerall = (partner,pos X - pos X)*facing > 0
trigger1 = p3name = "Moriya Minakata"
trigger1 = Partner,authorName = "DALA arranged by Ildanaf"
trigger2 = p3name = "Kanzaki Juzo"
trigger2 = Partner,authorName = "Nyankoro arranged by Ildanaf"
trigger3 = p3name = "kaede"
trigger3 = Partner,authorName = "DALA arranged by Ildanaf"
trigger4 = p3name = "washizuka"
trigger4 = Partner,authorName = "DALA arranged by Ildanaf"
trigger5 = p3name = "真田 小次郎"
trigger5 = Partner,authorName = "ホタリュソ(代理) arranged by Ildanaf"
var(43) = 1

;-------------------------------------------------------------
[State -2, 1]
type = PlaySnd
triggerall = random < 500
triggerall = time = 1
triggerall = stateno = 5000
trigger1 = anim = 5000
trigger2 = anim = 5001
trigger3 = anim = 5010
trigger4 = anim = 5011
value = 5000,0

[State -2, 2]
type = PlaySnd
triggerall = random < 500
triggerall = time = 1
triggerall = stateno = 5010
trigger1 = anim = 5020
trigger2 = anim = 5021
value = 5000,0

[State -2, 3]
type = PlaySnd
triggerall = random < 500
triggerall = time = 1
triggerall = stateno = 5000
trigger1 = anim = 5002
trigger2 = anim = 5012
value = 5000,1

[State -2, 4]
type = PlaySnd
trigger1 = random < 500
trigger1 = time = 1
trigger1 = stateno = 5010
trigger1 = anim = 5022
value = 5000,1

[State -2, 5]
type = PlaySnd
trigger1 = random < 250
trigger1 = time = 1
trigger1 = stateno = 5100
value = 5100,0
;--------------------------------------------------
[State -2, 1]
type = StopSnd
trigger1 = stateno != 100
trigger1 = stateno != 2002
trigger1 = stateno != 11001
trigger1 = stateno != 11002
trigger1 = stateno != 14041
channel = 1
;--------------------------------------------------
[State -2, 1]
type = Width
trigger1 = FrontEdgeDist <= 10
trigger1 = stateno != 41 && movetype != H
value = 2,0
;--------------------------------------------------
[State -2, 1]
type = VelSet
trigger1 = stateno = 52
x = 0
;--------------------------------------------------
[State -2, 0]
type = Varset
trigger1 = movetype = H
trigger1 = enemynear,HitDefAttr = SCA, NA,NT,NP,SA,ST,SP,HA,HT,HP
v = 1
value = var(4)

[State -2, 0]
type = VarSet
triggerall = roundstate = 2
trigger1 = timemod = 2,0
v = 2
value = enemynear,power

[State -2, 0]
type = VarSet
triggerall = roundstate = 2
trigger1 = timemod = 2,1
v = 3
value = enemynear,power

[State -2, 0]
type = Varadd
triggerall = movetype = H
triggerall = enemynear,prevstateno != 0
trigger1 = timemod = 2,1
trigger1 = var(3) - var(2) <= -500
trigger2 = timemod = 2,0
trigger2 = var(2) - var(3) <= -500
v = 4
value = 1

;--------------------------------------------------
;varリセット
[State -2, 0]
type = VarSet
trigger1 = stateno = 0
trigger2 = stateno = 5120
trigger3 = ctrl = 1
trigger4 = winKO = 1
v = 1
value = 0

[State -2, 0]
type = Varset
trigger1 = movetype != H
trigger1 = enemynear,movetype != A
trigger2 = stateno = 0
trigger3 = stateno = 5120
trigger4 = ctrl = 1
trigger5 = anim = 0
v = 4
value = 0

[State -2, 0]
type = VarSet
trigger1 = Stateno != 1600
trigger2 = Stateno != 1610
trigger2 = movetype = H
v = 16
value = 0

[State -2, 1]
type = VarSet
trigger1 = movetype = H
v = 10
value = 0

[State -2, 2]
type = VarSet
trigger1 = stateno != 2002 && stateno != 2005
var(11) = 0

[State -2, 2]
type = varset
triggerall = stateno != 5120
triggerall = stateno != 350
triggerall = stateno != 4010
triggerall = stateno != 4110
trigger1 = stateno = 0
trigger2 = movetype = H
trigger3 = winKO = 1
var(20) = 0

[State -2, 2]
type = varset
trigger1 = animtime <= 0 - 10
var(20) = 0

[State -2, 2]
type = varset
triggerall = stateno != 5120
triggerall = stateno != 350
trigger1 = stateno = 0
trigger2 = movetype = H
trigger3 = winKO = 1
var(22) = 0

[State -2, 3]
type = varset
trigger1 = animtime <= 0 - 5
trigger1 = stateno != 350
var(22) = 0

[State -2, 2]
type = varset
triggerall = stateno != 5120
trigger1 = stateno = 0
trigger2 = movetype = H
trigger3 = winKO = 1
trigger4 = var(20) != 0
var(22) = 0

[State -2, 3]
type = varset
trigger1 = animtime <= 0 - 10
var(22) = 0

[State -2, 4]
type = varset
triggerall = stateno != 5120
trigger1 = stateno = 0
trigger2 = movetype = H
trigger3 = winKO = 1
trigger4 = ctrl = 1
var(23) = 0

[State -2, 4]
type = VarSet
trigger1 = stateno != 2500 && stateno != 2600
var(25) = 0

[State -2, 5]
type = VarSet
triggerall = stateno != 5120
trigger1 = stateno = 0
trigger2 = movetype = H
trigger3 = winKO = 1
trigger4 = ctrl = 1
trigger5 = stateno = 11010
var(27) = 0

[State -2, 6]
type = VarSet
trigger1 = stateno != 12010 && stateno != 12020 && stateno != 12030
var(33) = 0

[State -2, 1]
type = Varset
trigger1 = stateno != 195
var(39) = 0

[State -2, 7]
type = VarSet
trigger1 = stateno = 610 && movehit
trigger1 = p2statetype != A
var(48) = 1

[State -2, 7]
type = VarSet
trigger1 = p2movetype != H
var(48) = 0

[State -2, 7]
type = VarSet
trigger1 = p2movetype != H
var(49) = 0

;--------------------------------------------------
;乱舞奥義用
[State -2, 0]
type = VarAdd
trigger1 = var(50) > 0
v = 50
value = -1

[State -2, 1]
type = VarSet
trigger1 = var(50) < 0
trigger2 = Life <= 0
trigger3 = WinKO = 1
var(50) = 0
ignorehitpause = 0

[State -2, 2]
type = AttackMulset
Trigger1 = var(50) > 0
value = 0.4
ignorehitpause = 1

[State -2, 2]
type =Palfx
trigger1 = (GameTime%2)=0
trigger1 = Var(50) > 0
time = 1
add = 6,55,210
ignorehitpause = 1

[State -2, 3]
type = ctrlset
triggerall = var(50) > 0
trigger1 = movecontact
trigger1 = stateno != 210
trigger1 = stateno != 2002
trigger1 = stateno != 2500
trigger1 = stateno != 2510
trigger1 = stateno != 2600
trigger1 = stateno != 2610
trigger1 = stateno != 2650
trigger2 = stateno = 2005 && time >= 12
value = 1

[State -2, 8]
type = modifyexplod
trigger1 = var(50) > 0
ID = 13012
scale = (1128 - Var(50)) / 1128.0,1
ignorehitpause = 1
ignorepausetime = 1

[State -2, 9]
type = RemoveExplod
trigger1 = var(50) <= 0
trigger1 = stateno != 6100
ID = 13010

[State -2, 10]
type = RemoveExplod
trigger1 = var(50) <= 0
trigger1 = stateno != 6100
ID = 13012

[State -2, 11]
type = RemoveExplod
trigger1 = var(50) <= 0
trigger1 = stateno != 6100
ID = 13015

[State -2, 12]
type = Explod
trigger1 = var(13) = 1
trigger1 = var(50) = 1
anim = 13011
pos = 8,212+ifelse(var(31)=1,20,0)
postype = left
bindtime = 1
vel = -7,0
removetime = 16
sprpriority = 7
ownpal = 1
ontop = 1
supermove = 1
ignorepausetime = 1
ignorehitpause = 1

[State -2, 13]
type = explod
trigger1 = var(13) = 2
trigger1 = var(50) = 1
anim = 13016
pos = -80,212+ifelse(var(31)=1,20,0)
postype = right
bindtime = 1
vel = 7,0
removetime = 16
sprpriority = 7
ownpal = 1
ontop = 1
supermove = 1
ignorepausetime = 1
ignorehitpause = 1

;--------------------------------------------------
;カウンター用
[State -2, 1]
type = Explod
trigger1 = NumExplod(19998) = 0 && !Win = 1 && var(12) = 1 && var(13) = 1
trigger1 = movehit && movetype = A
trigger1 = stateno != 3000
trigger1 = stateno != 3100
trigger1 = stateno != 3200
trigger1 = stateno != 900
trigger1 = stateno != 901
trigger1 = stateno != 911
trigger1 = stateno != 4010
trigger1 = stateno != 4110
trigger1 = stateno != 4220
anim = 19998
ID = 19998
pos = 10,60
postype = left
sprpriority = 5
removetime = 40
ontop = 1
shadow = 0,0,0
ownpal = 1
bindtime = -1
ignorehitpause = 1

[State -2, 2]
type = Explod
trigger1 = NumExplod(19998) = 0 && !Win = 1 && var(12) = 1 && var(13) = 2
trigger1 = movehit && movetype = A
trigger1 = stateno != 3000
trigger1 = stateno != 3100
trigger1 = stateno != 3200
trigger1 = stateno != 900
trigger1 = stateno != 901
trigger1 = stateno != 911
trigger1 = stateno != 4010
trigger1 = stateno != 4110
trigger1 = stateno != 4220
anim = 19999
ID = 19998
pos = -77,50
postype = right
sprpriority = 5
removetime = 40
ontop = 1
shadow = 0,0,0
ownpal = 1
bindtime = -1
ignorehitpause = 1

[State -2, 3]
type = Explod
triggerall = NumExplod(19998) = 0 && !Win = 1 && var(12) = 1 && var(13) = 1
trigger1 = ProjHit1000 = 1
trigger2 = ProjHit11010 = 1
anim = 19998
ID = 19998
pos = 10,60
postype = left
sprpriority = 5
removetime = 40
ontop = 1
shadow = 0,0,0
ownpal = 1
bindtime = -1
ignorehitpause = 1

[State -2, 4]
type = Explod
triggerall = NumExplod(19998) = 0 && !Win = 1 && var(12) = 1 && var(13) = 2
trigger1 = ProjHit1000 = 1
trigger2 = ProjHit11010 = 1
anim = 19999
ID = 19998
pos = -77,50
postype = right
sprpriority = 5
removetime = 40
ontop = 1
shadow = 0,0,0
ownpal = 1
bindtime = -1
ignorehitpause = 1

[State -2, 5]
type = Varset
trigger1 = P2movetype = A && var(12) != -1
var(12) = 1

[State -2, 6]
type = Varset
trigger1 = P2movetype != A && var(12) != -1
var(12) = 0

;--------------------------------------------------
[State -2, 1]
type = VarSet
trigger1 = Facing = 1 && roundstate = 0
var(13) = 1

[State -2, 2]
type = VarSet
trigger1 = Facing = -1 && roundstate = 0
var(13) = 2

;---------------------------------------------------------------------------
[State -2, hazikiboushi]
type = VarSet
trigger1 = enemynear,movetype = A
trigger1 = enemynear,HitDefAttr = SCA, NT,ST,HT
var(18) = 1

[State -2, hazikiboushi]
type = VarSet
trigger1 = enemynear,movetype != A
var(18) = 0

;---------------------------------------------------------------------------
[State -2, nageboushi]
type = VarSet
trigger1 = enemynear,stateno = 5120
var(19) = 12

[State -2, nageboushi]
type = VarAdd
trigger1 = var(19) > 0
trigger1 = enemynear,statetype != L
v = 19
value = -1

;---------------------------------------------------------------------------
;斬りKO
[State -2, 1]
type = helper
triggerall = winko && Numhelper(6000) = 0 && var(21) = 0 && movetype = A
trigger1 = stateno = 210 || stateno = 230 || stateno = 240 || stateno = 280 || stateno = 291 || stateno = 296
trigger1 = movecontact
trigger2 = stateno = 410 || stateno = 600 || stateno = 610 || stateno = 640 || stateno = 1510 || stateno = 1610
trigger2 = movecontact
trigger3 = stateno = 1650 || stateno = 2000 || stateno = 2100 || stateno = 2200 || stateno = 2500 || stateno = 2600
trigger3 = movecontact
trigger4 = stateno = 2700|| stateno = 14001 || stateno = 14020 || stateno = 14030 || stateno = 14040
trigger4 = movecontact
trigger5 = stateno = 3200 || stateno = 12100
helpertype = normal
id = 6000
pos = 999,999
stateno = 6000
keyctrl = 0
persistent = 0
ignorehitpause = 1

;打撃KO
[State -2, 1]
type = helper
triggerall = winko && Numhelper(6000) = 0; && var(21) = 0 && movetype = A
trigger1 = stateno != 210 || stateno != 230 || stateno != 240 || stateno != 280 || stateno != 291 || stateno != 296
trigger1 = movecontact
trigger2 = stateno != 410 || stateno != 600 || stateno != 610 || stateno != 640 || stateno != 1510 || stateno != 1610
trigger2 = movecontact
trigger3 = stateno != 1650 || stateno != 2000 || stateno != 2100 || stateno != 2200 || stateno != 2500 || stateno != 2600
trigger3 = movecontact
trigger4 = stateno != 2700|| stateno != 14001 || stateno != 14020 || stateno != 14030 || stateno != 14040
trigger4 = movecontact
trigger5 = stateno != 3200 || stateno != 12100
helpertype = normal
id = 6000
pos = 999,999
stateno = 6001
keyctrl = 0
persistent = 0
ignorehitpause = 1

[State -2, 2]
type = PlaySnd
triggerall = P2movetype = H && winko && Numhelper(6000) = 0 && var(21) = 0
trigger1 = P2stateno = 9960 
trigger2 = P2stateno = 8180
value = 6000,1
persistent = 0
ignorehitpause = 1

[State -2, 3]
type = varset
trigger1 = winko = 1
v = 21
value = 1
ignorehitpause = 1

;---------------------------------------------------------
;剣質・タイプ用
[State -2, 力]
type = varset
triggerall = stateno = 191
trigger1 = PalNo = 1
trigger2 = PalNo = 4
trigger3 = PalNo = 7
trigger4 = PalNo = 10
v = 30
value = 1

[State -2, 技]
type = varset
triggerall = stateno = 191
trigger1 = PalNo = 2
trigger2 = PalNo = 5
trigger3 = PalNo = 8
trigger4 = PalNo = 11
v = 30
value = 2

[State -2, 極]
type = varset
triggerall = stateno = 191
trigger1 = PalNo = 3
trigger2 = PalNo = 6
trigger3 = PalNo = 9
trigger4 = PalNo = 12
v = 30
value = 3

[State -2, タイプ]
type = varset
trigger1 = PalNo = [7,12]
v = 31
value = 1

[state -2]
type = removeexplod
triggerall = numexplod(21020) > 0
trigger1 = life <= var(17)
trigger2 = Matchover = 1
id = 21020
[state -2]
type = removeexplod
triggerall = numexplod(21025) > 0
trigger1 = life <= var(17)
trigger2 = Matchover = 1
id = 21025
[state -2]
type = removeexplod
triggerall = numexplod(21030) > 0
trigger1 = life > var(17)
trigger2 = roundstate = [3,4]
trigger3 = Matchover = 1
id = 21030
[state -2]
type = removeexplod
triggerall = numexplod(21035) > 0
trigger1 = life > var(17)
trigger2 = roundstate = [3,4]
trigger3 = Matchover = 1
id = 21035

[state -2]
type = removeexplod
triggerall = numexplod(21021) > 0
trigger1 = life <= var(17)
trigger2 = Matchover = 1
id = 21021
[state -2]
type = removeexplod
triggerall = numexplod(21026) > 0
trigger1 = life <= var(17)
trigger2 = Matchover = 1
id = 21026
[state -2]
type = removeexplod
triggerall = numexplod(21031) > 0
trigger1 = life > var(17)
trigger2 = roundstate = [3,4]
trigger3 = Matchover = 1
id = 21031
[state -2]
type = removeexplod
triggerall = numexplod(21036) > 0
trigger1 = life > var(17)
trigger2 = roundstate = [3,4]
trigger3 = Matchover = 1
id = 21036

[state -2]
type = removeexplod
triggerall = numexplod(21022) > 0
trigger1 = life <= var(17)
trigger2 = Matchover = 1
id = 21022
[state -2]
type = removeexplod
triggerall = numexplod(21027) > 0
trigger1 = life <= var(17)
trigger2 = Matchover = 1
id = 21027
[state -2]
type = removeexplod
triggerall = numexplod(21032) > 0
trigger1 = life > var(17)
trigger2 = roundstate = [3,4]
trigger3 = Matchover = 1
id = 21032
[state -2]
type = removeexplod
triggerall = numexplod(21037) > 0
trigger1 = life > var(17)
trigger2 = roundstate = [3,4]
trigger3 = Matchover = 1
id = 21037


[State -2, 7]
type = Explod
triggerall = Var(30) = 1
triggerall = var(31) = 1
triggerall = var(13) = 1
triggerall = numexplod(21020) = 0
trigger1 = life > var(17)
trigger1 = stateno = [191,193]
trigger1 = animtime = 0
trigger2 = life > var(17)
trigger2 = !(RoundsExisted = 0 && roundstate = [0,1])
trigger3 = roundstate = [3,4]
trigger3 = Matchover = 0
anim = 21020
id = 21020
pos = ifelse(var(43)=1,65,35),200
postype = left
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 1
triggerall = var(31) = 1
triggerall = var(13) = 2
triggerall = numexplod(21025) = 0
trigger1 = life > var(17)
trigger1 = stateno = [191,193]
trigger1 = animtime = 0
trigger2 = life > var(17)
trigger2 = !(RoundsExisted = 0 && roundstate = [0,1])
trigger3 = roundstate = [3,4]
trigger3 = Matchover = 0
anim = 21020
id = 21025
pos = ifelse(var(43)=1,-65,-35),200
postype = right
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 1
triggerall = var(31) = 1
triggerall = var(13) = 1
trigger1 = life <= var(17)
trigger1 = numexplod(21030) = 0
trigger1 = roundstate = 2
anim = 21030
id = 21030
pos = ifelse(var(43)=1,65,35),200
postype = left
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 1
triggerall = var(31) = 1
triggerall = var(13) = 2
trigger1 = life <= var(17)
trigger1 = numexplod(21035) = 0
trigger1 = roundstate = 2
anim = 21030
id = 21035
pos = ifelse(var(43)=1,-65,-35),200
postype = right
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 2
triggerall = var(31) = 1
triggerall = var(13) = 1
triggerall = numexplod(21021) = 0
trigger1 = life > var(17)
trigger1 = stateno = [191,193]
trigger1 = animtime = 0
trigger2 = life > var(17)
trigger2 = !(RoundsExisted = 0 && roundstate = [0,1])
trigger3 = roundstate = [3,4]
trigger3 = Matchover = 0
anim = 21021
id = 21021
pos = ifelse(var(43)=1,65,35),200
postype = left
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 2
triggerall = var(31) = 1
triggerall = var(13) = 2
triggerall = numexplod(21026) = 0
trigger1 = life > var(17)
trigger1 = stateno = [191,193]
trigger1 = animtime = 0
trigger2 = life > var(17)
trigger2 = !(RoundsExisted = 0 && roundstate = [0,1])
trigger3 = roundstate = [3,4]
trigger3 = Matchover = 0
anim = 21021
id = 21026
pos = ifelse(var(43)=1,-65,-35),200
postype = right
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 2
triggerall = var(31) = 1
triggerall = var(13) = 1
trigger1 = life <= var(17)
trigger1 = numexplod(21031) = 0
trigger1 = roundstate = 2
anim = 21031
id = 21031
pos = ifelse(var(43)=1,65,35),200
postype = left
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 2
triggerall = var(31) = 1
triggerall = var(13) = 2
trigger1 = life <= var(17)
trigger1 = numexplod(21036) = 0
trigger1 = roundstate = 2
anim = 21031
id = 21036
pos = ifelse(var(43)=1,-65,-35),200
postype = right
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 3
triggerall = var(31) = 1
triggerall = var(13) = 1
triggerall = numexplod(21022) = 0
trigger1 = life > var(17)
trigger1 = stateno = [191,193]
trigger1 = animtime = 0
trigger2 = life > var(17)
trigger2 = !(RoundsExisted = 0 && roundstate = [0,1])
trigger3 = roundstate = [3,4]
trigger3 = Matchover = 0
anim = 21022
id = 21022
pos = ifelse(var(43)=1,65,35),200
postype = left
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 3
triggerall = var(31) = 1
triggerall = var(13) = 2
triggerall = numexplod(21027) = 0
trigger1 = life > var(17)
trigger1 = stateno = [191,193]
trigger1 = animtime = 0
trigger2 = life > var(17)
trigger2 = !(RoundsExisted = 0 && roundstate = [0,1])
trigger3 = roundstate = [3,4]
trigger3 = Matchover = 0
anim = 21022
id = 21027
pos = ifelse(var(43)=1,-65,-35),200
postype = right
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 3
triggerall = var(31) = 1
triggerall = var(13) = 1
trigger1 = life <= var(17)
trigger1 = numexplod(21032) = 0
trigger1 = roundstate = 2
anim = 21032
id = 21032
pos = ifelse(var(43)=1,65,35),200
postype = left
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 3
triggerall = var(31) = 1
triggerall = var(13) = 2
trigger1 = life <= var(17)
trigger1 = numexplod(21037) = 0
trigger1 = roundstate = 2
anim = 21032
id = 21037
pos = ifelse(var(43)=1,-65,-35),200
postype = right
bindtime = -1
sprpriority = 98
ownpal = 1

;---------------------------------------------------------
;イントロ用
[State -2, 1]
type = assertspecial
trigger1 = roundno = 1
trigger1 = roundstate < 2
trigger2 = roundno > 1
trigger2 = roundsexisted <= 0
trigger2 = roundstate < 2
trigger3 = winko = 1
flag = NoBarDisplay
persistent = 0
ignorehitpause = 1

;-----------------------------------------------
;連殺斬用
[State -2, 1]
type = VarAdd
triggerall = var(30) > 1
triggerall = time = 1
trigger1 = stateno = 200
trigger2 = stateno = 210
trigger3 = stateno = 220
trigger4 = stateno = 250
v = 23
value = 1
persistent = 0
;--------------------------------------------------
[State -2, movetype用]
type = StateTypeSet
triggerall = movetype = A
trigger1 = stateno = 200 && animelem = 4
trigger2 = stateno = 210 && animelem = 5
trigger3 = stateno = 220 && animelem = 4
trigger4 = stateno = 230 && animelem = 6
trigger5 = stateno = 240 && animelem = 7
trigger6 = stateno = 250 && animelem = 7
trigger7 = stateno = 260 && animelem = 6
trigger8 = stateno = 270 && animelem = 5
trigger9 = stateno = 280 && animelem = 7
trigger10 = stateno = 291 && animelem = 4
trigger11 = stateno = 300 && animelem = 4
trigger12 = stateno = 311 && animelem = 4
trigger13 = stateno = 312 && animelem = 5
trigger14 = stateno = 400 && animelem = 4
trigger15 = stateno = 410 && animelem = 6
trigger16 = stateno = 420 && animelem = 4
trigger17 = stateno = 430 && animelem = 6
trigger18 = stateno = 600 && animelem = 5
trigger19 = stateno = 610 && animelem = 4
trigger20 = stateno = 620 && animelem = 4
trigger21 = stateno = 1000 && animelem = 7
trigger22 = stateno = 1101 && animelem = 8
trigger23 = stateno = 1500 && animelem = 9
trigger24 = stateno = 1600 && animelem = 9
trigger25 = stateno = 2100 && animelem = 5
trigger26 = stateno = 2210 && animelem = 4
trigger27 = stateno = 2310 && animelem = 4
trigger28 = stateno = 2410 && animelem = 5
trigger29 = stateno = 2500 && animelem = 5
trigger30 = stateno = 2510 && animelem = 12
trigger31 = stateno = 2600 && animelem = 5
trigger32 = stateno = 2610 && animelem = 27
trigger33 = stateno = 900 && time = 1
movetype = I

[State 50, 4]
type = AfterImage
trigger1 = stateno != 4000
trigger1 = stateno != 4100
trigger1 = stateno != 4200
time = 1
framegap = 3
length = 8
ignorehitpause = 1

;--------------------------------------------------
;剣質ダメージ設定
[State -2, 1]
type = AttackMulset
trigger1 = var(50) = 0 && var(12) = 0
value = ifelse(var(30)=1,1,ifelse(var(30)=2,0.6,0.7))
ignorehitpause = 1

[State -2, カウンター]
type = AttackMulset
trigger1 = var(12) != 0
value = ifelse(var(30)=1,1.2,ifelse(var(30)=2,0.8,0.9))
ignorehitpause = 1

[State -2, 0]
type = DefenceMulset
trigger1 = fvar(20) = 1
trigger1 = life > var(17)*2
value = ifelse(var(30)=3,fvar(21),1)*ifelse(var(1)>=3,0.3,ifelse(var(1)=2,0.444,ifelse(var(1)=1,0.666,1)))
ignorehitpause = 1

[State -2, 0]
type = defenceMulSet
trigger1 = fvar(20) = 1
trigger1 = life <= var(17)*2
value = ifelse(var(30)=3,fvar(21),1)*0.8*ifelse(var(1)>=3,0.3,ifelse(var(1)=2,0.444,ifelse(var(1)=1,0.666,1)))

[State -2, 1]
type = defenceMulSet
trigger1 = fvar(20) = 1
trigger1 = life <= var(17)
value = ifelse(var(30)=3,fvar(21),1)*0.7*ifelse(var(1)>=3,0.3,ifelse(var(1)=2,0.444,ifelse(var(1)=1,0.666,1)))

[State -2, 2]
type = defenceMulSet
trigger1 = fvar(20) = 1
trigger1 = life <= var(17)*0.6
value = ifelse(var(30)=3,fvar(21),1)*0.6*ifelse(var(1)>=3,0.3,ifelse(var(1)=2,0.444,ifelse(var(1)=1,0.666,1)))

[State -2, 5]
type = PlayerPush
trigger1 = statetype = A
trigger1 = p2stateno != 155
trigger1 = p2statetype = A
trigger1 = movetype != H
trigger1 = stateno != 2210
value = 0


;疾空殺エフェクト用-----------------------
[State -2, ヒット]
type = Explod
trigger1 = ProjHit1000 = 1
anim = 1030
pos =  10,-49
postype = p2
sprpriority = 10
supermove = 1
bindtime = 1
facing = -1

[State -2, ヒット]
type = Explod
trigger1 = ProjHit1100 = 1
anim = 1030
pos =  10,-49
postype = p2
sprpriority = 10
supermove = 1
bindtime = 1
facing = 1

;------------------------------------------------------
[State -2, 0]
type = Explod
trigger1 = var(33) = 1
trigger1 = p2stateno = 12200
id = 20210
anim = ifelse(p2Life<=1,20250,20210)
pos = 0, -60
postype = p2
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State -2, 0]
type = Explod
trigger1 = stateno = 12100 && time = 50
trigger1 = p2stateno = 12201
id = 20240
anim = 20240
pos = -10, -70
postype = p2
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State -2, 0]
type = PlayerPush
trigger1 = var(8) = 1
value = 0
;------------------------------------------------------
[State -2, 血１]
type = VarSet
triggerall = movehit
trigger1 = stateno = 210
trigger2 = stateno = 220
trigger3 = stateno = 291
trigger4 = stateno = 600
trigger5 = stateno = 610
trigger6 = stateno = 2500
trigger7 = stateno = 2510
trigger8 = stateno = 2600
trigger9 = stateno = 2610
trigger10 = stateno = 11030
trigger11 = stateno = 11040
trigger12 = stateno = 14060
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[State -2, 血１(飛び道具)]
type = VarSet
trigger1 = ProjHit1000 = 1 || ProjHit1100 = 1
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[State -2, 血１]
type = VarSet
trigger1 = 1
v = 35
value = 0
ignorehitpause = 0

[State -2, 血２]
type = VarSet
triggerall = movehit
trigger1 = stateno = 311
trigger2 = stateno = 312
trigger3 = stateno = 410
trigger4 = stateno = 2210
trigger5 = stateno = 2310
v = 36
value = 1
persistent = 0
ignorehitpause = 1
[State -2, 血２]
type = VarSet
trigger1 = 1
v = 36
value = 0
ignorehitpause = 0

[State -2, 血３]
type = VarSet
triggerall = movehit
trigger1 = stateno = 230
trigger2 = stateno = 250
trigger3 = stateno = 280
trigger4 = stateno = 1500
trigger5 = stateno = 1600
trigger6 = stateno = 2100
trigger7 = stateno = 2410
v = 37
value = 1
persistent = 0
ignorehitpause = 1
[State -2, 血３]
type = VarSet
trigger1 = 1
v = 37
value = 0
ignorehitpause = 0

[State -2, 血４]
type = VarSet
trigger1 = movehit
trigger1 = stateno = 240
v = 38
value = 1
persistent = 0
ignorehitpause = 1
[State -2, 血４]
type = VarSet
trigger1 = 1
v = 38
value = 0
ignorehitpause = 0

[State -2, 3]
type = Explod
trigger1 = NumExplod(20200) = 0
trigger1 = var(35) = 1
id = 20200
anim = 20200
pos = 0, -60
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State -2, 3]
type = Explod
trigger1 = NumExplod(20210) = 0
trigger1 = var(36) = 1
id = 20210
anim = 20210
pos = 0, -50
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State -2, 3]
type = Explod
trigger1 = NumExplod(20220) = 0
trigger1 = var(37) = 1
id = 20220
anim = 20220
pos = 0, -60
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State -2, 3]
type = Explod
trigger1 = NumExplod(20230) = 0
trigger1 = var(38) = 1
id = 20230
anim = 20230
pos = 0, -60
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State -2, 0]
type = null;AssertSpecial
trigger1 = stateno = 12020
flag = nokoslow
ignorehitpause = 1

[State -2, 3]
type = TargetState
trigger1 = ProjHit1000 = 1 || ProjHit1100 = 1
value = ifelse(p2statetype = A,9910,ifelse(p2statetype = C,9965,9960))
ignorehitpause = 1
persistent = 0

;---------------------------------------------------------------------------
[State -2, 0]
type = VarAdd
trigger1 = fvar(10) > 0
fvar(10) = -1

[State -2, 1]
type = VarSet
trigger1 = fvar(10) < 0
trigger2 = Life <= 0
trigger3 = WinKO = 1
fvar(10) = 0
ignorehitpause = 0

;---------------------------------------------------------------------------
[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = p2statetype = S || p2statetype = C
triggerall = NumPartner = 0
trigger1 = stateno = 600 && moveguarded
trigger2 = stateno = 620 && moveguarded
fvar(16) = 1

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = p2statetype = S || p2statetype = C
triggerall = NumPartner
triggerall = partner,Life = 0
trigger1 = stateno = 600 && moveguarded
trigger2 = stateno = 620 && moveguarded
fvar(16) = 1

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = p2statetype = S || p2statetype = C
triggerall = stateno = 610 && moveguarded
trigger1 = NumPartner = 0
trigger2 = NumPartner
trigger2 = partner,Life = 0
fvar(16) = 2

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = p2statetype = S || p2statetype = C
triggerall = stateno = 420 && moveguarded
trigger1 = NumPartner = 0
trigger2 = NumPartner
trigger2 = partner,Life = 0
fvar(16) = 3

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = stateno = 600 || stateno = 610 || stateno = 620 || stateno = 420
triggerall = moveguarded = 1
trigger1 = NumPartner = 0
trigger2 = NumPartner
trigger2 = partner,Life = 0
fvar(17) = 0

[State -2, nageseigyo]
type = VarAdd
triggerall = var(59) != 0
triggerall = fvar(16) > 0
triggerall = p2statetype = S || p2statetype = C
triggerall = NumPartner = 0
trigger1 = enemynear,stateno = [130, 135]
trigger2 = enemynear,stateno = [150, 159]
fvar(17) = 1

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = fvar(16) > 0
triggerall = NumPartner = 0
trigger1 = stateno = 900
trigger2 = enemynear,stateno != [130, 159]
trigger3 = p2statetype = A || p2statetype = L 
trigger4 = var(50) > 0
trigger5 = stateno = [200, 220]
fvar(16) = 0

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = NumPartner = 0
trigger1 = stateno = 900
trigger2 = p2movetype != H
trigger3 = p2statetype = A || p2statetype = L
trigger4 = enemynear,ctrl=1
fvar(17) = 0

[State -2, nageseigyo]
type = VarAdd
triggerall = var(59) != 0
triggerall = fvar(16) > 0
triggerall = p2statetype = S || p2statetype = C
triggerall = NumPartner
triggerall = partner,Life = 0
trigger1 = enemynear,stateno = [130, 135]
trigger2 = enemynear,stateno = [150, 159]
fvar(17) = 1

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = fvar(16) > 0
triggerall = NumPartner
triggerall = partner,Life = 0
trigger1 = stateno = 900
trigger2 = enemynear,stateno != [130, 159]
trigger3 = p2statetype = A || p2statetype = L 
trigger4 = var(50) > 0
trigger5 = stateno = [200, 220]
fvar(16) = 0

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = NumPartner
triggerall = partner,Life = 0
trigger1 = stateno = 900
trigger2 = p2movetype != H
trigger3 = p2statetype = A || p2statetype = L
trigger4 = enemynear,ctrl=1
fvar(17) = 0
;--------------------------------------------------
[state -2, 1]
type = DisplayToClipboard
trigger1 = 1
text="p2bodydistX=:%d,p2bodydistY=%d,frontedgedist=%d,Pos X = %d,var(8) %d"
params = floor(p2bodydist X),floor(p2bodydist Y),floor(frontedgedist),floor(Pos X),var(8)
ignorehitpause = 1


;---------------------------------------------------------------------------------------------------------------
;　根性値、極防御力などの設定スイッチ　；
;---------------------------------------------------------------------------------------------------------------

;根性値のオン/オフ設定用スイッチ。

[state -2, 根性値設定用]
type = Varset
trigger1 = time = 2
trigger1 = roundstate=0
trigger2 = stateno = [191,193]
trigger2 = time = 2
fvar(20) = 1 ; 0で根性値なし（MUGENデフォルトの防御力設定になります）。1で根性値あり。デフォは１。

;--------------------------------------------------
;極の防御力設定スイッチ

[state -2, 極の防御力設定]
type = Varset
trigger1 = time = 2
trigger1 = roundstate=0
trigger2 = stateno = [191,193]
trigger2 = time = 2
fvar(21) = 1.2
; 受けるダメージの倍率を決めます。1なら他の剣質と防御力は同じ。デフォは1.2。
; 1以上だと柔らかくなり、1以下だと硬くなります。
; 2だと受けるダメージは2倍、0.5だと受けるダメージは半分になります。
; （1以下は個人的には推奨していません。）


ｄ; カンフーマンの定数（基本データ）と状態（各動作）のファイルです。
; キャラクターの心臓とも言える部分なのでとても重要です。
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;基本データ部分
[Data]
life              = 1000    ;体力ゲージの最大値を決めます
power             = 3000    ;パワーゲージ最大値（デフォルトは 3000 = Lv.3 になります・オプション）
attack            = 100     ;攻撃力パーセンテージ（デフォルトは 100% になります）
defence           = 100     ;防御力パーセンテージ（デフォルトは 100% になります）
fall.defence_up   = 50      ;一時的に上昇するダウン時の防御力パーセンテージ
liedown.time      = 60      ;倒れてから起き上がるまでの時間
airjuggle         = 20      ;ジャグルポイント限界値　★１
sparkno           = 2       ;デフォルトのヒットスパーク番号（fightfx.airか、キャラのairから呼び出す）
guard.sparkno     = 40      ;デフォルトのガードスパーク番号（fightfx.airか、キャラのairから呼び出す）
KO.echo           = 0       ;ＫＯ時の声にエコーを掛けるかどうか（0=しない・1=する）
volume            = 0       ;キャラの音量　255が最高
IntPersistIndex   = 59      ;Varを次のラウンドへ持ち越しが可能 (最小=0, 最大=59)  ★２
FloatPersistIndex = 40      ;FVarを次のラウンドへ持ち越しが可能 (最小=0, 最大=39) ★２

;★１：「ジャグルポイント」って何？
;　ダウン（受け身しなければ地面にそのまま吹っ飛び倒れる）効果の空中の相手に攻撃を入れられる限界を設定するポイントです。
;　各ステートで設定した数値分攻撃が当たった時に溜まって行き、限界値に到達したり超えてしまうと全ての攻撃が一切当たらなくなります。
;　攻撃が終わると数値が元に戻りますが、ジャグルポイントを設定してない攻撃や、
;　場合によってはダウン効果の無い攻撃を空中の相手に何回も当てると、溜まらずに永久連続技（永久コンボ）になるので注意です。
;
;　なお、ゲーム中Ctrl+Cで当たり判定ボックスを表示している時に攻撃を当てるとピンク色の文字が出てきますが、
;　その一番右の数値の部分がジャグルポイントの現在値表示になっているので確認出来ます。
;
;★２：「Var」と「FVar」って何？
;　いわゆる『変数（Variables）』です。「何も入っていない番号のある箱」のようなモノで、
;　中に自由にデータを入れ（トリガーで自由に条件を指定）、フラグを立てます（トリガーの条件が揃えば設定した数値が有効になる）。
;　ステートコントローラのVar〜〜系で設定出来ますが、ここでは省略。
;　設定する数値は、Varでは整数しか使用出来ませんが、FVarでは小数点以下（8.1や7.26とかや0.354など）が可能です。
;　ちなみにそれぞれアドレスがあり、Varは０〜５９まで、FVarは０〜３９まで使う事が出来ます。
;
;　変数持ち越しの使用例：
;　１：IntPersistIndex = 50,59　　（Var(50)〜Var(59)の変数が次のラウンドへ持ち越しが出来ます）
;　２：FloatPersistIndex = 25　　　（FVar(25)の変数が次のラウンドへ持ち越しが出来ます）
;　（間違い：4,8,12,16や[22,37]などの記述は無効になります。）
;
;　※現在実際に設定されているパラメータはIntPersistIndexが60、FloatPersistIndexが40ですが、
;　　これはそれぞれ０〜５９・０〜３９以外の数値ならば、全ての変数の持ち越しを無効に出来るためです。
;　　バグにはならないので、使用する時が来るまではそのままにしておいて構いません。
;
;　覚えておくとキャラ作りに大変役立つモノなので、ある程度慣れてきたらチャレンジしてみましょう。
;
;---------------------------------------------------------------------------
;サイズ設定
[Size]
xscale           = 1        ;キャラ画像の横のスケール
yscale           = 1        ;キャラ画像の縦のスケール
ground.back      = 15       ;キャラの幅（地上後方）
ground.front     = 16       ;キャラの幅（地上前方）
air.back         = 12       ;キャラの幅（空中後方）
air.front        = 12       ;キャラの幅（空中前方）
height           = 60       ;跳び越す相手のためのキャラの高さ
attack.dist      = 160      ;攻撃を出した時に相手がガード体勢に入る最低の距離
proj.attack.dist = 90       ;相手がガード体勢に入る発射物との最低の距離
proj.doscale     = 0        ;xscaleとyscaleが発射物のスケールにも影響するかどうか（0=しない・1=する）
head.pos         = -5, -90  ;BindToTargetの時に必要な頭の座標
mid.pos          = -5, -60 dd ;BindToTargetの時に必要な体中心の座標
shadowoffset     = 0        ;影の垂直方向の位置
draw.offset      = 0,0      ;キャラ描画表示位置（Ｘ軸,Ｙ軸）

;---------------------------------------------------------------------------
;移動速度設定
[Velocity]
walk.fwd     = 2.4         ;前進歩行速度
walk.back    = -2.2        ;後退歩行速度
run.fwd      = 4.6, 0      ;前に走る時の速度（Ｘ軸,Ｙ軸）
run.back     = -4.5,-3.8   ;後ろに走る時の速度（Ｘ軸,Ｙ軸）
jump.neu     = 0,-8.4      ;垂直ジャンプ速度（Ｘ軸,Ｙ軸）
jump.back    = -2.55       ;後ジャンプ速度
jump.fwd     = 2.5         ;前ジャンプ速度
runjump.back = -2.55,-8.1  ;後ろに走りながらのジャンプ速度（オプション）
runjump.fwd  = 4,-8.1      ;前に走りながらのジャンプ速度（オプション）
airjump.neu  = 0,-8.1      ;空中垂直ジャンプ速度（オプション）
airjump.back = -2.55       ;空中後ジャンプ速度（オプション）
airjump.fwd  = 2.5         ;空中前ジャンプ速度（オプション）

;---------------------------------------------------------------------------
;動作設定
[Movement]
airjump.num     = 1      ;空中ジャンプが出来る回数（オプション）
airjump.height  = 35     ;空中ジャンプするために必要な最低限の高さ（オプション）
yaccel          = .44    ;重力（垂直下降加速度）
stand.friction  = .85    ;立ち状態の摩擦係数
crouch.friction = .82    ;しゃがみ状態の摩擦係数

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;「ステート」の説明と基本的な使い方
;---------------------------------------------------------------------------
;■ステートとは「状態」を意味しますが、
;（http://jiten.www.infoseek.co.jp/Eiwa?qt=state&sm=0&pg=result_e.html&sv=DC&col=EW）
;　ＭＵＧＥＮでは通常攻撃や必殺技などの枠にはまらない「ゲーム中における全ての行動を決めるプログラム」の事を指します。
;「ゲージ消費が必要無く、一撃で相手を倒せる攻撃」なども簡単に作成出来るので注意です。
;　１ステート（一つの行動）ずつに対して必ず番号（アドレス）が割り当てられます。俗に「ステートナンバー」と呼ばれています。
;
;■基本的な設定の例
; [Statedef STATENO]       一つの行動を定義する記述です・「STATENO」に必ず番号を設定してください
; type = ?      S/C/A/L/U  キャラの状態を指定（S=立ち・C=しゃがみ・A=空中・L=横に倒れている・U=前のステートの状態を引き継ぐ）
; movetype = ?  I/A/H      キャラの行動内容を指定（I=何もしない・A=攻撃している・H=攻撃を食らっている）
; physics = ?   S/C/A/N/U  キャラの物理的な体勢（S=立ち・C=しゃがみ・A=空中・N=重力や摩擦の影響を受けない・U=前のステートの体勢を引き継ぐ）
; juggle = ?               攻撃を当てた時に溜まるジャグルポイントの設定
;
; [State STATENO, ?]       「ステートコントローラ」と呼ばれるステートの色々な操作を定義し、設置や追加をします
; type = ?                 ステートコントローラの種類をこの部分に状況に応じて入れます
; ...                      トリガーで条件を指定し、様々な効果を適用させて行きます
;
;
; ※１ステートには必ず一つはステートコントローラを設置する必要があります。
;
; ステートコントローラやトリガーの詳しい説明はMUGEN本体のdocsフォルダにあります（英語）。
; 解説サイトもあるので、そちらも参考に。
;
; 月乃澄香 - http://tukiken.hp.infoseek.co.jp/
; クリエイターズＪＡＰＡＮ２ - http://cjmk2.hp.infoseek.co.jp/
;
; 後は実際に使われているステートを参照してください。（[Statedef 200]に更に詳しい説明もあります）
;
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; 基本行動のステート
;---------------------------------------------------------------------------
; タイムオーバー時
; CNS レベル: 基本
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 無敵]
type = NotHitBy
trigger1 = 1 ;1にするといかなる条件でも有効で、0にするといかなる条件でも無効
value = SCA
time = 1

[State 3501, 物理的なキャラの幅];画面端で見切れないように
type = Width
trigger1 = 1
value = 70,70
IgnoreHitPause = 1

;---------------------------------------------------------------------------
; 勝利ポーズ分岐
; CNS レベル: 基本
[Statedef 180]
type = S

[State 3501, 物理的なキャラの幅];画面端で見切れないように
type = Width
trigger1 = 1
value = 70,70
IgnoreHitPause = 1

[State 180, ステート変更]
type = ChangeState
trigger1 = Time = 0
value = 181

;---------------------------------------------------------------------------
; 勝利ポーズ
; CNS レベル: 基本
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 191, ステート変更]
type = ChangeState
trigger1 = time = 0 && random%10 < 5
value = 182

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3501, 物理的なキャラの幅];画面端で見切れないように
type = Width
trigger1 = 1
value = 70,70
IgnoreHitPause = 1

; 勝利ポーズ
; CNS レベル: 基本
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3501, 物理的なキャラの幅];画面端で見切れないように
type = Width
trigger1 = 1
value = 70,70
IgnoreHitPause = 1


;---------------------------------------------------------------------------
; イントロ（試合開始直前のアクション）
; CNS レベル: 基本
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 191, ステート変更]
type = ChangeState
trigger1 = time = 0 && random%10 < 7
value = 192

[State 191, アニメ変更] ;画面フェードインの間だけアニメーションを繰り返し、止まっているように見せています
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 191, 特殊効果] ;「ROUND1, FIGHT!」のアナウンスが始まるまでは、このコントローラを使ってください
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態になります

[State 191, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0 ;common1.cns参照

; これがKFMが蹴る木の板です。KFMのCNSを貴方のキャラに利用しているなら、
; 下にある二つのコントローラを消したらいいです。
[State 191, エフェクト表示（飛んでくる板）]
type = Explod
trigger1 = RoundState != 0
persistent = 0
anim = 191
postype = p1
pos = 260, -90
velocity = -4.2, -7
accel = 0, .32
removetime = 48 ;消えるまでの時間

[State 191, エフェクト表示（蹴られて割れて吹っ飛ぶ板）]
type = Explod
trigger1 = AnimElemTime(7) = 1
anim = 192
postype = p1
pos = 60, -70
velocity = 2, -4
accel = 0, .32
removetime = 35

;KFMを使用することであなた自身のキャラを作っているなら、あなたは以下の二つのコントローラを削除することができます。
;これらは蹴られて割れて吹っ飛ぶ板の音を再生します。
[State 191, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 7
value = F5,2 ;Fが付いていればdataフォルダのcommon.sndから、付いていなければキャラのsndファイルから出す音を指定します
volume = -40 ;音量

[State 191, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElemTime(7) = 3
value = F5,3
volume = -80

[Statedef 192]
type = S
ctrl = 0
anim = 193
velset = 0,0

[State 191, ステート変更]
type = Changeanim
trigger1 = time = 0 && random%10 < 5
value = 194

[State 191, アニメ変更] ;画面フェードインの間だけアニメーションを繰り返し、止まっているように見せています
type = ChangeAnim
trigger1 = RoundState = 0 && anim = 193
value = 193

[State 191, アニメ変更] ;画面フェードインの間だけアニメーションを繰り返し、止まっているように見せています
type = ChangeAnim
trigger1 = RoundState = 0 && anim = 194
value = 194

[State 191, 特殊効果] ;「ROUND1, FIGHT!」のアナウンスが始まるまでは、このコントローラを使ってください
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態になります

[State 191, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0 ;common1.cns参照

; これがKFMが蹴る木の板です。KFMのCNSを貴方のキャラに利用しているなら、
; 下にある二つのコントローラを消したらいいです。
[State 191, エフェクト表示（飛んでくる板）]
type = Explod
trigger1 = RoundState != 0
persistent = 0
anim = 191
postype = p1
pos = 260, -90
velocity = -4.2, -7
accel = 0, .32
removetime = 48 ;消えるまでの時間

[State 191, エフェクト表示（蹴られて割れて吹っ飛ぶ板）]
type = Explod
trigger1 = AnimElemTime(14) = 1
anim = 192
postype = p1
pos = 60, -70
velocity = 2, -4
accel = 0, .32
removetime = 35

[State 191, エフェクト表示（飛んでくる板）]
type = Explod
trigger1 = RoundState != 0
persistent = 0
anim = 191
postype = p1
pos = 260, -90
velocity = -12.2, -2.8
accel = 0, .32
removetime = 16 ;消えるまでの時間

[State 191, エフェクト表示（蹴られて割れて吹っ飛ぶ板）]
type = Explod
trigger1 = AnimElemTime(4) = 1
anim = 192
postype = p1
pos = 60, -90
velocity = 2, -4
accel = 0, .32
removetime = 35

[State 191, エフェクト表示（飛んでくる板）]
type = Explod
trigger1 = RoundState != 0
persistent = 0
anim = 191
postype = p1
pos = 260, -90
velocity = -7.2, -4
accel = 0, .32
removetime = 28 ;消えるまでの時間

[State 191, エフェクト表示（蹴られて割れて吹っ飛ぶ板）]
type = Explod
trigger1 = AnimElemTime(9) = 1
anim = 192
postype = p1
pos = 70, -90
velocity = 2, -4
accel = 0, .32
removetime = 35

;KFMを使用することであなた自身のキャラを作っているなら、あなたは以下の二つのコントローラを削除することができます。
;これらは蹴られて割れて吹っ飛ぶ板の音を再生します。
[State 191, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 14 || animelem = 9
value = F5,2

[State 191, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = F5,0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 4
value = 2, 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 9
value = 2, 4

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 14
value = 2, 1

;---------------------------------------------------------------------------
; 挑発
; CNS レベル: 基本
[Statedef 195]
type = S
ctrl = 0
anim = 195+(1*var(35) = 1)
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 191, ステート変更]
type = Changeanim
trigger1 = time = 0 && random%10 < 5 && anim = 195
value = 197

[State 195, コントロール可否]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 195, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ここからは通常攻撃技のステート
;---------------------------------------------------------------------------
; 立ち弱パンチ
; CNS レベル: 基本
;
; 攻撃用のステートの書き方はこれが基準になります。
; やれる事はいっぱいなので、ステートコントローラやトリガーを覚えて
; どんどん技などを作っていきましょう。
;
; ※Statedefのmovetypeパラメータが「A」以外になっている場合、
; 　HitDefのステートコントローラを設置しても攻撃判定は無効になります（攻撃が空振る）。
; 　攻撃させたいならば、必ず「movetype = A」にしてください。

[Statedef 200]
type     = S                     ;キャラの状態を指定（S=立ち・C=しゃがみ・A=空中・L=横に倒れている・U=前のステートの状態を引き継ぐ）
movetype = A                     ;キャラの行動内容を指定（I=何もしない・A=攻撃している・H=攻撃を食らっている）
physics  = S                     ;キャラの物理的な体勢（S=立ち・C=しゃがみ・A=空中・N=重力や摩擦の影響を受けない・U=前のステートの体勢を引き継ぐ）
juggle   = 1                     ;攻撃を当てた時に溜まるジャグルポイントの設定
velset   = 0,0                   ;移動初速度の設定（このステートでは0,0なので移動せず止まります）
ctrl     = 0                     ;コントロールの可否（0=キー操作不可・1=キー操作可能）
anim     = 200                   ;airファイルの[Begin Action 200]のアニメを使っています
poweradd = 20                    ;パワーゲージの増加量を設定
sprpriority = 2                  ;画像表示優先度　数値が多いと手前に、少ないと奥に優先されます

[State 200, ヒット定義]
type = HitDef                    ;攻撃ヒット定義（Hit Definition）のステートコントローラ
trigger1 = AnimElem = 3          ;攻撃判定ボックスがあればアニメーション３番目のコマで適用されます
attr = S, NA                     ;攻撃属性: これは Standing, Normal Attack（立ち通常攻撃）
damage = 23, 0                   ;相手に与えるダメージ（ヒットした時,ガードされた時）
animtype = Light                 ;当たった時の相手のアニメの種類: Light, Medium, Hard, Back, Up, DiagUp (デフォルト：Light)
guardflag = MA                   ;相手が立ち・しゃがみ・空中どのガードが出来るかを決めます（現在はMiddleAir（全部ガードされます））
hitflag = MAF                    ;相手がどの状態の時で攻撃を当てられるかを決めます（現在はMiddleAirFall（立ち・しゃがみ・空中・やられ落下））
priority = 3, Hit                ;攻撃優先度: 0 (最低) 7 (最高) 4がデフォルト・種類はHit/Miss/Dodge (デフォルト：Hit)
pausetime = 8, 8                 ;攻撃を当てた時の自分と相手の硬直時間（自分,相手）
sparkno = 0                      ;ヒットスパーク (デフォルト：[Data]の項目で設定したモノが適用される) ★３
guard.sparkno = 40               ;ガードスパーク (デフォルト：[Data]の項目で設定したモノが適用される) ★３
sparkxy = -10, -76               ;ヒットスパークの位置（Ｘ軸,Ｙ軸）
hitsound = 5, 0                  ;ヒットサウンド（PlaySndと同じやり方）
guardsound = 6, 0                ;ガードサウンド（PlaySndと同じやり方）
ground.type = High               ;当たった時の地上の相手のアニメの属性: High, Low, Trip (デフォルト：High)
ground.slidetime = 5             ;当たった時の地上の相手がのけぞる時間
ground.hittime  = 12             ;当たった時の地上の相手のやられ状態の時間
ground.velocity = -4,0           ;当たった時の地上の相手の初速度（Ｘ軸,Ｙ軸）
airguard.velocity = -1.9,-.8     ;ガードされた時の空中の相手の初速度 (デフォルト：(air.xvel*1.5, air.yvel/2))
air.type = High                  ;当たった時の空中の相手のアニメの属性: High, Low, Trip (デフォルト：ground.typeと同じになる)
air.velocity = -1.4,-3           ;当たった時の空中の相手の初速度（Ｘ軸,Ｙ軸）
air.hittime = 12                 ;当たった時の空中の相手のやられ状態の時間

; ★３：数字の前に「s」を付けると自分のairファイルからアニメを呼び出す事が出来ます。

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 2, 0

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0 ;アニメーション時間が０、つまりアニメが終了した時に有効になります。
value = 0
ctrl = 1 ;★４

;★４：ステートナンバー０は通常立ちステートなので、特殊なものでない限り
;　　　攻撃が終わればコントロール可能にしておく必要があります。
;---------------------------------------------------------------------------
; 立ち強パンチ
; CNS レベル: 基本
;
;「Width」のステートコントローラに気を付けてください。
; キャラの幅（相手に密着した時相手を押せる見えない先端部分）が一時的に広がり、相手に少し近づく事が出来なくなります。
; ゲーム中Ctrl+Cを押せば、当たり判定ボックスと同時に出てくる足元の黄緑色の線が幅の表示なので確認が可能です。
;
; このステートの「sprpriority」が2ではなく-1に設定されている事に注目してみましょう。
; これでカンフーマンは最初に相手よりも後ろ側にモーション画像が表示されます。
; このステートの技は水平チョップなので、[State 210, 画像表示優先度]のステートコントローラ「SprPriority」で
; カンフーマンが腕を振った時に画像表示優先度を2にし、彼を手前に戻します。
;
; 彼の腕を振るモーションを攻撃がヒットしても止めないために、ステートコントローラ「ChangeAnim」を使っています。
; トリガーで５コマ目の時と攻撃が当たる時に有効になる命令を指定し、何事も無かったかのように同じアニメを適用して
; ６コマ目（elem = 6の部分）に進めるようにしています。[State 210, アニメ変更]の部分がその記述です。

[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 210
sprpriority = -1

[State 210, 物理的なキャラの幅]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (7) < 0)
value = 15,0

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 2, 4

[State 210, ヒット定義]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Medium
damage    = 57
guardflag = MA
pausetime = 12,12
sparkno = 1
sparkxy = -10,-70
hitsound   = 5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5.5
air.velocity = -2.5,-4

[State 210, アニメ変更]
type = ChangeAnim
trigger1 = AnimElemTime(5) > 0 && AnimElemTime(6) <= 0
trigger1 = movecontact
ignorehitpause = 1 ;1にすれば攻撃が当たった時の硬直時間を無視してステートコントローラが有効になります。★５
persistent = 0 ;1以上にすればこのステートコントローラの効果がそのステート内でその数値（時間）置きに持続しますが、現在は0なので持続しません。★５
value = 210
elem = 6

;★５：全てのステートコントローラに使える項目です。

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 立ち弱キック
; CNS レベル: 基本

[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 22
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 230, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 2, 1

[State 230, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 26
guardflag = MA
pausetime = 12,12
sparkno = 0
sparkxy = -10,-37
hitsound   = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 12
ground.velocity = -5
air.velocity = -2.5,-3.5

[State 230, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 立ち強キック
; CNS レベル: 基本

[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 65
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 2, 1

[State 240, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 63
guardflag = MA
pausetime = 12,12
sparkno = 1
sparkxy = -10,-60
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -6
air.velocity = -2.2,-3.2

[State 240, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 7
x = 12

[State 240, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; しゃがみ弱パンチ
; CNS レベル: 基本
;
; 簡単なしゃがみ攻撃です。HitDefのguardflagが「L(Low)」に設定されています。
; 相手が立ちガードと空中ガードが出来ないようになっています。
;
; 全ての弱攻撃において、slidetimeとhittimeのパラメータを少ない数にするのは、
; 相手を長い間やられ状態にする事や連打による永久ヒットを防止させるためです。
; 全てのしゃがみ攻撃に関しては、HitDefのattrのパラメータで「しゃがみ攻撃」の認識を
; 忘れずに設定しなければなりません。
; この場合、「attr = C, NA」は「Crouching, Normal Attack（しゃがみ通常攻撃）」を表します。
;
; このステートのHitDefはpriority（攻撃優先度）が3にセットされています。
; やられ判定ボックス(Clsn2)に被っている自分と相手の攻撃判定ボックス(Clsn1)が交差した時、
; 4以上ならば相手に打ち勝ち、3未満ならば相手に打ち負け、相手のpriorityも3ならば相打ちになります。

[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 15
ctrl = 0
anim = 400
sprpriority = 2

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 2,0

[State 400, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 23
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 10,11
sparkno = 0
sparkxy = -10,-42
hitsound   = 5,0
guardsound = 6,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 12
ground.velocity = -4
air.velocity = -1.5,-3

[State 400, コントロール可否]
type = CtrlSet
trigger1 = Time = 5
value = 1

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; しゃがみ強パンチ
; CNS レベル: 基本
;
; これは連続で２ヒットする攻撃です。
; 殴打出来るコマにそれぞれHitDefを登録する必要があります。
; 一発目のHitDefはguardflagが「M（Middle）」だけなので相手は空中ガードが出来ませんが、
; 二発目のHitDefはguardflagが「MA（MiddleAir）」なので相手は全てのガードが可能です。

[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 50
ctrl = 0
anim = 410
sprpriority = 2

[State 410, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 2, 0

;一発目の攻撃・３コマ目で発生
[State 410, 一発目のヒット定義]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage    = 37
animtype  = Medium
hitflag = MAF
guardflag = M
pausetime = 12,12
sparkno = 1
sparkxy = -10,-55
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4
air.velocity = -3,-4

;二発目の攻撃・４コマ目で発生
[State 410, 二発目のヒット定義]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
damage    = 36
animtype  = Medium
hitflag = MAF
guardflag = MA
pausetime = 12,12
sparkxy = -10,-83
hitsound   = 5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -3,-4

[State 410, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; しゃがみ弱キック
; CNS レベル: 基本

[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 22
ctrl = 0
anim = 430
sprpriority = 2

[State 430, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 2, 0

[State 430, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 28
animtype  = Light
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = 0
sparkxy = -10,-8
hitsound   = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 6
ground.hittime  = 12
ground.velocity = -5
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 20

[State 430, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; しゃがみ強キック
; CNS レベル: 基本
;
; HitDefのground.typeにTripが設定されています。
; これは特殊なパラメータで「足払い攻撃」になり、ヒットすれば相手を転ばせる事が可能になります。
;
; hitflagがMAFDに変わっています。この「D」の部分は「Down（ダウン）」の意味で、
; 横に倒れている相手にまで攻撃を当てる事が出来ます。
; しかし通常より与えるダメージが少なくなるので注意しましょう。
;
; さらに「fall = 1」の項目が追加されていますが、これは攻撃をヒットさせたら
; 相手を「ダウン効果のある吹っ飛び状態」にする事が出来ます。
; 前述（★１）の通り、ジャグルポイントが溜まります。

[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 70
ctrl = 0
anim = 440
sprpriority = 2

[State 440, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 2, 2

[State 440, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 72
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = 1
sparkxy = -5,-10
hitsound   = 5,2
guardsound = 6,0
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -1.5,-2
air.velocity = -1.2,-3
guard.velocity = -5
fall = 1

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------

;スライディング
[Statedef 445]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 70
ctrl = 0
anim = 445
sprpriority = 2

[State 440, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 2
value = 2, 5

[State 440, ]
type = velset
trigger1 = animelem = 2
x = 20

[State 440, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 72
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = 1
sparkxy = -5,-10
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -1.5,2
air.velocity = -1.2,3
guard.velocity = -5
fall = 1
fall.recover = 0
fall.yvelocity = -1

[State 440, ヒット定義]
type = HitDef
trigger1 = MoveGuarded
attr = C, NA
damage    = 72
hitflag = MAFD
guardflag = L
pausetime = 12,0
sparkno = 1
sparkxy = -5,-10
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 5
ground.velocity = -1.5,2
air.velocity = -1.2,3
guard.velocity = -5
fall = 1
persistent=0
fall.recover = 0
fall.yvelocity = -1

[State 440, ヒット定義]
type = HitDef
trigger1 = MoveGuarded = 3
attr = C, NA
damage    = 72
hitflag = MAFD
guardflag = L
pausetime = 12,0
sparkno = 1
sparkxy = -5,-10
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 5
ground.velocity = -1.5,2
air.velocity = -1.2,3
guard.velocity = -5
fall = 1
persistent=0
fall.recover = 0
fall.yvelocity = -1

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; ジャンプ弱パンチ
; CNS レベル: 基本
;
; これらの空中の通常攻撃にChangeStateがありません。
; physicsがAなので、地上に着地すれば（キャラのPos Yが０以上の時に）
; 自動で[Statedef 52]にステートが変更されるからです。

[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 11
ctrl = 0
anim = 600
sprpriority = 2

[State 600, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 2, 0

[State 600, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, NA ;Air, Normal Attacks（空中通常攻撃）
damage    = 20
guardflag = HA ;HighAir（相手はしゃがみガードが出来ません）
priority = 3
pausetime = 7,8
sparkno = 0
sparkxy = -10,-58
hitsound   = 5,0
guardsound = 6,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -4
air.velocity = -1.3,-3

[State 600, コントロール可否]
type = CtrlSet
trigger1 = Time = 17
value = 1

;---------------------------------------------------------------------------
; ジャンプ強パンチ
; CNS レベル: 基本

[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = 610
sprpriority = 2

[State 610, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 2, 1

[State 610, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 72
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = 1
sparkxy = -10,-55
hitsound   = 5,3
guardsound = 6,0
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5
air.velocity = -3,-4

;---------------------------------------------------------------------------
; ジャンプ弱キック
; CNS レベル: 基本

[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 20
ctrl = 0
anim = 630
sprpriority = 2

[State 630, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 2, 0

[State 630, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 26
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = 1
sparkxy = -5,-35
hitsound   = 5,0
guardsound = 6,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -4
air.velocity = -2,-3

;---------------------------------------------------------------------------
; ジャンプ強キック
; CNS レベル: 基本

[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = 640
sprpriority = 2

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 2, 1

[State 640, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 70
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = 1
sparkxy = -10,-40
hitsound   = 5,3
guardsound = 6,0
animtype = Med
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -5
air.velocity = -3,-4

;---------------------------------------------------------------------------
; 投げ掴みモーション
; CNS レベル: 中級
;
; 投げを作るのは難しくは無いですが、時には退屈と感じる場合もあるでしょう。
;
; 投げステートでは特別な形式のHitDefを設定します。
; 投げのHitDefにおける大事なパラメータは「p1stateno」と「p2stateno」です。
; 掴む事を成功した時にChangeStateを使わずに自分のステートの変更を行えるのが「p1stateno」、
; 同時に相手の行動をこちら側のステートで制御出来るのが「p2stateno」です。
; それぞれ専用のステートを新しく作る必要があります。
; 投げ以外の攻撃のHitDefにも付ける事が可能ですが、同じ位の注意力が必要です。
;
; p2statenoで相手がこちら側の制御を受けている状態を確認する事も出来ます。
; ゲーム中にCtrl+Dを押してデバッグモードの白い文字が色々出てきますが（MUGEN初起動の時はすでに表示されています）、
; 相手側の情報（白い文字が表示された時にさらにCtrl+Dを押す）の時に黄色い文字に変化すれば、相手が制御を受けている事になります。

[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

; hitflagのパラメータの後に「-」を付けると、やられ状態の相手には攻撃を当てる事が出来なくなります。
; これは打撃攻撃から掴む連続技にならないようにするためです。
;
; priorityが低く設定されているのは出来るだけ通常攻撃よりも攻撃優先度を低くするためです。
; "Miss" や "Dodge"だと相手のpriorityによっては阻止されたり空振りする事になります。
; が、投げが通常攻撃よりも強くなると、後でとんでもない事になるので注意しましょう。

[State 800, ヒット定義（投げ用）]
type = HitDef
Trigger1 = Time = 0 && var(59) <= 0
attr = S, NT          ;攻撃属性: これは Standing, Normal Throw（立ち通常投げ）
hitflag = M-          ;相手がやられ状態ではない地上の時でしか掴む事が出来ません
priority = 1, Miss    ;投げなので優先度を低く、かつmissかdodgeの属性でなければなりません
sparkno = -1          ;-1にすればヒットスパークが表示しなくなります
sprpriority = 1       ;攻撃が当たった時に画像表示優先度を1に出来ます
p1facing = ifelse(command = "holdfwd", -1, 1) ;攻撃が当たった時の自分の向き ★６
p2facing = 1          ;攻撃が当たった時の相手の向き
p1stateno = 810       ;自分のステート変更
p2stateno = 820       ;相手を制御するステートに行かせる
guard.dist = 0        ;相手がガード状態に移行出来る距離（現在は0なのでガード不可）
fall = 1              ;1にすれば相手がダウン状態になる

[State 800, ヒット定義（投げ用）]
type = HitDef
Trigger1 = Time = 0 && var(59) > 0
attr = S, NT          ;攻撃属性: これは Standing, Normal Throw（立ち通常投げ）
hitflag = M-          ;相手がやられ状態ではない地上の時でしか掴む事が出来ません
priority = 1, Miss    ;投げなので優先度を低く、かつmissかdodgeの属性でなければなりません
sparkno = -1          ;-1にすればヒットスパークが表示しなくなります
sprpriority = 1       ;攻撃が当たった時に画像表示優先度を1に出来ます
p1facing = ifelse(backEdgeBodyDist <=30, -1, 1) ;攻撃が当たった時の自分の向き ★６
p2facing = 1          ;攻撃が当たった時の相手の向き
p1stateno = 810       ;自分のステート変更
p2stateno = 820       ;相手を制御するステートに行かせる
guard.dist = 0        ;相手がガード状態に移行出来る距離（現在は0なのでガード不可）

;★６：「ifelse文」
;「もし■■■だったら●●●、そうでなかったら▲▲▲」という、特殊な分岐を指定する記述です。
;　これもどのステートコントローラでも使える条件式です。
;　↑で実際に使われているパラメータを日本語で表すと、
;『もしholdfwdのコマンドを入力しているなら-1（向きを逆）に、そうでなかったら1（向きをそのまま）にセットする』
;　という事になります。
;　●●●と▲▲▲にはさらにifelseを追加し分岐を細かく増やす事も出来ますが、
;　最終的には数値や数式だけしかセットする事が出来ません。

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 投げ成功モーション
; CNS レベル: 中級
;
; このステートはカンフーマンが相手を掴む事に成功し放り投げる部分です。
; 担ぐために相手の位置を自分のアニメに合わせる必要があります。
; 例えば[State 810, 掴んだ相手の位置１]では、彼の軸位置から前に２８ピクセル移動させて相手を拘束します。
; そこは丁度彼が伸ばしている手の位置なので、実際に掴んでいるように見せます。
; 相手を縛るためには、TargetBindのステートコントローラを投げ切るまで使い続けなければいけません。
;
; カンフーマンが投げている間、相手側の投げられアニメにやられ判定ボックス(Clsn2)が設定されている場合は重要です。
; 投げ終わったカンフーマンに攻撃された時や、彼が投げている途中で
; Simulチームバトルのパートナーに攻撃をヒットさせられたら、その相手は必ず「吹っ飛び状態」になるでしょう。
; 逆に投げているカンフーマン自身にやられ判定ボックスが存在している場合、
; 途中で攻撃を食らってしまうと相手側は投げられた状態のまま止まります。
; 制御を解除する記述が無いとバグになってしまうので、それなりの配慮が必要です。

[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 60

[State 810, 掴んだ音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 1

[State 810, 放り投げた時の音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 7
value = 800, 0

[State 810, 掴んだ相手の位置１]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 28, 0

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(12) < 0
edge = 60,0 ;前方の画面端を押す幅のみを変えています

[State 810, 掴んだ相手の位置２]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(5) < 0
pos = 58, 0

[State 810, 掴んだ相手の位置３]
type = TargetBind
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
pos = 47, 0

[State 810, 掴んだ相手の位置４]
type = TargetBind
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(7) < 0
pos = 41, -60

[State 810, 掴んだ相手の位置５]
type = TargetBind
trigger1 = AnimElemTime(7) >= 0 && AnimElemTime(8) < 0
pos = 25, -75

[State 810, 掴んだ相手の位置６]
type = TargetBind
trigger1 = AnimElemTime(8) >= 0 && AnimElemTime(9) < 0
pos = 15, -90

[State 810, 掴んだ相手の位置７]
type = TargetBind
trigger1 = AnimElemTime(9) >= 0 && AnimElemTime(10) < 0
pos = -5, -96

[State 810, 掴んだ相手の位置８]
type = TargetBind
trigger1 = AnimElemTime(10) >= 0 && AnimElemTime(11) < 0
pos = -14, -90

[State 810, 掴んだ相手の位置９]
type = TargetBind
trigger1 = AnimElem = 11
pos = -50, -50

[State 810, 掴んだ相手の体力ゲージの増減]
type = TargetLifeAdd
trigger1 = AnimElem = 11
value = -78

[State 810, 掴んだ相手のステート変更]
type = TargetState
trigger1 = AnimElem = 11
value = 821

[State 810, 振り返る]
type = Turn
trigger1 = AnimElem = 12

[State 810, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 15
x = -10

[State 810, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 相手側の投げられモーション１
; CNS レベル: 中級
;
; これはカンフーマンの投げ掴みステートのHitDefで移行した、相手側を制御しているステートです。
; ここで重要なのは「ChangeAnim2」のステートコントローラを使用している事です。
; 通常Statedefの下に置くanimやChangeAnimは「そのステートを所有するキャラのairファイル」からアニメを呼び出しますが、
; このコントローラを使うと「制御した側のキャラのairファイル」で相手のアニメーションを設定する事が出来ます。
; 「kfm.air」の[Begin Action 820]に追加の説明文もあります。

[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820, 制御した相手のアニメ変更]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

;---------------------------------------------------------------------------
; 相手側の投げられモーション２
; CNS レベル: 中級
;
; このステートは相手が放り投げられた後に地面に落ちるまでの動作です。
; 着地した時やcmdファイルにある"recovery"のコマンドを相手が入力した時に、
;「SelfState」のステートコントローラで相手の制御を解除し、コントロールを戻させています。

[Statedef 821]
type    = A
movetype= H
physics = N
velset = 2.8,-7
poweradd = 40

[State 821, 速度加算] ;重力
type = VelAdd
Trigger1 = 1
y = .4

[State 821, ステート変更]
type = ChangeState
triggerall = Vel Y > 0        ;★７
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;common1.cns参照

[State 821, 制御解除して相手のステートに戻す]
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;common1.cns参照

[State 821, 制御解除して相手のステートに戻す]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;common1.cns参照

;★７：「triggerall」
;　「条件を限定したり絞り込む」ために使われるトリガーの定義です。
;　なのでtrigger1などは、triggerallの条件が全て揃わない限り、有効になる事はありません。
;　なお、triggerallのみでは働かないので、設置する時はtrigger1は絶対に消さないでください。
;
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; ここからは必殺技のステート
;---------------------------------------------------------------------------
; カンフー突き手（弱）
; CNS レベル: 中級
;
; このステートは通常攻撃に似てますが、いくつかの違いがあります。２つHitDefがありますが、
; これはp2bodydistのトリガーを利用して、相手が近い時と遠い時で効果を変えているためです。
; 近い場合のHitDefでは相手を吹っ飛ばします(fall = 1)が、遠い場合のHitDefではのけぞりのみになります。
; 残りはダメージとのけぞらせる速度が違うだけです。
;
; もう一つの違いは、攻撃属性がまた変わっています。
; 「attr = S, SA」は「Standing, Special Attack（立ち必殺技）」になります。

[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 8
value = 2, 3

[State 1000, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 1000, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 12
x = 10

[State 1000, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 5
x = 5

[State 1000, ヒット定義] ;近い時
type = HitDef
trigger1 = AnimElem = 5
trigger1 = p2bodydist X < 40
attr = S, SA ;Standing, Special Attack（立ち必殺技）
animtype  = Hard
damage    = 85, 4
priority  = 6
guardflag = MA
pausetime = 15,15
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1
fall.recovertime=31

[State 1000, ヒット定義] ;遠い時
type = HitDef
trigger1 = AnimElem = 5
trigger1 = p2bodydist X >= 40
attr = S, SA
animtype  = Hard
damage    = 80, 4
priority  = 5
guardflag = MA
pausetime = 15,15
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -4,-2.5
fall.recovertime=31

[State 1000, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 8
x = -5

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; カンフー突き手（強）

[Statedef 1010]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 120
velset = 0,0
anim = 1010
ctrl = 0
sprpriority = 2

[State 1010, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 9
value = 2, 3

[State 1010, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 1010, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 12
x = 10

[State 1010, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 5
x = 5

[State 1010, 移動速度]
type = VelSet
trigger1 = AnimElem = 5
x = 4

[State 1010, ヒット定義] ;近い時
type = HitDef
trigger1 = AnimElem = 5 && PrevStateNo != 1012
trigger1 = p2bodydist X < 40
attr = S, SA
animtype  = Hard
damage    = 94, 4
priority  = 6
guardflag = MA
pausetime = 15,15
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1
fall.recovertime=31

[State 1010, ヒット定義] ;遠い時
type = HitDef
trigger1 = AnimElem = 5 && PrevStateNo != 1012
trigger1 = p2bodydist X >= 40 
attr = S, SA
animtype  = Hard
damage    = 89, 4
priority  = 5
guardflag = MA
pausetime = 15,15
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -4,-2.5

[State 1010, ヒット定義] ;近い時
type = HitDef
trigger1 = AnimElem = 5 && PrevStateNo = 1012
trigger1 = p2bodydist X < 40
attr = S, SA
animtype  = Hard
damage    = 94, 4
priority  = 6
guardflag = MA
pausetime = 15,15
sparkxy = 0,0
sparkno = s15005
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1
fall.recovertime=31

[State 1010, ヒット定義] ;遠い時
type = HitDef
trigger1 = AnimElem = 5 && PrevStateNo = 1012
trigger1 = p2bodydist X >= 40
attr = S, SA
animtype  = Hard
damage    = 89, 4
priority  = 5
guardflag = MA
pausetime = 15,15
sparkxy = 0,0
sparkno = s15005
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -4,-2.5
fall.recovertime=31

[State 1010, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;ガーキャン
[Statedef 1012]
type     = S
movetype = I
physics  = N
poweradd = -1000
ctrl     = 0

[State 1210, 1]
type = PlaySnd
trigger1 = time = 0
value = 0, 13

[State 7100, Flash]
type = envcolor
trigger1 = TIME = 0
ignorehitpause = 1
persistent = 0
time = 2
value = 250,250,250
under = 1

[State 2303, エフェクト]
type = Explod
trigger1 = time = 0
anim = 15004
postype = p1
pos = 0,0
sprpriority = 7
ownpal = 1
ontop = 1
bindtime = -1
supermovetime = 99999999
pausemovetime = 99999999
IgnoreHitPause = 1
removeongethit = 1

[State 702, ステート変更]
type = ChangeState
trigger1 = time = 0
value = 1020

;---------------------------------------------------------------------------
; 速いカンフー突き手
; CNS レベル: 少し難しい
;
; このステートは少し複雑なコントローラの設定をしています。
; 技術的に未熟ならばここは飛ばして、慣れてきたら後でチェックしてください。
; ここの攻撃は「特殊な吹っ飛び状態」を相手プレイヤーに与えます。
; HitDefの「p2stateno = 1025」と次の[Statedef 1025]以降がそれを指します。
;
; 他には残像効果とキャラの色を一時的に変更する効果も加えています。

[Statedef 1020]
type    = S
movetype= A
physics = N
juggle  = 6
poweradd= -330
velset = 0,0
anim = 1020
ctrl = 0
sprpriority = 2

[State 1020, 速度乗算]
type = VelMul
trigger1 = 1
x = .85 * ifelse(AnimElemTime(6)<0, 1, .8)

[State 1020, 残像]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1027, エフェクト表示]
type = Explod
trigger1 = time = 0
anim = 20011
pos = 0, 0
postype = p1
sprpriority = -1
removetime = -2
bindtime = 1
ownpal = 1
removeongethit = 1
scale = 1,1

[State 1027, エフェクト表示]
type = Explod
trigger1 = time = 0
anim = 20010
pos = 0, 0
postype = p1
sprpriority = -1
removetime = -2
bindtime = 1
ownpal = 1
removeongethit = 1
scale = 1,1

[State 1020, 残像表示時間]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 0
time = 2

[State 1020, 色の変更]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1020, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 2, 3

[State 1020, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 1020, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 11
x = 10

[State 1020, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 4
x = 5

[State 1020, 移動速度]
type = VelSet
trigger1 = AnimElem = 4
x = 13

[State 1020, ヒット定義]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype  = Hard
damage    = 102, 5
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 8,7
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 1
fall.recover = 0

[State 3501, ] 
type = Targetstate
trigger1 = numtarget != 0 && movehit
trigger1 = (target,stateno = [5000,5300]) && (target,movetype = H) 
value = 1025
Persistent = 0 
IgnoreHitPause = 1 

[State 1020, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------
; 速いカンフー突き手の相手側制御開始 - 硬直時間
[Statedef 1025]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1025, 制御した相手のアニメ変更]
type = ChangeAnim2
trigger1 = 1
value = 1025

[State 1025, ステート変更]
type = ChangeState
trigger1 = HitShakeOver = 1 ;ヒット硬直が解けたら
value = 1026

;------------------
; 速いカンフー突き手の相手側制御 - 吹っ飛ぶ
[Statedef 1026]
type    = A
movetype= H
physics = N

[State 1026, 攻撃を食らった時の移動速度]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1026, 速度加算]
type = VelAdd
trigger1 = 1
y = .45

[State 1026, カメラスクロールの有無]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65  ;自分と後方の画面端との距離
trigger2 = FrontEdgeBodyDist < 65 ;自分と前方の画面端との距離
value = 1
movecamera = 0,1

[State 1026, ステート変更] ;壁に当たる時のステートに行く
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1027

[State 1026, 相手ステートに戻す]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
; 速いカンフー突き手の相手側制御 - 壁に当たる
[Statedef 1027]
type    = A
movetype= H
physics = N

[State 1027, 振り返る]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1027, 軸位置移動]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1027, 移動を止める]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, カメラスクロールの有無]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, エフェクト表示]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 1027, 制御した相手のアニメ変更]
type = ChangeAnim2
trigger1 = Time = 0
value = 1027

[State 1027, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 1027, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 1028

;------------------
; 速いカンフー突き手の相手側制御 - 壁からのバウンド
[Statedef 1028]
type    = A
movetype= H
physics = N

[State 1028, 当たらない攻撃の定義]
type = NotHitBy
trigger1 = 1
value = , NA, NP

[State 1028, 移動速度]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, 移動速度]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, 振り返る]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, 速度加算]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, アニメ変更]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, アニメ変更] ;キリモミ吹っ飛び
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052) ;airファイルに[Begin Action 5052]のアニメが存在しているかを確認します
value = 5052

[State 1028, アニメ変更]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, アニメ変更]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, 相手ステートに戻す]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
; カンフー蹴り（弱）
; CNS レベル: 中級
;
; カンフー突き手と同じように、これも必殺技です。
; 地面で始まり、ジャンプしながら攻撃し、着地すれば終了します。
; この一連の動作のために３つのステートを使っています。
; 最初の地面から始まるステート(Statedefのtype = Sに注意してください)が終わると、
; ChangeStateで２番目の飛び上がるステート(Statedef 1051)に移ります。
; この飛び上がるステートは放物線を描くように空中での上昇と下降の移動速度を制御しています。
; 最後のステート(Statedef 1052)はその飛び上がった後地面に着地させるモーションで、
; アニメが終了したら通常立ちステートに戻します。
;
; 残り二つのステートにも注釈を添えています。

[Statedef 1050]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1050
ctrl = 0
sprpriority = 2

[State 1050, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 2, 2

[State 1050, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 2
x = 15

[State 1050, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 4
x = 25

[State 1050, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 80, 4
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = -10,-70
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -3.5,-7
guard.velocity = -7
air.velocity = -3.5,-7
fall = 1
fall.recovertime = 31

[State 1050, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 1051

;------------------
; カンフー蹴り・ジャンプ（弱）
;
; Statedefの下のvelsetパラメータに2,-6が設定されています。
; ステートが開始したと同時に始めの移動速度が前に２、上に−６加わります。
; Ｙ軸の場合、数値が０未満ならばキャラが上昇するので覚えておいてください。
;
; 空中状態のステートなのでtypeがAに設定されていますが、ここで「physics = N」に注意してください。
; こう設定するとこのステートのキャラは物理的に重力や摩擦の影響を受けなくなるので、
; 任意にステートコントローラで制御する必要があります。
; [State 1051, 速度加算]で下方向に速度を加算し（重力を与える）、
; [State 1051, ステート変更]で地面に着地した時や特定のコマンドを入力した時にステート変更出来るかをチェックします。
;
; さらに「hitdefpersist」のパラメータで、前のステートからHitDefの効果を引き継ぎ、
; このステートにHitDefが無くても攻撃がヒット出来るようにしています。
; 無い場合は効果が無くなり、攻撃がヒットしません。

[Statedef 1051]
type    = A
movetype= A
physics = N
velset = 2,-6
anim = 1051
hitdefpersist = 1 ;前のステートのヒット定義を持続させます
movehitpersist = 1

[State 1051, 速度加算] ;重力
type = VelAdd
trigger1 = 1
y = .45

[State 1051, ステート変更] ;追加入力用
type = ChangeState
triggerall = var(59) <= 0
trigger1 = Command = "a" || Command = "b"
trigger1 = Vel y < -1
value = 1055

[State 1051, ステート変更] ;追加入力用
type = ChangeState
triggerall = var(59) > 0 && RoundState = 2
trigger1 = Vel y < -1
trigger1 = movehit || movecontact || vel y > -2
value = 1055

[State 1051, ステート変更] ;着地したら専用ステートに行きます
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1052

;------------------
; カンフー蹴り・着地
;
; カンフー蹴りを終わらせるステートですが、velsetの値が0,0に戻っています。
; 着地の時は地面にめり込まないように、Ｙ方向の軸位置と移動速度をリセットしなければなりません。

[Statedef 1052]
type    = S
movetype= I
physics = S
anim = 1052
sprpriority = 1
velset = 0,0

[State 1052, 軸位置設定] ;地面の位置に軸をリセット
type = PosSet
trigger1 = Time = 0
y = 0

[State 1052, 音を鳴らす] ;着地音
type = PlaySnd
trigger1 = Time = 0
value = 40, 0

[State 1052, コントロール可否]
type = CtrlSet
trigger1 = AnimElem = 3, -1
value = 1

[State 1052, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 4
x = -15

[State 1052, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; カンフー蹴り・追撃蹴り

[Statedef 1055]
type    = A
movetype= A
physics = N
anim = 1055

[State 1055, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 100,0
channel = 0

[State 1055, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 0, 1

[State 1055, 軸位置移動]
type = PosAdd
trigger1 = Time = 0
x = 10
y = -10

[State 1055, 速度加算] ;重力
type = VelAdd
trigger1 = 1
y = .45

[State 1055, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Med
damage    = 35 + (prevstateno = 1061)*5, 2
priority  = 4
guardflag = MA
pausetime = 12,12
sparkxy = 0,-90
hitsound   = 5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -6
guard.velocity = -6
air.velocity = -4,-5
airguard.velocity = -4,-4.5
air.fall = 1
fall.recovertime = 31

[State 1055, ステート変更] ;着地したら専用ステートに行きます
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -5
value = 1056

;------------------
; カンフー蹴り・追撃蹴り着地

[Statedef 1056]
type    = S
movetype= I
physics = S
anim = 1056
sprpriority = 1
velset = 0,0

[State 1056, 軸位置設定] ;地面の位置に軸をリセット
type = PosSet
trigger1 = Time = 0
y = 0

[State 1056, 音を鳴らす] ;着地音
type = PlaySnd
trigger1 = Time = 0
value = 40, 0

[State 1056, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; カンフー蹴り（強）

[Statedef 1060]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 120
velset = 0,0
anim = 1060
ctrl = 0
sprpriority = 2

[State 1060, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 2, 2

[State 1060, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = 12

[State 1060, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 4
x = 25

[State 1060, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 93, 4
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = -10,-70
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -3.5,-7.5
guard.velocity = -7
air.velocity = -3.5,-7.5
fall = 1
fall.recovertime = 31

[State 1060, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 1061

;------------------
; カンフー蹴り・ジャンプ（強）

[Statedef 1061]
type    = A
movetype= A
physics = N
velset = 2.5,-7.5
anim = 1061
hitdefpersist = 1
movehitpersist = 1

[State 1061, 速度加算]
type = VelAdd
trigger1 = 1
y = .45

[State 1061, ステート変更] ;追加入力用
type = ChangeState
trigger1 = Command = "a" || Command = "b"
triggerall = Vel y < -1
trigger2 = var(59) > 0 || helper(20000),var(58)
trigger2 = movehit || movecontact || vel y > -2
value = 1055

[State 1061, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1052

;---------------------------------------------------------------------------
; 速いカンフー蹴り

[Statedef 1070]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= -330
velset = 0,0
anim = 1070
ctrl = 0
sprpriority = 2

[State 1070, 残像]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1070, 残像表示時間]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1070, 色の変更]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1070, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 2, 2

[State 1070, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = 14

[State 1070, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 4
x = 25

[State 1070, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Medium
getpower  = 0
damage    = 35, 3
priority  = 5
hitflag   = MA
guardflag = MA
pausetime = 8,7
sparkxy = -10,-70
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -2,-6
guard.velocity = -7
air.velocity = -2,-6
fall = 1
fall.animtype = Med
fall.recovertime = 30

[State 1070, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 1071

;------------------
; 速いカンフー蹴り・ジャンプ

[Statedef 1071]
type    = A
movetype= A
physics = N
velset = 2.5,-9
anim = 1071

[State 1071, 色の変更]
type = PalFX
trigger1 = Time = 0
time = 18
add = 32,16,0
sinadd = 64,32,5,3

[State 1071, 残像表示時間]
type = AfterImageTime
trigger1 = Vel Y < 0
time = 2

[State 1071, 速度加算]
type = VelAdd
trigger1 = 1
y = .5

[State 1071, 速度加算]
type = VelAdd
trigger1 = Vel Y >= -1
y = .2

[State 1071, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
getpower  = 0
damage    = 68, 4
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = -10,-70
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -3,-9.5
guard.velocity = -7
air.velocity = -3,-9.5
fall = 1
fall.recovertime = 30

[State 1071, ステート変更] ;追加入力用
type = ChangeState
triggerall = Vel y < -1
triggerall = Time > 0
trigger1 = Command = "a" || Command = "b"
Trigger1 = var(59) <= 0
trigger2 = var(59) > 0
trigger2 = P2BodyDist x <= 50
trigger2 = abs(P2BodyDist y) < 80
trigger2 = movehit || movecontact || vel y > -2
value = 1075

[State 1071, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1052

;---------------------------------------------------------------------------
; 速いカンフー蹴り・追撃蹴り

[Statedef 1075]
type    = A
movetype= A
physics = N
anim = 1055

[State 1075, 残像表示時間]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1075, 色の変更]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1075, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 100,0
channel = 0

[State 1075, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 2, 1

[State 1075, 軸位置移動]
type = PosAdd
trigger1 = Time = 0
x = 10
y = -10

[State 1075, 速度加算] ;重力
type = VelAdd
trigger1 = 1
y = .45

[State 1075, 速度加算]
type = VelAdd
trigger1 = Vel Y >= -1
y = .2

[State 1075, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Med
damage    = 42, 2
getpower  = 0
priority  = 4
guardflag = MA
pausetime = 12,12
sparkxy = 0,-90
hitsound   = 5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -6
guard.velocity = -6
air.velocity = -4,-6
airguard.velocity = -4,-4.5
air.fall = 1
fall.recovertime = 30

[State 1075, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -5
value = 1056

;---------------------------------------------------------------------------
; カンフーアッパー（弱）
; CNS レベル: 基本
;
; ２ヒットする簡単な対空必殺技です。
; Widthで幅を広げているのにも注意してください（[Statedef 210]参照）。

[Statedef 1100]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1100
ctrl = 0
sprpriority = 2

[State 1100, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(13) < 0
value = 5,0

[State 1100, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 2, 2

[State 1100, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Med
damage    = 52, 4
priority  = 5
guardflag = MA
pausetime = 4,8
sparkxy = 0,-48
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -3
guard.velocity = -6
air.velocity = -2,-2
airguard.velocity = -4,-4.5
p2facing = 1
fall.recovertime = 40

[State 1100, ヒット定義]
type = HitDef
trigger1 = AnimElem = 7
attr = S, SA
animtype  = Up
damage    = 55, 4
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-110
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -1,-9.5
guard.velocity = -6
air.velocity = -1,-7.5
airguard.velocity = -4,-4.5
p2facing = 1
fall = 1
fall.recovertime = 40 ;相手が吹っ飛び中に空中受け身が可能になるまでの時間（つまりその間は空中受け身不可）
yaccel = .4 ;ヒット時相手吹っ飛びのＹ軸方向に速度を加える

[State 1100, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; カンフーアッパー（強）

[Statedef 1110]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 120
velset = 0,0
anim = 1110
ctrl = 0
sprpriority = 2

[State 1110, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(14) < 0
value = 5,0

[State 1110, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 2, 2

[State 1110, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Med
damage    = 57, 4
priority  = 5
guardflag = MA
pausetime = 4,8
sparkxy = 0,-48
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -3
guard.velocity = -6
air.velocity = -2,-2
airguard.velocity = -4,-4.5
p2facing = 1
fall.recovertime = 50

[State 1110, ヒット定義]
type = HitDef
trigger1 = AnimElem = 7
attr = S, SA
animtype  = Up
damage    = 60, 4
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-110
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -1,-10.5
guard.velocity = -6
air.velocity = -1,-8.5
airguard.velocity = -4,-4.5
p2facing = 1
fall = 1
fall.recovertime = 50
yaccel = .4

[State 1110, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 速いカンフーアッパー

[Statedef 1120]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= -330
velset = 0,0
anim = 1120
ctrl = 0
sprpriority = 2

[State 1120, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(14) < 0
value = 5,0

[State 1120, 残像]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1120, 残像表示時間]
type = AfterImageTime
trigger1 = AnimTime < -2
time = 2

[State 1120, 色の変更]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1120, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 2, 2

[State 1120, ヒット定義]
type = HitDef
trigger1 = Time = 0
trigger2 = AnimElem = 4
attr = S, SA
animtype  = Med
damage    = 30, 4
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 6,10
sparkxy = 0, ifelse(Time = 0, -48, -55)
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 21
ground.velocity = -3
guard.velocity = -6
air.velocity = -2,-2
airguard.velocity = -4,-4.5
p2facing = 1
fall.recovertime = 60

[State 1120, ヒット定義]
type = HitDef
trigger1 = AnimElem = 7
attr = S, SA
animtype  = Up
damage    = 68, 4
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-110
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 21
ground.velocity = -1.2,-11
guard.velocity = -6
air.velocity = -1.2,-9
airguard.velocity = -4,-4.5
p2facing = 1
fall = 1
fall.recovertime = 60
yaccel = .4

[State 1120, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;-------------------------------------------------------

;カンフーランスキック
[Statedef 850]
type    = A
movetype= A
physics = N
juggle  = 4
velset = 0,0
anim = 888
ctrl = 0
sprpriority = 2

[State 0, ]
type = Helper
trigger1 = AnimElem = 3
IgnoreHitPause = 1
SuperMoveTime = 999
PauseMoveTime = 999
stateno = 870
postype = p1
pos = 0,0
size.Xscale = 1.0
size.Yscale = 1.0

[State 3501, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 10

[State 3501, 無敵]
type = NotHitBy
trigger1 = time = 10
value = ,AP,NP,SP,HP
time = 10

[State 200] 
type = PowerAdd
trigger1 = time = 0
value = 110

[State 702, 押し判定]
type = PlayerPush
trigger1 = 1
value = 0
IgnoreHitPause = 1
Persistent = 1

[State 1007, 埃]
type = MakeDust
trigger1 = AnimElem = 1
pos = -5,0
pos2 = -15, 0
spacing = 1

[State 701, 移動速度]
type = posset
trigger1 = time = 0
y = 0

[State 701, 移動速度]
type = VelSet
trigger1 = AnimElem = 2
x = 4
y = 0

[State 701, 移動速度]
type = VelSet
trigger1 = AnimElem = 3
x = 6
y = -2

[State 701, 移動速度]
type = VelSet
trigger1 = AnimElem = 4
x = 7
y = -7

[State 701, 移動速度]
type = VelSet
trigger1 = AnimElem = 5
x = 0

[State 701, 重力]
type = Veladd
trigger1 = pos Y < 0
y = 0.35

[State 701, 重力]
type = Veladd
trigger1 = pos Y < 0&&AnimElemtime(4) <= 19
x = -0.35

[State 1100, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 2

[State 1100, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype  = Hard
damage    = 80, 6
priority  = 5
guardflag = AF
hitflag = AF
pausetime = 5,20
sparkxy = 0,-180
hitsound   = s0,5
sparkno = s889
guardsound = s0,10
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -1,-9.5
guard.velocity = -6
air.velocity = -1,-7.5
airguard.velocity = 0,-4.5
p2facing = 1
fall = 1
fall.recover = 0    
yaccel = .7

[State 1052, コントロール可否]
type = CtrlSet
trigger1 = AnimElem = 5, 7 && !movecontact
value = 1

[State 1051, 3]
type = ChangeState
trigger1 = Pos Y >= 0 && vel Y > 0
value = 1056

[Statedef 855]
type    = A
movetype= A
physics = N
juggle  = 4
velset = 0,0
anim = 888
ctrl = 0
sprpriority = 2

[State 0, ]
type = Helper
trigger1 = AnimElem = 3
IgnoreHitPause = 1
SuperMoveTime = 999
PauseMoveTime = 999
stateno = 870
postype = p1
pos = 0,0
size.Xscale = 1.0
size.Yscale = 1.0

[State 3501, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 10

[State 3501, 無敵]
type = NotHitBy
trigger1 = time = 10
value = ,AP,NP,SP,HP
time = 10

[State 200] 
type = PowerAdd
trigger1 = time = 0
value = 120

[State 702, 押し判定]
type = PlayerPush
trigger1 = 1
value = 0
IgnoreHitPause = 1
Persistent = 1

[State 1007, 埃]
type = MakeDust
trigger1 = AnimElem = 1
pos = -5,0
pos2 = -15, 0
spacing = 1

[State 701, 移動速度]
type = posset
trigger1 = time = 0
y = 0

[State 701, 移動速度]
type = VelSet
trigger1 = AnimElem = 2
x = 5
y = 0

[State 701, 移動速度]
type = VelSet
trigger1 = AnimElem = 3
x = 8
y = -3

[State 701, 移動速度]
type = VelSet
trigger1 = AnimElem = 4
x = 9
y = -8

[State 701, 移動速度]
type = VelSet
trigger1 = AnimElem = 5
x = 0

[State 701, 重力]
type = Veladd
trigger1 = pos Y < 0
y = 0.35

[State 701, 重力]
type = Veladd
trigger1 = pos Y < 0&&AnimElemtime(4) <= 19
x = -0.35

[State 1100, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 2

[State 1100, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype  = Hard
damage    = 80, 6
priority  = 5
guardflag = AF
hitflag = AF
pausetime = 5,20
sparkxy = 0,-180
hitsound   = s0,5
sparkno = s889
guardsound = s0,10
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -1,-9.5
guard.velocity = -6
air.velocity = -1,-7.5
airguard.velocity = 0,-4.5
p2facing = 1
fall = 1
fall.recover = 0    
yaccel = .7

[State 1052, コントロール可否]
type = CtrlSet
trigger1 = AnimElem = 5, 7 && !movecontact
value = 1

[State 1051, 3]
type = ChangeState
trigger1 = Pos Y >= 0 && vel Y > 0
value = 1056

;ダブル・ランス（EX技・ゲージ３分の１）
[Statedef 860]
type    = A
movetype= A
physics = N
juggle  = 6
poweradd= -330
velset = 0,0
anim = 888
ctrl = 0
sprpriority = 2

[State 1027, エフェクト表示]
type = Explod
trigger1 = time = 0
anim = 20011
pos = 0, 0
postype = p1
sprpriority = -1
removetime = -2
bindtime = 1
ownpal = 1
removeongethit = 1
scale = 1,1

[State 1027, エフェクト表示]
type = Explod
trigger1 = time = 0
anim = 20010
pos = 0, 0
postype = p1
sprpriority = -1
removetime = -2
bindtime = 1
ownpal = 1
removeongethit = 1
scale = 1,1

[State 0, ]
type = Helper
trigger1 = AnimElem = 3
IgnoreHitPause = 1
SuperMoveTime = 999
PauseMoveTime = 999
stateno = 870
postype = p1
pos = 0,0
size.Xscale = 1.0
size.Yscale = 1.0

[State 3501, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 10

[State 3501, 無敵]
type = NotHitBy
trigger1 = time = 10
value = ,AP,NP,SP,HP
time = 10

[State 1020, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1020, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(5) < 0
time = 2

[State 1020, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 702, 押し判定]
type = PlayerPush
trigger1 = 1
value = 0
IgnoreHitPause = 1
Persistent = 1

[State 1007, 埃]
type = MakeDust
trigger1 = AnimElem = 1&&anim=888
pos = -5,0
pos2 = -15, 0
spacing = 1

[State 701, 移動速度]
type = posset
trigger1 = time = 0
y = 0

[State 701, 移動速度]
type = VelSet
trigger1 = AnimElem = 2&&anim=888
x = 5
y = 0

[State 701, 移動速度]
type = VelSet
trigger1 = AnimElem = 3&&anim=888
x = 8
y = -3

[State 701, 移動速度]
type = VelSet
trigger1 = AnimElem = 4&&anim=888
x = 9
y = -8

[State 701, 移動速度]
type = VelSet
trigger1 = AnimElem = 5&&anim=888
x = 0

[State 701, 重力]
type = Veladd
trigger1 = pos Y < 0
y = 0.35

[State 701, 重力]
type = Veladd
trigger1 = pos Y < 0&&AnimElemtime(4) <= 19 &&anim=888
x = -0.35

[State 1100, 1]
type = PlaySnd
trigger1 = AnimElem = 1&&anim=888
value = 0, 2

[State 1100, 3]
type = HitDef
trigger1 = AnimElem = 4&&anim=888
attr = S, SA
animtype  = Hard
damage    = 60, 0
priority  = 5
guardflag = AF
hitflag = AF
pausetime = 5,20
sparkxy = 30,-200
hitsound   = s0,5
sparkno = s890
guardsound = s0,10
ground.type = High
ground.slidetime = 24
ground.hittime  = 25
ground.velocity = -3,0
guard.velocity = -3
air.velocity = -3,0
airguard.velocity = -3,0
p2facing = 1
yaccel = .7
kill = 0
fall.recovertime = 46

[State 820, 1]
type = ChangeAnim
Trigger1 = movehit&&anim != 885
value = 885

[State 702, ]
type = velset
trigger1 =  AnimElemTime(1) = 0&&anim=885
x = 3
y = -11

[State 1052, コントロール可否]
type = CtrlSet
trigger1 = AnimElem = 5, 7 && anim = 888 && !movecontact
value = 1

[State 1051, 3]
type = ChangeState
trigger1 = anim = 885 && AnimElemTime(4) = 3
value = 861

[State 1051, 3]
type = ChangeState
trigger1 = Pos Y >= 0 && vel Y > 0
value = 1056

[Statedef 861]
type     = A
movetype = A
physics  = N
juggle   = 0
ctrl     = 0
poweradd = 0
velset   = 0,0

[State 1020, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 750, 残像]
type = AfterImage
trigger1 = Time = 0
Time = 30
PalBright   = 100,0,0
PalContrast = 250,80,20
Trans = Sub
TimeGap  = 3
FrameGap = 1
length = 6

[State 750, 残像表示時間]
type = AfterImageTime
trigger1 = (Time > 5) && (Pos Y >= 0)
time = 0

[State 750, 移動速度]
type = VelSet
trigger1 = time = 5
x = 5
y = 10

[State 750, ]
type = playerpush
trigger1 = 1
value = 0

[State 750, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 0,1

[State 750, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr              = A, SA
animtype          = back
damage            = 30,0
getpower          = 30,10
hitflag           = MAFD
guardflag         = HA
priority          = 4
pausetime         = 5,20
sparkno           = 0
sparkxy           = -10,-10
hitsound          = s0,5
guardsound        = s0,10
ground.type       = High
ground.slidetime  = 16
ground.hittime    = 17
ground.velocity   = -4,3
air.velocity      = -5,3
kill = 1
fall = 1
fall.recovertime = 38

[State 1051, 3]
type = ChangeState
trigger1 = Pos Y >= 0
value = 1052

[Statedef 870]
type    = A
movetype= I
physics = N
anim = 20002
velset = 0,0
ctrl = 0
sprpriority = 3

[State 191, 猛虎]
type = posset
trigger1 = 1
x = root,pos x
y = root,pos Y

[State 191, ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 191, ]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 1995, 角度変更命令]
type = AngleDraw       ;AngleDraw単体では効果がない
trigger1 = 1

[State 1995, 角度加算]
type = AngleAdd
trigger1 = 1
value = 1            ;30度ずつ増加する

[State 191, ]
type = Destroyself
trigger1 = root,movetype = H || time > 120
trigger2 = animtime = 0 ||  root,anim = 885

;天魔空刃脚 弱
[Statedef 750]
type     = A
movetype = A
physics  = N
juggle   = 5
ctrl     = 0
anim     = 4100
poweradd = 100
velset   = 0,0

[State 750, 残像]
type = AfterImage
trigger1 = Time = 0
Time = 30
PalBright   = 100,0,0
PalContrast = 250,80,20
Trans = Sub
TimeGap  = 3
FrameGap = 1
length = 6

[State 750, 残像表示時間]
type = AfterImageTime
trigger1 = (Time > 5) && (Pos Y >= 0)
time = 0

[State 750, 移動速度]
type = VelSet
trigger1 = Time = 5
x = 5
y = 10

[State 750, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 4
value = 0,1

[State 750, ヒット定義]
type = HitDef
trigger1 = Time = 1
attr              = A, SA
animtype          = Hard
damage            = 60,0
getpower          = 30,10
hitflag           = MAFD
guardflag         = MA
priority          = 4
pausetime         = 10,10
sparkxy           = -10,-10
hitsound          = s0,5
guardsound        = s0,10
ground.type       = High
ground.slidetime  = 16
ground.hittime    = 17
ground.velocity   = -5,0
air.velocity      = -3,-4
envshake.time     = 10 
envshake.ampl     = 6
envshake.freq     = 100
fall.recovertime = 28

[State 1051, 3] ;Change state when KFM is close to ground
type = ChangeState
trigger1 = Pos Y >= 0
value = 1052


;天魔空刃脚　強
[Statedef 760]
type     = A
movetype = A
physics  = N
juggle   = 5
ctrl     = 0
anim     = 4110
poweradd = 100
velset   = 0,0

[State 750, 残像]
type = AfterImage
trigger1 = Time = 0
Time = 30
PalBright   = 100,0,0
PalContrast = 250,80,20
Trans = Sub
TimeGap  = 3
FrameGap = 1
length = 6

[State 750, 残像表示時間]
type = AfterImageTime
trigger1 = (Time > 5) && (Pos Y >= 0)
time = 0

[State 750, 移動速度]
type = VelSet
trigger1 = Time = 5
x = 8
y = 5

[State 750, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 4
value = 0,1

[State 750, ヒット定義]
type = HitDef
trigger1 = Time = 1
attr              = A, SA
animtype          = Hard
damage            = 60,0
getpower          = 30,10
hitflag           = MAF
guardflag         = MA
priority          = 4
pausetime         = 10,10
sparkxy           = -10,-10
hitsound          = s0,5
guardsound        = s0,10
ground.type       = High
ground.slidetime  = 16
ground.hittime    = 17
ground.velocity   = -5,0
air.velocity      = -3,-4
envshake.time     = 10 
envshake.ampl     = 6
envshake.freq     = 100
fall.recovertime = 28

[State 1051, 3] ;Change state when KFM is close to ground
type = ChangeState
trigger1 = Pos Y >= 0
value = 1052

;天魔空刃脚　EX
[Statedef 765]
type     = A
movetype = A
physics  = N
juggle   = 3
ctrl     = 0
anim     = 4110
poweradd = -330
velset   = 0,0

[State 1020, 色の変更]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 750, 残像]
type = AfterImage
trigger1 = Time = 0
Time = 30
PalBright   = 100,0,0
PalContrast = 250,80,20
Trans = Sub
TimeGap  = 3
FrameGap = 1
length = 6

[State 750, 残像表示時間]
type = AfterImageTime
trigger1 = (Time > 5) && (Pos Y >= 0)
time = 0

[State 750, 移動速度]
type = VelSet
trigger1 = Time = 5
x = 18
y = 4

[State 750, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 4
value = 0,1

[State 750, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr              = A, SA
animtype          = Hard
damage            = 60,0
getpower          = 30,10
hitflag           = MAF
guardflag         = MA
priority          = 4
pausetime         = 10,10
sparkxy           = -10,-10
hitsound          = s0,5
guardsound        = s0,10
ground.type       = High
ground.slidetime  = 16
ground.hittime    = 17
ground.velocity   = -5,0
air.velocity      = -3,-4
envshake.time     = 10 
envshake.ampl     = 6
envshake.freq     = 100
fall.recovertime = 28

[State 1051, 3]
type = ChangeState
trigger1 = FrontEdgeBodyDist <= 0
value = 766

[State 1026, カメラスクロールの有無]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 1020, ]
type = playerpush
trigger1 = 1
value = 0

[State 1051, 3] ;Change state when KFM is close to ground
type = ChangeState
trigger1 = Pos Y >= 0
value = 1052

[Statedef 766]
type     = A
movetype = A
physics  = N
juggle   = 2
ctrl     = 0
anim     = 4100
poweradd = 100
velset   = 0,0

[State 1026, カメラスクロールの有無]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 1020, ]
type = turn
trigger1 = Time = 0

[State 1020, ]
type = playerpush
trigger1 = 1
value = 0

[State 1020, 色の変更]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1027, エフェクト表示]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3
facing = 1

[State 750, 残像]
type = AfterImage
trigger1 = Time = 0
Time = 30
PalBright   = 100,0,0
PalContrast = 250,80,20
Trans = Sub
TimeGap  = 3
FrameGap = 1
length = 6

[State 750, 残像表示時間]
type = AfterImageTime
trigger1 = (Time > 5) && (Pos Y >= 0)
time = 0

[State 750, 移動速度]
type = VelSet
trigger1 = Time = 5
x = 7
y = 10

[State 750, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 4
value = 0,1

[State 750, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr              = A, SA
animtype          = Hard
damage            = 60,0
getpower          = 30,10
hitflag           = MAFD
guardflag         = HA
priority          = 4
pausetime         = 10,10
sparkxy           = -10,-10
hitsound          = s0,5
guardsound        = s0,10
ground.type       = High
ground.slidetime  = 16
ground.hittime    = 17
ground.velouity   = -5,0
air.velocity      = -3,-4
envshake.time     = 10 
envshake.ampl     = 6
envshake.freq     = 100
fall.recovertime = 28

[State 1051, 3] ;Change state when KFM is close to ground
type = ChangeState
trigger1 = Pos Y >= 0
value = 1052

;---------------------------------------------------------------------------
; Light Kung Fu Blow
; CNS difficulty: easy
; Notes: This uses the EnvShake controller to shake the screen. It makes the
;        move look stronger.
[Statedef 1300]
type    = S
movetype= A
physics = N
juggle  = 4
poweradd= 100
ctrl = 0
sprpriority = 2
anim = 1300

[State 240, KFM]
type = StateTypeSet
trigger1 = pos Y < 0
statetype = A
physics = A

[State 240, KFM]
type = velset
trigger1 = time = 0 && pos Y = 0
x = 0

[State 1200, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 1200, Width 1]
type = Width
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
value = 10,0

[State 1200, Width 2]
type = Width
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(9) < 0
value = 20,0

[State 1200, Shake Screen]
type = EnvShake
trigger1 = AnimElem = 6
time = 4     ;Time to shake screen
ampl = 2     ;Amount to shake
freq = 180   ;A frequency of 180 shakes the screen rapidly

[State 1200, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 105, 1
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-65
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 18
ground.velocity = -10,0-(3*(pos Y = 0)*(p2bodydist X < 40))
ground.cornerpush.veloff = -12 ;To push far away when p2 is in corner
guard.velocity = -7
air.velocity = -3.5,-3
airguard.velocity = -3.5,-4.5
fall = 0+((pos Y = 0)*(p2bodydist X < 40))
fall.recovertime = 31


[State 1020, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0 && pos Y < 0
value = 51
ctrl = 1

[State 1200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Strong Kung Fu Blow
; CNS difficulty: easy
[Statedef 1310]
type    = S
movetype= A
physics = N
juggle  = 4
poweradd= -333
anim = 1300
ctrl = 0
sprpriority = 2

[State 702, 無敵]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 98

[State 1020, Afterimage]
type = AfterImage
trigger1 =  AnimElemTime(3) = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1020, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 0
time = 2

[State 1020, Blink Yellow]
type = PalFX
trigger1 =  AnimElemTime(3) = 0
time = 20
add = 32,16,0

[State 240, KFM]
type = velset
trigger1 = time = 0 && pos Y = 0
x = 0

[State 240, KFM]
type = StateTypeSet
trigger1 = pos Y < 0
statetype = A
physics = A

[State 240, KFM]
type = velset 
trigger1 = pos Y < 0
y = 0

[State 1210, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 1210, Width 1]
type = Width
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
value = 10,0

[State 1210, Width 2]
type = Width
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(9) < 0
value = 20,0

[State 1210, Shake Screen]
type = EnvShake
trigger1 = AnimElem = 6
time = 8
ampl = 2
freq = 170   ;A frequency of less than 180 causes a dampening effect

[State 1210, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 105, 1
priority  = 5
guardflag = HA
pausetime = 12,12
sparkxy = 0,-65
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -10
ground.cornerpush.veloff = -15 ;To push far away when p2 is in corner
guard.velocity = -8
air.velocity = -4,-4.5
airguard.velocity = -4,-4.5

[State 1020, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0 && pos Y < 0
value = 51
ctrl = 1

[State 1210, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Fast Kung Fu Blow
; CNS difficulty: easy
[Statedef 1320]
type    = S
movetype= A
physics = N
juggle  = 6
poweradd= -333
anim = 1320
ctrl = 0
sprpriority = 2

[State 240, KFM]
type = velset
trigger1 = pos Y = 0 
x = 0

[State 240, KFM]
type = StateTypeSet
trigger1 = pos Y < 0
statetype = A
physics = A

[State 240, KFM]
type = velset 
trigger1 = pos Y < 0
y = 0

[State 240, KFM]
type = StateTypeSet
trigger1 = pos Y = 0 && statetype = A
statetype = S

[State 1220, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1220, Afterimage]
type = AfterImageTime
trigger1 = AnimTime < -2
time = 2

[State 1220, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
value = 10,0

[State 1220, Width 2]
type = Width
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(9) < 0
value = 20,0

[State 1220, Shake Screen]
type = EnvShake
trigger1 = AnimElem = 6
time = 8
ampl = 3
freq = 170

[State 2303, エフェクト]
type = Explod
trigger1 = animelem = 6
anim = 15000
postype = p1
pos = 48,0
sprpriority = 7
ownpal = 1
ontop = 1
bindtime = -1
supermovetime = 99999999
pausemovetime = 99999999
IgnoreHitPause = 1
removeongethit = 1

[State 1020, 6]
type = HitDef
trigger1 = time = 0
trigger1 = p2bodydist X < 40
attr = S, SA
animtype  = Hard
damage    = 105, 1
getpower  = 0
priority  = 4
guardflag = MA
pausetime = 28,7
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 1
p2stateno = 1030    ;Make p2 go to state 1025 on hit
p2facing = 1        ;Force to face p1
fall.recovertime = 31

[State 1220, 2]
type = HitDef
trigger1 = Time = 0
trigger1 = p2bodydist X >= 40
attr = S, SA
animtype  = Hard
damage    = 125, 2
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 15,15
sparkxy = 0,-65
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 30
ground.velocity = -9,-2
ground.cornerpush.veloff = -20 ;To push far away when p2 is in corner
guard.velocity = -9
air.velocity = -5,-5
airguard.velocity = -5,-5
air.fall = 1
fall.animtype = Hard           ;Show "hard" animtype when hit for a fall
yaccel = .4  ;Fall faster

[State 1020, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0 && pos Y < 0 && !MoveContact
value = 51
ctrl = 1

[State 1020, ]
type = veladd
trigger1 = pos Y < 0
y = 0.4

[State 1020, ]
type = velset
trigger1 = pos Y >= 0
y = 0

[State 1020, ]
type = posset
trigger1 = pos Y > 0
y = 0

[State 1020, ]
type = posadd
trigger1 = BackEdgeBodyDist < 0
trigger1 = !movehit
x = 5

[State 1020, ]
type = posadd
trigger1 = frontEdgeBodyDist < 0
trigger1 = !movehit
x = -5

[State 1026, カメラスクロールの有無]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 1220, 3]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = vel Y = 0 && pos Y = 0
value = 0
ctrl = 1

;--------------------------------------
[Statedef 1330]
type     = S
movetype = A
physics  = S
juggle   = 5
ctrl     = 0
anim     = 1320
velset   = 0,0


[State 200] 
type = PowerAdd
trigger1 = time = 0
value = 100

;***********************************
[State 1007, 食らい上書き]
type = HitOverRide
trigger1 = animelem = 8,<=0
time = 1                         ;上書き出来る時間（フレーム）
attr = SCA, AA,AP,AT             ;上書き出来る相手の攻撃属性を指定
;attr = SCA, NA,SA,HA,NP,SP,HP   ;（↑と意味は同じ）
forceair = ifelse((!Alive),1,0)  ;上書きしたら「空中状態」にするか否か（デフォルトは０）
stateno = 1331                   ;上書き先のステート
;slot = 0                        ;このHitOverRideのスロットナンバー（デフォルトは０）
IgnoreHitPause = 1

[State 701, 移動速度]
type = VelSet
trigger1 = AnimElem = 4
x = 3

[State 701, 移動速度]
type = VelSet
trigger1 = AnimElem = 1
x = -2

[State 1007, 物理的なキャラの幅]
type = Width
trigger1 = (AnimElemTime(5) > 0) && (AnimElemTime(10) < 0)
player = 30,0
edge = 45,0

[State 1007, 埃]
type = MakeDust
trigger1 = Time = 8
pos = 40,0
spacing = 1

[State 1007, 軸位置]
type = PosSet
trigger1 = 1
y = 0

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElemTime(4) = 0
value = 0,2

;***********************************
[State 1007, ヒット定義]
type = HitDef
trigger1 = Time = 1
attr             = S, SA
animtype         = Hard
damage           = 80,1
getpower         = 10
guardflag        = MA
priority         = 4
pausetime        = 12,12
sparkxy          = -10,-60
hitsound         = 5,3
guardsound       = 6,0
ground.type      = Low
ground.slidetime = 16
ground.hittime   = 29
ground.velocity  = -10
guard.velocity   = -7
air.velocity     = -3.5,-4.5
airguard.velocity= -3.5,-4.5
envshake.time    = 12
envshake.ampl    = 6
envshake.freq    = 100
ground.cornerpush.veloff = -10
fall = 0+((pos Y = 0)*(p2bodydist X < 40))
fall.recovertime = 31

[State 1220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;アーマー部分（カンフーブロー中に攻撃を食らえばこれに移行）
[Statedef 1331]
type     = U
movetype = H
physics  = U
poweradd = 0
ctrl     = 0
velset   = 0,0
hitdefpersist = 1 ;前のステートのHitDefが持続

[State 1331]
type=lifeadd
trigger1=!time
value=-gethitvar(damage)/2
kill=0


[State 1331]
type=Statetypeset
trigger1=!time
movetype=A

[State 701, 移動速度]
type = VelSet
trigger1 = AnimElem = 4
x = 3

[State 701, 移動速度]
type = VelSet
trigger1 = AnimElem = 1
x = -2

[State 1008, 状態変更];バグ対策
type = StateTypeSet
trigger1 = (Anim = 0)
MoveType = I
IgnoreHitPause = 1
Persistent = 1

[State 1008, 特殊効果]
type = AssertSpecial
triggerall = (Alive) && (Anim != 0);バグ対策
trigger1 = !(HitShakeOver)
flag = TimerFreeze
pausemovetime = 99999999
IgnoreHitPause = 1

[State 1008, 時間停止]
type = Pause
triggerall = (Life > 0) && (Anim != 0);バグ対策
trigger1 = (Time = 0)
time = ceil(GetHitVar(HitShakeTime)/2)
IgnoreHitPause = 1

[State 1008, 食らい上書き]
type = HitOverRide
triggerall = (Alive) && (AnimElemTime(1) > 0)
trigger1 = animelem = 8,<=0
trigger1 = (Anim != 0);バグ対策
time = 1
attr = SCA, AA,AP,AT
stateno = 1331
IgnoreHitPause = 1

[State 1008, 画像の色]
type = PalFX
triggerall = (Alive)
trigger1 = Time = 0
time = GetHitVar(HitShakeTime)
add = 250,20,40
sinadd = 22,5,364,3
pausemovetime = 99999999
IgnoreHitPause = 1

[State 1008, 物理的なキャラの幅]
type = Width
triggerall = (Anim = 1010)
trigger1 = (AnimElemTime(5) > 0) && (AnimElemTime(10) < 0)
player = 30,0
edge = 45,0

[State 1008, 軸位置]
type = PosSet
trigger1 = (Alive)
y = 0

[State 1008, 音を鳴らす]
type = PlaySnd
triggerall = (PrevStateNo != 1330)
trigger1 = AnimElemTime(4) = 0
value = 0,2

[State 1008, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 0,13


[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = (PrevStateNo = 1341) && (Anim = 0);バグ対策
trigger3 = (Life <= 0) || (Lose)
value = 0
ctrl = 1


;----------------------------------------
;クロスカウンター
[Statedef 1500]
type     = S
movetype = I
physics  = N
poweradd = 0
ctrl     = 0
velset   = 0,0


;***********************************
[State 1009, アニメ変更]
type = ChangeAnim
trigger1 = Time = 0
value = 1500
Persistent = 0

[State 1009, 画像の色]
type = PalFX
trigger1 = Time = 1
time = 10
add = 20,150,40
sinadd = 252,5,364,3
IgnoreHitPause = 1

[State 1009, 軸位置]
type = PosSet
trigger1 = 1
y = 0

[State 702, 無敵]
type = NotHitBy
trigger1 = Time = 1
value = ,AA,HA,NA,SA
time = 11

;***********************************
[State 1009, 受け止め定義];立ち
type = ReversalDef
trigger1 = Time = 1
reversal.attr = SC, AA,NA,HA,SA              ;受け止める相手の攻撃属性を指定
;reversal.attr = SA, NA,SA,HA,NP,SP,HP ;（↑と意味は同じ）
pausetime     = 20,32
numhits       = 0
sparkno       = 40
sparkxy       = 0,-60
hitsound      = s0,13
P1StateNo     = 1501
P2StateNo     = 1030
fall = 1
fall.recovertime=999

[State 810, 掴んだ相手の位置９]
type = TargetBind
trigger1 = movehit
pos = 0, 0
;persistent=0
ignorehitpause=1


;***********************************
;[State 1009, ステート変更]
;type = ChangeState
;trigger1 = (MoveHit)
;value = 1501

[State 1009, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 1501]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 120
velset = 0,0
ctrl = 0
sprpriority = 2
anim = 1501

[State 2303, エフェクト]
type = Explod
trigger1 = animelem = 2 && anim = 1501
anim = 15006
postype = p1
pos = 0,-60
sprpriority = 7
ownpal = 1
ontop = 1
bindtime = -1
supermovetime = 99999999
pausemovetime = 99999999
IgnoreHitPause = 1
removeongethit = 1

[State 1010, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 8

[State 1010, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 2

[State 1010, 3]
type = PosAdd
trigger1 = AnimElem = 3
x = 5

[State 3501, 掴んだ相手のライフ増減] 
type = TargetLifeAdd 
trigger1 = numtarget != 0
;trigger1 = (target,stateno = [1030,1032]) && (target,movetype = H) 
value = -50
absolute = 1
Persistent = 0 
IgnoreHitPause = 1 

[State 1200, 3]
type = ChangeState
trigger1 = !IsHelper && AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------

;かんふーらっしゅ
[Statedef 1400]
type    = S
movetype= A
physics = N
juggle  = 4
poweradd= 70
velset = 0,0
anim = 1400
ctrl = 0
sprpriority = 2

[State 3050, 無敵]
type = NotHitBy
trigger1 = 1
value = , NT, ST, HT,AT
time = 2

[State 1027, エフェクト表示]
type = Explod
trigger1 = AnimElem = 2 && pos Y = 0
anim = 20011
pos = 0, 0
postype = p1
sprpriority = -1
removetime = -2
bindtime = 1
ownpal = 1
removeongethit = 1
scale = 1,1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 11
persistent = 0

[State 1000, ヒット定義]
type = HitDef
trigger1 = Time = 0 || timemod = 4,3
attr = S, SA
animtype  = Hard
damage    = 20, 1
hitflag = MAFP
priority  = 1
guardflag = MA
pausetime = 0,8
sparkxy = -10,-74+floor(0.05*random)
hitsound   = 5,2
sparkno = 0
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 10
ground.velocity =0,-1
air.velocity = 0,-3
air.fall = 1
fall.recovertime = 31

[State 1000, 軸位置移動]
type = velset
trigger1 = AnimElem = 2
x = 6

[State 1000, 軸位置移動]
type = velset
trigger1 = AnimElem = 8
x = 0

[State 1000, ]
type = PlayerPush
trigger1 = 1
value = 1


[State 1220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;かんふーらっしゅ・強
[Statedef 1410]
type    = S
movetype= A
physics = N
juggle  = 4
poweradd= 70
velset = 0,0
anim = 1400
ctrl = 0
sprpriority = 2

[State 2303, エフェクト]
type = Explod
trigger1 = AnimElem = 2 && pos Y = 0
anim = 20001
postype = p1
pos = 20,0
sprpriority = 7
ownpal = 1
ontop = 1
bindtime = 1
supermovetime = 99999999
pausemovetime = 99999999
IgnoreHitPause = 1
removeongethit = 1
persistent=0

[State 3050, 無敵]
type = NotHitBy
trigger1 = 1
value = , NT, ST, HT,AT
time = 2

[State 3050, 無敵]
type = changeanim
trigger1 = time <= 10
value = 1400

[State 1027, エフェクト表示]
type = Explod
trigger1 = AnimElem = 2 && pos Y = 0
anim = 20011
pos = 0, 0
postype = p1
sprpriority = -1
removetime = -2
bindtime = 1
ownpal = 1
removeongethit = 1
scale = 1,1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 11
persistent = 0

[State 1000, ヒット定義]
type = HitDef
trigger1 = Time = 0 || timemod = 4,3
attr = S, SA
animtype  = Hard
damage    = 20, 1
hitflag = MAFP
priority  = 1
guardflag = MA
pausetime = 0,18
sparkxy = -10,-74+(0.05*random)
hitsound   = 5,2
sparkno = 0
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 10
ground.velocity =0,-1
air.velocity = 0,-3
air.fall = 1
fall.recovertime = 29

[State 1000, 軸位置移動]
type = velset
trigger1 = AnimElem = 2
x = 12

[State 1000, 軸位置移動]
type = velset
trigger1 = AnimElem = 8
x = 0

[State 1000, ]
type = PlayerPush
trigger1 = 1
value = 0

[State 1000, ]
type = turn
trigger1 =  animtime = 0 && p2dist X < 0


[State 1020, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0 && pos Y = 0
value = 1052

[State 1220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;かんふーらっしゅ・EX
[Statedef 1420]
type    = S
movetype= A
physics = N
juggle  = 4
poweradd= -330
velset = 0,0
anim = 1410
ctrl = 0
sprpriority = 2

[State 1020, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1020, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(17) < 0
time = 2

[State 1020, Blink Yellow]
type = PalFX
trigger1 = time = 0 || time = 20 || time = 40
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 3050, 無敵]
type = NotHitBy
trigger1 = 1
value = , NT, ST, HT,AT
time = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 2
value = 0, 11
persistent = 0

[State 1000, ヒット定義]
type = HitDef
trigger1 = Time = 0 || timemod = 4,3
trigger1 = animelem = 14,<=0
attr = S, SA
animtype  = Hard
damage    = 10, 1
hitflag = MAFP
priority  = 3
guardflag = MA
pausetime = 8,8
sparkxy = -10,-74+ceil(0.05*random)
hitsound   = 5,2
sparkno = 0
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 26
ground.velocity =0
air.velocity = 0,-3
air.fall = 1
fall.recovertime = 35

[State 1000, ヒット定義]
type = HitDef
trigger1 = timemod = 4,3
trigger1 = animelem = 14,>=0 && enemynear,statetype != A
attr = S, SA
animtype  = Hard
damage    = 70, 1
hitflag = MAFP
priority  = 6
guardflag = MA
pausetime = 18,18
sparkxy = 0,0
hitsound   = 5,2
sparkno = s15003
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 18
ground.velocity =0,-8
air.velocity = 0,-3
fall = 1
p2stateno = 1425
fall.recover = 0

[State 1000, ヒット定義]
type = HitDef
trigger1 = timemod = 4,3 && enemynear,statetype = A
trigger1 = animelem = 14,>=0
attr = S, SA
animtype  = Hard
damage    = 70, 1
hitflag = MAFP
priority  = 6
guardflag = MA
pausetime = 18,18
sparkxy = -10,-34
hitsound   = 5,2
sparkno = 2
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 18
ground.velocity =0,-8
air.velocity = 0,-3
fall = 1
fall.recovertime = 37

[State 2303, エフェクト]
type = Explod
trigger1 = animelem = 16
anim = 15002
postype = p1
pos = 0,0
sprpriority = 7
ownpal = 1
ontop = 1
bindtime = -1
supermovetime = 99999999
pausemovetime = 99999999
IgnoreHitPause = 1
removeongethit = 1

[State 1000, 軸位置移動]
type = velset
trigger1 = AnimElem = 2
x = 1

[State 1000, 軸位置移動]
type = velset
trigger1 = AnimElem = 15
x = 0

[State 1000, ]
type = PlayerPush
trigger1 = 1
value = 1

[State 1220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; 相手側制御
[Statedef 1425]
type     = A
movetype = H
physics  = N

[State 1026, カメラスクロールの有無]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 1995, 軸位置移動]
type = PosAdd
trigger1 = Time = 0
y = -30

[State 1995, 移動速度]
type = VelSet
trigger1 = Time = 0
y = -15

[State 1995, 重力代わり]
type = VelAdd
trigger1 = 1
y = .33

[State 1995, アニメ変更]
type = ChangeAnim2
trigger1 = Time = 0
value = 1420

[State 1995, 角度変更命令]
type = AngleDraw       ;AngleDraw単体では効果がない
trigger1 = Anim = 1420

[State 1995, 角度指定]
type = AngleSet
trigger1 = Time <= 1   ;AngleDrawがないと効果がない
value = 60             ;60度にセット

[State 1995, 角度加算]
type = AngleAdd
trigger1 = Anim = 1420
trigger1 = Pos Y <= -10
value = 30            ;30度ずつ増加する

[State 1995, 角度乗算]
type = AngleMul
trigger1 = Pos Y > -10
value = 0              ;×0で0度に強制(ここでは特に意味は無し)

[State 1995, 相手ステートに戻す]
type = SelfState
trigger1 = (Vel Y > 0) && (Pos Y >= 0)
value = 5100

;--------------------------------
;穿弓腿
[Statedef 2060]
type    = A
movetype= A
physics = N
juggle  = 4
velset = 0,0
anim = 422
ctrl = 0
sprpriority = 2

[State 702, 相手の特定の攻撃属性無効];（※１）
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 8

[State 200] 
type = PowerAdd
trigger1 = time = 0
value = 110

[State 1007, 埃]
type = MakeDust
trigger1 = AnimElem = 1
pos = -5,0
pos2 = -15, 0
spacing = 1

[State 701, 移動速度]
type = posset
trigger1 = time = 0
y = 0

[State 701, 移動速度]
type = VelSet
trigger1 = AnimElem = 4
x = 1.5
y = -8

[State 701, 重力]
type = Veladd
trigger1 = pos Y < 0
y = 0.35

[State 1100, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 1100, 2]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype  = Med
damage    = 52, 4
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-48
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -3
guard.velocity = -6
air.velocity = -2,-2
airguard.velocity = -4,-4.5
p2facing = 1
forcestand = 1 
fall.recover = 0

[State 1100, 3]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SA
animtype  = Up
damage    = 55, 4
priority  = 5
guardflag = MA
pausetime = 0,8
sparkxy = 0,-110
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 25
ground.velocity = -1,-9.5
guard.velocity = -6
air.velocity = -1,-7.5
airguard.velocity = -4,-4.5
p2facing = 1
fall = 1                   ;Make p2 fall down
fall.recovertime = 40      ;40 ticks before p2 can recover from fall
yaccel = .4                ;p2 will accelerate down at .4 pixels/sec^2 when falling

[State 1100, 5]
type = ChangeState
trigger1 = vel Y >= 3
value = 2061

[Statedef 2061]
type    = A
movetype= I
physics = A
velset = 0,0
anim = 423
ctrl = 0
sprpriority = 2

[State 701, ]
type = changeanim
trigger1 = time = 0
value = 423

[Statedef 2065]
type     = S
movetype = A
physics  = N
poweradd = 0
ctrl     = 0
anim     = 2101
velset   = 0,0

[State 1110, 物理的なキャラの幅]
type = Width
trigger1 = 1
value = -20,0

[State 702, 相手の特定の攻撃属性無効];（※１）
type = NotHitBy
trigger1 = 1
value = ,AT,ST,HT,NT
value2= A ,NA,SA
time = 1

[State 702, 残像]
type = AfterImage
trigger1 = Time = 0
Time = 29
PalContrast = 120,120,120
Trans = Add1
TimeGap  = 4
FrameGap = 1
length = 3

[State 702, 埃]
type = MakeDust
trigger1 = Time = 0
pos = 0,0
spacing = 1

[State 702, 軸位置]
type = PosSet
trigger1 = 1
y = 0

[State 702, 移動速度]
type = VelSet
trigger1 = 1
y = 0

[State 702, 移動速度]
type = VelSet
trigger1 = Time = 4
x = 6

[State 702, 移動速度]
type = VelSet
trigger1 = Time = 20
x = 0

[State 702, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 4
value = 0,11

[State 702, ステート変更]
type = ChangeState
trigger1 = (Time > 28)
value = 2060

[Statedef 2067]
type     = S
movetype = A
physics  = N
poweradd = 0
ctrl     = 0
anim     = 2101
velset   = 0,0

[State 1110, 物理的なキャラの幅]
type = Width
trigger1 = 1
value = -20,0

[State 1000, ヒット定義]
type = HitDef
trigger1 = Time = 0 || timemod = 4,3
attr = S, SA
animtype  = Hard
damage    = 10, 1
hitflag = MAFP
priority  = 3
guardflag = MA
pausetime = 3,3
guard.pausetime = 3, 3
sparkxy = -10,-24
hitsound   = 5,2
sparkno = 0
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 26
ground.velocity = 0
air.velocity = 0,-3
air.fall = 1
fall.recovertime = 35
ground.cornerpush.veloff = 0

[State 702, 相手の特定の攻撃属性無効];（※１）
type = NotHitBy
trigger1 = 1
value = ,AT,ST,HT,NT
value2= A ,NA,SA
time = 1

[State 1020, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1020, Afterimage]
type = AfterImageTime
trigger1 = animtime < -2
time = 12

[State 702, 埃]
type = MakeDust
trigger1 = Time = 0
pos = 0,0
spacing = 1

[State 702, 軸位置]
type = PosSet
trigger1 = 1
y = 0

[State 702, 移動速度]
type = VelSet
trigger1 = 1
y = 0

[State 702, 移動速度]
type = VelSet
trigger1 = Time = 4
x = 9

[State 702, 移動速度]
type = VelSet
trigger1 = Time = 20
x = 0

[State 702, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 4
value = 0,11

[State 702, ステート変更]
type = ChangeState
trigger1 = (Time > 28)
value = 2060


;---------------------------------------------------------------------------

;カンフー鉄山靠・弱
[Statedef 1600]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 110
velset = 0,0
anim = 1600
ctrl = 0
sprpriority = 2

[State 1027, エフェクト表示]
type = Explod
trigger1 = time = 0
anim = 20011
pos = 0, 0
postype = p1
sprpriority = -1
removetime = -2
bindtime = 1
ownpal = 1
removeongethit = 1
scale = 0.5,0.5

[State 181, 無敵]
type = NotHitBy
trigger1 = vel X > 0
value = ,NP,SP,HP,AP
time = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 8
value = 0, 1

[State 1000, 軸位置移動]
type = velset
trigger1 = AnimElem = 3
x = 9

[State 1000, ヒット定義] ;遠い時
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype  = Hard
damage    = 80, 4
priority  = 5
guardflag = MA
pausetime = 15,34
guard.pausetime = 18,18
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0,-6
air.velocity = -1,-2.5
fall.recovertime=31

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;カンフー鉄山靠・強
[Statedef 1610]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 110
velset = 0,0
anim = 1600
ctrl = 0
sprpriority = 2

[State 1027, エフェクト表示]
type = Explod
trigger1 = time = 0
anim = 20011
pos = 0, 0
postype = p1
sprpriority = -1
removetime = -2
bindtime = 1
ownpal = 1
removeongethit = 1
scale = 1,1

[State 181, 無敵]
type = NotHitBy
trigger1 = vel X > 0
value = ,NP,SP,HP,AP
time = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 8
value = 0, 1

[State 1000, 軸位置移動]
type = velset
trigger1 = AnimElem = 3
x = 14

[State 1000, ヒット定義] ;遠い時
type = HitDef
trigger1 = AnimElem = 5
attr = S, SA
animtype  = Hard
damage    = 80, 4
priority  = 5
guardflag = MA
pausetime = 15,34
guard.pausetime = 18,18
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0,-6
air.velocity = -1,-2.5
fall.recovertime=31

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;カンフー鉄山靠・ＥＸ
[Statedef 1620]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= -330
velset = 0,0
anim = 1600
ctrl = 0
sprpriority = 2

[State 1020, 残像]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1027, エフェクト表示]
type = Explod
trigger1 = time = 0
anim = 20011
pos = 0, 0
postype = p1
sprpriority = -1
removetime = -2
bindtime = 1
ownpal = 1
removeongethit = 1
scale = 1,1

[State 1027, エフェクト表示]
type = Explod
trigger1 = time = 0
anim = 20010
pos = 0, 0
postype = p1
sprpriority = -1
removetime = -2
bindtime = 1
ownpal = 1
removeongethit = 1
scale = 1,1

[State 1020, 残像表示時間]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 0
time = 2

[State 1020, 色の変更]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 181, 無敵]
type = NotHitBy
trigger1 = vel X > 0
value = SCA
time = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 8
value = 0, 1

[State 1000, 軸位置移動]
type = velset
trigger1 = AnimElem = 3
x = 14

[State 1000, ヒット定義] ;遠い時
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype  = Hard
damage    = 80, 4
priority  = 5
guardflag = MA
pausetime = 15,34
guard.pausetime = 18,18
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0,-7
air.velocity = -1,-2.5
fall.recovertime=31

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ここからは超必殺技のステート
;---------------------------------------------------------------------------
; 三烈カンフー突き手
; CNS レベル: 中級
;
; 超必殺技でのHitDefでは「getpower = 0」があるのに注目してください。
; 攻撃が当たってもパワーゲージを回復させないためです。
;
; 攻撃属性がさらに変わっています。
; 「attr = S, HA」は「Standing, Hyper Attack（立ち超必殺技）」になります。
;
; 最初のHitDefに２つトリガーが設定されているので、有効になるタイミングが２回ある事に注意しましょう。

[Statedef 3000]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3000
ctrl = 0
sprpriority = 2
facep2 = 1

[State 3000, 物理的なキャラの幅]
type = Width
trigger1 = AnimElem = 2, >= 0
value = 15,0

[State 3000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = AnimElem = 2, 1
pos = 25, -57
anim = 100
sound = -1
poweradd = -1000

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [0,800]
trigger1 = AnimElem = 2, 0
value = F20,0

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno != [0,800]
trigger1 = prevstateno != [4200,4211]
trigger1 = prevstateno != [3100,3200]
trigger1 = prevstateno != [3100,3200]
trigger1 = AnimElem = 2, 0
value = 1,10

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [4200,4211]
trigger2 = prevstateno = [3100,3200]
trigger3 = prevstateno = [3100,3200]
triggerall = AnimElem = 2, 0
value = 1,11

[State 3009, スーパーキャンセル]
type = Explod
trigger1 = prevstateno != [0,800]
trigger1 = prevstateno != [4200,4211]
trigger1 = prevstateno != [3100,3200]
trigger1 = prevstateno != [3100,3200]
trigger1 = AnimElem = 2, 0
anim = 32000
postype = left
pos = 0,0
sprpriority = 99
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 3009, ドリームキャンセル]
type = Explod
triggerall = AnimElem = 2, 0
trigger1 = prevstateno = [4200,4211]
trigger2 = prevstateno = [3100,3200]
trigger3 = prevstateno = [3100,3200]
anim = 32001
postype = left
pos = 0,0
sprpriority = 99
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 3000, 残像]
type = AfterImage
trigger1 = AnimElem = 2, 1
time = 2

[State 3000, 残像表示時間]
type = AfterImageTime
trigger1 = AnimElemTime(2) >= 1 && Time < 60
time = 2

[State 3000, 無敵]
type = NotHitBy
trigger1 = AnimElem = 2
value = , NA, SA, AT
time = 12

[State 3000, 無敵]
type = NotHitBy
trigger1 = AnimElemTime(2) >= 0 && Time < 30
value2 = C, NA
time = 1

[State 3000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 11
trigger3 = AnimElem = 18
value = 2, 3

[State 3000, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 3000, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 10
trigger3 = AnimElem = 12
trigger4 = AnimElem = 17
trigger5 = AnimElem = 19
trigger4 = AnimElem = 29
x = 10

[State 3000, 移動速度]
type = VelSet
trigger1 = AnimElem = 5
trigger2 = AnimElem = 12
trigger3 = AnimElem = 19
x = 6

[State 3000, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 5
x = 5

[State 3000, ヒット定義]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 12
attr = S, HA ;Standing, Hyper Attack（立ち超必殺技）
animtype  = Hard
damage    = 72,4
getpower  = 0 ;攻撃が当たった時にパワーゲージの増加量を決められます（現在は0なので増加しない）
priority  = 6
guardflag = MA
pausetime = 15,15
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -6
air.velocity = -3,-3
air.fall = 1
fall.animtype = Hard
fall.recover = 0

[State 3000, ヒット定義]
type = HitDef
trigger1 = AnimElem = 19
attr = S, HA
animtype  = Hard
damage    = 75,4
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 15,15
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 40
ground.hittime  = 40
ground.velocity = -5, -4
guard.velocity = -12
air.velocity = -5,-4
airguard.velocity = -3,-3
fall.animtype = Hard
fall = 1
fall.recover = 0

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; スマッシュカンフーアッパー
; CNS レベル: 中級
;
; これは通常のカンフーアッパーとほとんど同じくらいの難易度です。
;
; HitDefに画面を振動させる部分があります。
; envshakeのパラメータが振動効果を作るのに使われます。
; docsフォルダの説明書で追加出来るパラメータを見つける事も出来ます。
;
;「fall.recover」パラメータが0に設定されています。
; ヒットした相手が空中受け身を取れなくなるので、
; 相手の落下中に追い討ちを掛けやすくなっています。
;
; 攻撃が当たった時と当たらなかった時の行動を
; MoveHitのトリガーがあるChangeStateで制御している事にも注意してください。
; 成功した後のステートは劇的な瞬間を演出するために、
; カンフーマンを出来るだけ長い間腕を上げさせています。

[Statedef 3050]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3050
ctrl = 0
sprpriority = 2
facep2 = 1

[State 3050, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(16) < 0
value = 5,0

[State 3050, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = AnimElem = 2
pos = -5, -55
anim = 100
sound = -1
poweradd = -1000

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [0,800]
trigger1 = AnimElem = 2
value = F20,0

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno != [0,800]
trigger1 = prevstateno != [4200,4211]
trigger1 = prevstateno != [3000,3001]
trigger1 = prevstateno != [3100,3200]
trigger1 = AnimElem = 2
value = 1,10

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [4200,4211]
trigger2 = prevstateno = [3000,3001]
trigger3 = prevstateno = [3100,3200]
triggerall = AnimElem = 2
value = 1,11

[State 3009, スーパーキャンセル]
type = Explod
trigger1 = prevstateno != [0,800]
trigger1 = prevstateno != [4200,4211]
trigger1 = prevstateno != [3000,3001]
trigger1 = prevstateno != [3100,3200]
trigger1 = AnimElem = 2
anim = 32000
postype = left
pos = 0,0
sprpriority = 99
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 3009, ドリームキャンセル]
type = Explod
triggerall = AnimElem = 2
trigger1 = prevstateno = [4200,4211]
trigger2 = prevstateno = [3000,3001]
trigger3 = prevstateno = [3100,3200]
anim = 32001
postype = left
pos = 0,0
sprpriority = 99
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 3050, 残像]
type = AfterImage
trigger1 = AnimElem = 2
time = 2

[State 3050, 残像表示時間]
type = AfterImageTime
trigger1 = AnimElemTime(2) >= 0
time = 2

[State 3050, 無敵]
type = NotHitBy
trigger1 = AnimElem = 2
value = , NA, SA, AT
time = 6

[State 3050, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 2, 2

[State 3050, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, HA
animtype  = Up ;ヒットした相手は「垂直吹っ飛びアニメ」になります
damage    = 155, 12
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 30,30
sparkno = 3
sparkxy = 0,-110
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -1.3,-25
guard.velocity = -11
air.velocity = -1.3,-25
airguard.velocity = -4.5,-5
envshake.time = 25           ;ヒットした時に画面を揺らす時間
envshake.ampl = 7            ;ヒットした時の画面の振幅
envshake.freq = 176          ;ヒットした時に画面が揺れる速度
p2facing = 1                 ;ヒットしたら相手がこちらを向きます
fall = 1
fall.recover = 0             ;ヒットした時に相手が空中受け身を取れるかどうか（0=取れない・1=取れる）
fall.damage = 70             ;ヒット後、相手が地面に着地した時のダメージ
fall.envshake.ampl = 6       ;ヒット後、相手が地面に着地した時の画面の振幅
fall.envshake.freq = 178     ;ヒット後、相手が地面に着地した時に画面が揺れる速度
fall.envshake.time = 15      ;ヒット後、相手が地面に着地した時に画面を揺らす時間
mindist = 50,-100            ;相手の吹っ飛ぶ最短の距離を決めます
maxdist = 100,-10            ;相手の吹っ飛ぶ最長の距離を決めます
yaccel = .8

[State 3050, ステート変更]    ;攻撃がガードされずにヒットしたら[Statedef 3051]に飛びます
type = ChangeState
trigger1 = MoveHit
value = 3051

[State 3050, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------
; スマッシュカンフーアッパー・ヒット後の行動

[Statedef 3051]
type    = S
movetype= A
physics = S
anim = 3051

[State 3051, 残像表示時間]
type = AfterImageTime
trigger1 = AnimTime < -2
time = 2

[State 3051, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ゲージ２
[Statedef 3001]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3001
ctrl = 0
sprpriority = 2
velset = 0,0
facep2 = 1

[State 191, effect]
type = Explod
triggerall = pos Y = 0
trigger1 = AnimElem = 4
trigger2 = AnimElem = 12
trigger3 = AnimElem = 20
anim = 15001
postype = p1
facing = 1
pos = -140, -107
scale = 1,0.5
velocity = -2, 0
accel = 0, 0
removetime = 27
supermovetime = 27
ownpal = 1
sprpriority = 3

[State 3000, Width]
type = Width
trigger1 = AnimElem = 2, >= 0
value = 15,0

[State 3000, Super A]
type = SuperPause
trigger1 = AnimElem = 2, 1
pos = 25, -57
anim = 101
sound = -1
poweradd = -2000

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [0,800]
trigger1 = AnimElem = 2, 1
value = 0,24

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno != [0,800]
trigger1 = prevstateno != [4200,4211]
trigger1 = prevstateno != [3000,3001]
trigger1 = prevstateno != [3100,3200]
trigger1 = AnimElem = 2, 1
value = 1,10

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [4200,4211]
trigger2 = prevstateno = [3000,3001]
trigger3 = prevstateno = [3100,3200]
triggerall = AnimElem = 2, 1
value = 1,11

[State 3009, スーパーキャンセル]
type = Explod
trigger1 = prevstateno != [0,800]
trigger1 = prevstateno != [4200,4211]
trigger1 = prevstateno != [3000,3001]
trigger1 = prevstateno != [3100,3200]
trigger1 = AnimElem = 2, 1
anim = 32000
postype = left
pos = 0,0
sprpriority = 98
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 3009, ドリームキャンセル]
type = Explod
triggerall = AnimElem = 2, 1
trigger1 = prevstateno = [4200,4211]
trigger2 = prevstateno = [3000,3001]
trigger3 = prevstateno = [3100,3200]
anim = 32001
postype = left
pos = 0,0
sprpriority = 98
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 191, cutin]
type = Explod
trigger1 = AnimElem = 1
anim = 9000
postype = back
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = 30
supermovetime = 30
ownpal = 1
sprpriority = 0

[State 3000, Super B]
type = AfterImage
trigger1 = AnimElem = 2, 1
time = 2

[State 3000, Super C]
type = AfterImageTime
trigger1 = AnimElemTime(2) >= 1 && Time < 60
time = 2

[State 3000, Super D]
type = NotHitBy
trigger1 = AnimElemtime(6) <= 0
value = SCA
time = 1

[State 3000, Super E]
type = NotHitBy
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(14) < 0
value2 = C, NA
time = 1

[State 3000, 1]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 12
trigger3 = AnimElem = 20
value = 0, 2

[State 3000, 2]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 3000, 3]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 11
trigger3 = AnimElem = 13
trigger4 = AnimElem = 19
trigger5 = AnimElem = 21
trigger4 = AnimElem = 31
x = 20

[State 3000, 4]
type = VelSet
trigger1 = AnimElem = 5
trigger2 = AnimElem = 13
trigger3 = AnimElem = 21
x = 6

[State 3000, 4]
type = PosAdd
trigger1 = AnimElem = 5
x = 5

[State 3000, 5]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 13
attr = S, HA
animtype  = Hard
damage    = 72,4
hitflag   = MAFD
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 15,15
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -6
air.velocity = -3,-2.8
air.fall = 1
fall.animtype = Hard
fall.recover = 0

[State 3000, 6]
type = HitDef
trigger1 = AnimElem = 21
attr = S, HA
animtype  = Hard
damage    = 75,4
getpower  = 0
priority  = 5
guardflag = MA
hitflag   = MAFD
pausetime = 15,15
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -5, -4
guard.velocity = -12
air.velocity = -5,-4
airguard.velocity = -3,-3
fall.animtype = Hard
fall = 1
fall.recover = 0
p2stateno = 1025    ;Make p2 go to state 1025 on hit
p2facing = 1        ;Force to face p1

[State 1220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;ゲージ２
[Statedef 3052]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3052
ctrl = 0
sprpriority = 2
facep2 = 1

[State 191, effect]
type = Explod
triggerall = pos Y = 0
trigger1 = AnimElem = 6
anim = 10000
postype = p1
facing = 1
pos = -45, -406
velocity = 0, 0
scale = 0.5,2
accel = 0, 0
removetime = 30
supermovetime = 30
ownpal = 1
sprpriority = 3

[State 3050, Width]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(16) < 0
value = 5,0

[State 3050, Super A]
type = SuperPause
trigger1 = AnimElem = 2
pos = -5, -55
anim = 101
sound = -1
poweradd = -2000

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [0,800]
trigger1 = AnimElem = 2
value = 0,24

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno != [0,800]
trigger1 = prevstateno != [4200,4211]
trigger1 = prevstateno != [3000,3001]
trigger1 = prevstateno != [3100,3200]
trigger1 = AnimElem = 2
value = 1,10

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [4200,4211]
trigger2 = prevstateno = [3000,3001]
trigger3 = prevstateno = [3100,3200]
triggerall = AnimElem = 2
value = 1,11

[State 3009, スーパーキャンセル]
type = Explod
trigger1 = prevstateno != [0,800]
trigger1 = prevstateno != [4200,4211]
trigger1 = prevstateno != [3000,3001]
trigger1 = prevstateno != [3100,3200]
trigger1 = AnimElem = 2
anim = 32000
postype = left
pos = 0,0
sprpriority = 98
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 3009, ドリームキャンセル]
type = Explod
triggerall = AnimElem = 2
trigger1 = prevstateno = [4200,4211]
trigger2 = prevstateno = [3000,3001]
trigger3 = prevstateno = [3100,3200]
anim = 32001
postype = left
pos = 0,0
sprpriority = 98
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 191, cutin]
type = Explod
trigger1 = AnimElem = 1
anim = 9000
postype = back
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = 30
supermovetime = 30
ownpal = 1
sprpriority = 0

[State 3050, Super B]
type = AfterImage
trigger1 = AnimElem = 2
time = 2

[State 3050, Super C]
type = AfterImageTime
trigger1 = AnimElemTime(2) >= 0
time = 2

[State 3050, Super D]
type = NotHitBy
trigger1 = AnimElem = 2
value = SCA
time = 6




[State 3050, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 3050, 2]
type = HitDef
trigger1 = Time = 0
attr = S, HA
animtype  = Up               ;Make p2 use "Up" type animation on hit
damage    = 155, 12
getpower  = 0
priority  = 5
guardflag = M
pausetime = 30,30
sparkno = 3
sparkxy = 0,-110
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -1.3,-25
guard.velocity = -11
air.velocity = -1.3,-25
airguard.velocity = -4.5,-5
envshake.time = 25           ;Parameters for shaking the screen on hit
envshake.ampl = 7
envshake.freq = 176
p2facing = 1                 ;Force p2 to face p1 on hit
fall = 1
fall.recover = 0             ;Prevent p2 from recovering
fall.damage = 90             ;p2 will take 70 damage on hitting the ground
fall.envshake.ampl = 6       ;Parameters for shaking the screen on fall
fall.envshake.freq = 178
fall.envshake.time = 15
mindist = 50,-100            ;Keep p2 a minimum of 50 pixels away from p1, and no higher than 100 pixels up
maxdist = 100,-10            ;Keep p2 a maximum of 100 pixels away from p1, and no lower than 10 pixels below
yaccel = .8                  ;Accelerate p2 downwards rapidly

;This controller below makes Kung Fu man change to a success state if he
;successfully hits the Smash Kung Fu Upper.
[State 3050, 4]
type = ChangeState
trigger1 = MoveHit
value = 3053

[State 1220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------
; Smash Kung Fu Upper (success)
; Description: This is the state that KFM changes to if he successfully hits
;     with Smash Kung Fu Upper. KFM holds his arm high for a short while
;     longer, then changes back to his idle stand state.
[Statedef 3053]
type    = S
movetype= A
physics = S
anim = 3051

[State 3051, 1]
type = AfterImageTime
trigger1 = AnimTime < -2
time = 2

[State 1220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------

;疾地掃腿脚
[Statedef 3100]
type    = C
movetype= A
physics = C
juggle  = 7
ctrl = 0
anim = 445
sprpriority = 2
facep2 = 1
velset = 0,0

[State 3501, 無敵]
type = NotHitBy
trigger1 = 1
value = ,NT,ST,HT,AT
time = 5

[State 3050, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = AnimElem = 1
pos = 18, -3
anim = 100
sound = -1
poweradd = -1000

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [0,800]
trigger1 = AnimElem = 1
value = F20,0

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno != [0,800]
trigger1 = prevstateno != [4200,4211]
trigger1 = prevstateno != [3000,3001]
trigger1 = prevstateno != [3050,3053]
trigger1 = AnimElem = 1
value = 1,10

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [4200,4211]
trigger2 = prevstateno = [3000,3001]
trigger3 = prevstateno = [3050,3053]
triggerall = AnimElem = 1
value = 1,11

[State 3009, スーパーキャンセル]
type = Explod
trigger1 = prevstateno != [0,800]
trigger1 = prevstateno != [4200,4211]
trigger1 = prevstateno != [3000,3001]
trigger1 = prevstateno != [3050,3053]
trigger1 = AnimElem = 1
anim = 32000
postype = left
pos = 0,0
sprpriority = 99
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 3009, ドリームキャンセル]
type = Explod
triggerall = AnimElem = 1
trigger1 = prevstateno = [4200,4211]
trigger2 = prevstateno = [3000,3001]
trigger3 = prevstateno = [3050,3053]
anim = 32001
postype = left
pos = 0,0
sprpriority = 99
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 440, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 2
value = 2, 5

[State 440, ]
type = changeanim
trigger1 = animelem = 2,>=0 && time < 38
value = 445
elem = 2

[State 440, ]
type = velset
trigger1 = animelem = 2,>=0
x = 10

[State 2303, エフェクト]
type = Explod
trigger1 = animelem = 2,>=0 && numexplod(20011) < 1
trigger1 = time < 35
anim = 20011
postype = p1
pos = 0,0
sprpriority = 7
ownpal = 1
ontop = 1
bindtime = -1
supermovetime = 99999999
pausemovetime = 99999999
IgnoreHitPause = 1
removeongethit = 1
ID = 20011

[State 2303, エフェクト]
type = Explod
trigger1 = animelem = 2,>=0&& numexplod(20012) < 1
trigger1 = time < 30
anim = 20012
postype = p1
pos = 0,0
sprpriority = 7
ownpal = 1
ontop = 1
bindtime = -1
supermovetime = 99999999
pausemovetime = 99999999
IgnoreHitPause = 1
ID = 20012

[State 1007, 埃]
type = MakeDust
trigger1 = AnimElem = 3 || animelem = 4
pos = -5,0
pos2 = -15, 0
spacing = 1

[State 440, ヒット定義]
type = HitDef
trigger1 = Time = 0 || timemod = 4,3
trigger1 = hitcount < 10
attr = C, HA
damage    = 16,2
hitflag = MAFD
guardflag = L
pausetime = 4,20
sparkno = 1
sparkxy = -5,-10
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -2.5,-5*(time > 38)
air.velocity = -2.2,3
guard.velocity = -5
fall = 0+1*(time > 38)
fall.recover = 0
fall.yvelocity = 1
down.velocity = -1, 0

[State 701, 移動速度]
type = veladd
trigger1 = pos Y < 0 && movecontact && vel Y > 1
y = -0.1
IgnoreHitPause = 1

[State 701, 移動速度]
type = posset
trigger1 = pos Y > 0
y = 0
IgnoreHitPause = 1

[State 701, 移動速度]
type = veladd
trigger1 = pos Y < 0
y = 0.05
IgnoreHitPause = 1


[State 701, 移動速度]
type = velset
trigger1 = pos Y >= 0 && vel Y > 0
y = 0
IgnoreHitPause = 1

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0 && pos Y = 0
value = 11
ctrl = 1
IgnoreHitPause = 1

[State 701, 状態パラメータ変更]
type = StateTypeSet
triggerall = pos Y < 0
trigger1 = 1
StateType = A
IgnoreHitPause = 1

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0 && pos Y != 0
value = 51
ctrl = 0
IgnoreHitPause = 1

;---------------------------------------------------------------------

;超カンフーパーム
[Statedef 4200]
type    = S
movetype= A
physics = N
juggle  = 4
anim = 4200
ctrl = 0
sprpriority = 2
velset = 0,0
facep2 = 1

[State 3501, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 5

[State 3000, Super A]
type = SuperPause
trigger1 = AnimElem = 4
pos = 25, -57
anim = -1
sound = -1
poweradd = -1000

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [0,800]
trigger1 = AnimElem = 4
value = F20,0

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno != [0,800]
trigger1 = prevstateno != [4200,4211]
trigger1 = prevstateno != [3000,3001]
trigger1 = prevstateno != [3050,3053]
trigger1 = prevstateno != [3100,3200]
trigger1 = AnimElem = 4
value = 1,10

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [4200,4211]
trigger2 = prevstateno = [3000,3001]
trigger3 = prevstateno = [3050,3053]
trigger4 = prevstateno = [3100,3200]
triggerall = AnimElem = 4
value = 1,11

[State 3009, スーパーキャンセル]
type = Explod
trigger1 = prevstateno != [0,800]
trigger1 = prevstateno != [4200,4211]
trigger1 = prevstateno != [3000,3001]
trigger1 = prevstateno != [3050,3053]
trigger1 = prevstateno != [3100,3200]
trigger1 = AnimElem = 4
anim = 32000
postype = left
pos = 0,0
sprpriority = 99
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 3009, ドリームキャンセル]
type = Explod
triggerall = AnimElem = 4
trigger1 = prevstateno = [4200,4211]
trigger2 = prevstateno = [3000,3001]
trigger3 = prevstateno = [3050,3053]
trigger4 = prevstateno = [3100,3200]
anim = 32001
postype = left
pos = 0,0
sprpriority = 99
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 1210, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 11

[State 1220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 4210


;ゲージ２
[Statedef 4201]
type    = S
movetype= A
physics = N
juggle  = 4
anim = 4200
ctrl = 0
sprpriority = 2
velset = 0,0
facep2 = 1

[State 3000, Super A]
type = SuperPause
trigger1 = AnimElem = 4
pos = 25, -57
anim = -1
sound = -1
poweradd = -1000

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [0,800]
trigger1 = AnimElem = 4
value = 0,24

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno != [0,800]
trigger1 = prevstateno != [4200,4211]
trigger1 = prevstateno != [3000,3001]
trigger1 = prevstateno != [3050,3053]
trigger1 = prevstateno != [3100,3200]
trigger1 = AnimElem = 4
value = 1,10

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [4200,4211]
trigger2 = prevstateno = [3000,3001]
trigger3 = prevstateno = [3050,3053]
trigger4 = prevstateno = [3100,3200]
triggerall = AnimElem = 4
value = 1,11

[State 3009, スーパーキャンセル]
type = Explod
trigger1 = prevstateno != [0,800]
trigger1 = prevstateno != [4200,4211]
trigger1 = prevstateno != [3000,3001]
trigger1 = prevstateno != [3050,3053]
trigger1 = prevstateno != [3100,3200]
trigger1 = AnimElem = 4
anim = 32000
postype = left
pos = 0,0
sprpriority = 98
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 3009, ドリームキャンセル]
type = Explod
triggerall = AnimElem = 4
trigger1 = prevstateno = [4200,4211]
trigger2 = prevstateno = [3000,3001]
trigger3 = prevstateno = [3050,3053]
trigger4 = prevstateno = [3100,3200]
anim = 32001
postype = left
pos = 0,0
sprpriority = 98
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 191, cutin]
type = Explod
trigger1 = AnimElem = 1
anim = 9000
postype = back
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = 30
supermovetime = 30
ownpal = 1
sprpriority = 0

[State 1210, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 11

[State 1210, 1]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 1007, 位置補正]
type = posadd
trigger1 = animtime = 0
x = 320

[State 1220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 4211

[Statedef 4210]
type     = S
movetype = A
physics  = S
juggle   = 5
ctrl     = 0
anim     = 4210
velset   = 28,0
SprPriority = -1

[State 1210, 1]
type = ScreenBound
trigger1 = animelemtime(4)<0
value = 0
movecamera = 1,0

[State 701, 状態パラメータ変更]
type = StateTypeSet
triggerall = pos Y < 0
trigger1 = 1
StateType = A
IgnoreHitPause = 1

[State 1007, 位置補正]
type = posset
trigger1 = time = 0
trigger1 = pos Y != enemynear,pos Y
y = enemynear,pos Y+(enemynear,vel Y)

[State 1007, 位置補正]
type = posset
trigger1 = pos Y > 0
y = 0


[State 1007, 位置補正]
type = playerpush
trigger1 = animelemtime(6)<0
value = 0

[State 1007, 位置補正]
type = posadd
trigger1 = time = 0
trigger1 = P2BodyDist X > 50
x = P2BodyDist X-30

[State 1007, 位置補正]
type = posset
trigger1 = time = 0
trigger1 = P2BodyDist X < 50
x = enemynear,pos x-80*facing

[State 1007, 埃]
type = MakeDust
trigger1 = Time = 0
pos = 40,0
spacing = 1

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 0,2

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 5,0

[State 3000, Super A]
type = SuperPause
trigger1 = movecontact = 1
pos = 25, -57
anim = -1
sound = -1
time = 60
darken = 0



[State 1007, ヒット定義]
type = HitDef
trigger1 = AnimElemTime(4) = 0
attr             = S, SA
animtype         = Hard
damage           = 50,18
getpower         = 10
guardflag        = MA
priority         = 7
sprpriority      = -1
pausetime        = 0,1
sparkxy          = 40,-185
guard.sparkno    = s20000
sparkno          = s20000
hitsound         = s0,26
guardsound       = s0,25
ground.type      = Low
ground.slidetime = 20
ground.hittime   = 30
ground.velocity  = -2
guard.velocity   = -2
air.velocity     = -4,-1.5
airguard.velocity= -2,-1.5
envshake.time    = 12
envshake.ampl    = 6
envshake.freq    = 100
ground.cornerpush.veloff = -10
air.fall = 1
fall.recovertime  = 32
p2facing = 1

[State 3501, 掴んだ相手のライフ増減] 
type = TargetLifeAdd 
trigger1 = numtarget != 0 
trigger1 = movehit && (target,stateno = [5000,5300]) 
value = -100 
absolute = 1 
Persistent = 0 
IgnoreHitPause = 1 

[State 1220, 3]
type = ChangeState
trigger1 = AnimTime = -4 && pos Y != 0
value = 51
ctrl = 1

[State 1220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 4211]
type     = S
movetype = A
physics  = S
juggle   = 5
ctrl     = 0
anim     = 4210
velset   = 0,0
SprPriority = -1

[State 1210, 1]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 1007, 位置補正]
type = turn
trigger1 = time = 0

[State 1007, 位置補正]
type = posset
trigger1 = time = 0
trigger1 = pos Y != enemynear,pos Y
y = enemynear,pos Y

[State 1007, 位置補正]
type = posset
trigger1 = pos Y > 0
y = 0

[State 1007, 位置補正]
type = posadd
trigger1 = time = 0
trigger1 = P2BodyDist X > 50
x = P2BodyDist X

[State 1007, 位置補正]
type = posadd
trigger1 = time = 0
trigger1 = P2BodyDist X < 50
x = -P2BodyDist X

[State 1007, 埃]
type = MakeDust
trigger1 = Time = 0
pos = 40,0
spacing = 1

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 0,2

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 5,0

[State 3000, Super A]
type = SuperPause
trigger1 = movecontact = 1 && root,var(10)=0
pos = 25, -57
anim = -1
sound = -1
time = 60
darken = 0

[State 3000, Super A]
type = Pause
trigger1 = movecontact = 1&& root,var(10)=5
pos = 25, -57
anim = -1
sound = -1
time = 60

[State 1007, ヒット定義]
type = HitDef
trigger1 = AnimElemTime(4) = 0
attr             = S, SA
animtype         = Hard
damage           = 50,18
getpower         = 10
guardflag        = 
priority         = 7
sprpriority      = -1
pausetime        = 0,1
sparkxy          = 40,-185
guard.sparkno    = s20000
sparkno          = s20000
hitsound         = s0,26
guardsound       = s0,25
ground.type      = Low
ground.slidetime = 20
ground.hittime   = 30
ground.velocity  = -15
guard.velocity   = -18
air.velocity     = -7,-1.5
airguard.velocity= -7,-1.5
envshake.time    = 12
envshake.ampl    = 6
envshake.freq    = 100
ground.cornerpush.veloff = -10
air.fall = 1
fall.recovertime  = 32

[State 3501, 掴んだ相手のライフ増減] 
type = TargetLifeAdd 
trigger1 = numtarget != 0 
trigger1 = movehit && (target,stateno = [5000,5300]) 
value = -100 
absolute = 1 
Persistent = 0 
IgnoreHitPause = 1 

[State 1220, 3]
type = ChangeState
trigger1 = AnimTime = -4 && pos Y != 0
value = 51
ctrl = 1

[State 1220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------

;瞬獄殺
[Statedef 3500]
type     = S
movetype = A
physics  = N
poweradd = 0
ctrl     = 0
anim     = 4500
velset   = 0,0
sprpriority = 2

[State 240, 3]
type = PosAdd
trigger1 = time = 0
x = 10

[State 700, エフェクト表示]
type = Explod
trigger1 = time = 0
anim = f130
facing = -1
postype = p1
pos = 0, 0
scale = 1.5,1
sprpriority = 5
ownpal = 1
removetime = 70
supermove = 70

[State 191, cutin]
type = Explod
trigger1 = AnimElem = 1
anim = 9000
postype = back
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = 30
supermovetime = 30
ownpal = 1

[State 0, ]
type = Helper
trigger1 = AnimElem = 1
IgnoreHitPause = 1
SuperMoveTime = 45
PauseMoveTime = 45
stateno = 6100
postype = p1
pos = -10,-35
size.Xscale = 1.0
size.Yscale = 1.0

[State 3500, 超必殺技暗転時間停止]
type = SuperPause
trigger1 = AnimElem = 1
pos = 16,-74
anim = -1;100
sound = s1,13
time = 50
movetime = 19
darken = 0
p2defmul = 1
poweradd = -3000

[State 3501, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2

[State 3500, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3501

;---------------------------------------------------------------------------
;移動開始
[Statedef 3501]
type     = S
movetype = A
physics  = N
poweradd = 0
ctrl     = 0
anim     = 4510
velset   = 0,0
sprpriority = 2
juggle   = 15

[State 3500, 残像]
type = AfterImage
trigger1 = Time = 0
Time = 40
PalBright   = 90,90,150
PalContrast = 180,180,256
Trans = Add1

[State 3501, 無敵]
type = NotHitBy
trigger1 = Time < 11
value = SCA
time = 2

[State 3501, 無敵] 
type = NotHitBy 
trigger1 = Time >= 11 && time <= 38 
value = ,NT,ST,HT,AT 
time = 2 

[State 3500, 軸位置]
type = PosSet
trigger1 = 1
y = 0

[State 3500, 移動速度]
type = VelSet
trigger1 = Time = 7
x = 5.2

;***********************************
[State 3500, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 7
value = 0,12

;***********************************
[State 3500, ヒット定義]
type = HitDef
triggerall = (EnemyNear,StateType != A) && (EnemyNear,MoveType != H) ;これを設定しないと
trigger1 = (Time > 11)                                               ;空中の相手も掴めてしまう
attr         = S, HT
damage       = 20,20
getpower     = 0,0
numhits      = 0
hitflag      = M-
priority     = 1,Miss
sparkno      = -1
sparkxy      = 0,0
hitsound     = s0,9
p1stateno    = 3502
p1facing     = 1
p2stateno    = 3505
p2facing     = 1
guard.dist   = 0
fall         = 0
fall.recover = 0
ground.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
kill = 0

;***********************************
[State 3500, ステート変更]
type = ChangeState
trigger1 = (Time > 40)
value = 1052

;---------------------------------------------------------------------------
;成功
[Statedef 3502]
type     = S
movetype = A
physics  = N
poweradd = 0
ctrl     = 0
anim     = 4520
velset   = 0,0

[State 702, ]
type = posadd
trigger1 = time = 0 && FrontEdgeBodyDist < 60
x = -(60-FrontEdgeBodyDist)

[State 3500, 画面暗転]
type = EnvColor
trigger1 = time > 6
value = 0, 0, 0
time = 1
under = 0

[State 3501, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2

[State 3501, 物理的なキャラの幅];画面端に相手がめり込まないように
type = Width
trigger1 = 1
edge = 70,0
IgnoreHitPause = 1

[State 3501, 残像表示時間]
type = AfterImageTime
trigger1 = Time = 0
Time = 0

[State 3501, 画面振動]
type = EnvShake
triggerall = (RoundState = 2)
trigger1 = Time = 90
time  = 18   ;「画面が揺れる時間」を設定。
ampl  = 6    ;「画面が揺れる縦の幅（範囲）」を設定。デフォルトは-4。
freq  = 176  ;「画面が揺れる速度」を設定。デフォルトは60。
phase = 100  ;「画面が揺れる最初の段階の強さ（規模）」を設定。デフォルトは90。
             ;ここで決めた段階から徐々に揺れが弱くなっていく。

[State 3501, 軸位置]
type = PosSet
trigger1 = 1
y = 0

[State 3501, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 16
value = 5,0

;***********************************
[State 3009, エフェクト];ヒットスパーク
type = Explod
trigger1 = Time = [16,90]
anim = 12000
postype = back
pos = 160,120
sprpriority = 7
ownpal = 1
ontop = 1
random = 160,120
ID = 4212
IgnoreHitPause = 1
Persistent = 5

[State 3501, 音を鳴らす];ヒットサウンド
type = PlaySnd
trigger1 = Time = [16,90]
value = 0,8
channel = 1
Persistent = 5

[State 3501, ヒット数]
type = HitAdd
trigger1 = Time = [16,90]
value = 1
Persistent = 5

;***********************************
[State 3501, 掴んだ相手の位置]
type = TargetBind
trigger1 = time < 30
pos = 55,0

[State 3501, 掴んだ相手のライフ増減]
type = TargetLifeAdd
trigger1 = Time = 110
value = -(0.75*target,LifeMax);-(13*Const(data.attack))
absolute = 1 ;相手の防御力を無視して、valueの値のライフ増減量をそのまま相手に与える命令。
             ;つまり、ダメージ補正を無視する事になる。

[State 3501, ステート変更]
trigger1 = (Time > 120)
type = ChangeState
value = 3503

[Statedef 3503]
type     = S
movetype = A
physics  = N
poweradd = 0
ctrl     = 0
anim     = 3053
velset   = 0,0
sprpriority = 2

[State 210, 3]
type = AssertSpecial
trigger1 = 1
flag = roundnotover
flag2 = nokoslow

[State 191, Snd 2]
type = PlaySnd
trigger1 = root,life <= 0 && time = 0
value = 2,9

[State 191, kfm]
type = PalFX
trigger1 = p2life = 0
time = 1
add = 100,0,0
mul = 100,0,0
invertall = 0
color = 256

[State 191, Snd 2]
type = PlaySnd
trigger1 = AnimElem = 7 && anim = 3053
value = 0,15

[State 3500, 超必殺技暗転時間停止]
type = SuperPause
trigger1 = AnimElem = 8 && anim = 3053
pos = 0,0
anim = -1
sound = -1
time = 50
darken = 1

[State 3009, エフェクト];ヒットスパーク
type = Explod
trigger1 = AnimElem = 8 && anim = 3053
anim = 12000
postype = p1
pos = 40,-120
sprpriority = 7
ownpal = 1
ontop = 1
ID = 4212
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999


[State 3009, エフェクト];ヒットスパーク
type = Explod
trigger1 = AnimElem = 8 && anim = 3053
anim = 30011
postype = p1
pos = 40,-120
sprpriority = 7
ownpal = 1
ontop = 1
ID = 4212
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999

[State 3009, エフェクト];ヒットスパーク
type = Explod
trigger1 = AnimElem = 8 && anim = 3053
anim = 30010
postype = p1
pos = 40,-120
sprpriority = 7
ownpal = 1
ontop = 1
ID = 4212
IgnoreHitPause = 1
Persistent = 5



[State 3500,]
type = AssertSpecial
trigger1 = 1
flag = roundnotover
flag2 = timerfreeze

[State 1220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


[Statedef 3505]
type     = S
movetype = H
physics  = N
poweradd = 0
ctrl     = 0
anim     = 0
velset   = 0,0

[State 3501, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2

[State 3501, 無敵]
type = velset
trigger1 = time >= 125
y = -20
x = -5

[State 3500, ステート変更]
type = changeanim2
trigger1 = anim != 5061
value = 5061

[State 3500, ステート変更]
type = DestroySelf
trigger1 = IsHelper

[State 3501, ステート変更]
type = selfState
trigger1 = Time > 125
value = 5050

;----------------------------------------------
;壁吹っ飛び＆壁叩きつけ
;相手側

[Statedef 1030]
type    = A
movetype= H
physics = N

[State 1030] 
type = DestroySelf 
triggerall =IsHelper 
trigger1 = BackEdgeBodyDist <= 0 
trigger2 = frontEdgeBodyDist <= 0 
trigger3 = time >= 240 


[State 1030]
type = turn
trigger1 = time = 0
trigger1 = facing = enemynear,facing

[State 1030]
type = velset
trigger1 = time = 0
x = -14
y = 0

[State 1027, 制御した相手のアニメ変更]
type = ChangeAnim2
trigger1 = Time = 0
value = 5320

[State 1027, ]
type = posset
trigger1 = statetype != A
y = -20



[State 1026, ステート変更] ;壁に当たる時のステートに行く
type = ChangeState
trigger1 = BackEdgeBodyDist <= 0
trigger2 = frontEdgeBodyDist <= 0
value = 1031



[State 1026, 相手ステートに戻す]
type = SelfState
trigger1 = time >= 240
value = 5100



;------------------
; 相手側制御 - 壁に当たる
[Statedef 1031]
type    = A
movetype= H
physics = N

[State 1008, ライフ増減];ダメージ量
type = LifeAdd
trigger1 = time = 0
value = -10
kill = 0

[State 1027, 振り返る]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1027, 軸位置移動]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1027, 移動を止める]
type = PosFreeze
trigger1 = 1

[State 1027, カメラスクロールの有無]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, エフェクト表示]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 1027, 制御した相手のアニメ変更]
type = ChangeAnim2
trigger1 = Time = 0
value = 5321

[State 1027, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 1027, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 1032

;------------------
; 相手側制御 - 壁からのバウンド
[Statedef 1032]
type    = A
movetype= H
physics = N


[State 1027, 制御した相手のアニメ変更]
type = ChangeAnim2
trigger1 = Time = 0
value = 5322


;[State 1028, 当たらない攻撃の定義]
;type = NotHitBy
;trigger1 = 1
;value = , NA, NP

[State 1028, 移動速度]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, 移動速度]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, 速度加算]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, 相手ステートに戻す]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100


;-----------------------------------

;-----------------------------------

;くらっしゅ（ゲージレベル２）
[Statedef 1889]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 801
sprpriority = 2

[State 3501, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 3

[State 191, cutin]
type = Explod
trigger1 = AnimElem = 1
anim = 9000
postype = back
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = 30
supermovetime = 30
ownpal = 1

[State 3000, Super A]
type = SuperPause
trigger1 = AnimElem = 1
pos = 18, -63
anim = 101
sound = s0,24
poweradd = -2000

[State 1027, No scroll]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = nokoslow
flag3 = timerfreeze

[State 800, ヒット定義（投げ用）]
type = HitDef
Trigger1 = Time = 0
attr = S, HT          ;攻撃属性: これは Standing, Normal Throw（立ち通常投げ）
hitflag = M-          ;相手がやられ状態ではない地上の時でしか掴む事が出来ません
priority = 1, Miss    ;投げなので優先度を低く、かつmissかdodgeの属性でなければなりません
sparkno = -1          ;-1にすればヒットスパークが表示しなくなります
sprpriority = 1       ;攻撃が当たった時に画像表示優先度を1に出来ます
p1facing = 1
p2facing = 1          ;攻撃が当たった時の相手の向き
p1stateno = 1891       ;自分のステート変更
p2stateno = 1890       ;相手を制御するステートに行かせる
guard.dist = 0        ;相手がガード状態に移行出来る距離（現在は0なのでガード不可）
fall = 1              ;1にすれば相手がダウン状態になる

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 1890]
type    = S
movetype= H
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1423
sprpriority = 2

[State 1020, ]
type = Changeanim2
trigger1 = time = 0
value = 1423

[State 3501, 無敵]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 25

[State 1020, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 1892

[Statedef 1891]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 4520
sprpriority = 3

[State 1027, No scroll]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = nokoslow
flag3 = timerfreeze

[State 1027, No scroll]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 3501, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 3

[State 1020, ]
type = Changeanim
trigger1 = anim = 4520 && time < 30
value = 4520
elem = 1

[State 1020, ]
type = Changeanim
trigger1 = AnimTime = 0&&anim = 4520
value = 1055
elem = 3

[State 1020, ]
type = Changeanim
trigger1 = Animelem = 8&&anim = 1055
value = 4000
elem = 1

[State 1027, エフェクト表示]
type = Explod
trigger1 = AnimElem = 4 && anim = 1055
anim = F2
pos = 60, -70
postype = p1
sprpriority = 9
removetime = -2
bindtime = 1
ownpal = 1
removeongethit = 1
scale = 1,1

[State 3009, エフェクト];ヒットスパーク
type = Explod
trigger1 = AnimElem = 4 && anim = 4000
anim = 30012
postype = p1
pos = 65,-57
sprpriority = 7
ownpal = 1
ontop = 1
ID = 4212
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999

[State 1027, エフェクト表示]
type = Explod
trigger1 = AnimElem = 4 && anim = 4000
anim = 20000
pos = 0, -190
postype = p1
sprpriority = 9
removetime = -2
bindtime = 1
ownpal = 1
removeongethit = 1
scale = 1,1

[State 1000, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 10

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 0, 1+(anim = 1055)

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 4&&anim=1055
value = 0, 3

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 4&&anim=4000
value = 0, 21

[State 191, ]
type = helper
trigger1 = animelem = 4&&anim=4000
trigger1 = !ishelper
stateno = 1895
id = 1895
postype = p2
facing = 1
pos = 25, -40
supermovetime = 9999
pausetime = 9999
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 3501, ] 
type = Targetstate
trigger1 = numtarget != 0
trigger1 = !(target,stateno = 1890) && time <= 10
value = 1890
IgnoreHitPause = 1


[State 3501, ライフ増減] 
type = targetLifeAdd 
trigger1=numtarget
trigger1=target,stateno=1890&&target,movetype=H
value = -300
kill=1
absolute = 1
Persistent = 0 
IgnoreHitPause = 1 


[State 1055, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 1892]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 1421

[State 1020, ]
type = Changeanim2
trigger1 = anim != 1421
value = 1421

[State 3501, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 3

[State 1050, 4]
type = HitDef
trigger1 = Time = 0
affectteam = B
attr = A, HA
animtype  = Medium
damage    = 120, 4
priority  = 5
guardflag = MA
pausetime = 0,0
sparkxy = 0,0
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -1,-10
guard.velocity = -10
air.velocity = -1,-6
fall = 1
fall.recover = 0

[State 3501, ]
type = velset
trigger1 = time = 0
y = -15

[State 3501, ]
type = velset
trigger1 = time = 40
y = 0

[State 3501, ]
type = veladd
trigger1 = pos Y < 0 && time < 40
y = 0.7

[State 1995, 角度変更命令]
type = AngleDraw       ;AngleDraw単体では効果がない
trigger1 = 1

[State 1995, 角度加算]
type = AngleAdd
trigger1 = time < 40
value = 19            ;30度ずつ増加する


[State 1026, Hit wall]
type = ChangeState
trigger1 = time >= 45
value = 1893



[Statedef 1893]
type    = A
movetype= A
physics = N
velset = -15,0
anim = 1422
ctrl = 0
sprpriority = 2

[State 1020, ]
type = Changeanim2
trigger1 = time = 0
value = 1422

[State 1000, 1]
type = PlaySnd
trigger1 = time = 0
value = 0, 22

[State 1000, 1]
type = PlaySnd
trigger1 = movehit = 1
value = 0, 15
volume = 256
ignorehitpause = 1
persistent = 0

[State 1027, No scroll]
type = playerpush
trigger1 = 1
value = 0

[State 3050, 2]
type = HitDef
trigger1 = time = 0 || Timemod = 4,3
affectteam = B
attr = S, HA
animtype  = Up
damage    = 300, 30
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 3,0
sparkno = 3
sparkxy = 0,0
guardsound = 6,0
ground.type = Low
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -1.3
guard.velocity = -11
air.velocity = -1.3,10
airguard.velocity = -4.5,-5
envshake.time = 25           ;Parameters for shaking the screen on hit
envshake.ampl = 7
envshake.freq = 176
p2facing = 1                 ;Force p2 to face p1 on hit
fall = 1
fall.recover = 0             ;Prevent p2 from recovering
fall.damage = 170             ;p2 will take 70 damage on hitting the ground
fall.envshake.ampl = 6       ;Parameters for shaking the screen on fall
fall.envshake.freq = 178
fall.envshake.time = 15
mindist = 50,-100            ;Keep p2 a minimum of 50 pixels away from p1, and no higher than 100 pixels up
maxdist = 100,-10            ;Keep p2 a maximum of 100 pixels away from p1, and no lower than 10 pixels below
fall.kill = 0

[State 1995, 角度変更命令]
type = AngleDraw       ;AngleDraw単体では効果がない
trigger1 = 1

[State 1995, 角度加算]
type = AngleAdd
trigger1 = 1
value = -19            ;30度ずつ増加する

[State 1000, ス更]
type = velset
trigger1 = screenpos X != [20,300]
trigger2 = BackEdgeDist < 20
trigger3 = FrontEdgeBodyDist < 20
y = 0
x = 0


[State 1000, ス変更]
type = ChangeState
trigger1 = screenpos X != [20,300]
trigger2 = BackEdgeDist < 20
trigger3 = FrontEdgeBodyDist < 20
trigger4 = time > 90 
value = 1031
ctrl = 0

[Statedef 1895]
type    = A
movetype= I
physics = N
anim = 30050
velset = 0,0
ctrl = 0
sprpriority = 3

[State 191, 猛虎]
type = posset
trigger1 = 1
x = enemynear,pos x
y = enemynear,pos Y

[State 191, ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 191, ]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 1995, 角度変更命令]
type = AngleDraw       ;AngleDraw単体では効果がない
trigger1 = 1

[State 1995, 角度加算]
type = AngleAdd
trigger1 = 1
value = -34            ;30度ずつ増加する

[State 191, ]
type = Destroyself
trigger1 = root,movetype = H || time > 120
trigger2 = BackEdgeDist < 19
trigger3 = FrontEdgeBodyDist < 19

;---------------------------------------------------------------------------
[Statedef 4400]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 4400
velset = 0,0
facep2 = 1

[State 200 , 1]
type = PlaySnd
trigger1 = Time = 0
value = 3, 4

[State 3000, Super A]
type = SuperPause
trigger1 = AnimElem = 2, 1
pos = 0, -65
anim = 101
sound = -1
poweradd = -2000

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [0,800]
trigger1 = AnimElem = 2, 1
value = 0,24

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno != [0,700]
trigger1 = prevstateno != [4200,4211]
trigger1 = prevstateno != [3100,3200]
trigger1 = AnimElem = 2, 1
value = 1,10

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [4200,4211]
trigger2 = prevstateno = [3100,3200]
triggerall = AnimElem = 2, 1
value = 1,11

[State 3009, スーパーキャンセル]
type = Explod
trigger1 = prevstateno != [0,700]
trigger1 = prevstateno != [3100,3200]
trigger1 = prevstateno != [4200,4211]
trigger1 = AnimElem = 2, 1
anim = 32000
postype = left
pos = 0,0
sprpriority = 98
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 3009, ドリームキャンセル]
type = Explod
triggerall = AnimElem = 2, 1
trigger1 = prevstateno = [3100,3200]
trigger2 = prevstateno = [4200,4211]
anim = 32001
postype = left
pos = 0,0
sprpriority = 98
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 191, cutin]
type = Explod
trigger1 = AnimElem = 1
anim = 9000
postype = back
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = 30
supermovetime = 30
ownpal = 1
sprpriority = 0

[State 3009, ]
type = Explod
trigger1 = AnimElem = 2
anim = 30070
postype = p1
pos = 0,0
sprpriority = 3
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 1005, 4]
type = Projectile
trigger1 = AnimElem = 4
projID = 1000
projanim = 4401
offset = 0, 0
velocity = 0,0
attr = A, HA
damage   = 100,25
projscale = 1,1
animtype = Medium
projremovetime = 3
guardflag = HA
pausetime = 0,0
sparkno = -1
sparkxy =  20, 0
hitsound   = s0,7
guardsound = s0,13
ground.type = Trip
ground.slidetime = 3
ground.hittime  = 26
ground.velocity = -2,0
air.velocity = -10,12
air.juggle = 3
palfx.time = 40
palfx.add = -100,0,150
palfx.sinadd = 0,50,50,10
palfx.color = 0
palfx.invertall = 1
fall.envshake.time = 10
fall.envshake.freq = 60
fall.envshake.ampl = -4
fall.envshake.phase = 0
fall.damage = 150

[State 1150, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 5
physics = A

[State 0, ]
type = Helper
trigger1 = AnimElem = 4
IgnoreHitPause = 1
SuperMoveTime = 45
PauseMoveTime = 45
stateno = 4410
postype = p1
pos = 0,0
size.Xscale = 1.0
size.Yscale = 1.0

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0,21

[Statedef 4410]
type     = A
movetype = I
physics  = N
ctrl     = 0
anim     = 20000
SprPriority = 5

[State 1201, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State 1201, キャラ本体に引っ付く位置]
type = BindToRoot
trigger1 = 1
pos = 100,-180

[State 1995, 角度変更命令]
type = AngleDraw       ;AngleDraw単体では効果がない
trigger1 = 1
value = -45

[State 191, ]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 1201, このヘルパーを消す]
type = DestroySelf
trigger1 = Time >= 20
trigger2 = Root,MoveType != A

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; ここからは上級編のステート
;---------------------------------------------------------------------------
; パワー溜め（特殊行動）
; CNS レベル: 中級
;
; 上級編のステートはちょっとこ丸が自ら解説するぜ！('A`)y-~~
;
; 単純にパワーゲージを溜めるだけの動作だから movetype = I (攻撃しない動作)。
; ゲージ増加はPowerAddのコントローラで制御。トリガーが「1」だけだから、
; このステートの時は常にゲージが徐々に溜まるようになっている。
;
; [Statedef 191]でも使われている、Explodのステートコントローラをここでも使用。
; dataフォルダにあるfightfx.air（システムエフェクトのアニメファイル）から
; [Begin Action 130]（パワー溜めエフェクトアニメ）を呼び出している。
; 130の前に「f」を付けているのがその証拠。
; MUGENはアニメをExplodとHelperとProjectile合わせて最高で６４個しか画面中に出せない(Win版では変更可)ので、
;「NumExplod(***)」(ＩＤナンバーが***のExplodが画面中に何個表示されてるかを判断する)のトリガー
; と「removetime」(表示されたアニメを消すまでの時間) のパラメータを組み合わせて、
; アニメを１個だけ表示して、同じモノを何個も重複表示させないように制御している。
; 多過ぎたら処理落ちするしね。
;「ID」はそのアニメに振り分けられた番号（ＩＤナンバー）なので、別に設置する他の専用のコントローラで制御する場合は必要。
; 後はエフェクト画像の向きがfacingで逆にされてて、横幅がscaleで大きくされてる事くらい。
; -2の常時監視ステートで、このExplodのエフェクトをパワー溜めが終了したら消す制御もしてる。
; かなり重要だから見逃すなよ〜。
;
; ChangeStateにも注意してほしい。条件が２パターンあるけど、
; trigger1は"hold_c"の名前のコマンドじゃない時（Ｃボタンが離された時）に、
; trigger2(もう一つの条件)はパワーゲージが3000以上になった時にステートが変更されている。
; 押しっぱなしにしてるボタンを離したり、パワーが満タンになったら溜めるのを終わらせるようにしているため。

[Statedef 700]
type     = S
movetype = I
physics  = S
ctrl     = 0
velset   = 0,0
anim     = 700
sprpriority = 2

[State 700, パワーゲージ増加]
type = PowerAdd
trigger1 = 1
value = 10

[State 700, エフェクト表示]
type = Explod
trigger1 = NumExplod(130) = 0
anim = f130
facing = -1      ;表示が左右逆になる
postype = p1     ;表示する軸位置の属性：p1=キャラ本体・p2=相手側・front=前の画面端・back=後ろの画面端・left=画面左端・right=画面右端
pos = 0, 0       ;postypeで決めた軸位置からのエフェクト表示位置
scale = 1.5,1    ;横の大きさを1.5倍にしている。縦はそのまま
sprpriority = 5  ;Explodエフェクトの画像表示優先度
ownpal = 1       ;このExplodエフェクトアニメが(PalFXなどで)本体の色が変わった時に一緒に変わるかどうか（0=変わる・1=変わらない）
removetime = -1  ;-1なのでアニメが終了せず常に表示される
bindtime=-1;
ID = 130         ;単純にこのエフェクトアニメのＩＤナンバー。しかし用途は結構複雑

[State 700, ステート変更]
type = ChangeState
triggerall = var(59) <= 0 && !helper(20000),var(58)
trigger1 = command != "hold_c"
trigger2 = power >= 3000
value = 11 ;しゃがみステートの方が終わった時のモーションの見栄えが良かった（爆
ctrl = 1

[State 700, ステート変更]
type = ChangeState
triggerall = var(59) > 0||helper(20000),var(58)
triggerall = random<var(59)*70||var(59)>10||helper(20000),var(58)
trigger1 = power >= powermax
trigger2 = RoundState != 2
trigger3 = inguarddist
trigger4 = playerID(var(57)),statetype!=L&&playerID(var(57)),movetype!=H
trigger4 = playerID(var(57)),movetype=A || playerID(var(57)),ctrl || playerID(var(57)),stateno<200 || P2Bodydist x<=80
trigger4 = P2BodyDist x < 150
trigger5 = random < 5&&var(59)<=10
trigger5 = playerID(var(57)),statetype!=L
trigger5 = playerID(var(57)),movetype!=H
trigger6 = P2bodyDist x < 50
trigger6 = playerID(var(57)),stateno=5120
trigger6 = playerID(var(57)),Animtime > -10
trigger7 = playerID(var(57)),stateno=1425
trigger7 = playerID(var(57)),movetype=H
trigger7 = playerID(var(57)),pos y + (playerID(var(57)),vel y + playerID(var(57)),gethitvar(yaccel)*10)*20 > -50
trigger7 = power >= 1000
trigger8 = playerID(var(57)),stateno=1029
trigger8 = playerID(var(57)),movetype=H
trigger8 = playerID(var(57)),pos y + (playerID(var(57)),vel y + playerID(var(57)),gethitvar(yaccel)*10)*20 = [-30,0]
Trigger9 = helper(30000),var(38)
Trigger9 = partner,movetype=H||enemynear(0),movetype!=H&&enemynear(numenemy>=2),movetype!=H
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; シールド（特殊行動）
; CNS レベル: わからん
;
; 同人格ゲー「MELTY BLOOD」よりボタン１つで出せる、攻撃を受け流す技。
; ウチのキャラのシールドには、実はカンフーマンに使われてない役に立つステートコントローラやテクニックを
; いくつか同時に使ってるから、簡単に説明してみようと思う。
;
; ＭＵＧＥＮでの攻撃判定ボックス（Clsn1）の設置は「打撃」や「投げ掴み」だけにあるワケじゃない。
; 相手の攻撃を受け止める時の効果を定義する「ReversalDef」というコントローラを使う時にも設置する必要がある。
; 受け止める相手の攻撃属性（attrがreversal.attrに変わってる）くらいが違うだけで、
; 設定方法はHitDefと似たようなモノだから覚えやすい・・・・・・と思う（苦笑。
; ReversalDef唯一の問題は、後で説明する「Projectile」というコントローラの飛び道具攻撃だけは受け止められない事。
; そのために後述のHitOverRideを使ってるけど。
;
;「HitOverRide」のコントローラはその名の如く、相手から攻撃を食らえば
; やられ状態を任意に指定したステートで上書きしてしまうという効果を設置する命令。
; スーパーアーマーに使えるがちょっと覚えにくいから、わからなかったら飛ばしても良い。
; ReversalDefとは違い、トリガーやattrの設定方法によっては全ての攻撃を受け止める事も出来るが、
; HitOverRideにも一つ問題がある。「相手のp2statenoのあるHitDef（投げではなく打撃）」を受け止める事は出来ない。
; ReversalDefのコントローラを消して、「速いカンフー突き手」を「シールドを出してるカンフーマン」に当ててみれば、
; どういう風になるかわかるのでお試しあれ。なんでなのかも、勘の良い人はわかるかもね。
;
; ifelse文はStatedef直下のパラメータにも使う事が出来る。
; [Statedef 800]で説明した通りの複数使える場合を、下のanimで実例として使ってます。
; 日本語で説明すると『もししゃがみ状態だったら703、空中にいるならば705、それ以外（立ち）ならば701のアニメを呼び出す』です。

[Statedef 701] 
type     = U ;前のステートの状態を引き継ぎます。直前のステートのTypeがSだったらもちろんSになる
movetype = I
physics  = N
ctrl     = 0
anim     = ifelse(StateType=C,703,ifelse(StateType=A,705,701))

[State 701, 状態パラメータ変更] ;StateType・MoveType・Physicsを変更するためのコントローラ
type = StateTypeSet
triggerall = StateType = A
trigger1 = 1
Physics = A ;物理的な体勢をA（空中）にします
IgnoreHitPause = 1
Persistent = 1

[State 701, 受け止め定義]
type = ReversalDef
trigger1 = Time = 0
reversal.attr = SCA, NA, SA, HA, NP, SP, HP, AA, AP ;相手の受け止められる攻撃の属性を指定
pausetime     = 0,14
numhits       = 0 ;ヒット数
sparkno       = -1
sparkxy       = 0,0
hitsound      = -1,-1
P1StateNo = 702 ;このコントローラでも自分や攻撃を受け止めた相手のステート変更が可能

[State 701, やられ状態上書き]
type = HitOverRide
trigger1 = Time = [0,13]
time = 1
attr = SCA, NA, SA, HA, NP, SP, HP, AA, AP ;上書きを有効にするための相手の攻撃を食らう属性を指定
stateno = 702
IgnoreHitPause = 1

[State 701, 色の変更]
type = PalFX
trigger1 = Time = 0
time = 13
add = 20,70,150
sinadd = 64,32,5,3

[State 701, 軸位置設定]
type = PosSet
triggerall = StateType != A
trigger1 = 1
y = 0

[State 701, 移動速度]
type = VelSet
triggerall = StateType != A
trigger1 = 1
x = 0
y = 0

[State 701, ステート変更] ;立ちとしゃがみ
type = ChangeState
triggerall = StateType != A
trigger1 = AnimTime = 0
value = ifelse(StateType=C,11,0)
ctrl = 1

[State 701, ステート変更] ;空中のみ
type = ChangeState
triggerall = StateType = A
trigger1 = Time >= 20
value = 51 ;common1.cns参照
ctrl = 1

;------------------
;シールド成功

[Statedef 702]
type     = U
movetype = I
physics  = N
ctrl     = 0
velset   = 0,0
anim     = ifelse(StateType=C,704,ifelse(StateType=A,706,702))

[State 702, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 0, 14

[State 702, 状態パラメータ変更]
type = StateTypeSet
triggerall = StateType = A
trigger1 = 1
Physics = A
IgnoreHitPause = 1
Persistent = 1

[State 702, 体力回復] ;単純に体力ゲージの増加量を設定。０未満にすりゃ当然体力が減る。
type = LifeAdd
trigger1 = Time = 0
value = 2
IgnoreHitPause = 1
Persistent = 1

[State 702, 無敵]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 18

[State 702, 動きを止める（ポーズ）] ;自分も相手も試合時間も全ての動きを止める事が出来るコントローラ。
type = Pause
trigger1 = Time = 0
time = 18 ;ポーズする時間
movetime = 18 ;ポーズ中に自分がどれくらいの時間を動けるか。0か、このパラメータを省略すれば動けない。
IgnoreHitPause = 1
Persistent = 1

[State 702, 画面全体の色合い]
type = EnvColor
trigger1 = Time = 0
value = 255,255,255
time = 1

[State 702, 軸位置設定]
type = PosSet
triggerall = StateType != A
trigger1 = 1
y = 0

[State 702, 移動速度]
type = VelSet
triggerall = StateType = A
trigger1 = Time = [0,20]
x = 0
y = 0

[State 702, ステート変更] ;立ちとしゃがみ
type = ChangeState
triggerall = StateType != A
trigger1 = AnimTime = 0
value = ifelse(StateType=C,11,0)
ctrl = 1

[State 702, ステート変更] ;空中のみ
type = ChangeState
triggerall = StateType = A
trigger1 = Time >= 20
value = 51 ;common1.cns参照
ctrl = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; 板投げ（必殺技）
; CNS レベル: 上級？
;
; 今までとは違う別の３つのコントローラを使用して簡単に技を作ってみた。
; とりあえず単純に板を投げる飛び道具技。どこかで似たのを見た事があるのは気のせいだ（ﾏﾃｺﾗ。
;
; 飛び道具を発射させるには「Projectile」のコントローラを使えば良い。
; HitDefに飛び道具用のパラメータが増えたようなモノだから、設置の感覚はわかりやすいと思う。
; 飛び道具はStatedef直下のjuggleパラメータが無視されるので、
; ジャグルポイントをヒットした時に溜めるには、Projectileの下に「air.juggle」のパラメータを追加する必要があるので注意。
; ちなみに発射物のアニメに攻撃判定(Clsn1)だけでなくやられ判定(Clsn2)まで付いているのは、
; 自分と相手の発射物同士を当たった時に「相殺（互いに打ち消される事）」させるため。
; すり抜けたいならprojpriorityを高くしたり、逆にやられ判定を入れなきゃいい。
;
;「Helper」のコントローラはかなり特殊な部類に入る。通称「ヘルパー」。
; サポートキャラクター（ＫＯＦのストライカーやナコルルのママハハなど）を呼び出すのに主に使われる。
; 呼び出した後は、専用のコントローラ使ったり、呼び出したキャラ本体や親ヘルパーを判断したりするけど、
; それは下のヘルパー用ステートで説明するので省略。
;
; パワー溜めのトコでも言ったけど、飛び道具もヘルパーも画面中に一度に出せる数が制限されているので、注意されたし。
;
; このファイルの一番上くらいで説明したVar（変数）を実際に使ってみた。
; 変数をセッティングするにはVarSet（他にもあるけど省略）のコントローラを使い、アドレスを決め、有効になる数値を入力する。
; 下の通り、パラメータの登録は２種類ある。どっちでもいい。
; 上の「v = 5」はもちろんその２の「var(5)」の部分と一緒。変数５番目のアドレスを使用する。
; そして「value = 0」は「そのvar(5)の数値が０になる」という意味。
; これでその１では「このステートが０フレーム目の時のみ、Ａボタンが入力されていると５番目のアドレスが０にセッティングされる」事になる。
; その２も「同様にＢボタンが入力されていると５番目のアドレスが１にセッティングされる」事になる。
;
; ※変数は別に数値を変更する命令を（どのステートでも）新たに登録しない限り、
; 　セッティングした数値がラウンド中ずっとそのまま有効になるので絶対注意。
; 　[Data]での持ち越しは例外だけど。ちなみに変数全ての初期値は０だ。
;
; これで１ステートのみで技の強弱が付けれるようになった。悪咲さん方式（爆。
; しかし登録しただけじゃ意味無い。Varの真価を発揮させるには、
; 他のコントローラ内のトリガーやパラメータで呼び出さなければならない。
; ２つのProjectileのコントローラにtriggerall = var(5) = 0と1、と二つずつ命令が出ている。
; 変数の５番目のアドレスが０の時は上のProjectileが有効になり、１の時は下のProjectileが有効になる。
;
; 今回はわかりやすいようにスイッチみたいに使ってるけど、変数は色々組み合わせればやれる事がいっぱい。
; だからこれだけじゃなく、世に出ている他のキャラのVarも中身見まくる事をオススメする。
; 必ず新発見があるはず。

[Statedef 1200]
type    = S
movetype= A
physics = S
poweradd= 100
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

[State 1200, 変数をセットする] ;設定の仕方その１
type = VarSet
triggerall = var(59) <= 0
triggerall = Time = 0
trigger1 = command = "a"
v = 5      ;var(5)を
value = 0  ;０にセットする
IgnoreHitPause = 1
Persistent = 1

[State 1200, 変数をセットする] ;設定の仕方その２
type = VarSet
triggerall = var(59) <= 0 
triggerall = Time = 0
trigger1 = command = "b"
var(5) = 1 ;var(5)を１にセットする
IgnoreHitPause = 1
Persistent = 1

[State 1200,a] 
type = VarSet
triggerall = var(59) > 0 && RoundState = 2
trigger1 = Time = 0
v = 5
value = 0
IgnoreHitPause = 1
Persistent = 1

[State 1200,b]
type = VarSet
triggerall = var(59) > 0 && RoundState = 2
triggerall = Time = 0
trigger1 = P2BodyDist X >=120
var(5) = 1
IgnoreHitPause = 1
Persistent = 1

[State 1200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 800, 0

[State 1200, 物理的なキャラの幅]
type = Width
trigger1 = ((AnimElemTime(2) >= 0) && (AnimElemTime(10) < 0))
edge = 28,0
player = 15,0

[State 1200, ヘルパーを出す]
type = Helper
trigger1 = AnimElemTime(2) = 0
Persistent = 0
name = "Wood-Board"  ;ヘルパーの名前
stateno = 1201       ;ヘルパーが最初に行くステート
ID = 1200            ;ヘルパーのＩＤナンバー
pos = -5,-60         ;ヘルパーの出現位置
postype = p1         ;ヘルパーの最初に出る軸位置の属性（Explodのpostypeと書き方は同じだが効果が少し違う）
keyctrl = 0          ;ヘルパーがコントロール可能かどうか（0=操作不可・1=操作可能）
ownpal = 1           ;ヘルパーが(PalFXなどで)本体の色が変わった時に一緒に変わるかどうか（Explodのownpalと一緒）
size.xscale = 2      ;ヘルパーの横のサイズ
size.yscale = 2      ;ヘルパーの縦のサイズ
helpertype = normal  ;ヘルパーの属性：画面スクロールの影響を受けるか否かを決める
                     ;（Player=影響有り・画面外に出られない　Normal=影響無し・画面外に出られる）

;※↑のヘルパーと↓の飛び道具のＩＤナンバーが同じ数値ですが、関係無いです。別々に判断されます。

[State 1200, 飛び道具を出す] ;弱
type = Projectile
triggerall = var(5) = 0 && (var(35) = 0)
trigger1 = AnimElem = 7
attr = S, SP ;Standing, Special Projectile（立ち必殺技の飛び道具）
damage = 90,9
getpower = 30,10
animtype = Hard
pausetime = 0,12
offset = 75,-77             ;飛び道具の出現位置
velocity = 4,-3             ;飛び道具の移動初速度
accel = 0,0.4               ;飛び道具の加速度
projID = 1200               ;飛び道具のＩＤナンバー
projanim = 1202             ;飛び道具のアニメ
projhitanim = 1203          ;飛び道具がヒットした時のアニメ
projremanim = 1203          ;飛び道具が消える時のアニメ
projscale = 2,2             ;飛び道具の大きさ（今は２倍）
projshadow = 0,0,0          ;飛び道具の影（現在は0,0,0なので影無し）
projhits = 1                ;飛び道具のヒット数
projmisstime = 1            ;飛び道具がヒットしない間隔（２ヒット以上のみ作用する）
projpriority = 3            ;飛び道具の攻撃優先度
projremovetime = -1         ;飛び道具が消えるまでの時間（-1なので画面外に出るか当たるまで消えない）
guardflag = MA
priority = 3
sparkno = 2
sparkxy = 0,0
guard.sparkno = 40
hitsound = 5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
ground.velocity = -6,0
air.velocity = -3,-4
air.juggle = 1 ;飛び道具の場合はここでジャグルポイントを設定する必要がある
envshake.time = 8
envshake.ampl = 6
envshake.freq = 100

[State 1200, 飛び道具を出す] ;強
type = Projectile
triggerall = var(5) = 1 && (var(35) = 0)
trigger1 = AnimElem = 7
attr = S, SP
damage = 100,10
getpower = 30,10
animtype = Hard
pausetime = 0,12
offset = 75,-77
velocity = 6,-3
accel = 0,0.4
projID = 1200
projanim = 1202
projhitanim = 1203
projremanim = 1203
projscale = 2,2
projshadow = 0,0,0
projhits = 1
projmisstime = 1
projpriority = 3
projremovetime = -1
guardflag = MA
priority = 3
sparkno = 2
sparkxy = 0,0
guard.sparkno = 40
hitsound = 5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
ground.velocity = -6,0
air.velocity = -3,-4
air.juggle = 1
envshake.time = 8
envshake.ampl = 6
envshake.freq = 100

[State 1200, 飛び道具を出す] ;弱
type = Projectile
triggerall = var(5) = 0 && (var(35) = 1)
trigger1 = AnimElem = 7
attr = S, SP ;Standing, Special Projectile（立ち必殺技の飛び道具）
damage = 45,4
getpower = 30,10
animtype = Hard
pausetime = 0,12
offset = 75,-77             ;飛び道具の出現位置
velocity = 4,-3             ;飛び道具の移動初速度
accel = 0,0.4               ;飛び道具の加速度
projID = 1200               ;飛び道具のＩＤナンバー
projanim = 1202             ;飛び道具のアニメ
projhitanim = 1203          ;飛び道具がヒットした時のアニメ
projremanim = 1203          ;飛び道具が消える時のアニメ
projscale = 2,2             ;飛び道具の大きさ（今は２倍）
projshadow = 0,0,0          ;飛び道具の影（現在は0,0,0なので影無し）
projhits = 1                ;飛び道具のヒット数
projmisstime = 1            ;飛び道具がヒットしない間隔（２ヒット以上のみ作用する）
projpriority = 3            ;飛び道具の攻撃優先度
projremovetime = -1         ;飛び道具が消えるまでの時間（-1なので画面外に出るか当たるまで消えない）
guardflag = MA
priority = 3
sparkno = 2
sparkxy = 0,0
guard.sparkno = 40
hitsound = 5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
ground.velocity = -6,0
air.velocity = -3,-4
air.juggle = 1 ;飛び道具の場合はここでジャグルポイントを設定する必要がある
envshake.time = 8
envshake.ampl = 6
envshake.freq = 100

[State 1200, 飛び道具を出す] ;強
type = Projectile
triggerall = var(5) = 1 && (var(35) = 1)
trigger1 = AnimElem = 7
attr = S, SP
damage = 50,5
getpower = 30,10
animtype = Hard
pausetime = 0,12
offset = 75,-77
velocity = 6,-3
accel = 0,0.4
projID = 1200
projanim = 1202
projhitanim = 1203
projremanim = 1203
projscale = 2,2
projshadow = 0,0,0
projhits = 1
projmisstime = 1
projpriority = 3
projremovetime = -1
guardflag = MA
priority = 3
sparkno = 2
sparkxy = 0,0
guard.sparkno = 40
hitsound = 5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
ground.velocity = -6,0
air.velocity = -3,-4
air.juggle = 1
envshake.time = 8
envshake.ampl = 6
envshake.freq = 100

[State 1200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 1210]
type    = S
movetype= A
physics = S
poweradd= -330
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

[State 1020, Blink Yellow]
type = PalFX
trigger1 = time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1220, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1220, Afterimage]
type = AfterImageTime
trigger1 = AnimTime < -2
time = 2

[State 1200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 800, 0

[State 1200, 物理的なキャラの幅]
type = Width
trigger1 = ((AnimElemTime(2) >= 0) && (AnimElemTime(10) < 0))
edge = 28,0
player = 15,0

[State 1200, ヘルパーを出す]
type = Helper
trigger1 = AnimElemTime(2) = 0
Persistent = 0
name = "Wood-Board"  ;ヘルパーの名前
stateno = 1201       ;ヘルパーが最初に行くステート
ID = 1200            ;ヘルパーのＩＤナンバー
pos = -5,-60         ;ヘルパーの出現位置
postype = p1         ;ヘルパーの最初に出る軸位置の属性（Explodのpostypeと書き方は同じだが効果が少し違う）
keyctrl = 0          ;ヘルパーがコントロール可能かどうか（0=操作不可・1=操作可能）
ownpal = 1           ;ヘルパーが(PalFXなどで)本体の色が変わった時に一緒に変わるかどうか（Explodのownpalと一緒）
size.xscale = 2      ;ヘルパーの横のサイズ
size.yscale = 2      ;ヘルパーの縦のサイズ
helpertype = normal  ;ヘルパーの属性：画面スクロールの影響を受けるか否かを決める
                     ;（Player=影響有り・画面外に出られない　Normal=影響無し・画面外に出られる）

;※↑のヘルパーと↓の飛び道具のＩＤナンバーが同じ数値ですが、関係無いです。別々に判断されます。

[State 1200, 飛び道具を出す]
type = Projectile
trigger1 = AnimElem = 7
attr = S, SP ;Standing, Special Projectile（立ち必殺技の飛び道具）
damage = 50,9
getpower = 30,10
animtype = Hard
pausetime = 0,12
offset = 75,-77             ;飛び道具の出現位置
velocity = 4,-6             ;飛び道具の移動初速度
accel = 0,0.4               ;飛び道具の加速度
projID = 1200               ;飛び道具のＩＤナンバー
projanim = 1202             ;飛び道具のアニメ
projhitanim = 1203          ;飛び道具がヒットした時のアニメ
projremanim = 1203          ;飛び道具が消える時のアニメ
projscale = 2,2             ;飛び道具の大きさ（今は２倍）
projshadow = 0,0,0          ;飛び道具の影（現在は0,0,0なので影無し）
projhits = 1                ;飛び道具のヒット数
projmisstime = 1            ;飛び道具がヒットしない間隔（２ヒット以上のみ作用する）
projpriority = 3            ;飛び道具の攻撃優先度
projremovetime = -1         ;飛び道具が消えるまでの時間（-1なので画面外に出るか当たるまで消えない）
guardflag = MA
priority = 3
sparkno = 2
sparkxy = 0,0
guard.sparkno = 40
hitsound = 5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
ground.velocity = -6,0
air.velocity = -3,-4
air.juggle = 1 ;飛び道具の場合はここでジャグルポイントを設定する必要がある
envshake.time = 8
envshake.ampl = 6
envshake.freq = 100

[State 1200, 飛び道具を出す]
type = Projectile
trigger1 = AnimElem = 7
attr = S, SP
damage = 50,10
getpower = 30,10
animtype = Hard
pausetime = 0,12
offset = 75,-77
velocity = 6,-3
accel = 0,0.4
projID = 1200
projanim = 1202
projhitanim = 1203
projremanim = 1203
projscale = 2,2
projshadow = 0,0,0
projhits = 1
projmisstime = 1
projpriority = 3
projremovetime = -1
guardflag = MA
priority = 3
sparkno = 2
sparkxy = 0,0
guard.sparkno = 40
hitsound = 5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
ground.velocity = -6,0
air.velocity = -3,-4
air.juggle = 1
envshake.time = 8
envshake.ampl = 6
envshake.freq = 100

[State 1200, 飛び道具を出す]
type = Projectile
trigger1 = AnimElem = 7
attr = S, SP
damage = 50,10
getpower = 30,10
animtype = Hard
pausetime = 0,12
offset = 75,-77
velocity = 2,-9
accel = 0,0.4
projID = 1200
projanim = 1202
projhitanim = 1203
projremanim = 1203
projscale = 2,2
projshadow = 0,0,0
projhits = 1
projmisstime = 1
projpriority = 3
projremovetime = -1
guardflag = MA
priority = 3
sparkno = 2
sparkxy = 0,0
guard.sparkno = 40
hitsound = 5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
ground.velocity = -6,0
air.velocity = -3,-4
air.juggle = 1
envshake.time = 8
envshake.ampl = 6
envshake.freq = 100

[State 1200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 3200]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

[State 1200,b]
type = VarRandom
trigger1 = 1
v = 5
range = 1,5
IgnoreHitPause = 1
Persistent = 1

[State 3501, 無敵]
type = NotHitBy
trigger1 = animelem = 4,<=0
value = SCA
time = 6

[State 3000, Super A]
type = SuperPause
trigger1 = AnimElem = 2
pos = -5, -60
anim = 100
sound = -1
poweradd = -1000

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [0,800]
trigger1 = AnimElem = 2
value = F20,0

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno != [0,800]
trigger1 = prevstateno != [4200,4211]
trigger1 = prevstateno != [3000,3001]
trigger1 = prevstateno != [3050,3053]
trigger1 = prevstateno != [3100,3200]
trigger1 = AnimElem = 2
value = 1,10

[State 1007, 音を鳴らす]
type = PlaySnd
trigger1 = prevstateno = [4200,4211]
trigger2 = prevstateno = [3000,3001]
trigger3 = prevstateno = [3050,3053]
trigger4 = prevstateno = [3100,3200]
triggerall = AnimElem = 2
value = 1,11

[State 3009, スーパーキャンセル]
type = Explod
trigger1 = prevstateno != [0,800]
trigger1 = prevstateno != [4200,4211]
trigger1 = prevstateno != [3000,3001]
trigger1 = prevstateno != [3050,3053]
trigger1 = prevstateno != [3100,3200]
trigger1 = AnimElem = 2
anim = 32000
postype = left
pos = 0,0
sprpriority = 99
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 3009, ドリームキャンセル]
type = Explod
triggerall = AnimElem = 2
trigger1 = prevstateno = [4200,4211]
trigger2 = prevstateno = [3000,3001]
trigger3 = prevstateno = [3050,3053]
trigger4 = prevstateno = [3100,3200]
anim = 32001
postype = left
pos = 0,0
sprpriority = 99
ownpal = 1
ontop = 1
IgnoreHitPause = 1
supermovetime = 99999999
pausemovetime = 99999999
removeongethit = 1

[State 1200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 800, 0

[State 1200, 物理的なキャラの幅]
type = Width
trigger1 = ((AnimElemTime(2) >= 0) && (AnimElemTime(10) < 0))
edge = 28,0
player = 15,0

[State 1200, ヘルパーを出す]
type = Helper
trigger1 = AnimElemTime(2) = 0
Persistent = 0
name = "Wood-Board"  ;ヘルパーの名前
stateno = 1201       ;ヘルパーが最初に行くステート
ID = 1200            ;ヘルパーのＩＤナンバー
pos = -5,-60         ;ヘルパーの出現位置
postype = p1         ;ヘルパーの最初に出る軸位置の属性（Explodのpostypeと書き方は同じだが効果が少し違う）
keyctrl = 0          ;ヘルパーがコントロール可能かどうか（0=操作不可・1=操作可能）
ownpal = 1           ;ヘルパーが(PalFXなどで)本体の色が変わった時に一緒に変わるかどうか（Explodのownpalと一緒）
size.xscale = 2      ;ヘルパーの横のサイズ
size.yscale = 2      ;ヘルパーの縦のサイズ
helpertype = normal  ;ヘルパーの属性：画面スクロールの影響を受けるか否かを決める
                     ;（Player=影響有り・画面外に出られない　Normal=影響無し・画面外に出られる）

;※↑のヘルパーと↓の飛び道具のＩＤナンバーが同じ数値ですが、関係無いです。別々に判断されます。

[State 1200, 飛び道具を出す]
type = Projectile
trigger1 = AnimElem = 7,>=0 && animelem = 7,<=5
attr = S, SP ;Standing, Special Projectile（立ち必殺技の飛び道具）
damage = 10,2
getpower = 30,10
animtype = Hard
pausetime = 0,12
offset = 75,-77             ;飛び道具の出現位置
velocity = 1+var(5),-4-var(5)
accel = 0,0.4               ;飛び道具の加速度
projID = 1200               ;飛び道具のＩＤナンバー
projanim = 1202             ;飛び道具のアニメ
projhitanim = 1203          ;飛び道具がヒットした時のアニメ
projremanim = 1203          ;飛び道具が消える時のアニメ
projscale = 1,1             ;飛び道具の大きさ（今は２倍）
projshadow = 0,0,0          ;飛び道具の影（現在は0,0,0なので影無し）
projhits = 1                ;飛び道具のヒット数
projmisstime = 1            ;飛び道具がヒットしない間隔（２ヒット以上のみ作用する）
projpriority = 3            ;飛び道具の攻撃優先度
projremovetime = -1         ;飛び道具が消えるまでの時間（-1なので画面外に出るか当たるまで消えない）
guardflag = MA
priority = 3
sparkno = 2
sparkxy = 0,0
guard.sparkno = 40
hitsound = 5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
ground.velocity = -6,0
air.velocity = -3,-4
air.juggle = 1 ;飛び道具の場合はここでジャグルポイントを設定する必要がある
envshake.time = 8
envshake.ampl = 6
envshake.freq = 100

[State 1200, 飛び道具を出す]
type = Projectile
trigger1 = AnimElem = 7,>=0 && animelem = 7,<=5
attr = S, SP
damage = 10,2
getpower = 30,10
animtype = Hard
pausetime = 0,12
offset = 75,-77
velocity = 3+var(5),-1-var(5)
accel = 0,0.4
projID = 1200
projanim = 1202
projhitanim = 1203
projremanim = 1203
projscale = 1,1
projshadow = 0,0,0
projhits = 1
projmisstime = 1
projpriority = 3
projremovetime = -1
guardflag = MA
priority = 3
sparkno = 2
sparkxy = 0,0
guard.sparkno = 40
hitsound = 5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
ground.velocity = -6,0
air.velocity = -3,-4
air.juggle = 1
envshake.time = 8
envshake.ampl = 6
envshake.freq = 100

[State 1200, 飛び道具を出す]
type = Projectile
trigger1 = AnimElem = 7,>=0 && animelem = 7,<=5
attr = S, SP
damage = 10,2
getpower = 30,10
animtype = Hard
pausetime = 0,12
offset = 75,-77
velocity = -1+var(5),-7-var(5)
accel = 0,0.4
projID = 1200
projanim = 1202
projhitanim = 1203
projremanim = 1203
projscale = 1,1
projshadow = 0,0,0
projhits = 1
projmisstime = 1
projpriority = 3
projremovetime = -1
guardflag = MA
priority = 3
sparkno = 2
sparkxy = 0,0
guard.sparkno = 40
hitsound = 5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
ground.velocity = -6,0
air.velocity = -3,-4
air.juggle = 1
envshake.time = 8
envshake.ampl = 6
envshake.freq = 100

[State 1200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------
; 放り投げるまでの板（ヘルパー用ステート）
;
; こちら側がヘルパーのステート。
; カンフーマンが放り投げるまで持っている板を表示させてるだけ。
; Bindなんたらとかﾃﾞｰｽﾄﾛｰｲとかは意味がわかりやすいので省略。
;
; コントローラにBindToRootとか、トリガーに「Root,」などがあるのに注意。
; このRootの部分はヘルパーを出した親プレイヤーを判断する記述で、
;「Root」が付いている場合はキャラ本体、「Parent」ならばそのヘルパーを出した親キャラを判断する。
;
; 例えばカンフーマンがヘルパーＡを出すとする。そしてヘルパーＡがヘルパーＢを出すとする。
; ヘルパーＢから見て、「Root」はカンフーマン、「Parent」はヘルパーＡに該当する。
;
; この板ヘルパーの場合は見る人のために簡単にしてるけど、実際には
; 飛び道具に使ったり、分身作ったり、特殊効果を制御したり、Explodの代わりにエフェクトとして使ったり、
; 用途に応じて使い分けられるのでこれも結構オススメ。

[Statedef 1201]
type     = A
movetype = I
physics  = N
ctrl     = 0
anim     = 1201
SprPriority = 5

[State 1201, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State 1201, キャラ本体に引っ付く位置]
type = BindToRoot
trigger1 = Time = [0,1]
pos = -5,-60 ;キャラ本体の軸からX=-5・Y=-60の位置に引っ付きます

[State 1201, キャラ本体に引っ付く位置]
type = BindToRoot
trigger1 = Time = [2,3]
pos = 8,-68

[State 1201, キャラ本体に引っ付く位置]
type = BindToRoot
trigger1 = Time = [4,5]
pos = 17,-82

[State 1201, キャラ本体に引っ付く位置]
type = BindToRoot
trigger1 = Time = [6,7]
pos = 28,-90

[State 1201, キャラ本体に引っ付く位置]
type = BindToRoot
trigger1 = Time >= 8
pos = 55,-83

[State 1201, このヘルパーを消す]
type = DestroySelf
trigger1 = Time >= 10
trigger2 = Root,MoveType != A ;キャラ本体が攻撃してない時
;trigger2 = Parent,MoveType != A

;---------------------------------------------------------------------------
; カンフーマンのこのCNSファイルをそのまま使う場合は、
; ここからステートを追加すると整理しやすいでしょう。
;---------------------------------------------------------------------------

;--------------------------------
;救済措置
[Statedef 9999]
type     = S
movetype = I
physics  = N
poweradd = 0
ctrl     = 0
anim     = 2102
velset   = 1,0

[State 2303, このヘルパーを消す]
type = DestroySelf
trigger1 = ishelper

[State 9999, 2]
type = BGPalFX
trigger1 = var(10)!=0
time = 30
add = 0,0,0
mul = 128,128,128
sinadd = 256,256,256,10
invertall = 0
color = 256

[State 3501, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2

[State 3500, 残像]
type = AfterImage
trigger1 = 1
Time = 5
PalBright   = 90,90,150
PalContrast = 180,180,256
Trans = Add1

[State 3500, ステート変更]
type = posset
trigger1 = pos Y > 0
y = 0

[State 3500, ステート変更]
type = posadd
trigger1 = screenpos X != [80,240]
x = 10

[State 3500, ステート変更]
type = posadd
trigger1 = pos Y < 0
y = 10

[State 3500, ステート変更]
type = posset
trigger1 = pos Y > 0
y = 0

[State 1026, カメラスクロールの有無]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 3501, ステート変更]
type = ChangeState
trigger1 = screenpos X = [80,240]
trigger2 = FrontEdgeBodyDist <= 30
triggerall = pos Y < 0
value = 51
ctrl = 1

[State 3501, ステート変更]
type = ChangeState
trigger1 = screenpos X = [80,240]
trigger2 = FrontEdgeBodyDist <= 30
trigger3 = time >= 600
value = 100
ctrl = 1

;-------------------------------------------------
;回り込み

;回り込み
[Statedef 2101]
type     = S
movetype = I
physics  = N
poweradd = -1000
ctrl     = 0
anim     = 2110
velset   = 0,0

[State 1210, 1]
type = PlaySnd
trigger1 = time = 0
value = 0, 13

[State 7100, Flash]
type = envcolor
trigger1 = TIME = 0
ignorehitpause = 1
persistent = 0
time = 2
value = 250,250,250
under = 1

[State 702, ステート変更]
type = ChangeState
trigger1 = time = 0
value = 2100

[Statedef 2100]
type     = S
movetype = I
physics  = N
poweradd = 0
ctrl     = 0
anim     = 2110
velset   = 0,0

[State 702, 相手の特定の攻撃属性無効];（※１）
type = NotHitBy
trigger1 = 1
value = ,AA,AP
value2= A ,NT,ST
time = 1

[State 702, 押し判定]
type = PlayerPush
trigger1 = (Time = [0,20])
value = 0
IgnoreHitPause = 1
Persistent = 1

[State 702, 残像]
type = AfterImage
trigger1 = Time = 0
Time = 29
PalContrast = 120,120,120
Trans = Add1
TimeGap  = 4
FrameGap = 1
length = 3

[State 702, 埃]
type = MakeDust
trigger1 = Time = 20
pos = 0,0
spacing = 1

[State 702, 軸位置]
type = PosSet
trigger1 = 1
y = 0

[State 702, 移動速度]
type = VelSet
trigger1 = 1
y = 0

[State 702, 移動速度]
type = VelSet
trigger1 = Time = 4
x = -6

[State 702, 移動速度]
type = VelSet
trigger1 = Time = 20
x = 0

[State 702, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 4
value = 0,17

[State 702, ステート変更]
type = ChangeState
trigger1 = (Time > 28)
value = 0
ctrl = 1

;回り込み 前転

[Statedef 2111]
type     = S
movetype = I
physics  = N
poweradd = -1000
ctrl     = 0
anim     = 2110
velset   = 0,0

[State 1210, 1]
type = PlaySnd
trigger1 = time = 0
value = 0, 13

[State 7100, Flash]
type = envcolor
trigger1 = TIME = 0
ignorehitpause = 1
persistent = 0
time = 2
value = 250,250,250
under = 1

[State 702, ステート変更]
type = ChangeState
trigger1 = time = 0
value = 2110

[Statedef 2110]
type     = S
movetype = I
physics  = N
poweradd = 0
ctrl     = 0
anim     = 2100
velset   = 0,0

[State 702, 相手の特定の攻撃属性無効];（※１）
type = NotHitBy
trigger1 = 1
value = ,AA,AP
value2= A ,NT,ST
time = 1

[State 702, 押し判定]
type = PlayerPush
trigger1 = (Time = [0,20])
value = 0
IgnoreHitPause = 1
Persistent = 1

[State 702, 残像]
type = AfterImage
trigger1 = Time = 0
Time = 29
PalContrast = 120,120,120
Trans = Add1
TimeGap  = 4
FrameGap = 1
length = 3

[State 702, 埃]
type = MakeDust
trigger1 = Time = 20
pos = 0,0
spacing = 1

[State 702, 軸位置]
type = PosSet
trigger1 = 1
y = 0

[State 702, 移動速度]
type = VelSet
trigger1 = 1
y = 0

[State 702, 移動速度]
type = VelSet
trigger1 = Time = 4
x = 6

[State 702, 移動速度]
type = VelSet
trigger1 = Time = 20
x = 0

[State 702, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 4
value = 0,17

[State 702, ステート変更]
type = ChangeState
trigger1 = (Time > 28)
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;オリジナルコンボ発動
[Statedef 704]
type     = U
movetype = I
physics  = N
poweradd = 0
ctrl     = 0
anim     = ifelse(StateType=A,708,707)
facep2   = 1

[State 704, 速度Ｘ軸]
type = VarSet
triggerall = (StateType = A)
trigger1 = Time = 0
fv = 10
value = (Vel X)
IgnoreHitPause = 1
Persistent = 1

[State 704, 速度Ｙ軸]
type = VarSet
triggerall = (StateType = A)
trigger1 = Time = 0
fv = 11
value = (Vel Y)
IgnoreHitPause = 1
Persistent = 1

[State 704, オリコンの制限時間をセット]
type = VarSet
trigger1 = Time = 0
fv = 12
value = ifelse(Power>2999,0.5,0.25)
IgnoreHitPause = 1
Persistent = 1

;*********************************
[State 704, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2

[State 704, 時間停止]
type = Pause
trigger1 = Time = 0
time = 30
movetime = 30
IgnoreHitPause = 1
Persistent = 1

[State 704, 残像]
type = AfterImage
trigger1 = Time = 0
Time = 999999
PalContrast = 120,0,248
Trans = Add1
TimeGap  = 6
FrameGap = 1
length = 5

;*********************************
[State 704, ヘルパーを出す]
type = Helper
triggerall = NumHelper(2303) = 0
trigger1 = Time = 1
name = "Original-Combo"
stateno = 2303
ID = 2303
pos = ifelse(StateType=A,0,10),ifelse(StateType=A,-70,-50)
keyctrl = 0
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
ownpal = 1
IgnoreHitPause = 1
Persistent = 0

;*********************************
[State 704, 軸位置]
type = PosSet
trigger1 = (StateType != A)
y = 0

[State 704, 移動速度]
type = VelSet
trigger1 = (StateType != A)
x = 0
y = 0

[State 704, 移動速度]
type = VelSet
triggerall = (StateType = A)
trigger1 = (Time = [0,29])
x = 0
y = 0
pausemovetime = 99999999

[State 704, 移動速度]
type = VelSet
triggerall = (StateType = A)
trigger1 = Time = 30
x = (fvar(10)/1.5)
y = ifelse((fvar(11)<0),(fvar(11)/1.2),ifelse((fvar(11)>0),(fvar(11)/3.4),0))
pausemovetime = 99999999

;*********************************
[State 704, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 0,25

;*********************************
[State 704, ステート変更]
type = ChangeState
triggerall = (StateType != A)
trigger1 = (Time > 29)
value = ifelse(StateType=C,11,0)
ctrl = 1

[State 704, ステート変更]
type = ChangeState
triggerall = (StateType = A)
trigger1 = (Time > 29)
value = 51
ctrl = 1

;---------------------------------------------------------------------------
;メイン（ゲージ準備用）
[Statedef 20000]
type     = A
movetype = I
physics  = N
ctrl     = 0
anim     = 20000

[State 20000, クリップボード]
type = DisplayToClipboard
trigger1 = 1
text = "K.F.M.C. - Normal-Mode"

;*********************************** 総合処理
[State 20000, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = Invisible   ;姿を消す（しかし残像は消せない）
flag2= NoAutoTurn
flag3= NoShadow
IgnoreHitPause = 1
Persistent = 1

[State 30000, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2

[State 30000, 食らい上書き]
type = HitOverRide
trigger1 = (Time >= 0)
attr = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT, AA, AT, AP
time = -1
stateno = 9999
IgnoreHitPause = 1

;*********************************** Explod消去
[State 30000, エフェクトを消す]
type = RemoveExplod
trigger1 = 1
ID = 21000
IgnoreHitPause = 1
Persistent = 1

[State 30000, エフェクトを消す]
type = RemoveExplod
trigger1 = 1
ID = 21001
IgnoreHitPause = 1
Persistent = 1

[State 30000, エフェクトを消す]
type = RemoveExplod
trigger1 = 1
ID = 21002
IgnoreHitPause = 1
Persistent = 1

;***********************************『擬似ＡＩプログラム』がＯＮになったら表示
[State 30000, エフェクト]
type = Explod
triggerall = (Root,var(59) != 0)
triggerall = (RoundState = 2)
triggerall = !(Root,NumPartner)
triggerall = (NumExplod(21003) = 0)
trigger1 = 1
anim = 21003
scale = 0.5,0.5
postype = left ;文字なので位置属性はこれで
pos = ifelse((Root,TeamSide=2),295,25),200 ;「TeamSide」は「１」なら『１Ｐ側』、
sprpriority = 6                            ;「２」なら『２Ｐ側』を判断するトリガー
OnTop = 1
supermove = 1
supermovetime = 99999999
pausemovetime = 99999999
bindtime = -1
removetime = -1
ownpal = 1
ID = 21003
IgnoreHitPause = 1
Persistent = 1

[State 30000, エフェクトを消す]
type = RemoveExplod
trigger1 = (RoundState != 2)
trigger2 = (Root,var(59) <= 0)
trigger3 = (PrevStateNo = [30001,30002]) && (Time = 0)
ID = 21003
IgnoreHitPause = 1
Persistent = 1

;*********************************** 自動切り替え
[State 30000, ステート変更];オリジナルコンボゲージへ
type = ChangeState
triggerall = (Root,fvar(13) <= 0)
trigger1 = (Root,fvar(12) > 0)
value = 30001


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; オリコンを発動すれば、常駐ヘルパーがこのステートに切り替わるように設定。
;
; ここでは制限時間を「ゲージ」として視覚的に確認出来る処理をしてる。
; 本当は-2でも出来るんだけど、常時監視ステートだとヒット硬直のせいで
; 途中で表示しなくなる場合もあるから、ヘルパーに任せてる。
;---------------------------------------------------------------------------
;■ここで使っている変数■
;★本体側★
;　Var(35) = オリジナルコンボ・フラグ処理
; FVar(12) = オリジナルコンボ・タイムゲージ伸縮処理用（制限時間でもある）
;---------------------------------------------------------------------------
;オリジナルコンボ・タイムゲージ（ＡＩ表示含む）
[Statedef 30001]
type     = A
movetype = I
physics  = N
ctrl     = 0
anim     = 30000

[State 30001, クリップボード]
type = DisplayToClipboard
trigger1 = 1
text = "Flag=%d, Time-Gauge=%f \n"
params = (Root,var(35)),(Root,fvar(12))

[State 30001, クリップボード（追加専用）]
type = AppendToClipboard
trigger1 = 1
text = "K.F.M.C. - Original-Combo Mode"

;*********************************** 総合処理
[State 30001, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = Invisible
flag2= NoAutoTurn
flag3= NoShadow
IgnoreHitPause = 1
Persistent = 1

[State 30001, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2

[State 30001, 食らい上書き]
type = HitOverRide
trigger1 = (Time >= 0)
attr = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT, AA, AT, AP
time = -1
stateno = 9999
IgnoreHitPause = 1

;*********************************** ゲージ伸縮処理
[State 30001, ゲージ最小限界];ヘルパーで「親の変数」の設定や変更が出来るコントローラ
type = ParentVarSet
trigger1 = (Root,fvar(12) <= 0)
fv = 12
value = 0
IgnoreHitPause = 1
Persistent = 1

[State 30001, ゲージ最大限界]
type = ParentVarSet
trigger1 = (Root,fvar(12) >= 0.5)
fv = 12
value = 0.5
IgnoreHitPause = 1
Persistent = 1

[State 30001, ゲージ処理];ここで「ゲージの伸縮」及び「制限時間の経過」を処理
type = ParentVarAdd
triggerall = (RoundState = 2)
triggerall = (Root,var(35) = 1)
trigger1 = (Time % 2 = 0)
fv = 12
value = -0.003
IgnoreHitPause = 1
Persistent = 1

;*********************************** フラグチェック
[State 30001, ノーマル状態]
type = ParentVarSet
trigger1 = (RoundState != 2)
trigger2 = (Root,var(35) > 2)
v = 35
value = 0
IgnoreHitPause = 1
Persistent = 1

[State 30001, オリコン状態];ゲージ伸縮用の変数が特定の数値以上になったら有効
type = ParentVarSet
trigger1 = (Root,fvar(12) >= 0.25)
v = 35
value = 1
IgnoreHitPause = 1
Persistent = 1

[State 30001, 残像消去フラグ];オリコンの時間が終了したら増やす
type = ParentVarAdd
trigger1 = (Root,var(35) >= 1) && (Root,fvar(12) <= 0)
v = 35
value = 1
IgnoreHitPause = 1
Persistent = 1

;*********************************** ゲージ表示
[State 30001, 枠]
type = Explod
triggerall = (Root,var(35) = 1)
triggerall = !(Root,NumPartner)
triggerall = (RoundState = 2)
triggerall = (NumExplod(21000) = 0)
trigger1 = (Root,fvar(12) > 0)
anim = 21000
scale = 0.5,0.5
postype = left ;文字が付いてるので位置属性はこれで
pos = ifelse((Root,TeamSide=2),280,41),ifelse((Root,var(33)=1),200,185)
sprpriority = 6
OnTop = 1
supermove = 1
supermovetime = 99999999
pausemovetime = 99999999
bindtime = -1
removetime = -1
ownpal = 1
ID = 21000
IgnoreHitPause = 1
Persistent = 1

[State 30001, バー]
type = Explod
triggerall = (Root,var(35) = 1)
triggerall = !(Root,NumPartner)
triggerall = (RoundState = 2)
triggerall = (NumExplod(21001) = 0)
trigger1 = (Root,fvar(12) > 0)
anim = 21001
scale = 0,0.5
postype = back
pos = 76,ifelse((Root,var(33)=1),200,185)
sprpriority = 7
OnTop = 1
supermove = 1
supermovetime = 99999999
pausemovetime = 99999999
bindtime = -1
removetime = -1
ownpal = 1
ID = 21001
IgnoreHitPause = 1
Persistent = 1

;*********************************** ゲージ伸縮表示処理
[State 30001, バー伸縮]
type = ModifyExplod
trigger1 = (Root,var(35) = 1)
scale = 0+(Root,fvar(12)),0.5 ;ここにゲージ伸縮用のFVar(12)が使われている事もわかる
supermovetime = 99999999
pausemovetime = 99999999
sprpriority = 7
ID = 21001

;*********************************** Explod消去
[State 30001, 枠表示消去]
type = RemoveExplod
trigger1 = (Root,fvar(12) <= 0)
trigger2 = (Root,var(35) = 0)
trigger3 = (RoundState != 2)
ID = 21000
IgnoreHitPause = 1
Persistent = 1

[State 30001, バー表示消去]
type = RemoveExplod
trigger1 = (Root,fvar(12) <= 0)
trigger2 = (Root,var(35) = 0)
trigger3 = (RoundState != 2)
ID = 21001
IgnoreHitPause = 1
Persistent = 1

;*********************************** ＡＩ表示
[State 30001, エフェクト]
type = Explod
triggerall = (Root,var(59) != 0)
triggerall = (RoundState >= 1)
triggerall = !(Root,NumPartner)
triggerall = (NumExplod(21003) = 0)
trigger1 = 1
anim = 21003
scale = 0.5,0.5
postype = left
pos = ifelse((Root,TeamSide=2),295,25),200
sprpriority = 6
OnTop = 1
supermove = 1
supermovetime = 99999999
pausemovetime = 99999999
bindtime = -1
removetime = -1
ownpal = 1
ID = 21003
IgnoreHitPause = 1
Persistent = 1

[State 30001, エフェクトを消す]
type = RemoveExplod
trigger1 = (RoundState != 2)
trigger2 = (Root,var(59) <= 0) && numExplod(21003)
trigger3 = (PrevStateNo = 20000) && (Time = 0)
ID = 21003
IgnoreHitPause = 1
Persistent = 1

;*********************************** ここでゲージ準備ステートに戻す
[State 30001, ステート変更]
type = ChangeState
triggerall = (Time > 0)
trigger1 = (Root,var(35) = 0) && (Root,fvar(12) <= 0)
value = 20000

;---------------------------------------------------------------------------
;オリジナルコンボ・発動エフェクト
[Statedef 2303]
type     = A
movetype = I
physics  = N
ctrl     = 0
anim     = 30000;透明

[State 2303, 変数]
type = VarSet
trigger1 = (Time = 0)
trigger2 = (Time = 11)
trigger3 = (Time > 29)
fv = 38
value = 0
IgnoreHitPause = 1
Persistent = 1

[State 2303, 変数]
type = VarAdd
trigger1 = (Time = [1,10])
trigger2 = (Time = [12,29])
fv = 38
value = 0.01
IgnoreHitPause = 1
Persistent = 1

;+++++++++++++++++++++++++++++++++
[State 2303, 変数]
type = VarSet
trigger1 = (Time = 0)
trigger2 = (Time > 29)
fv = 39
value = 0
IgnoreHitPause = 1
Persistent = 1

[State 2303, 変数]
type = VarAdd
trigger1 = (Time = [20,29])
fv = 39
value = 0.01
IgnoreHitPause = 1
Persistent = 1

;*********************************
[State 2303, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
IgnoreHitPause = 1
Persistent = 1

[State 2303, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2

[State 2303, 食らい上書き]
type = HitOverRide
trigger1 = (Time >= 0)
attr = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT, AA, AT, AP
time = -1
stateno = 9999
IgnoreHitPause = 1

[State 2303, 押し判定]
type = PlayerPush
trigger1 = 1
value = 0
IgnoreHitPause = 1
Persistent = 1

[State 2303, 背景色]
type = BGPalFX
trigger1 = 1
Add = -100,-100,-100
Time = 2
IgnoreHitPause = 1
Persistent = 1

;*********************************
[State 2303, エフェクト]
type = Explod
trigger1 = (Time = [1,10])
anim = 4008
postype = p1
pos = 0,0
sprpriority = 7
ownpal = 1
ontop = 1
bindtime = -1
supermovetime = 99999999
pausemovetime = 99999999
IgnoreHitPause = 1
ID = 4008

[State 2303, エフェクト操作]
type = ModifyExplod
trigger1 = (Time = [1,10])
scale = 1-(fvar(38)*10.4),1-(fvar(38)*10.4)
supermovetime = 99999999
pausemovetime = 99999999
ID = 4008

[State 2303, エフェクトを消す]
type = RemoveExplod
trigger1 = (Time > 10)
ID = 4008

;*********************************
[State 2303, エフェクト]
type = Explod
trigger1 = (Time = [11,29])
anim = 4009
postype = p1
pos = 0,0
sprpriority = 7
ownpal = 1
ontop = 1
bindtime = -1
supermovetime = 99999999
pausemovetime = 99999999
IgnoreHitPause = 1
ID = 4009

[State 2303, エフェクト操作]
type = ModifyExplod
trigger1 = (Time = [11,29])
scale = 0.1+(fvar(38)*6.2),0.1+(fvar(38)*6.2)
supermovetime = 99999999
pausemovetime = 99999999
Trans = AddAlpha
Alpha = ceil(256-fvar(39)*4000),256
ID = 4009

[State 2303, エフェクトを消す]
type = RemoveExplod
trigger1 = (Time > 29)
ID = 4009

[State 2303, このヘルパーを消す]
type = DestroySelf
trigger1 = (Time > 29)

;*********************************

;スパコン・エフェクト用（ヘルパー用）
[Statedef 6100]
type     = A
movetype = I
physics  = N
ctrl     = 0
anim     = 30000;透明

[State 2303, 変数]
type = VarSet
trigger1 = (Time = 0)
trigger2 = (Time = 11)
trigger3 = (Time > 29)
fv = 38
value = 0
IgnoreHitPause = 1
Persistent = 1

[State 2303, 変数]
type = VarAdd
trigger1 = (Time = [1,10])
trigger2 = (Time = [12,29])
fv = 38
value = 0.01
IgnoreHitPause = 1
Persistent = 1

;+++++++++++++++++++++++++++++++++
[State 2303, 変数]
type = VarSet
trigger1 = (Time = 0)
trigger2 = (Time > 29)
fv = 39
value = 0
IgnoreHitPause = 1
Persistent = 1

[State 2303, 変数]
type = VarAdd
trigger1 = (Time = [20,29])
fv = 39
value = 0.01
IgnoreHitPause = 1
Persistent = 1

;*********************************
[State 2303, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
IgnoreHitPause = 1
Persistent = 1

[State 2303, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2

[State 2303, 食らい上書き]
type = HitOverRide
trigger1 = (Time >= 0)
attr = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT, AA, AT, AP
time = -1
stateno = 9999
IgnoreHitPause = 1

[State 2303, 押し判定]
type = PlayerPush
trigger1 = 1
value = 0
IgnoreHitPause = 1
Persistent = 1

[State 2303, 背景色]
type = BGPalFX
trigger1 = 1
Add = -100,-100,-100
Time = 2
IgnoreHitPause = 1
Persistent = 1

;*********************************
[State 2303, エフェクト]
type = Explod
trigger1 = (Time = [1,10])
anim = 16002
postype = p1
pos = 0,0
sprpriority = 7
ownpal = 1
ontop = 1
bindtime = -1
supermovetime = 99999999
pausemovetime = 99999999
IgnoreHitPause = 1
ID = 4008

[State 2303, エフェクト操作]
type = ModifyExplod
trigger1 = (Time = [1,10])
scale = 1-(fvar(38)*10.4),1-(fvar(38)*10.4)
supermovetime = 99999999
pausemovetime = 99999999
ID = 4008

[State 2303, エフェクトを消す]
type = RemoveExplod
trigger1 = (Time > 10)
ID = 4008

;*********************************
[State 2303, エフェクト]
type = Explod
trigger1 = (Time = [11,29])
anim = 16003
postype = p1
pos = 0,0
sprpriority = 7
ownpal = 1
ontop = 1
bindtime = -1
supermovetime = 99999999
pausemovetime = 99999999
IgnoreHitPause = 1
ID = 4009

[State 2303, エフェクト操作]
type = ModifyExplod
trigger1 = (Time = [11,29])
scale = 0.1+(fvar(38)*6.2),0.1+(fvar(38)*6.2)
supermovetime = 99999999
pausemovetime = 99999999
Trans = AddAlpha
Alpha = ceil(256-fvar(39)*4000),256
ID = 4009

[State 2303, エフェクトを消す]
type = RemoveExplod
trigger1 = (Time > 29)
ID = 4009

[State 8900, 2ndEndAnim]
type = ChangeState
trigger1 = (Time > 29)
value = 6101
SuperMoveTime = 99999
PauseMoveTime = 99999

;───────────────────────────────────────
[Statedef 6101]
type = A
movetype = I
physics = N
anim = 16000
ctrl = 0
sprpriority = 12

[State 8900, sp]
type = AssertSpecial
trigger1 = 1
flag  = NoShadow
flag2 = NoAutoTurn
IgnoreHitPause = 1
SuperMoveTime = 99999
PauseMoveTime = 99999

[State 8901, pos]
type = PosSet
trigger1 = Time = 0
X = 0;295 * Facing
Y = (239-ScreenPos Y) - 120
SuperMoveTime = 99999
PauseMoveTime = 99999

[State 8901, angle]
type = AngleSet
trigger1 = Time = 0
value = 90
SuperMoveTime = 99999
PauseMoveTime = 99999

[State 8901, 3rdAnim]
type = ChangeState
trigger1 = AnimTime = 0
value = 6102

;───────────────────────────────────────
[Statedef 6102]
type = A
movetype = I
physics = N
anim = 16001
ctrl = 0
sprpriority = 12

[State 8900, sp]
type = AssertSpecial
trigger1 = 1
flag  = NoShadow
flag2 = NoAutoTurn
IgnoreHitPause = 1
SuperMoveTime = 99999
PauseMoveTime = 99999

[State 8902, pos]
type = PosSet
trigger1 = Time = 0
X = Root,Pos X
Y = 0;Root,Pos Y
SuperMoveTime = 99999
PauseMoveTime = 99999

[State 8901, eof]
type = DestroySelf
trigger1 = AnimTime = 0
SuperMoveTime = 99999
PauseMoveTime = 99999

;---------------------------------------------------------------------------
; 常時監視ステート（相手に行動を制御されても関係無く常に実行される）
;---------------------------------------------------------------------------

[Statedef -2]

;Ctrl+Dの白い文字のデバッグモード表示を加える
[State -2, デバッグ表示]
type = null;DisplayToClipboard
trigger1 = 1
text = "Var(5)-Button=%d,Pos X=%d,Y=%d"
params = var(5),floor(Pos X),floor(Pos Y)

;パワー溜めステートで表示されたエフェクトを消す制御をしてます
[State -2, エフェクトを消す]
type = RemoveExplod
triggerall = NumExplod(130) > 0 ;ＩＤナンバー１３０のエフェクトの画面中の数が0よりも上、つまり１枚以上表示されている時
trigger1 = StateNo != 700
trigger2 = MoveType != I
ID = 130

;----------------------------------------------------------------------

;未完成な相手キャラによって、不具合が起きても自己解決するシステム(仮)
[State -2, Y座標自己修復]
type = PosSet
triggerall = RoundState = 2
trigger1 = stateno = [0,12]      ;立ち＆屈み時
trigger1 = floor(Pos Y) = [-2,3] ;立ち位置が僅かにずれていたらすぐ修正
y = 0
[State -2, Y座標自動修正]
type = PosAdd
triggerall = RoundState = 2
triggerall = Life < LifeMax  ;トレーニングでCtrl+Iを使うときに配慮
trigger1 = stateno = [0,30]  ;歩きも含める
trigger1 = floor(Pos Y) < -2 ;立ち位置が大きくずれていたら移動する
y = 2
[State -2, Y座標自動修正]
type = PosAdd
triggerall = RoundState = 2
triggerall = Life < LifeMax
trigger1 = stateno = [0,30]
trigger1 = floor(Pos Y) > 2 ;同じく
y = -2

[State 200,補填] 
type = ChangeAnim
trigger1 = stateno = 51 && anim != [41,43]
trigger1 = !IsHelper
value = 41
ignorehitpause = 1

[State -2, 残像表示時間];攻撃食らったら残像を強制的に消す処理
type = AfterImageTime
trigger1 = (PrevStateNo = [1000,4999]) && (StateNo = [5000,5899]) && (MoveType = H)
trigger2 = (PrevStateNo = [10000,10999]) && (StateNo = [5000,5899]) && (MoveType = H)
trigger3 = (var(35) = 2) && (fvar(12) <= 0)
trigger4 = (RoundState > 3);（※）
time = 0
IgnoreHitPause = 1

[State -2, ヘルパーを出す];ゲージ類
type = Helper
triggerall = (RoundState < 3) && (NumEnemy)
trigger1 = (NumHelper(20000) = 0)
name = "K.F.M.C.'s Sub-Gauge"
stateno = 20000
ID = 20000
pos = 0,100
keyctrl = 0
postype = p1
ownpal = 1
IgnoreHitPause = 1
Persistent = 0

[State -2, パワーゲージ];オリコン中はパワーゲージ常に０
type = PowerSet
triggerall = (var(35) > 0)
trigger1 = (fvar(12) > 0)
value = 0
supermovetime = 99999999
pausemovetime = 99999999
IgnoreHitPause = 1
Persistent = 1

[State -2, 特殊効果];オリコン中はジャグル無視
type = AssertSpecial
triggerall = (var(35) > 0)
trigger1 = (fvar(12) > 0)
flag = NoJuggleCheck ;ジャグルをチェックしない
IgnoreHitPause = 1
Persistent = 1

[State -2, 特殊効果];オリコン中は自分が全ガード不可
type = AssertSpecial
triggerall = (var(35) > 0)
trigger1 = (fvar(12) > 0)
flag = NoStandGuard  ;立ちガードが出来なくなる
flag2= NoCrouchGuard ;しゃがみガードが出来なくなる
flag3= NoAirGuard    ;空中ガードが出来なくなる
IgnoreHitPause = 1
Persistent = 1

[State -2, 攻撃力乗算]
type = AttackMulSet
trigger1 = 1
value = ifelse(var(35)>0,0.5,1)
IgnoreHitPause = 1
Persistent = 1

[State -2, オリコン用]
type = VarSet
trigger1 = (RoundState < 2)
v = 35
value = 0
IgnoreHitPause = 1

[State -2, オリコン用]
type = VarSet
triggerall = (fvar(12) > 0)
trigger1 = (MoveType = H)
fv = 12
value = 0
IgnoreHitPause = 1

[State -2, オリコン用]
type = veladd
triggerall = (fvar(12) > 0)
trigger1 = (MoveType = A) && pos Y = 0 && vel X >= 0 && vel X < 2 && stateno != 1200
x = 1.5-(1.0*statetype = C)
IgnoreHitPause = 1


;※常時監視ステートは常に有効にしたいステートコントローラをどんどん追加していきます。
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;■最後に
;　ＭＵＧＥＮ本体のDataフォルダにはキャラの基本動作（やられなど）を管理している
;「common1.cns（コモン動作プログラムファイル）」というのがあります。
;　defファイルでStCommonの項目で呼び出していますが、
;　もし、あなたのキャラのＣＮＳでcommon1.cnsと同じ番号の基本動作のステートを
;　作った場合は処理が上書きされ、コモンファイルの内容は無効になります。
;
;　common1.cnsのプログラム優先度は最低に属しているので、
;　ステートの作成には少し番号に注意しなければいけません。
;
;---------------------------------------------------------------------------

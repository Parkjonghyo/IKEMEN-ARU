[Command]
name = "AI0"
command = a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a
time = 0
[Command]
name = "AI1"
command = b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b
time = 0
[Command]
name = "AI2"
command = c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c
time = 0
[Command]
name = "AI3"
command = x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x
time = 0
[Command]
name = "AI4"
command = y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y
time = 0
[Command]
name = "AI5"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI6"
command = s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s
time = 0
[Command]
name = "AI7"
command = F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F
time = 0
[Command]
name = "AI8"
command = D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D
time = 0
[Command]
name = "AI9"
command = B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B
time = 0
[Command]
name = "AI10"
command = U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U
time = 0
[Command]
name = "AI11"
command = a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a
time = 0
[Command]
name = "AI12"
command = c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c
time = 0
[Command]
name = "AI13"
command = x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x
time = 0
[Command]
name = "AI14"
command = y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y
time = 0
[Command]
name = "AI15"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI16"
command = s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s
time = 0
[Command]
name = "AI17"
command = a,B,c,x,y,z,s,B,D,F,U,a,b,c,x,y,z,s,s
time = 0
[Command]
name = "AI18"
command = a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a
time = 0
[Command]
name = "AI19"
command = b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b
time = 0
[command]
name = "fwd"
command = F
time = 1
[command]
name = "back"
command = B
time = 1
[command]
name= "up"
command  =U
time = 1
[command]
name = "start"
command = s
time = 1
[command]
name = "down"
command = D
time = 1
[Command]
name = "AI20"
command = c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c
time = 0
[Command]
name = "AI21"
command = x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x
time = 0
[Command]
name = "AI22"
command = y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y
time = 0
[Command]
name = "AI23"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI24"
command = s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s
time = 0
[Command]
name = "AI25"
command = F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F
time = 0
[Command]
name = "AI26"
command = D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D
time = 0
[Command]
name = "AI27"
command = B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B
time = 0
[Command]
name = "AI28"
command = U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U
time = 0
[Command]
name = "AI29"
command = a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a
time = 0
[Command]
name = "AI30"
command = c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c
time = 0
[Command]
name = "AI31"
command = x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x
time = 0
[Command]
name = "AI32"
command = y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y
time = 0
[Command]
name = "AI33"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI34"
command = s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s
time = 0
[Command]
name = "AI35"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI36"
command = z,z,z,z,z,z,a,a,a,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI37"
command = z,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,z,z,z
time = 0
[Command]
name = "AI38"
command = z,z,z,z,z,a,a,a,z,z,z,z,z,a,a,a,z,z,z
time = 0
[Command]
name = "AI39"
command = z,z,z,z,z,a,a,a,z,z,z,z,z,z,a,a,z,z,z
time = 0
[Command]
name = "AI40"
command = z,z,z,z,a,a,a,z,z,z,z,a,z,z,a,a,z,z,z
time = 0
[Command]
name = "AI41"
command = z,z,z,a,z,z,z,z,z,z,z,z,z,a,a,z,z,z,z
time = 0
[Command]
name = "AI42"
command = z,z,z,a,z,z,z,z,z,z,z,z,z,a,a,z,z,z,z
time = 0
[Command]
name = "AI43"
command = z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,a,a,z
time = 0
[Command]
name = "AI44"
command = z,z,a,a,a,a,z,z,z,z,z,z,z,z,z,a,a,a,z
time = 0
[Command]
name = "AI45"
command = z,z,z,z,z,z,a,a,z,z,z,z,z,a,a,a,a,z,z
time = 0
[Command]
name = "AI46"
command = z,z,z,z,z,z,z,z,a,a,a,a,a,a,z,z,z,z,z
time = 0
[Command]
name = "AI47"
command = z,z,z,a,a,a,a,z,z,z,z,z,z,z,z,z,z,z,z
time = 0
[Command]
name = "AI48"
command = z,z,z,z,z,a,a,a,z,z,z,a,a,a,z,z,a,z,a
time = 0
[Command]
name = "AI49"
command = z,z,z,z,a,a,a,z,z,z,z,z,a,a,a,z,z,z,z
time = 0
[Command]
name = "AI50"
command = z,z,z,a,a,z,z,z,z,z,z,z,z,z,a,a,z,z,z
time = 0
[Command]
name = "AI51"
command = z,z,z,a,a,z,z,z,z,a,z,z,z,z,a,a,z,z,z
time = 0

;-| Super Motions |--------------------------------------------------------

[Command]
name = "bunkatu"
command = ~D, D, a+b
time = 15


[Command]
name = "wolf"
command = ~D, DF, F, b+c
time = 15

[Command]
name = "sakura"
command = ~D, DF, F, a+b
time = 15

[Command]
name = "banker"
command = ~D, DB, B, a+b
time = 15

[Command]
name = "raigeki-ex"
command = ~D, DB, B, b+c
time = 15

[Command]
name = "fang"
command = ~D, DB, B, b+c
time = 15

[Command]
name = "kyokusi"
command = ~D, D, b+c
time = 15

;-| Special Motions |------------------------------------------------------

[Command]
name = "srash_a"
command = ~D, DB, B, a
time = 15

[Command]
name = "srash_b"
command = ~D, DB, B, b
time = 15

[Command]
name = "srash_c"
command = ~D, DB, B, c
time = 15

[Command]
name = "stake"
command = a+b
time = 15

[Command]
name = "raigeki_a"
command = ~D, DF, F, a
time = 15

[Command]
name = "raigeki_b"
command = ~D, DF, F, b
time = 15

[Command]
name = "raigeki_c"
command = ~D, DF, F, c
time = 15



[Command]
name = "kemono"
command = ~D, D, b
time = 15


[Command]
name = "huda"
command = ~D, D, a
time = 15


[Command]
name = "field"
command = b+c
time = 15



[Command]
name = "IC"
command = ~D, D, c
time = 15

;-| Double Tap |-----------------------------------------------------------

[Command]
name = "FF"
command = F, F
time = 10

[Command]
name = "BB"
command = B, B
time = 10

[Command]
name = "dd"
command = D,D
time = 10

;-| 2/3 Button Combination |-----------------------------------------------

[Command]
name = "recovery"
command = a+b
time = 1

;-| Dir + Button |---------------------------------------------------------

[Command]
name = "fwd_a"
command = /F,a
time = 1

[Command]
name = "fwd_b"
command = /F,b
time = 1

[Command]
name = "fwd_c"
command = /F,c
time = 1

;-| Single Button |---------------------------------------------------------

[Command]
name = "x"
command = x
time = 1

[Command]
name = "y"
command = y
time = 1

[Command]
name = "z"
command = z
time = 1

[Command]
name = "a"
command = a
time = 1

[Command]
name = "b"
command = b
time = 1

[Command]
name = "c"
command = c
time = 1

[Command]
name = "s"
command = s
time = 1

;-| Hold Dir |--------------------------------------------------------------

[Command]
name = "R_Guard"
command = B
time = 1

[Command]
name = "C_R_Guard"
command = DB
time = 1

[Command]
name = "holdfwd"
command = /$F
time = 1

[Command]
name = "holdback"
command = /$B
time = 1

[Command]
name = "holdupb"
command = /$UB
time = 1

[Command]
name = "holdupf"
command = /$UF
time = 1

[Command]
name = "holdup"
command = /$U
time = 1

[Command]
name = "holddown"
command = /$D
time = 1

[Command]
name = "back"
command = B
time = 1

[Command]
name = "upback"
command = UB
time = 1

[Command]
name = "downback"
command = DB
time = 1

[Command]
name = "up"
command = U
time = 1

[Command]
name = "down"
command = D
time = 1

[Command]
name = "right"
command = F
time = 1

[Command]
name = "left"
command = B
time = 1

;=============================================================

[Statedef -1]
;バスターましろ
[State -1]
type = ChangeState
value = 3000
triggerall = !var(59)
triggerall = command = "wolf"
triggerall = power >= 2000
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = stateno = [200, 260]
trigger2 = movecontact
trigger3 = stateno = [400, 430]
trigger3 = movecontact
trigger4 = stateno = [100, 101]
trigger5 = stateno = 52


;閃爪・桜吹雪
[State -1]
type = ChangeState
value = 4000
triggerall = !var(59)
triggerall = command = "sakura"
triggerall = power >= 1000
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = stateno = [200, 260]
trigger2 = movecontact
trigger3 = stateno = [400, 430]
trigger3 = movecontact
trigger4 = stateno = [100, 101]
trigger5 = stateno = 52


;獣符・ましろナパーム
[State -1]
type = ChangeState
value = 4250
triggerall = !var(59)
triggerall = command = "banker"
triggerall = power >= 1000
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = stateno = [200, 260]
trigger2 = movecontact
trigger3 = stateno = [400, 430]
trigger3 = movecontact
trigger4 = stateno = [100, 101]
trigger5 = stateno = 52
trigger6 = stateno = 107


;さんだーすとーむ
[State -1]
type = ChangeState
value = 4300
triggerall = !var(59)
triggerall = command = "raigeki-ex"
triggerall = NumHelper(20000)!
trigger1 = statetype = S
triggerall = power >= 2000
trigger1 = ctrl
trigger2 = stateno = [200, 260]
trigger2 = movecontact
trigger3 = stateno = [400, 430]
trigger3 = movecontact
trigger4 = stateno = [100, 101]
trigger5 = stateno = 52
trigger6 = stateno = [250, 260]
trigger6 = movecontact



;ウルフ・コンビネーション
[State -1]
type = ChangeState
value = 4500
triggerall = !var(59)
triggerall = power >= 1000
triggerall = var(8) = 1 || var(7) >= 400
triggerall = var(7) >= 0
triggerall = stateno = 3100
triggerall = Time <= 70
trigger1 = command = "fang"


;獣姫の槌
[State -1]
type = ChangeState
value = 4950
triggerall = !var(59)
triggerall = command = "kyokusi"
triggerall = power >= 3000
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = stateno = [200, 260]
trigger2 = movecontact
trigger3 = stateno = [400, 430]
trigger3 = movecontact
trigger4 = stateno = [100, 101]
trigger5 = stateno = 52
trigger6 = stateno = 1002
trigger6 = movecontact
trigger7 = stateno = 1100 && time >= 8
trigger8 = stateno = 1110 && time >= 8
trigger9 = stateno = 1120 && time >= 8
trigger10 = stateno = [1050, 1052]
trigger10 = movecontact
trigger11 = stateno = [1030, 1031]
trigger11 = movecontact
trigger12 = stateno = 1005
trigger12 = movecontact


;揺蕩う姫の記憶
[State -1]
type = ChangeState
value = 4970
triggerall = life <= 0.333*const(data.life)
triggerall = !var(59)
triggerall = command = "bunkatu"
triggerall = power >= 3000
trigger1 = stateno = [160,161]
trigger1 = statetype != A


;閃爪・霞桜
[State -1]
type = ChangeState
value = 1003
triggerall = !var(59)
triggerall = command = "srash_a"
Triggerall= P2BodyDist X = [-20,20]
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = stateno = [200, 229]
trigger2 = movecontact
trigger3 = stateno = [400, 430]
trigger3 = movecontact
trigger4 = stateno = [100, 101]
trigger5 = stateno = 52
trigger6 = stateno = 107
trigger7 = stateno = [250, 260]
trigger7 = movecontact


;閃爪・桜花
[State -1]
type = ChangeState
value = 1000
triggerall = !var(59)
triggerall = command = "srash_a"
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = stateno = [200, 229]
trigger2 = movecontact
trigger3 = stateno = [400, 430]
trigger3 = movecontact
trigger4 = stateno = [100, 101]
trigger5 = stateno = 52
trigger6 = stateno = 107
trigger7 = stateno = [250, 260]
trigger7 = movecontact


;閃爪・舞桜
[State -1]
type = ChangeState
value = 1010
triggerall = !var(59)
triggerall = command = "srash_b"
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = stateno = [200, 229]
trigger2 = movecontact
trigger3 = stateno = [400, 430]
trigger3 = movecontact
trigger4 = stateno = [100, 101]
trigger5 = stateno = 52
trigger6 = stateno = 107
trigger7 = stateno = [250, 260]
trigger7 = movecontact


;閃爪・散桜
[State -1]
type = ChangeState
value = 1020
triggerall = !var(59)
triggerall = command = "srash_c"
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = stateno = [200, 229]
trigger2 = movecontact
trigger3 = stateno = [400, 430]
trigger3 = movecontact
trigger4 = stateno = [100, 101]
trigger5 = stateno = 52
trigger6 = stateno = 107
trigger7 = stateno = [250, 260]
trigger7 = movecontact


;閃爪・枝桜
[State -1]
type = ChangeState
value = 1030
triggerall = !var(59)
triggerall = command = "stake"
triggerall = var(8) = 1 || var(7) >= 200
triggerall = var(7) >= 0
trigger1 = stateno = 101
trigger2 = stateno = 1001
trigger3 = stateno = 1011
trigger4 = stateno = 1004



;鵺と遊ぼう！弱
[State -1]
type = ChangeState
value = 1100
triggerall = !var(59)
triggerall = command = "raigeki_a"
triggerall = NumHelper(20000)!
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = stateno = [200, 229]
trigger2 = movecontact
trigger3 = stateno = [400, 430]
trigger3 = movecontact
trigger4 = stateno = [100, 101]
trigger5 = stateno = 52
trigger6 = stateno = [250, 260]
trigger6 = movecontact





;鵺と遊ぼう！中
[State -1]
type = ChangeState
value = 1110
triggerall = !var(59)
triggerall = command = "raigeki_b"
triggerall = NumHelper(20000)!
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = stateno = [200, 229]
trigger2 = movecontact
trigger3 = stateno = [400, 430]
trigger3 = movecontact
trigger4 = stateno = [100, 101]
trigger5 = stateno = 52
trigger6 = stateno = [250, 260]
trigger6 = movecontact




;大雷撃
[State -1]
type = ChangeState
value = 1120
triggerall = !var(59)
triggerall = command = "raigeki_c"
triggerall = NumHelper(20000)!
triggerall = var(8) = 1 || var(7) >= 200
triggerall = var(7) >= 0
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = stateno = [200, 229]
trigger2 = movecontact
trigger3 = stateno = [400, 430]
trigger3 = movecontact
trigger4 = stateno = [100, 101]
trigger5 = stateno = 52
trigger6 = stateno = [250, 260]
trigger6 = movecontact



;獣の槌
[State -1]
type = ChangeState
value = 1200
triggerall = !var(59)
triggerall = command = "kemono"
triggerall = var(8) = 1 || var(7) >= 200
triggerall = var(7) >= 0
trigger1 = stateno = [200, 260]
trigger1 = movecontact
trigger2 = stateno = [400, 430]
trigger2 = movecontact
trigger3 = stateno = [100, 101]
trigger4 = stateno = 52
trigger5 = stateno = 1002
trigger5 = movecontact
trigger6 = stateno = 1100 && time >= 8
trigger7 = stateno = 1110 && time >= 8
trigger8 = stateno = 1120 && time >= 8
trigger9 = stateno = [1050, 1052]
trigger9 = movecontact
trigger10 = stateno = 1005
trigger10 = movecontact




;獣符・ましろアミュレット
[State -1]
type = ChangeState
value = 1300
triggerall = !var(59)
triggerall = command = "huda"
triggerall = var(8) = 1 || var(7) >= 200
triggerall = var(7) >= 0
triggerall = NumHelper(1400)!
trigger1 = stateno = [200, 260]
trigger1 = movecontact
trigger2 = stateno = [400, 430]
trigger2 = movecontact
trigger3 = stateno = [100, 101]
trigger4 = stateno = 52
trigger5 = stateno = 1002
trigger5 = movecontact
trigger6 = stateno = 1100 && time >= 8
trigger7 = stateno = 1110 && time >= 8
trigger8 = stateno = 1120 && time >= 8
trigger9 = stateno = [1050, 1052]
trigger9 = movecontact
trigger10 = stateno = 1005
trigger10 = movecontact




;獣符・ましろフィールド
[State -1]
type = ChangeState
value = 1500
triggerall = !var(59)
triggerall = command = "field"
triggerall = var(8) = 1 || var(7) >= 400
triggerall = var(7) >= 0
trigger1 = stateno = [120,167]
trigger1 = statetype != A



;インスタントチャージ
[State -1]
type = ChangeState
value = 2000
triggerall = !var(59)
triggerall = command = "IC"
triggerall = var(8) = 1 || var(7) >= 200
triggerall = var(7) >= 0
trigger1 = (stateno = [200,299]) || (stateno = [400,499])
trigger1 = movecontact
trigger2 = (stateno = [600,640])
trigger2 = movecontact
trigger3 = stateno = 1005 && time >= 3
trigger4 = stateno = 1002 && time >= 3
trigger5 = stateno = 1012 && time >= 3
trigger6 = stateno = 1100 && time >= 8
trigger7 = stateno = 1110 && time >= 8
trigger8 = stateno = 1120 && time >= 8
trigger9 = stateno = 3000
trigger9 = movecontact
trigger10 = stateno = 3100 && time >= 44
trigger11 = stateno = 4000 && time >= 42
trigger12 = (stateno = [4100,4120])
trigger12 = movecontact
trigger13 = stateno = 4950 && time >= 62
trigger14 = stateno = 52
trigger15 = stateno = 230 && time >= 20
trigger16 = stateno = 240 && time >= 23
trigger17 = stateno = 102
trigger18 = stateno = 107
trigger19 = (stateno = [4260,4270])
trigger20 = stateno = 1030
trigger20 = movecontact
trigger21 = stateno = 1031 && time >= 42






;ダッシュ
[State -1]
type = ChangeState
value = 100
triggerall = !var(59)
triggerall = command = "FF"
triggerall = statetype = S
trigger1 = ctrl
trigger2 = stateno = 52

;後退ダッシュ
[State -1]
type = ChangeState
value = 105
triggerall = !var(59)
triggerall = command = "BB"
triggerall = statetype !=A
trigger1 = ctrl
trigger2 = stateno = 52
trigger3 = stateno = 101

;空中ダッシュ
[State -1]
type = ChangeState
value = 110
triggerall = !var(59)
triggerall = Var(10) = 0
triggerall = command = "FF"
triggerall = command != "holddown"
triggerall = statetype = A
triggerall = Pos Y < -30
trigger1 = stateno = 600 
trigger1 = movecontact
trigger2 = stateno = 610 
trigger2 = movecontact
trigger3 = stateno = 620 
trigger3 = movecontact
trigger4 = ctrl

;空中バックダッシュ
[State -1]
type = ChangeState
value = 115
triggerall = !var(59)
triggerall = Var(10) = 0
triggerall = command != "holddown"
triggerall = command = "BB"
triggerall = statetype = A
triggerall = Pos Y < -30
trigger1 = stateno = 600 
trigger1 = movecontact
trigger2 = stateno = 610 
trigger2 = movecontact
trigger3 = stateno = 620 
trigger3 = movecontact
trigger4 = ctrl

;ましろハンマーTypeA
[State -1]
type = ChangeState
value = 230
triggerall = !var(59)
triggerall = command = "fwd_a"
triggerall = command != "holddown"
trigger1 = statetype != A
trigger1 = ctrl

;ましろハンマーTypeB
[State -1]
type = ChangeState
value = 240
triggerall = !var(59)
triggerall = command = "fwd_b"
triggerall = command != "holddown"
trigger1 = statetype = S
trigger1 = ctrl

;投げ
[State -1]
type = ChangeState
value = 800
triggerall = !var(59)
triggerall = command = "fwd_c"
triggerall = p2statetype  != A
triggerall = p2statetype != L
triggerall = P2bodyDist X <= 10
triggerall = P2Dist Y = [-40,10]
trigger1 = statetype != A
trigger1 = ctrl

;空中投げ
[State -1]
type = ChangeState
value = 820
triggerall = !var(59)
triggerall = command = "fwd_c"
triggerall = p2statetype  = A
triggerall = P2bodyDist X <= 10
triggerall = p2statetype != L
triggerall = P2Dist Y = [-40,10]
triggerall = pos Y < -30
trigger1 = statetype = A
trigger1 = ctrl


;弱攻撃
[State -1]
type = ChangeState
value = 200
triggerall = !var(59)
triggerall = RoundState = 2
triggerall = command = "a"
triggerall = command != "holddown"
triggerall = stateno != 101
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = stateno = 200
trigger2 = movecontact
trigger3 = stateno = 400
trigger3 = movecontact
trigger4 = stateno = 52

;中攻撃
[State -1]
type = ChangeState
value = 210
triggerall = !var(59)
triggerall = RoundState = 2
triggerall = command = "b"
triggerall = command != "holddown"
triggerall = stateno != 101
triggerall = p2bodydist X < 50
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = stateno = [200,210]
trigger2 = movecontact
trigger3 = stateno = 400
trigger3 = movecontact
trigger4 = stateno = 410
trigger4 = movecontact
trigger5 = stateno = 52

;中攻撃
[State -1]
type = ChangeState
value = 215
triggerall = !var(59)
triggerall = RoundState = 2
triggerall = command = "b"
triggerall = command != "holddown"
triggerall = stateno != 101
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = stateno = [200,210]
trigger2 = movecontact
trigger3 = stateno = 400
trigger3 = movecontact
trigger4 = stateno = 410
trigger4 = movecontact
trigger5 = stateno = 52

;強攻撃
[State -1]
type = ChangeState
value = 220
triggerall = !var(59)
triggerall = RoundState = 2
triggerall = command = "c"
triggerall = command != "holddown"
triggerall = stateno != 101
trigger1 = statetype = S
trigger1 = ctrl
trigger2 = stateno = [200,215]
trigger2 = movecontact
trigger3 = stateno = 400
trigger3 = movecontact
trigger4 = stateno = 410
trigger4 = movecontact
trigger5 = stateno = 52



;弱攻撃（ダッシュ）
[State -1]
type = ChangeState
value = 250
triggerall = !var(59)
triggerall = command = "a"
triggerall = command != "holddown"
trigger1 = stateno = 101

;中攻撃（ダッシュ）
[State -1]
type = ChangeState
value = 260
triggerall = !var(59)
triggerall = command = "b"
triggerall = command != "holddown"
trigger1 = stateno = 101

;閃爪・葉桜
[State -1]
type = ChangeState
value = 270
triggerall = !var(59)
triggerall = command = "c"
triggerall = command != "holddown"
trigger1 = stateno = 101

;しゃがみ弱攻撃
[State -1]
type = ChangeState
value = 400
triggerall = !var(59)
triggerall = RoundState = 2
triggerall = command = "a"
triggerall = command = "holddown"
triggerall = stateno != 101
trigger1 = statetype = C
trigger1 = ctrl
trigger2 = stateno = 200
trigger2 = movecontact
trigger3 = stateno = 400
trigger3 = movecontact
trigger4 = stateno = 52

;しゃがみ弱攻撃（ダッシュ）
[State -1]
type = ChangeState
value = 405
triggerall = !var(59)
triggerall = command = "a"
triggerall = command = "holddown"
trigger1 = stateno = 101

;しゃがみ中攻撃
[State -1]
type = ChangeState
value = 410
triggerall = !var(59)
triggerall = command = "b"
triggerall = command = "holddown"
triggerall = stateno != 101
trigger1 = statetype = C
trigger1 = ctrl
trigger2 = stateno = [200,210]
trigger2 = movecontact
trigger3 = stateno = 400
trigger3 = movecontact
trigger4 = stateno = 210
trigger4 = movecontact


;しゃがみ中攻撃（ダッシュ）
[State -1]
type = ChangeState
value = 415
triggerall = !var(59)
triggerall = command = "b"
triggerall = command = "holddown"
trigger1 = stateno = 101

;しゃがみ強攻撃
[State -1]
type = ChangeState
value = 420
triggerall = !var(59)
triggerall = command = "c"
triggerall = command = "holddown"
triggerall = stateno != 101
trigger1 = statetype = C
trigger1 = ctrl
trigger2 = (stateno = [200, 221])
trigger2 = movecontact
trigger3 = stateno = 400
trigger3 = movecontact
trigger4 = stateno = 410
trigger4 = movecontact

;空中弱攻撃
[State -1]
type = ChangeState
value = 430
triggerall = !var(59)
triggerall = command = "c"
triggerall = command = "holddown"
trigger1 = stateno = 101

;空中弱攻撃
[State -1]
type = ChangeState
value = 600
triggerall = !var(59)
triggerall = command = "a"
trigger1 = statetype = A
trigger1 = ctrl
trigger2 = stateno = 600 
trigger2 = movecontact
trigger3 = stateno = 110
trigger3 = (command != "holdfwd"&&Time >= 15)|| (command = "holdfwd"&& time = 35)

;空中中攻撃
[State -1]
type = ChangeState
value = 610
triggerall = !var(59)
triggerall = command = "b"
trigger1 = statetype = A
trigger1 = ctrl
trigger2 = stateno = 600 
trigger2 = movecontact
trigger3 = stateno = 110
trigger3 = (command != "holdfwd"&&Time >= 15)|| (command = "holdfwd"&& time = 35)

;空中強攻撃
[State -1]
type = ChangeState
value = 620
triggerall = !var(59)
triggerall = command = "c"
trigger1 = statetype = A
trigger1 = ctrl
trigger2 = stateno = 600 
trigger2 = movecontact
trigger3 = stateno = 610 
trigger3 = movecontact
trigger4 = stateno = 110
trigger4 = (command != "holdfwd"&&Time >= 15)|| (command = "holdfwd"&& time = 35)

;ジャンプ
[State -1]
type = ChangeState
value = 40
triggerall = !var(59)
triggerall = statetype != A
triggerall = command = "holdup"
trigger1 = stateno = 200
trigger1 = movecontact
trigger2 = stateno = 210
trigger2 = movecontact
trigger3 = stateno = 400
trigger3 = movecontact
trigger4 = stateno = 410
trigger4 = movehit


;空中ジャンプ
[State -1]
type = ChangeState
value = 45
triggerall = !var(59)
triggerall = statetype = A
triggerall = command = "holdup"
triggerall = var(1) = 0
triggerall = var(2) = 0
triggerall = Var(10) = 0
trigger1 = stateno = 50
trigger2 = stateno = 51
trigger3 = stateno = 102
trigger4 = stateno = 107
trigger5 = stateno = 111
trigger6 = stateno = 116
trigger7 = stateno = 600
trigger7 = movecontact
trigger8 = stateno = 610
trigger8 = movecontact
trigger9 = stateno = 620
trigger9 = movecontact



;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
[State -3, AI起動]
type = VarSet
triggerall =!ishelper
triggerall = stateno!=0&&RoundState = 2||ctrl&&roundstate!=3
trigger1 = Command = "AI0" || Command = "AI1" || Command = "AI2" || Command = "AI3"
trigger2 = Command = "AI4" || Command = "AI5" || Command = "AI6" || Command = "AI7"
trigger3 = Command = "AI8" || Command = "AI9" || Command = "AI10"|| Command = "AI11"
trigger4 = Command = "AI12"|| Command = "AI13"|| Command = "AI14"|| Command = "AI15"
trigger5 = Command = "AI16"|| Command = "AI17"|| Command = "AI18"|| Command = "AI19"
trigger6 = Command = "AI20"|| Command = "AI21"|| Command = "AI22"|| Command = "AI23"
trigger7 = Command = "AI24"|| Command = "AI25"|| Command = "AI26"|| Command = "AI27"
trigger8 = Command = "AI28"|| Command = "AI29"|| Command = "AI30"|| Command = "AI31"
trigger9 = Command = "AI32"|| Command = "AI33"|| Command = "AI34"|| Command = "AI35"
trigger10= Command = "AI36"|| Command = "AI37"|| Command = "AI38"|| Command = "AI39"
trigger11= Command = "AI40"|| Command = "AI41"|| Command = "AI42"|| Command = "AI43"
trigger12= Command = "AI44"|| Command = "AI45"|| Command = "AI46"|| Command = "AI47"
trigger13= Command = "AI48"|| Command = "AI49"|| Command = "AI50"|| Command = "AI51"
trigger14= var(59)
trigger15= numhelper(35)
trigger15= helper(35),var(59)>=1
var(59)  = 1
[State 100000]
type=varset
triggerall=var(59)
trigger1 = stateno !=[120,155]
trigger1 = roundstate!=2
var(59)=-1

[State -3,常駐ヘルパー]
type = helper
trigger1 = roundstate = 2
trigger1 = !NumHelper(35)
helpertype=normal
name="hourai"
stateno=35
ID=35
pos=0,0
keyctrl=1
pausemovetime=99999999
supermovetime=99999999
persistent = 0
[State -3]
type = helper
trigger1=!NumHelper(36)
trigger1=(inguarddist=0)*(enemynear,movetype=I)*(enemynear,stateno=[40,119])
helpertype=normal
name="danmaku"
stateno=36
ID=36
pos=0,0
keyctrl=1
pausemovetime=99999999
supermovetime=99999999
persistent = 0


;---------------------------------------------------------------------------


;ガード
[State 100000]
type=varset
triggerall=!ishelper
triggerall=var(59)=1
Triggerall=NumHelper(35)
trigger1=inguarddist
trigger2=p2bodydist X=[-80,60]
trigger2=p2movetype=A
trigger2=p2stateno>=200
trigger2=p2statetype=A
trigger3=p2stateno=helper(35),var(45)||p2stateno=helper(35),var(46)
trigger3=p2stateno=[200,4999]
trigger4=Helper(35),var(49)&&Helper(35),var(56)>=Helper(35),var(49)
trigger5=Helper(35),var(50)
trigger6=Helper(35),var(51)
var(59)=2
ignorehitpause = 1
[State -3,crouch]
type = VarSet
triggerall=!ishelper
triggerall = var(59) = [2,4]
triggerall = statetype!=A
trigger1 = p2statetype=C
trigger2 = p2statetype=S
trigger2 = enemynear,time < 15
var(59) = 4
ignorehitpause = 1
[State -3,stand]
type = VarSet
triggerall=!ishelper
triggerall = var(59)
triggerall = var(59) = [2,4]
triggerall = statetype!=A
trigger1 = p2statetype =A
trigger2 = p2statetype=S
trigger2 = stateno=[120,155]
trigger2 = enemynear,time >= 15;発生の遅い攻撃に対して切り替える
trigger2 = enemynear,moveguarded=0
trigger2 = enemynear,movetype=A
var(59) = 3
ignorehitpause = 1


[State 100000]
type=varset
triggerall=!ishelper
triggerall=var(59)=[3,4]
Triggerall = NumHelper(35)
triggerall = p2stateno!=0
trigger1 = p2stateno=Helper(35),var(41)
trigger2 = p2stateno=Helper(35),var(42)
trigger3 = p2stateno=Helper(35),var(43)
trigger4 = p2stateno=Helper(35),var(44)
var(59)=ifelse(var(40)=3,4,3)


[State -3,COUNTER]
type = VarSet
triggerall=!ishelper
triggerall = var(59)=[2,4]
Triggerall = NumHelper(35)
triggerall = statetype!=A
triggerall=helper(35),var(50)=0
triggerall=helper(35),var(51)=0
trigger1 = EnemyNear,HitDefAttr = SCA, NT, ST, HT
trigger2 = p2stateno=Helper(35),var(47)||p2stateno=Helper(35),var(48)
var(59) = 9
ignorehitpause = 1


;p2nameでの対応
[State -3,crouch]
type = VarSet
triggerall=!ishelper
triggerall = var(59)=[2,4]
trigger1=enemynear,authorname = "mikage_th105"&&p2name="Komachi Onoduka"
trigger1=(p2stateno = [220,221])||p2stateno =701||p2stateno=1100
trigger2=enemynear,authorname = "mikage_th105"&&p2name="Remilia Scarlet"
trigger2=p2stateno=204||p2stateno=401
trigger3=enemynear,authorname = "mikage_th105"&&p2name="Youmu Konpaku"
trigger3=p2stateno=202||p2stateno=702||(p2stateno=[860,861])
trigger4=enemynear,authorname = "mikage_th105"&&p2name="Aya Syameimaru"
trigger4=(p2stateno=[401,403])
trigger5=enemynear,authorname = "mikage_th105"&&p2name="Meiling Hong"
trigger5=p2stateno=701
trigger6=enemynear,authorname = "mikage_th105"&&p2name="Alice Margatroid"
trigger6=p2stateno=702
trigger7=p2name ="Mashiro Mito"
trigger7=p2stateno = 240
trigger8=enemynear,authorname = "mikage_th105"&&p2name="Reisen Udongein Inaba"
trigger8=p2stateno=701||p2stateno=402
trigger9 = p2name = "Rugal.B"
trigger9 = p2stateno = 230||p2stateno = 3100&&time >= 60
trigger10=p2name = "ROBO-SOL" 
trigger10=p2stateno=1250
var(59) = 4
ignorehitpause = 1

[State -3,stand]
type = VarSet
triggerall=!ishelper
triggerall = var(59)=[2,4]
trigger1=enemynear,authorname = "mikage_th105"&&p2name="Komachi Onoduka"
trigger1= (p2stateno =[401,402])||(p2stateno = [201,204])||p2stateno=1101||p2stateno=1400||p2stateno=1450||p2stateno=700||p2stateno=702
trigger2=enemynear,authorname = "mikage_th105"&&p2name="Remilia Scarlet"
trigger2=(p2stateno=[201,203])||(p2stateno=[220,221])
trigger3=enemynear,authorname = "mikage_th105"&&p2name="Youmu Konpaku"
trigger3=p2stateno=201||(p2stateno=[203,204])||(p2stateno=[220,221])||(p2stateno=[700,701])||p2stateno=703||p2stateno=1150
trigger4=enemynear,authorname = "mikage_th105"&&p2name="Aya Syameimaru"
trigger4=(p2stateno=[201,203])||(p2stateno=[707,708])||(p2stateno=[700,701])
trigger5=enemynear,authorname = "mikage_th105"&&p2name="Meiling Hong"
trigger5=(p2stateno=[201,205])||(p2stateno=[220,221])||p2stateno=700||(p2stateno=[810,811])||p2stateno=1200||p2stateno=1350
trigger6=enemynear,authorname = "mikage_th105"&&p2name="Alice Margatroid"
trigger6=(p2stateno=[201,206])||p2stateno=401||p2stateno=250||(p2stateno=[700,701])
trigger7 = p2name ="Mashiro Mito"
trigger7 = p2stateno = 230
trigger8=enemynear,authorname = "mikage_th105"&&p2name="Reisen Udongein Inaba"
trigger8=(p2stateno=[201,204])||(p2stateno=[220,221])||p2stateno=700
trigger9 = p2name = "Rugal.B"
trigger9 = p2stateno = 2100||p2stateno = 3100&&time < 60
var(59) = 3
ignorehitpause = 1
[State -3,stand]
type = VarSet
triggerall=!ishelper
triggerall = var(59)=[2,4]
trigger1 = p2name ="Hikaru Shidou"
trigger1 = p2stateno = 1102||p2stateno=1112
trigger2 = p2Name = "Kotiya_Sanae"
trigger2 = p2stateno=1155||p2stateno=410||p2stateno=[210,211]
trigger3=enemynear,authorname = "mikage_th105"&&p2name="Marisa Kirisame"
trigger3=(p2stateno=[201,204])||(p2stateno=[220,221])
trigger4 = p2name = "Rock"
trigger4 = p2stateno = 320
trigger5 = p2name = "KUSANAGI"
trigger5 = p2stateno = [310,315]
trigger6 = p2name="Syuren_Kano" 
trigger6 = p2stateno=400
trigger7 = p2name = "Shen"
trigger7 = p2stateno = 1100||p2stateno = 310
trigger8 = p2name = "Yagami-AKOF"
trigger8 = p2stateno = 1410||stateno=1460||p2stateno = 310
trigger9 = p2name = "MAIN"
trigger9 = p2stateno=215||p2stateno=[1000,1005]
trigger10=p2name="Byakuren"
trigger10=(p2stateno=[210,211])||p2stateno=202
var(59) = 3
ignorehitpause = 1


;ガードしないフラグ（6以降はあくまでおまけのつもり）
;5 設置等で固まる不具合の対処枠
;6 バクステで対処可能
;7 バクステで対処できない
;8 ガード硬直中や終わり1Fを投げる問題児対策（ガーキャンぐらいしか無理だが）
[State -3,COUNTER]
type = VarSet
triggerall=!ishelper
triggerall = var(50)=[2,4]
trigger1 = EnemyNear,HitDefAttr = SCA, NT, ST, HT
trigger2 = p2name = "cvsmika" &&p2stateno = 1200
trigger3 = p2name="Yagami-AKOF"
trigger3 = p2stateno=3000||(p2stateno=[2100,2150])
var(59) = 6
ignorehitpause = 1


[State -3,COUNTER]
type = VarSet
triggerall=!ishelper
triggerall = var(59)=[2,4]
trigger1 = p2name = "cvsg_rugal"&&p2stateno = 1700
trigger2 = p2Name = "Misaki Kawana"
trigger2 = p2stateno = 6200 ||p2stateno = 6210 ||p2stateno = 6220
trugger3 = p2name = "saya"&&p2stateno = 2200
trigger4=p2name="RIMLE"
trigger4=p2stateno=7002
var(59) = 7+((stateno=[120,155])&&!ctrl)
ignorehitpause = 1

;ガード解除
[State 100000]
type=varset
triggerall=!ishelper
triggerall=numhelper(35)
triggerall=var(59)=[2,4]
triggerall=helper(35),var(50)=0
triggerall=helper(35),var(51)=0
triggerall=helper(35),var(49)<=0||helper(35),var(49)&&(helper(35),var(56)<helper(35),var(49))
trigger1=!inguarddist
trigger1=p2dist X>0
trigger1=p2statetype!=A
trigger2=p2movetype!=A&&p2dist X !=[-100,60]
trigger2=p2statetype=A
var(59)=1
ignorehitpause = 1

;解除阻止
[State 100000]
type=varset
triggerall=!ishelper
triggerall=var(59)
trigger1=enemynear,authorname = "mikage_th105"&&p2name="Meiling Hong"
trigger1=p2stateno=701
trigger2=p2name="RIMLE" 
trigger2=p2stateno=60010||p2stateno=7000
trigger3 = p2name = "Kyle Dunamis"
trigger3 = p2stateno=70010||p2stateno=[7000,7002]
trigger4 = p2name = "CLESS ALVEIN"
trigger4 = enemynear,numhelper(8028)
trigger5=enemynear,authorname = "mikage_th"&&p2name="Suwako Moriya"
trigger5=p2stateno=630
trigger6=p2name="Nanaly Fletch"
trigger6=p2stateno=211
var(59)=4
ignorehitpause = 1
;解除阻止
[State 100000]
type=varset
triggerall=!ishelper
triggerall=var(59)
trigger1 = p2name="Syuren_Kano" 
trigger1 = enemynear,numhelper(8013)
trigger2 = enemynear,authorname = "mikage_th105"&&p2name="Komachi Onoduka"
trigger2 = p2stateno=204||p2stateno=401
trigger2 = p2bodydist X < 170
trigger3=enemynear,authorname = "mikage_th"&&p2name="Suwako Moriya"
trigger3=p2stateno=210||p2stateno=420||p2stateno=660||p2stateno=727
var(59)=3
ignorehitpause = 1

;強制解除
[State 100000]
type=varset
triggerall=!ishelper
triggerall=var(59)
trigger1=enemynear,authorname="Warusaki3"
trigger1=p2stateno=850&&!inguarddist
trigger2=enemynear,authorname = "mikage_th105"
trigger2=(p2stateno=[40,119])&&!inguarddist
trigger3=p2name="Collet Brunel" 
trigger3= p2stateno=2000||p2stateno=2100||p2stateno=2200||stateno=2400
var(59)=1
ignorehitpause = 1
;---------------------------------------------------------------------------

[state -3]
type = varset
trigger1 = var(59)&&var(57)<1
trigger1 = random>life&&life<p2life+200||life<=650||roundno>1||roundstate=1
var(57) = 1
[state -3]
type = varset
trigger1 = var(59)&&var(57)<=1
trigger1 = life<=700&&p2life>life&&random>life+300||life<=333
var(57) = 2


;投げ
[State -1]
type = ChangeState
value = 800
triggerall = var(59)&&var(57)=0
triggerall = random<=20
triggerall = p2statetype  != A
triggerall = p2statetype != L
triggerall = P2bodyDist X <= 10
triggerall = P2Dist Y = [-40,10]
trigger1 = statetype != A
trigger1 = ctrl

;空中投げ
[State -1]
type = ChangeState
value = 820
triggerall = var(59)&&var(57)=0
triggerall = p2statetype  = A
triggerall = P2bodyDist X <= 10
triggerall = p2statetype != L
triggerall = P2Dist Y = [-40,10]
triggerall = pos Y < -30
trigger1 = statetype = A
trigger1 = ctrl&&random<=50


;ましろハンマーTypeA
[State -1]
type = ChangeState
value = 230
triggerall = var(59)&&var(57)=0
triggerall = p2bodydist  X< 60
trigger1 = p2stateno=[120,155]
trigger1 = random<=20
triggerall = !inguarddist
trigger1 = p2statetype!=A
trigger2 = p2stateno=5120
trigger2 = enemynear,animtime = [-18,-15]
trigger2 = random < 100+150*(var(8) = 1 || var(7) >= 200||NumHelper(1400))
triggerall = statetype != A
triggerall = ctrl
trigger3 = !inguarddist&&random<=3



;バスターましろ
[State -1]
type = ChangeState
value = 3000
triggerall = var(59)&&var(57)=0
triggerall = var(8) = 1 || var(7) >= 400||power>=2000&&(life<=100||p2life<=200)
triggerall = power >= 3000||power>=2000&&(life<=100||p2life<=200)
trigger1 = statetype = S
trigger1 = (stateno=230||stateno=221||stateno=430||stateno=420)&&movehit=1&&p2statetype!=A&&p2movetype=H
;獣符・ましろナパーム
[State -1]
type = ChangeState
value = 4250
triggerall = var(59)&&var(57)=0
triggerall = power >= 3000||power>=1000&&(life<=100||p2life<=200)
trigger1 = statetype = S
trigger1 = (stateno=230||stateno=221)&&movehit=1&&p2statetype!=A&&p2movetype=H
;ウルフ・コンビネーション
[State -1]
type = ChangeState
value = 4500
triggerall = var(59)&&var(57)=0
triggerall = power >= 1000
triggerall = var(8) = 1 || var(7) >= 400
triggerall = var(7) >= 0
triggerall = stateno = 3100
trigger1 = Time = 60



;揺蕩う姫の記憶
[State -1]
type = ChangeState
value = 4970
triggerall = life <= 0.333*const(data.life)
triggerall = var(59)&&var(57)=0
triggerall = power >= 3000
trigger1 = stateno = [160,161]
trigger1 = statetype != A




[State -1]
type = varset
triggerall = roundstate = 2
trigger1 = p2movetype!=H&&var(57)=0
var(58)=0
[State -1]
type = varset
triggerall = roundstate = 2
trigger1 = stateno=1100
trigger1 = p2movetype=H&&var(57)=0
var(58)=1
[State -1]
type = varset
triggerall = roundstate = 2
trigger1 = stateno=220&&var(58)=1
trigger1 = p2movetype=H&&var(57)=0
var(58)=2
[State -1]
type = varset
triggerall = roundstate = 2
trigger1 = stateno=260&&var(58)=2
trigger1 = p2movetype=H&&var(57)=0
var(58)=3


;------------------------------------------------------------------------------

[State -1]
type = ChangeState
value = ifelse(p2statetype=A,270,430)
triggerall = var(59)&&var(57)=0
triggerall = !var(58)
trigger1 = stateno = 101
trigger1 = p2bodydist X <=95+(p2statetype=A)*30
trigger1 = p2statetype!=L&&var(58)!=[2,3]
trigger1 = p2statetype!=A||p2statetype=A&&random<=90
;中攻撃（ダッシュ）
[State -1]
type = ChangeState
value = 260
triggerall = var(59)&&var(57)=0
triggerall = var(58)&&p2movetype=H
trigger1 = stateno = 101

;ダッシュ
[State -1]
type = ChangeState
value = 100
triggerall = var(59)&&var(57)=0
triggerall = statetype = S
trigger1 = ctrl&&var(58)=2

[State -1]
type = ChangeState
value = 400
triggerall = var(59)&&var(57)=0
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X < 32
trigger1 = prevstateno!=5120
trigger1 = random < 100||p2movetype=A&&enemynear,animtime=-5&&random<=400||p2stateno>=5000&&p2movetype=H&&var(58)!=1|| prevstateno = [160,161]

;強攻撃
[State -1]
type = ChangeState
value = 220
triggerall = roundstate = 2
triggerall = var(59)&&var(57)=0
triggerall = RoundState = 2
triggerall = stateno != 101
triggerall = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
triggerall = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X = [25,55]
trigger1 = random<=75||enemynear,animtime <= -9&&p2movetype=A&&random < 400
trigger2 = ctrl&&var(58)
trigger2 = p2movetype=H&&p2stateno>=5000&&p2bodydist X <=100
trigger3 = stateno=400&&movehit=1

;強攻撃
[State -1]
type = ChangeState
value = 420
triggerall = roundstate = 2
triggerall = var(59)&&var(57)=0
triggerall = RoundState = 2
triggerall = stateno != 101
triggerall = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X = [35,75]
trigger1 = random<=50


;鵺と遊ぼう！弱
[State -1]
type = ChangeState
value = 1100
triggerall = var(59)&&var(57)=0
triggerall = NumHelper(20000)!
triggerall = var(8) = 1 || var(7) >= 200
trigger1 = statetype = S&&p2stateno>=5000
trigger1 = (stateno=221)&&movehit=1&&p2statetype!=A&&p2movetype=H



;インスタントチャージ
[State -1]
type = ChangeState
value = 2000
triggerall = var(59)&&var(57)=0
triggerall = var(8) = 1 || var(7) >= 200
triggerall = var(7) >= 0
trigger1 = stateno = 1100 && time = 8&&p2movetype=H&&p2statetype!=L&&p2statetype!=A



[State -1]
type = ChangeState
value = 420
triggerall = roundstate = 2
triggerall = var(59)&&var(57)=0
triggerall = stateno != 101
trigger1 = stateno=221
trigger1 = movehit&&var(58)!=[1,2]

[State -1]
type = ChangeState
value = ifelse(p2bodydist X <=20,1003,1000)
triggerall = roundstate = 2
triggerall = var(59)&&var(57)=0
triggerall = stateno != 101
trigger1 = stateno = 420||stateno=430||stateno=221&&var(58)!=[1,2]
trigger1 = movehit



;大雷撃
[State -1]
type = ChangeState
value = 1120
triggerall = var(59)&&var(57)=0
triggerall = NumHelper(20000)!
triggerall = var(8) = 1&&life>=500
triggerall = var(7) >= 0
trigger1 = statetype = S
trigger1 = ctrl
trigger1 = random<=10



[State -1]
type = ChangeState
value = 100
triggerall = var(59)&&roundstate = 2&&var(57)=0
triggerall = random<=35&&p2bodydist X <=150&&p2statetype!=A&&p2statetype!=L
triggerall = statetype !=A
trigger1 = ctrl



;閃爪・舞桜
[State -1]
type = ChangeState
value = ifelse(random<=450,1010,1020)
triggerall = var(59)&&var(57)=0
triggerall = statetype != A
trigger1 = ctrl
trigger1 = p2stateno=5120&&enemynear,animtime=[-20,-10]
trigger1 = random<=50&&p2bodydist X <= 130
trigger2 = ctrl
trigger2 = p2bodydist X = [40,145]
trigger2 = p2statetype!=A&&p2statetype!=L
trigger2 = random<=10
trigger3 = stateno=420&&moveguarded=1&&random<=800
trigger4 = stateno=430&&moveguarded=1&&random<=350

;閃爪・桜花
[State -1]
type = ChangeState
value = 1000
triggerall = var(59)&&var(57)=0
trigger1 = random<=10&&p2bodydist X >=100
trigger1 = statetype = S
trigger1 = ctrl
trigger1 = p2statetype!=A&&p2statetype!=L
trigger2 = stateno=420&&moveguarded=1&&random<=800



;後退ダッシュ
[State -1]
type = ChangeState
value = 105
triggerall = var(59)&&var(57)=0
triggerall = random<=30&&p2bodydist X <=70&&backedgedist >40
triggerall = statetype !=A
trigger1 = ctrl&&stateno!=[160,170]

[State -1]
type = ChangeState
value = 220
triggerall = var(59)&&var(57)=0
triggerall = RoundState = 2
triggerall = stateno != 101
triggerall = p2dist X =[-80,80]
trigger1 = statetype != A
trigger1 = ctrl || stateno= 52||stateno=15&&NumHelper(1402) = 0&&NumHelper(1400)!
Trigger1 =(p2bodydist Y+(enemyNear,vel Y* 9 +enemyNear,gethitvar(yaccel)* 45)*(P2StateType=A&&EnemyNear,Vel Y!=0)) = [-15,5]
trigger1 = p2dist X > 0
trigger1 = p2statetype=A
trigger1 = p2stateno!=[120,155]
trigger1 = p2movetype=H


[State -1]
type = ChangeState
value = 120
triggerall = var(59)&&var(57)=0
triggerall = inguarddist
trigger1 = random<=100 || life <= 0.333*const(data.life)
triggerall = statetype !=A
trigger1 = ctrl

[State -1]
type = ChangeState
value = 0
triggerall = var(59)&&var(57)=0
triggerall = stateno=40
trigger1 = statetype !=A
value = 1

;------------------------------------------------------------------------------
[State -1,]
type = assertspecial
trigger1 = var(59)
flag = nowalk
[State -1,]
type = assertspecial
trigger1 = var(59)
flag = nostandguard
flag2 = nocrouchguard





;獣の槌
[State -1]
type = ChangeState
value = 1200
triggerall = var(59)
triggerall = var(57)=2&&p2stateno>=200
triggerall = p2movetype=A&&(enemynear,animtime<-10&&p2statetype!=A||p2statetype=A&&p2bodydist Y > -100)&&p2bodydist X <=100
triggerall = var(8) = 1 || var(7) >= 200&&random>life&&power<3000
triggerall = var(7) >= 0
triggerall = life<333||p2life<=300||power<2500
trigger1 = stateno = [200, 260]
trigger1 = movecontact
trigger2 = stateno = [400, 430]
trigger2 = movecontact
trigger3 = stateno = [100, 101]
trigger4 = stateno = 52
trigger5 = stateno = 1002
trigger5 = movecontact
trigger6 = stateno = 1100 && time >= 8
trigger7 = stateno = 1110 && time >= 8
trigger8 = stateno = 1120 && time >= 8
trigger9 = stateno = [1050, 1052]
trigger9 = movecontact
trigger10 = stateno = 1005
trigger10 = movecontact

;インスタントチャージ
[State -1]
type = ChangeState
value = 2000
triggerall = var(59)
triggerall = var(8) = 1 || var(7) >= 200
triggerall = var(7) >= 0&&p2movetype=A&&movecontact=0
trigger1 = stateno = 230 && time >= 20
trigger2 = stateno = 240 && time >= 23


;揺蕩う姫の記憶
[State -1]
type = ChangeState
value = 4970
triggerall = var(59)
triggerall = power >= 3000
triggerall = life <= 0.333*const(data.life)
trigger1 = stateno = [160,161]
trigger1 = statetype != A
trigger1 = p2bodydist X <= 200

;獣符・ましろフィールド
[State -1]
type = ChangeState
value = 1500
triggerall = var(59)
triggerall = var(8) = 1 || var(7) >= 400
triggerall = var(7) >= 0
trigger1 = (stateno = [150,155])
trigger1 = statetype != A
trigger1 = time>=2
trigger1 = p2bodydist X = [-100,100]
trigger1 = p2bodydist Y > -70
trigger1 = power < 3000&&(life<=333||var(8) = 1)|| life < 80


;獣姫の槌
[State -1]
type = ChangeState
value = 4950
triggerall = var(59)
triggerall = power >= 3000
triggerall = statetype != A
triggerall = ctrl||stateno=52
triggerall = (p2bodydist X-(enemynear,vel X* 19)) = [-55, 170]
Trigger1 =p2statetype!=A
trigger1 = p2movetype=A&&enemynear,animtime <= -19
trigger1 = random < 300&&var(57)&&life<p2life|| p2stateno >= 3000
trigger1 = p2stateno >= 200
trigger2 = p2statetype=A&&(p2bodydist Y+(enemyNear,vel Y* 19 +enemyNear,gethitvar(yaccel)* 190)*(P2StateType=A&&EnemyNear,Vel Y!=0))=[-95, -5]
trigger2 = random > life&&life<p2life ||var(57)&&life<p2life&&random<=250 || var(57)=2&&random<=150
trigger2 = p2life<=300||p2movetype!=H



;閃爪・枝桜
[State -1]
type = ChangeState
value = 1030
triggerall = var(59)
triggerall = var(8) = 1 || var(7) >= 200&&(power>=3000||power<2000)
triggerall = var(7) >= 0
triggerall = p2movetype=A
triggerall = enemynear,animtime <=-8&&p2dist X > 0 || p2statetype=A
triggerall = p2bodydist X < 60
trigger1 = stateno = 101
trigger2 = stateno = 1001
triggerall = random<100&&power<3000||power>=3000&&(p2life<=300&&life<=500)&&random<=200
trigger3 = stateno = 1011

[State -1]
type = ChangeState
value = 1000
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl
trigger1 = p2statetype!=L
trigger1  =p2bodydist X >=80
trigger1 = prevstateno!=5120
trigger1 = (prevstateno=[160,161])||stateno=[160,161]
Trigger1 =p2bodydist Y > -70


[State -1]
type = ChangeState
value = 200
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X < 20
trigger1 = enemynear,animtime = -7&&p2movetype=A
trigger1 = prevstateno!=5120
trigger1 = random < 600||prevstateno=[160,161]
[State -1]
type = ChangeState
value = 400
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X < 35
trigger1 = enemynear,animtime = -5&&p2movetype=A
trigger1 = prevstateno!=5120


[State -1]
type = ChangeState
value = ifelse(p2bodydist X < 20,200,400)
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X < 35
trigger1 = prevstateno = [160,161]
trigger1 = prevstateno!=5120
trigger1 = random < 700


;強攻撃
[State -1]
type = ChangeState
value = 220
triggerall = roundstate = 2
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
triggerall = statetype != A
triggerall = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X = [25,55]
trigger1 = (prevstateno=[160,161])||stateno=[160,161]
trigger1 = enemynear,animtime <= -9&&p2movetype=A
trigger1 = random < 500




[State -1]
type = ChangeState
value = 420
triggerall = roundstate = 2
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X =[50,90]
trigger1 = prevstateno = [160,161]
trigger1 = random < 400


;取れるダメージは確実に
[State -1]
type = ChangeState
value = 4000
triggerall = roundstate = 2&&prevstateno!=[160,161]
triggerall = var(59)
triggerall = power >= 1000
triggerall = p2dist X > 0
trigger1 = statetype != A
trigger1 = ctrl||stateno = [100, 102]
trigger1 = enemynear,animtime = -3
trigger1 = enemynear,ctrl=0
trigger1 = p2movetype!=H
trigger1 = p2bodydist X 
trigger1 = p2statetype!=L
trigger1 = p2stateno >= 200
trigger1 = p2statetype!=A
trigger1 = p2bodydist X = [0,90]
trigger1 = p2life<200||life >0.333*const(data.life)&&life<p2life
trigger1 = p2life<100||var(57)<2
;起き攻め用ダッシュ
[State -1]
type = ChangeState
value = 100
triggerall = life >0.333*const(data.life)
triggerall = var(8) = 1 || var(7) >= 200
triggerall = roundstate = 2
triggerall = var(59)
triggerall = statetype != A
triggerall = ctrl
trigger1 = p2stateno=5120&&enemynear,animtime =-15
trigger1 = p2bodydist X <60 
trigger1 = random < 40
trigger1 = frontedgedist > 50




;ましろハンマーTypeA
[State -1]
type = ChangeState
value = 230
triggerall = roundstate = 2
triggerall = var(59)
triggerall = statetype != A
triggerall = ctrl
triggerall = p2bodydist  X< 80
trigger1 = p2stateno=[120,155]
trigger1 = random > 980-20*(NumHelper(1400));var(7) >= 200||
trigger1 = !inguarddist
trigger1 = p2statetype!=A
trigger2 = p2stateno=5120
trigger2 = enemynear,animtime = [-18,-15]
trigger2 = random < 150+100*(NumHelper(1400));var(7) >= 200||


;ましろハンマーTypeB
[State -1]
type = ChangeState
value = 240
triggerall = roundstate = 2
triggerall = var(59)
triggerall = statetype != A
triggerall = ctrl
triggerall = p2bodydist  X< 80
trigger1 = p2stateno=[120,155]
trigger1 = random < 10&&p2bodydist X>=30
trigger1 = !inguarddist
trigger1 = p2statetype!=A
trigger2 = p2stateno=5120&&random<=300
trigger2 = enemynear,animtime = [-18,-15]

;投げ
[State -1]
type = ChangeState
value = 800
triggerall = var(59)
triggerall = p2statetype  != A
triggerall = p2statetype != L
triggerall = P2bodyDist X = [-10,10]
triggerall = P2Dist Y = [-40,10]
triggerall = var(25) = 0
trigger1 = p2movetype!=H
trigger1 = statetype != A
trigger1 = ctrl
trigger1 = p2dist X > 0
trigger1 = numhelper(35)
trigger1 = helper(35),var(56)>=0
trigger1 = random < (80*var(57))&&(prevstateno != [160,161])||enemynear,animtime=-1&&(p2movetype=A||p2movetype=I&&enemynear,ctrl=0)&&(random<=350||var(57)=2)


;空中投げ
[State -1]
type = ChangeState
value = 820
triggerall = var(59)
triggerall = p2statetype  = A
triggerall = P2bodyDist X <= 10
triggerall = p2statetype != L
triggerall = P2Dist Y = [-40,10]
triggerall = pos Y < -30
trigger1 = statetype = A
trigger1 = ctrl
trigger1 = p2movetype!=H

;空中強攻撃
[State -1]
type = ChangeState
value = 620
triggerall = var(59)
triggerall = statetype = A
trigger1 = ctrl
trigger1 = pos Y > -100
trigger2 = ctrl
trigger1 = vel Y > 1
triggerall = p2bodydist X < 80
trigger1 = !inguarddist
trigger2 = p2statetype=A
trigger2 = p2bodydist Y = [-10,50]
trigger2 = p2movetype!=H
trigger2 = p2bodydist X >= 10
trigger3 = stateno = 610&&movehit


[State -1]
type = ChangeState
value = 39
triggerall = var(59)
triggerall = p2statetype != L
trigger1 = p2statetype = A
trigger1 = P2bodyDist X <= 87+enemyNear,vel X* 7
trigger1 = p2bodydist X >= 40
Trigger1 =(p2bodydist Y+(enemyNear,vel Y*7 +enemyNear,gethitvar(yaccel)* 28)*(P2StateType=A&&EnemyNear,Vel Y!=0))=[-100, -40]
trigger1 = statetype != A
trigger1 = ctrl
trigger1 = p2movetype!=H||p2stateno=[130,155]
trigger1 = enemynear,p2dist X > 0


;ダッシュ
[State -1]
type = ChangeState
value = 100
triggerall = life >0.333*const(data.life)
triggerall = var(8) = 1 || var(7) >= 200
triggerall = roundstate = 2
triggerall = var(59)
triggerall = statetype != A
triggerall = ctrl
trigger1 = random < 5 || random < 60&&backedgedist < 50
trigger1 = p2statetype=A&&p2movetype!=H&&enemynear,ctrl=0||p2statetype!=A&&p2stateno=[120,155]
trigger1 = p2bodydist X < 60
trigger1 = prevstateno!=[160,161]



[State -1]
type = ChangeState
value = 250
triggerall = roundstate = 2
triggerall = var(59)
triggerall = !inguarddist||p2movetype=A&&enemynear,animtime=-7
triggerall = p2bodydist X=[0,40]
trigger1 = stateno = 101
trigger1 = p2statetype!=A&&p2statetype!=L


;後退ダッシュ
[State -1,2]
type = ChangeState
value = 105
triggerall = var(59)
triggerall = statetype !=A
triggerall = backedgedist >90
triggerall = p2dist X > 0
trigger1 = prevstateno != [160,161]
trigger1 = ctrl
trigger1 = p2statetype=A&&random<300||random<30&&(p2movetype!=H||(p2stateno=[120,155]))||p2movetype=A&&random<100
trigger1 = p2bodydist X < 100
trigger1 = p2movetype!=H||p2stateno=[120,155]
trigger2 = stateno = 52
trigger2 = p2movetype=A
trigger3 = stateno = 101
trigger3 = time = 14||p2movetype=A&&random<60&&p2bodydist X < 100
trigger3 = inguarddist
trigger3 = numhelper(35)
trigger3 = helper(35),var(58)< 4
trigger4 = stateno = 101
trigger4 = time = 14&&p2dist X > 0





;獣符・ましろナパーム
[State -1]
type = ChangeState
value = 4250
triggerall = var(59)
triggerall = p2movetype=A&&enemynear,animtime<-19&&p2bodydist X <=90&&p2statetype!=A
triggerall = power >= 1000
trigger1 = statetype = S
trigger1 = ctrl||(stateno = [100, 101])||stateno=52||stateno=107
trigger1 = random<=50&&life<p2life||var(57)&&life<p2life&&random<=200||var(57)=2&&random<=300
trigger2 = (stateno = [200, 260])|| (stateno = [400, 430])
trigger2 = moveguarded




;---------------------------------------------------------------------------
[State -1,]
type = ChangeState
value = 120
triggerall = roundstate = 2
triggerall = var(59) = [2,4]
trigger1 = ctrl
[State -1, Run Back]
type = ChangeState
value = 105
triggerall = var(59)
trigger1 = statetype != A
trigger1 = backedgedist > 50
trigger1 = var(59)=6
trigger1 = ctrl
;------------------------------------------------------------------------------
;最優先コンボ



;ウルフ・コンビネーション
[State -1]
type = ChangeState
value = 3000
triggerall = roundstate = 2
triggerall = var(59)
trigger1 = power >= 3000
trigger1 = var(8) = 1 || var(7) >= 400
trigger2 = var(8) != 1&&var(7) < 400
trigger2 = power>=2000&&var(57)=2
trigger2 = p2statetype=A
trigger2 = p2life < 500
triggerall =stateno=221 || stateno=230&&p2statetype!=A&&p2statetype!=L
triggerall = movehit = 1
trigger2 = (life<333&&power>=3000)=0&&p2life >life||p2life<250



[State -1]
type = ChangeState
value = 4500
triggerall = var(59)
triggerall = power >= 1000
triggerall = var(8) = 1 || var(7) >= 400
triggerall = var(7) >= 0
triggerall = stateno = 3100
triggerall = Time <= 70
trigger1 = time = 31&&p2movetype=H&&p2statetype=A


;獣符・ましろナパーム
[State -1,3]
type = ChangeState
value = 4250
triggerall = var(59)
triggerall = NumHelper(1400)!
triggerall = power >= 1000
triggerall= statetype != A&&p2movetype=H&&movehit=1
triggerall = ctrl
trigger1 = stateno=230&&(var(8) = 1 || var(7) >= 400) =0||stateno=221&&p2life<=100
triggerall=p2statetype!=L&&p2statetype!=A

;---------------------------------------------------------------------------
[State -1]
type = ChangeState
value = 210
triggerall = var(59)
triggerall = RoundState = 2
triggerall = p2bodydist X < 25
triggerall = roundstate = 2
triggerall = stateno != 101
trigger1 = stateno = 400|| stateno=200
trigger1 = moveguarded=1&&random<500

[State -1]
type = ChangeState
value = 210
triggerall = var(59)
triggerall = RoundState = 2
triggerall = p2bodydist X < 25
triggerall = roundstate = 2
triggerall = stateno != 101
trigger1 = stateno = 210
trigger1 = moveguarded=1&&random<250

[State -1]
type = ChangeState
value = 220
triggerall = var(59)
triggerall = RoundState = 2
triggerall = p2bodydist X < 25
triggerall = roundstate = 2
triggerall = stateno != 101
trigger1 = stateno = 215
trigger1 = moveguarded=1&&random<800

[State -1]
type = ChangeState
value = 420
triggerall = NumHelper(20000)!
triggerall = var(8) = 1 || var(7) >= 200
triggerall = var(59)
triggerall = RoundState = 2
triggerall = p2bodydist X < 25
triggerall = roundstate = 2
triggerall = stateno != 101
trigger1 = stateno = 221
trigger1 = moveguarded=1&&random<800

[State -1]
type = ChangeState
value = 1100
triggerall = var(8) = 1 || var(7) >= 200
triggerall = var(59)
triggerall = NumHelper(20000)!
trigger1 = statetype = S
trigger1 = stateno = 420
trigger1 = moveguarded=1


[State -1]
type = ChangeState
value = 410
triggerall = var(59)
triggerall = RoundState = 2
triggerall = p2bodydist X < 25
triggerall = roundstate = 2
triggerall = stateno != 101
trigger1 = stateno = 400
trigger1 = moveguarded



;閃爪・散桜
[State -1]
type = ChangeState
value = 1020
triggerall = roundstate = 2
triggerall = var(59)
trigger1 = stateno=410|stateno=420
trigger1 = moveguarded = 1
trigger1 = random >900
trigger1 = p2statetype!=A



;閃爪・舞桜
[State -1]
type = ChangeState
value = 1010
triggerall = power >= 1000
triggerall = var(8) = 1 || var(7) >= 200
triggerall = roundstate = 2
triggerall = var(59)
trigger1 = stateno=410||stateno=420
trigger1 = moveguarded = 1
trigger1 = random <100
trigger1 = p2statetype!=A


;閃爪・桜花
[State -1]
type = ChangeState
value = 1000
triggerall = roundstate = 2
triggerall = var(59)
trigger1 = stateno = 101&&!inguarddist
Trigger1 = p2statetype!=A||p2movetype!=H&&(p2bodydist Y+(enemyNear,vel Y* 16 +enemyNear,gethitvar(yaccel)* 136)*(P2StateType=A&&EnemyNear,Vel Y!=0))=[-55, -10]
trigger1 = p2dist X < -35&&(p2statetype=A||enemynear,ctrl=0)||p2dist X < -55





;獣符・ましろアミュレット
[State -1]
type = ChangeState
value = 1300
triggerall = roundstate = 2
triggerall = var(59)&&var(57)&&power<3000
triggerall = var(8) = 1 || var(7) >= 200
triggerall = var(7) >= 0
triggerall = NumHelper(1400)!
trigger1 = stateno = 1002||stateno=1005
trigger1 = moveguarded

[State -1]
type = ChangeState
value = 200
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X < 15
trigger1 = random > 400 || p2stateno=[5000,5100]
trigger1 = p2movetype=H
trigger2 = stateno=250&&animtime=0&&movehit





[State -1]
type = ChangeState
value = 400
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X < 33
trigger1 = random < 550-300*(p2movetype=H) || p2stateno=[5000,5100]


[State -1]
type = ChangeState
value = 410
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1 =p2bodydist X =[25,60-7*(p2stateno=[120,155])]
trigger1 = prevstateno!=410
trigger1 = random < 100


[State -1]
type = ChangeState
value = 210
triggerall = var(59)
triggerall = RoundState = 2
triggerall = p2bodydist X < 25
triggerall = roundstate = 2
triggerall = stateno != 101
trigger1 = stateno = 400|| stateno=200
trigger1 = movehit
[State -1]
type = ChangeState
value = 215
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = stateno = 210
trigger1 = movehit
trigger1 = p2statetype!=A
[State -1]
type = ChangeState
value = 220
triggerall = roundstate = 2
triggerall = var(59)
triggerall = stateno != 101
trigger1 = stateno = 215||stateno=210
trigger1 = movehit
[State -1]
type = ChangeState
value = 410
triggerall = roundstate = 2
triggerall = var(59)
triggerall = stateno != 101
trigger1 = stateno = 400
trigger1 = movehit
;獣姫の槌
[State -1]
type = ChangeState
value = 4950
triggerall = roundstate = 2
triggerall = p2movetype=H
triggerall = var(59)
triggerall = power >= 3000
trigger1 = stateno = 1002||stateno=1005
trigger1 = helper(35),var(36) >= 170
trigger1 = movehit = 2
trigger1 = p2life<=300&&random>life
trigger2 = numhelper(35)
trigger2 = movehit=1
trigger2 = stateno = ifelse(helper(35),var(36) < 180,1031,1030)




;鵺と遊ぼう！弱
[State -1]
type = ChangeState
value = 1100
triggerall = roundstate = 2
triggerall = var(59)
triggerall = power < 2000
triggerall = var(8) = 1 || var(7) >= 200
triggerall = NumHelper(20000)!
triggerall = numhelper(35)
trigger1 = helper(35),var(36) < 90
trigger1 = stateno = 221
trigger1 = movehit
trigger1 = p2statetype=A
trigger2 = stateno=420&&helper(35),var(36) < 150
trigger2 = movehit


[State -1]
type = ChangeState
value = 420
triggerall = roundstate = 2
triggerall = var(59)
triggerall = stateno != 101
trigger1 = stateno=410||stateno=210&&var(7) <190
trigger1 = movehit
trigger1 = p2statetype!=A

;獣符・ましろアミュレット
[State -1]
type = ChangeState
value = 1300
triggerall = roundstate = 2
triggerall = var(59)&&var(57)
triggerall = var(8) = 1 || var(7) >= 200&&(power<3000||stateno=1100)
triggerall = var(7) >= 0
triggerall = NumHelper(1400)!
triggerall = p2bodydist X < 35
triggerall = numhelper(35)
trigger1 = stateno = 1002||stateno=1005
trigger1 = movehit = 2&&p2movetype=H
trigger1 = enemynear,prevstateno!=5656
trigger1 = p2dist X > 0
trigger1 = power<2000||life<=500
trigger2 = stateno= 1100
trigger2 = prevstateno = 221&&time = 8||prevstateno=420&&time = 15
trigger2 = p2statetype=A


;バスターましろ
[State -1]
type = ChangeState
value = 3000
triggerall = var(59)&&var(57)=2
triggerall = power >= 2000
trigger1 = stateno = 420||stateno=430||stateno=221
trigger1 = movehit
trigger1 = var(8) != 1&&var(7) < 400
trigger1 = p2life < 500
trigger1 = (life<333&&power>=3000)=0&&life<p2life||p2life<250

;閃爪・桜吹雪
[State -1]
type = ChangeState
value = 4000
triggerall = var(59)&&var(57)<2
triggerall = p2life<=100
triggerall = power >= 1000
trigger1 = statetype = S&&movehit=1&&p2movetype=H
trigger1 = stateno=221||stateno=420



[State -1]
type = ChangeState
value = ifelse(p2bodydist X <=20,1003,1000)
triggerall = roundstate = 2
triggerall = var(59)
triggerall = stateno != 101
trigger1 = stateno = 420||stateno=430||stateno=221&&var(58)!=[1,2]
trigger1 = movehit




;獣の槌
[State -1]
type = ChangeState
value = 1200
triggerall = roundstate = 2
triggerall = var(59)
triggerall = var(8) = 1 || var(7) >= 200
triggerall = var(7) >= 0
trigger1 = power<2000||life<=500
trigger1 = stateno = 1002||stateno=1005
trigger1 = movehit = 2&&p2movetype=H
trigger1 = enemynear,prevstateno!=5656
trigger1 = p2bodydist X < 110
trigger2 = stateno=230&&movehit=1&&p2statetype!=A&&NumHelper(1400)=0


;インスタントチャージ
[State -1]
type = ChangeState
value = 2000
triggerall = roundstate = 2
triggerall = var(59)
triggerall = var(8) = 1 || var(7) >= 200
triggerall = var(7) >= 0
triggerall = numhelper(35)
trigger1 = stateno = 1002||stateno=1005
trigger1 = movehit  = 2
trigger1 = power<2000||life<=500
trigger2 = stateno = 4950&&movehit&&p2movetype=H
trigger2 = helper(35),var(36) < 170
trigger2 = inguarddist||(p2bodydist x<100&&enemynear(var(31)),movetype=A)
trigger2 = enemynear(var(31)),time>=60*fvar(34) || enemynear(var(31)),movetype != A
trigger3 = stateno = stateno = 230||stateno=240
trigger3 = var(28) && movereversed > 1 || movecontact=[1,4] 
trigger3 = var(57)<1
;さんだーすとーむ
[State -1]
type = ChangeState
value = 4300
triggerall = roundstate = 2
triggerall = NumHelper(1400)
triggerall = var(59)&&var(57)=2
triggerall = NumHelper(20000)!
triggerall = power >= 2000
trigger1 = prevstateno = 271
trigger1 = stateno=52
trigger1 = p2statetype=A&&p2movetype=H
trigger1 = random>life&&(power<3000||var(8)!=1)

[State -1]
type = ChangeState
value = 1010
triggerall = roundstate = 2
triggerall = NumHelper(1400)
triggerall = roundstate = 2
triggerall = var(59)
trigger1 = prevstateno = 271
trigger1 = stateno=52
trigger1 = p2statetype=A&&p2movetype=H
trigger1 = p2bodydist Y < -80

[State -1]
type = ChangeState
value = 15
triggerall = roundstate = 2
triggerall = var(59)
triggerall = p2statetype=A&&p2movetype=H
trigger1 = stateno=1201||stateno=1301
trigger1 = animtime=0
trigger2 = prevstateno = 271
trigger2 = stateno=52


[State -1]
type = ChangeState
value = 0
triggerall = var(59)
trigger1 = stateno = 15
trigger1 = p2movetype!=H||time>=15
ctrl=1


;閃爪・桜花
[State -1]
type = ChangeState
value = 999
triggerall = p2movetype!=A
triggerall = roundstate = 2
triggerall = var(59)
trigger1 = p2movetype!=A&&p2statetype!=L
trigger1 =helper(35),var(36) < 150&&p2stateno!=5656||p2bodydist X > 50||p2movetype=H&&p2stateno!=5656
Trigger1 =(p2bodydist Y+(enemyNear,vel Y* 20 +enemyNear,gethitvar(yaccel)* 210)*(P2StateType=A&&EnemyNear,Vel Y!=0))=[-100, -5];22
trigger1 = statetype != A
trigger1 = ctrl||stateno=15|| stateno= 52||stateno=107
trigger1 = p2dist X > 0&&(p2movetype=H||p2bodydist X<=200)||enemynear,prevstateno=5656
trigger1 = var(57)=1&&p2movetype=H||var(57)=2
trigger2 = NumHelper(1400)=0
trigger2 = NumHelper(1402)
trigger2 = stateno=15



[State 1011]
type = ChangeState
triggerall = roundstate = 2
triggerall = var(59)
trigger1 = stateno=1011||stateno=1021
trigger1 = p2statetype=A&&p2bodydist X<=205
trigger1 = Time =[2,11]
trigger1 = var(57)=2||var(57)=1&&(random<=20||p2movetype=H)
value = 270


;閃爪・桜花
[State -1]
type = ChangeState
value = 1000
triggerall = roundstate = 2
triggerall = var(59)
Trigger1 =(p2bodydist Y+(enemyNear,vel Y* 16 +enemyNear,gethitvar(yaccel)* 136)*(P2StateType=A&&EnemyNear,Vel Y!=0))=[-100, -10]
triggerall = statetype != A
triggerall = ctrl || stateno = 15
triggerall = numhelper(35)
triggerall = p2movetype=H
trigger1 = p2stateno = 5656
trigger1 = helper(35),var(36) >= 140
trigger2 = p2stateno = 5656
trigger2 = helper(35),var(36) < 140
Trigger2 =(p2bodydist Y+(enemyNear,vel Y* 16 +enemyNear,gethitvar(yaccel)* 136)*(P2StateType=A&&EnemyNear,Vel Y!=0))=[-80, -10]
trigger3 = p2bodydist X > 50||prevstateno=240
Trigger3 =(p2bodydist Y+(enemyNear,vel Y* 16 +enemyNear,gethitvar(yaccel)* 136)*(P2StateType=A&&EnemyNear,Vel Y!=0))=[-55, -10]
trigger3 = p2stateno != 5656


[State -1]
type = ChangeState
value = 220
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
triggerall = p2dist X =[-80,80]
trigger1 = statetype != A
trigger1 = ctrl || stateno= 52||stateno=15&&NumHelper(1402) = 0&&NumHelper(1400)!
Trigger1 =(p2bodydist Y+(enemyNear,vel Y* 9 +enemyNear,gethitvar(yaccel)* 45)*(P2StateType=A&&EnemyNear,Vel Y!=0)) = [-15,5]
trigger1 = p2dist X > 0
trigger1 = p2statetype=A
trigger1 = p2stateno!=[120,155]
trigger1 = p2movetype=H

[State -1]
type = ChangeState
value = 21
triggerall = roundstate = 2
triggerall = var(59)
triggerall = statetype != A
trigger1 = ctrl
trigger1 = p2bodydist X > 70&&stateno=22&&time>10||prevstateno!=5120&&p2statetype!=A&&p2statetype!=L&&p2bodydist X < 100&&stateno !=[21,22]
trigger1 = random < 100
trigger2 = ctrl
trigger2 = p2bodydist X > 30
trigger2 = numhelper(35)
trigger2 = helper(35),var(1) = 2
trigger2 = stateno !=21

[State -1]
type = ChangeState
value = 22
triggerall = roundstate = 2
triggerall = var(59)
trigger1 = statetype != A
trigger1 = ctrl
trigger1 = p2statetype=L||p2statetype=A&&p2movetype!=H
trigger1 = p2bodydist X <40
trigger1 = stateno=21&&time>10||stateno !=[21,22]
trigger1 = p2movetype!=H


;鵺と遊ぼう！中
[State -1]
type = ChangeState
value = 1110
triggerall = var(59)
trigger1 = p2bodydist X = [100,160]
triggerall = NumHelper(20000)!
triggerall = statetype = S
trigger1 =  stateno = 101
trigger1 = numhelper(35)
trigger1 = p2statetype=L||helper(35),var(58)> 4
trigger2 = p2bodydist X >= 100
trigger2 = p2statetype!=L
trigger2 = !inguarddist&&p2movetype!=A
trigger2 = random < 50
trigger2 = ctrl
trigger2 = p2movetype!=H

[State -1]
type = ChangeState
value = 1100
triggerall = var(59)&&roundstate=2
triggerall = p2bodydist X = [0,100]
triggerall = NumHelper(20000)!
trigger1 = statetype = S
trigger1 = stateno = 101 || ctrl&&p2bodydist X <= 70&&p2stateno>=(5105-5*(enemynear,var(59)))
trigger1 = p2statetype=L


;ダッシュ
[State -1,2]
type = ChangeState
value = 100
triggerall = NumHelper(20000)=0||var(8) = 1 || var(7) >= 200
triggerall = roundstate = 2
triggerall = var(59)
triggerall = statetype != A
triggerall = ctrl
triggerall = prevstateno!=[160,161]
trigger1 = p2bodydist X >= 70
trigger1 = p2statetype=L

;獣符・ましろアミュレット
[State -1,1]
type = ChangeState
value = 1300
triggerall = NumHelper(20000)
triggerall = roundstate = 2
triggerall = var(59)&&var(57)
triggerall = var(8) = 1 || var(7) >= 200
triggerall = var(7) >= 0
triggerall = NumHelper(1400)!
triggerall = numhelper(35)
triggerall = power < 2000
trigger1 = stateno = 1100
trigger1 = time = 9
trigger1 = p2bodydist X <= 40
trigger1 = p2movetype!=H||p2statetype!=A
trigger2 = p2statetype=L
trigger2 = stateno=101&&time=14


;ダッシュ
[State -1]
type = ChangeState
value = 100
triggerall = var(8) = 1 || var(7) >= 200||NumHelper(20000)
triggerall = roundstate = 2
triggerall = var(59)
triggerall = statetype != A
triggerall = ctrl
triggerall = prevstateno!=[160,161]
trigger1 = random < 90
trigger1 = p2statetype!=L&&p2movetype!=H
trigger1 = p2bodydist X > 35
trigger1 = life >0.333*const(data.life)
trigger1 = p2bodydist X < 150
trigger2 = random < 150
trigger2 = p2statetype!=A&&p2stateno=[120,155]
trigger2 = p2bodydist X < 60
triggerall = prevstateno !=[160,190]
trigger2 = p2statetype!=L

[State -1,1]
type = ChangeState
value = 200
triggerall = NumHelper(20000)
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
triggerall = power <3000
trigger1 = statetype != A
trigger1 = ctrl
trigger1 = p2statetype=L
trigger1  =p2bodydist X >100



;閃爪・桜花
[State -1]
type = ChangeState
value = 1000
triggerall = var(59)
triggerall = stateno = 107
trigger1 = enemynear,animtime <=-16&&p2movetype=A||random<50&&p2bodydist X >=200
trigger1 = p2statetype!=A&&p2statetype!=L
Trigger2 =(p2bodydist Y+(enemyNear,vel Y* 16 +enemyNear,gethitvar(yaccel)* 136)*(P2StateType=A&&EnemyNear,Vel Y!=0))=[-55, -10]
trigger2 = p2statetype=A&&p2movetype!=H&&p2movetype!=A


;閃爪・散桜
[State -1]
type = ChangeState
value = 1020
triggerall = var(59)
trigger1 = stateno = 107
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1 = random < 400
trigger1 = p2statetype!=A
trigger1 = p2bodydist X < 200

;閃爪・舞桜
[State -1]
type = ChangeState
value = 1010
triggerall = var(59)
trigger1 = stateno = 107
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1 = p2bodydist X < 200



[State -1]
type = ChangeState
value = 21
triggerall = var(59)
triggerall = life <=0.333*const(data.life)||p2bodydist X > 120
trigger1 = p2bodydist X >= 20
trigger1 = p2movetype!=H
trigger1 = ctrl
trigger1 = stateno<=20


;------------------------------------------------------------------------------
[State -1,]
type = ChangeState
value = 0
triggerall = roundstate = 2
triggerall = var(59)
trigger1 = stateno = 40
ctrl = 1
[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = var(59)
triggerall = stateno = 5050
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
trigger1 = CanRecover
value = 5200 ;HITFALL_RECOVER
[State 5050, 5]; Recover in mid air
type = selfstate
triggerall = var(59)
triggerall = stateno = 5050
triggerall = vel y > -1
triggerall = alive
trigger1 = CanRecover
value = 5210
[State -1,]
type = ChangeState
value = prevstateno
triggerall = prevstateno !=[150,155]
triggerall = roundstate = 2
triggerall = var(59)
trigger1 = stateno= 10
trigger1 = prevstateno = 100||prevstateno = [20,23]
ctrl = 1
;---------------------------------------------------------------------------
;AI待機ステート（立ち、しゃがみ、前進）
[Statedef 9]
type = S
physics = S
sprpriority = 0
ctrl=0
[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0
[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0
[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0
[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

[Statedef 15]
type    = C
physics = C
anim = 11
sprpriority = 0
ctrl = 0

[State 11, 1]
type = Changestate
trigger1 = enemynear,pos Y >-10&&enemynear,vel Y > 1
value = 0
ctrl = 1

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11

[Statedef 23]
type    = S
physics = S
sprpriority = 0
ctrl=0
[State 20, 1]
type = VelSet
trigger1 = 1
x = const(velocity.walk.fwd.x)
[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20
[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

;---------------------------------------------------------------------------
;AI用基本ステート（歩き、ジャンプ、ガード）
[Statedef 21]
type    = S
physics = S
sprpriority = 0
ctrl=1
[State 20, 1]
type = VelSet
trigger1 = 1
x = const(velocity.walk.fwd.x)
[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21
[Statedef 22]
type    = S
physics = S
sprpriority = 0
ctrl=1
[State 20, 2]
type = VelSet
trigger1 = 1
x = const(velocity.walk.back.x)
[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20
[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21


[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2
[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A
[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
trigger2 = var(59) = 0
trigger2 = statetype = S && command = "holddown"
trigger3 = statetype !=A
trigger3 = var(59) = 4
statetype = C
physics = C
[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
trigger2 = var(59) = 0
trigger2 = statetype = C && command != "holddown"
trigger3 = statetype !=A
trigger3 = var(59) = 3
statetype = S
physics = S
[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2
[State 120, Stop Guarding]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdback" || !inguarddist
trigger2 = var(59)
trigger2 = var(59) !=[2,4]
value = 140
[Statedef 130]
type    = S
physics = S

[State -1]
type = ChangeState
value = 1000
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl
trigger1 = p2statetype!=L
trigger1  =p2bodydist X >=80
trigger1 = prevstateno!=5120
trigger1 = (prevstateno=[160,161])||stateno=[160,161]
Trigger1 =p2bodydist Y > -70


[State -1]
type = ChangeState
value = 200
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X < 20
trigger1 = enemynear,animtime = -7&&p2movetype=A
trigger1 = prevstateno!=5120
trigger1 = random < 600||prevstateno=[160,161]
[State -1]
type = ChangeState
value = 400
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X < 35
trigger1 = enemynear,animtime = -5&&p2movetype=A
trigger1 = prevstateno!=5120

[State -1]
type = ChangeState
value = 220
triggerall = roundstate = 2
triggerall = var(59)
triggerall = stateno != 101
triggerall = statetype != A
triggerall = ctrl
trigger1 = p2statetype=A&&p2statetype!=L
trigger1  =p2bodydist X <=70
trigger1 = (prevstateno=[160,161])||stateno=[160,161]
trigger1 = enemynear,pos Y > -70



[State -1]
type = ChangeState
value = ifelse(p2bodydist X < 20,200,400)
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X < 35
trigger1 = prevstateno = [160,161]
trigger1 = prevstateno!=5120
trigger1 = random < 700


;強攻撃
[State -1]
type = ChangeState
value = 220
triggerall = roundstate = 2
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
triggerall = statetype != A
triggerall = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X = [25,55]
trigger1 = (prevstateno=[160,161])||stateno=[160,161]
trigger1 = enemynear,animtime <= -9&&p2movetype=A
trigger1 = random < 500

[State -1]
type = ChangeState
value = 420
triggerall = roundstate = 2
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X =[50,90]
trigger1 = prevstateno = [160,161]
trigger1 = random < 400



[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130
[State 130, Hi to Lo]
type = ChangeState
trigger1 = command = "holddown"
trigger1 = var(59) = 0
trigger2 = var(59) = 4
value = 131
[State 130, Stop Guarding]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdback" || !inguarddist
trigger2 = var(59)
trigger2 = var(59) !=[2,4]
value = 140
[Statedef 131]
type    = C
physics = C

[State -1]
type = ChangeState
value = 1000
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl
trigger1 = p2statetype!=L
trigger1  =p2bodydist X >=80
trigger1 = prevstateno!=5120
trigger1 = (prevstateno=[160,161])||stateno=[160,161]
Trigger1 =p2bodydist Y > -70


[State -1]
type = ChangeState
value = 200
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X < 20
trigger1 = enemynear,animtime = -7&&p2movetype=A
trigger1 = prevstateno!=5120
trigger1 = random < 600||prevstateno=[160,161]
[State -1]
type = ChangeState
value = 400
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X < 35
trigger1 = enemynear,animtime = -5&&p2movetype=A
trigger1 = prevstateno!=5120

[State -1]
type = ChangeState
value = 220
triggerall = roundstate = 2
triggerall = var(59)
triggerall = stateno != 101
triggerall = statetype != A
triggerall = ctrl
trigger1 = p2statetype=A&&p2statetype!=L
trigger1  =p2bodydist X <=70
trigger1 = (prevstateno=[160,161])||stateno=[160,161]
trigger1 = enemynear,pos Y > -70



[State -1]
type = ChangeState
value = ifelse(p2bodydist X < 20,200,400)
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X < 35
trigger1 = prevstateno = [160,161]
trigger1 = prevstateno!=5120
trigger1 = random < 700


;強攻撃
[State -1]
type = ChangeState
value = 220
triggerall = roundstate = 2
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
triggerall = statetype != A
triggerall = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X = [25,55]
trigger1 = (prevstateno=[160,161])||stateno=[160,161]
trigger1 = enemynear,animtime <= -9&&p2movetype=A
trigger1 = random < 500

[State -1]
type = ChangeState
value = 420
triggerall = roundstate = 2
triggerall = var(59)
triggerall = RoundState = 2
triggerall = stateno != 101
trigger1 = statetype != A
trigger1 = ctrl || stateno = 52&&p2dist X > 0
trigger1 = p2statetype!=A&&p2statetype!=L
trigger1  =p2bodydist X =[50,90]
trigger1 = prevstateno = [160,161]
trigger1 = random < 400


[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
trigger1 = command != "holddown"
trigger1 = var(59) = 0
trigger2 = var(59) = 3
value = 130
[State 131, Stop Guarding]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdback" || !inguarddist
trigger2 = var(59)
trigger2 = var(59) !=[2,4]
value = 140

[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1
[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2
[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A
[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
trigger2 = var(59) = 0
trigger2 = statetype = S && command = "holddown"
trigger3 = statetype !=A
trigger3 = var(59) = 4
statetype = C
physics = C
[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
trigger2 = var(59) = 0
trigger2 = statetype = C && command != "holddown"
trigger3 = statetype !=A
trigger3 = var(59) = 3
statetype = S
physics = S
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0
[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150
[State 152, 3]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")
[State 152, 3]
type = ChangeState
trigger1 = var(59)
trigger1 = HitShakeOver
value = 151+(statetype=C)*2
[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
trigger2 = var(59) = 0
trigger2 = statetype = S && command = "holddown"
trigger3 = statetype !=A
trigger3 = var(59) = 4
statetype = C
physics = C
[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
trigger2 = var(59) = 0
trigger2 = statetype = C && command != "holddown"
trigger3 = statetype !=A
trigger3 = var(59) = 3
statetype = S
physics = S
[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150
[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1
[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
trigger2 = var(59) = 0
trigger2 = statetype = S && command = "holddown"
trigger3 = statetype !=A
trigger3 = var(59) = 4
statetype = C
physics = C
[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
trigger2 = var(59) = 0
trigger2 = statetype = C && command != "holddown"
trigger3 = statetype !=A
trigger3 = var(59) = 3
statetype = S
physics = S
[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0
[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151
[State 152, 3]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")
[State 152, 3]
type = ChangeState
trigger1 = var(59)
trigger1 = HitShakeOver
value = 151+(statetype=C)*2
[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
trigger2 = var(59) = 0
trigger2 = statetype = S && command = "holddown"
trigger3 = statetype !=A
trigger3 = var(59) = 4
statetype = C
physics = C
[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
trigger2 = var(59) = 0
trigger2 = statetype = C && command != "holddown"
trigger3 = statetype !=A
trigger3 = var(59) = 3
statetype = S
physics = S
[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151
[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0
[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1
[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
trigger2 = var(59) = 0
trigger2 = statetype = S && command = "holddown"
trigger3 = statetype !=A
trigger3 = var(59) = 4
statetype = C
physics = C
[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
trigger2 = var(59) = 0
trigger2 = statetype = C && command != "holddown"
trigger3 = statetype !=A
trigger3 = var(59) = 3
statetype = S
physics = S
[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1




;---------------------------------------------------------------------------
[StateDef 35]
physics=N
ctrl=0



;---------------------------------------------------------------------------

[State 100000]
type=varset
trigger1=root,name="KUSANAGI"
trigger1=root,stateno=1250
trigger1=root,prevstateno=400
var(0) = 2
[State 100000]
type=varset
trigger1=root,name="KUSANAGI"
trigger1=root,stateno=1255
trigger1=root,movehit=1
trigger1=var(0)=0
var(0) = 1
[State 100000]
type=varset
triggerall=var(0)=1
trigger1=root,name="KUSANAGI"
trigger1=enemynear,movetype!=H||root,movetype=A&&root,stateno!=1255
var(0) = 0

;中距離けん制抑止
[State 100000]
type=varset
trigger1=!var(1)
trigger1=root,name="KUSANAGI"
trigger1=root,stateno=230&&root,time=1
var(1) = ceil(random/10)
[State 100000]
type=varadd
trigger1=root,name="KUSANAGI"
trigger1=root,ctrl
trigger1=var(1)
var(1) = -1
[State 100000]
type=varadd
trigger1=root,name="KUSANAGI"
trigger1=movereversed
var(1) = 200
ignorehitpause=1
[State 100000]
type=varset
trigger1=root,name="KUSANAGI"
trigger1=root,stateno=230&&root,movehit
trigger1=enemynear,movetype=H
var(1) = 0

[State 100000]
type=varset
trigger1=!var(2)
trigger1=root,name="KUSANAGI"
trigger1=root,stateno=1250&&root,time=1
var(2) = ceil(random/10)
[State 100000]
type=varadd
trigger1=root,name="KUSANAGI"
trigger1=root,ctrl
trigger1=var(2)
var(2) = -1
[State 100000]
type=varset
trigger1=root,name="KUSANAGI"
trigger1=root,stateno=1121
trigger1=p2movetype=H
var(3) = 1
[State 100000]
type=varset
trigger1=root,name="KUSANAGI"
trigger1=enemynear,movetype!=H
var(3) = 0

;---------------------------------------------------------------------------
;214Pの初段が地上ヒットか空中ヒットか
[State 100000]
type=varset
trigger1= root,name="shen"
trigger1=!var(11)
trigger1=root,stateno=1100
trigger1=enemynear,statetype!=A
trigger1=(enemynear,stateno!=[120,155])&&enemynear,movetype=H
trigger1=root,movehit
var(11) = 1
[State 100000]
type=varset
trigger1= root,name="shen"
trigger1=!var(11)
trigger1=root,stateno=1100
trigger1=enemynear,statetype=A
trigger1=(enemynear,stateno!=[120,155])&&enemynear,movetype=H
trigger1=root,movehit
var(11) = 2
[State 100000]
type=varset
trigger1= root,name="shen"
trigger1=!var(11)
trigger1=root,stateno=2000 || root,stateno = 2510
trigger1=enemynear,statetype=A
trigger1=(enemynear,stateno!=[120,155])&&enemynear,movetype=H
trigger1=root,movehit
var(11) = 3
[State 100000]
type=null;varset
trigger1= root,name="shen"
trigger1=var(11)=1
trigger1=root,stateno = 2510
trigger1=enemynear,statetype=A
trigger1=(enemynear,stateno!=[120,155])&&enemynear,movetype=H
trigger1=root,movehit
var(11) = 4
[State 100000]
type=varset
triggerall=var(11)
trigger1= root,name="shen"
trigger1=enemynear,movetype!=H
var(11) = 0

;撃拳が立ち回りから出したものであるか
[State 100000]
type=varset
trigger1= root,name="shen"
trigger1=!var(11)
trigger1=root,stateno=1000
trigger1=root,prevstateno < 105
var(12) = 1
[State 100000]
type=varset
trigger1=root,name="shen"
trigger1=root,ctrl
var(12) = 0
;ぶっぱ撃拳を回避されていないか(特に緊急回避でループする危険性）
[State 100000]
type=varset
trigger1=var(12)
trigger1=root,name="shen"
trigger1=root,stateno=1000&&root,time=1
var(13) = 50+var(57)
[State 100000]
type=varadd
trigger1=root,name="shen"
trigger1=root,ctrl
trigger1=var(13)
var(13) = -1
[State 100000]
type=varadd
trigger1=root,name="shen"
trigger1=movereversed
var(13) = 200
ignorehitpause=1
[State 100000]
type=varset
trigger1=root,name="shen"
trigger1=root,stateno=1010&&root,movecontact
var(13) = 0
;前Bを最低ガードさせられているか
[State 100000]
type=varset
trigger1=root,name="shen"
trigger1=root,stateno=310&&root,time=1
var(14) = var(57)
[State 100000]
type=varadd
trigger1=root,name="shen"
trigger1=root,ctrl
trigger1=var(14)
var(14) = -1
[State 100000]
type=varadd
trigger1=root,name="shen"
trigger1=movereversed
var(14) = 200
ignorehitpause=1
[State 100000]
type=varset
trigger1=root,name="shen"
trigger1=root,stateno=310&&root,movecontact
var(14) = 0



;---------------------------------------------------------------------------

[State 100000]
type=varset
trigger1 = root,name ="Hikaru Shidou"
trigger2 = root,name = "Kung Fu Man"
trigger3 = root,name = "Hibiki Takane"
trigger4 = root,name = "RIMLE"
trigger5 = root,name = "Kyle Dunamis"
var(10)=1

[State 100000]
type=varset
trigger1= root,name ="Mashiro Mito"
trigger2 = root,name = "KUSANAGI"
trigger3 = root,name = "Rock"
trigger4 = root,name = "Serena" 
var(10) = 5


[State 100000]
type=varset
trigger1= root,name="shen"
trigger2= root,name="Rugal.B"
var(10) = 10



;===========================================================================
;var(10)=1~9 当身用、処理が1F遅れるため
;実際はenemynear,time=enemynear,stateno=var(22)-(発生＋1)

[State 100000]
type=varset
triggerall = var(10)=[1,9]
trigger1 = root,p2dist X=[0,160]
trigger1 = enemynear,movetype=A
trigger1 = enemynear,prevstateno <= 115
trigger1 = enemynear,HitDefAttr = SCA,NA,SA
var(20)=1
[State 100000]
type=varset
triggerall = var(10)=[1,4]
triggerall=enemynear,stateno!=var(21)
triggerall=enemynear,stateno!=var(23)
triggerall=enemynear,stateno!=var(25)
triggerall=enemynear,stateno!=var(27)
triggerall=enemynear,stateno!=var(29)
triggerall=enemynear,stateno!=var(31)
trigger1 = var(20)
trigger1 = var(22)
trigger1 = var(24)
trigger1 = var(26)
trigger1 = var(28)
trigger1 = var(30)
trigger1 = var(32)
trigger1 = var(33)
trigger1 = var(35)
trigger1 = !var(37)
trigger1 = root,movetype=H
var(37)=enemynear,stateno
[State 100000]
type=varset
triggerall = var(10)=[1,4]
trigger1 = var(23)
trigger1 = var(25)
trigger1 = var(27)
trigger1 = var(29)
trigger1 = var(31)
trigger1 = var(23)
trigger1 = var(34)
trigger1 = var(36)
trigger1 = !var(38)
var(38)=(enemynear,time)

[State 100000]
type=varset
triggerall = var(10)=[1,4]
triggerall=enemynear,stateno!=var(21)
triggerall=enemynear,stateno!=var(23)
triggerall=enemynear,stateno!=var(25)
triggerall=enemynear,stateno!=var(27)
triggerall=enemynear,stateno!=var(29)
triggerall=enemynear,stateno!=var(31)
trigger1 = var(20)
trigger1 = var(22)
trigger1 = var(24)
trigger1 = var(26)
trigger1 = var(28)
trigger1 = var(30)
trigger1 = var(32)
trigger1 = var(33)
trigger1 = !var(35)
trigger1 = root,movetype=H
var(35)=enemynear,stateno
[State 100000]
type=varset
triggerall = var(10)=[1,4]
trigger1 = var(23)
trigger1 = var(25)
trigger1 = var(27)
trigger1 = var(29)
trigger1 = var(31)
trigger1 = var(23)
trigger1 = var(34)
trigger1 = !var(36)
var(36)=(enemynear,time)
[State 100000]
type=varset
triggerall = var(10)=[1,9]
triggerall=enemynear,stateno!=var(21)
triggerall=enemynear,stateno!=var(23)
triggerall=enemynear,stateno!=var(25)
triggerall=enemynear,stateno!=var(27)
triggerall=enemynear,stateno!=var(29)
triggerall=enemynear,stateno!=var(31)
trigger1 = var(20)
trigger1 = var(22)
trigger1 = var(24)
trigger1 = var(26)
trigger1 = var(28)
trigger1 = var(30)
trigger1 = var(32)
trigger1 = !var(33)
trigger1 = root,movetype=H
var(33)=enemynear,stateno
[State 100000]
type=varset
triggerall = var(10)=[1,9]
trigger1 = var(23)
trigger1 = var(25)
trigger1 = var(27)
trigger1 = var(29)
trigger1 = var(31)
trigger1 = var(23)
trigger1 = !var(34)
var(34)=(enemynear,time)
[State 100000]
type=varset
triggerall = var(10)=[1,9]
triggerall=enemynear,stateno!=var(21)
triggerall=enemynear,stateno!=var(23)
triggerall=enemynear,stateno!=var(25)
triggerall=enemynear,stateno!=var(27)
triggerall=enemynear,stateno!=var(29)
trigger1 = var(20)
trigger1 = var(22)
trigger1 = var(24)
trigger1 = var(26)
trigger1 = var(26)
trigger1 = var(28)
trigger1 = var(30)
trigger1 = !var(31)
trigger1 = root,movetype=H
var(31)=enemynear,stateno
[State 100000]
type=varset
triggerall = var(10)=[1,9]
trigger1 = var(23)
trigger1 = var(25)
trigger1 = var(27)
trigger1 = var(29)
trigger1 = var(31)
trigger1 = !var(32)
var(32)=(enemynear,time)

[State 100000]
type=varset
triggerall = var(10)=[1,9]
triggerall=enemynear,stateno!=var(21)
triggerall=enemynear,stateno!=var(23)
triggerall=enemynear,stateno!=var(25)
triggerall=enemynear,stateno!=var(27)
trigger1 = var(20)
trigger1 = var(22)
trigger1 = var(24)
trigger1 = var(26)
trigger1 = var(26)
trigger1 = var(28)
trigger1 = !var(29)
trigger1 = root,movetype=H
var(29)=enemynear,stateno
[State 100000]
type=varset
triggerall = var(10)=[1,9]
trigger1 = var(23)
trigger1 = var(25)
trigger1 = var(27)
trigger1 = var(29)
trigger1 = !var(30)
var(30)=(enemynear,time)



[State 100000]
type=varset
triggerall = var(10)=[1,9]
triggerall=enemynear,stateno!=var(21)
triggerall=enemynear,stateno!=var(23)
triggerall=enemynear,stateno!=var(25)
trigger1 = var(20)
trigger1 = var(22)
trigger1 = var(24)
trigger1 = var(26)
trigger1 = !var(27)
trigger1 = root,movetype=H
var(27)=enemynear,stateno
[State 100000]
type=varset
triggerall = var(10)=[1,9]
trigger1 = var(23)
trigger1 = var(25)
trigger1 = var(27)
trigger1 = !var(28)
var(28)=(enemynear,time)


[State 100000]
type=varset
triggerall = var(10)=[1,9]
triggerall=enemynear,stateno!=var(21)
triggerall=enemynear,stateno!=var(23)
trigger1 = var(20)
trigger1 = var(22)
trigger1 = var(24)
trigger1 = !var(25)
trigger1 = root,movetype=H
var(25)=enemynear,stateno
[State 100000]
type=varset
triggerall = var(10)=[1,9]
trigger1 = var(23)
trigger1 = var(25)
trigger1 = !var(26)
var(26)=(enemynear,time)


[State 100000]
type=varset
triggerall = var(10)=[1,9]
triggerall=enemynear,stateno!=var(21)
trigger1 = var(20)
trigger1 = var(22)
trigger1 = !var(23)
trigger1 = root,movetype=H
var(23)=enemynear,stateno
[State 100000]
type=varset
triggerall = var(10)=[1,9]
trigger1 = var(23)
trigger1 = !var(24)
var(24)=(enemynear,time)
[State 100000]
type=varset
triggerall = var(10)=[1,9]
trigger1 = var(20)
trigger1 = !var(21)
trigger1 = root,movetype=H
;trigger1 = root,stateno!=[120,155]
var(21)=enemynear,stateno
[State 100000]
type=varset
triggerall = var(10)=[1,9]
trigger1 = var(21)
trigger1 = var(22) = 0
;trigger2 = var(20)
;trigger2 = enemynear,stateno=var(21)
;trigger2 = enemynear,time < var(22)
;trigger2 = root,movetype=H
;trigger2 = enemynear,prevstateno <= 115
var(22)=(enemynear,time)


;1F技は無効
[State 100000]
type=varset
triggerall = var(10)=[1,9]
trigger1 = !var(28)
var(27)=0
[State 100000]
type=varset
triggerall = var(10)=[1,9]
trigger1 = var(28) = 1
var(28)=0
[State 100000]
type=varset
triggerall = var(10)=[1,9]
trigger1 = !var(26)
var(25)=0
[State 100000]
type=varset
triggerall = var(10)=[1,9]
trigger1 = var(26) = 1
var(26)=0
[State 100000]
type=varset
triggerall = var(10)=[1,9]
trigger1 = !var(24)
var(23)=0
[State 100000]
type=varset
triggerall = var(10)=[1,9]
trigger1 = var(24) = 1
var(24)=0
[State 100000]
type=varset
triggerall = var(10)=[1,9]
trigger1 = !var(22)
var(21)=0
[State 100000]
type=varset
triggerall = var(10)=[1,9]
trigger1 = var(22) = 1
var(22)=0

;===========================================================================
;var(10)=5~9 ステージ端記憶（変数36-39)

[State -3,画面端前]
type = helper
triggerall = var(10)=[5,9]
trigger1 = roundstate = 2
trigger1 = !NumHelper(110000)
trigger1 = !var(36)
helpertype=normal
name="mae"
stateno=110000
ID=110000
keyctrl=0
pausemovetime=99999999
supermovetime=99999999
persistent = 0
[State -3,画面端後ろ]
type = helper
triggerall = var(10)=[5,9]
trigger1 = roundstate = 2
trigger1 = !NumHelper(120000)
trigger1 = !var(37)
helpertype=normal
name="usiro"
stateno=120000
ID=120000
keyctrl=0
pausemovetime=99999999
supermovetime=99999999
persistent = 0
[State 100000]
type = turn
triggerall = var(10)=[5,9]
trigger1=facing=root,facing=0
trigger1=!var(36)&&!var(37)
[State 100000]
type=varset
triggerall = var(10)=[5,9]
trigger1= numhelper(110000)
var(38) = ceil(helper(110000),rootdist X)
[State 100000]
type=varset
triggerall = var(10)=[5,9]
trigger1=numhelper(120000)
var(39) = ceil(helper(120000),rootdist X)
[State 100000]
type=varset
trigger1 = var(10)=[5,9]
var(36)=ifelse((rootdist X < p2dist X),ceil(var(38)+(rootdist X))*(ifelse(root,facing=0,1,-1)),ceil(var(39)+(rootdist X))*(ifelse(root,facing=0,-1,1)))
[State 100000]
type=varset
trigger1 = var(10)=[5,9]
var(37)=ifelse((rootdist X < p2dist X),ceil(var(39)+(rootdist X))*(ifelse(root,facing=0,-1,1)),ceil(var(38)+(rootdist X))*(ifelse(root,facing=0,1,-1)))
;===========================================================================
;var(10)=10

[State -3]
type = helper
trigger1=var(10)=10
trigger1= roundstate = 2
trigger1= !NumHelper(150000)
helpertype=normal
name="hourai"
stateno=150000
ID=150000
pos=0,0
keyctrl=1
pausemovetime=99999999
supermovetime=99999999
persistent = 0
[State -3]
type = helper
trigger1=var(10)=10
trigger1= roundstate = 2
trigger1= !NumHelper(150001)
helpertype=normal
name="hourai"
stateno=150001
ID=150001
pos=0,0
keyctrl=1
pausemovetime=99999999
supermovetime=99999999
persistent = 0

[State 100000]
type=varset
trigger1=var(10)=10
trigger1=var(22)=0
trigger1=var(23)=0
trigger1=enemynear,ctrl
var(20)=enemynear,numproj
[State 100000]
type=varset
trigger1=var(10)=10
trigger1=var(22)=0
trigger1=var(23)=0
trigger1=enemynear,ctrl
var(21)=enemynear,numhelper


;ダークバリア用フラグ
[State 100000]
type=varset
triggerall=var(10)=10
trigger1=NumHelper(150001)
trigger1=NumHelper(150000)
trigger1=helper(150001),var(1)!=0
trigger1=helper(150000),var(1)=0
var(26)=1
[State 100000]
type=varset
triggerall=var(10)=10
trigger1=NumHelper(150001)
trigger1=NumHelper(150000)
trigger1=helper(150001),var(1)!=0
trigger1=helper(150000),var(1)!=0
var(26)=0
[State 100000]
type=varset
triggerall=var(10)=10
trigger1=NumHelper(150001)
trigger1=NumHelper(150000)
trigger1=helper(150001),var(1)=0
trigger1=helper(150000),var(1)=0
var(26)=0
;弾拳成功or失敗
[State 100000]
type=varset
triggerall=var(10)=10
trigger1=NumHelper(1300)
trigger1=helper(1300),stateno=1310
trigger1=helper(1300),time=1
trigger2=root,movetype=H
trigger2=root,time=1
var(22)=0
[State 100000]
type=varset
triggerall=var(10)=10
trigger1=NumHelper(1300)
trigger1=helper(1300),stateno=1310
trigger1=helper(1300),time=1
trigger2=root,movetype=H
trigger2=root,time=1
var(23)=0
[State 100000]
type=varset
triggerall=var(10)=10
trigger1=NumHelper(1300)
trigger1=helper(1300),stateno=1310
trigger1=helper(1300),time=1
trigger2=root,movetype=H
trigger2=root,time=1
var(24)=0
;;;;;;;;;;;;;;;;;;;;

[State 100000]
type=varset
trigger1=var(10)=10
trigger1=NumHelper(150001)
trigger1=NumHelper(150000)
trigger1=helper(150001),var(1)!=0
trigger1=helper(150000),var(1)!=0
trigger1=!root,inguarddist
trigger1=var(22)<0
trigger1=root,ctrl
var(22)=0
[State 100000]
type=varset
trigger1=var(10)=10
trigger1=NumHelper(150001)
trigger1=NumHelper(150000)
trigger1=!var(22)
trigger1=helper(150000),var(1)!=0
trigger1=!root,inguarddist
trigger1=var(23)<0
var(23)=0
[State 100000]
type=varset
trigger1=var(10)=10
trigger1=NumHelper(150001)
trigger1=NumHelper(150000)
trigger1=!var(22)
trigger1=helper(150000),var(1)!=0
trigger1=!root,inguarddist
var(24)=0

[State 100000]
type=varset
trigger1=var(10)=10
trigger1=var(22)>0
trigger1=NumHelper(150000)
trigger1=NumHelper(150001)
trigger1=!helper(150001),var(1)
var(22)=-1*var(22)
[State 100000]
type=varadd
trigger1=var(10)=10
trigger1=enemynear,numhelper>var(21)||enemynear,numproj>var(20)
trigger1=NumHelper(150000)
trigger1=NumHelper(150001)
trigger1=!root,inguarddist
trigger1=!helper(150000),var(1)
trigger1=helper(150001),var(1)
var(22)=1
[State 100000]
type=varset
trigger1=var(10)=10
trigger1=var(22)<0
trigger1=var(23)>0
trigger1=NumHelper(150000)
trigger1=NumHelper(150001)
trigger1=!helper(150000),var(1)
var(23)=-1*var(23)
[State 100000]
type=varadd
trigger1=var(10)=10
trigger1=var(22)!=0
trigger1=NumHelper(150000)
trigger1=helper(150000),var(1)
var(23)=1
[State 100000]
type=varadd
trigger1=var(10)=10
trigger1=enemynear,numhelper>var(21)||enemynear,numproj>var(20)
trigger1=root,inguarddist
var(24)=1


;不具合防止
[State 100000]
type=varadd
trigger1=var(10)=10
trigger1=var(22)!=0
var(25)=1
[State 100000]
type=varset
trigger1=var(10)=10
trigger1=var(25)>50
trigger1=var(22)<0
trigger1=var(23)=0
var(22)=0
[State 100000]
type=varset
trigger1=var(10)=10
trigger1=var(25)>50
trigger1=var(23)<0
trigger1=var(24)=0||var(25)>70
var(23)=0
[State 100000]
type=varset
trigger1=var(10)=10
trigger1=var(22)=0
var(25)=0





;===========================================================================
;var40-48 中下段、ガード不能記憶

[State 100000]
type=varset
trigger1=root,var(59)=4
var(40)=1
[State 100000]
type=varset
trigger1=root,var(59)=3
var(40)=2
[State 100000]
type=varset
triggerall=root,var(59)
triggerall = p2stateno!=0
trigger1 = p2stateno=var(41)
trigger2 = p2stateno=var(42)
trigger3 = p2stateno=var(43)
trigger4 = p2stateno=var(44)
var(40)=ifelse(var(40)=1,4,3)
[State 100000]
type=varset
triggerall=root,var(59)
trigger1 = enemynear,stateno >= 200
trigger1 = enemynear,stateno!=var(41)&&enemynear,prevstateno!=var(41)
trigger1 = enemynear,stateno!=var(42)&&enemynear,prevstateno!=var(42)
trigger1 = enemynear,stateno!=var(43)&&enemynear,prevstateno!=var(43)
trigger1 = var(41)&&var(42)&&var(43)&&!var(44)
trigger1 = root,movetype=H  || root,statetype=L
trigger1 = root,stateno!=[120,155]
trigger1 = root,prevstateno=[120,155]
var(44)=enemynear,stateno
[State 100000]
type=varset
triggerall=root,var(59)
trigger1 = enemynear,stateno >= 200
trigger1 = enemynear,stateno!=var(41)&&enemynear,prevstateno!=var(41)
trigger1 = enemynear,stateno!=var(42)&&enemynear,prevstateno!=var(42)
trigger1 = var(41)&&var(42)&&!var(43)
trigger1 = root,movetype=H  || root,statetype=L
trigger1 = root,stateno!=[120,155]
trigger1 = root,prevstateno=[120,155]
var(43)=enemynear,stateno
[State 100000]
type=varset
triggerall=root,var(59)
trigger1 = enemynear,stateno >= 200
trigger1 = enemynear,stateno!=var(41)
trigger1 = enemynear,prevstateno!=var(41)
trigger1 = var(41)&&!var(42)
trigger1 = root,movetype=H &&(root,stateno!=[120,155])
trigger1 = root,prevstateno=[120,155]
var(42)=enemynear,stateno
[State 100000]
type=varset
triggerall=root,var(59)
trigger1 = !var(41)
trigger1 = root,movetype=H &&(root,stateno!=[120,155])
trigger1 = root,prevstateno=[120,155]
var(41)=enemynear,stateno
[State 100000]
type=varset
triggerall=root,var(59)
trigger1=var(45)&&!var(46)
trigger1=enemynear,stateno!=var(45)
trigger1=p2stateno=[200,4999]
trigger1=!inguarddist
trigger1=root,movetype=H
trigger1=root,stateno=[5000,5100]
var(46)=enemynear,stateno
[State 100000]
type=varset
triggerall=root,var(59)
trugger1=!var(45)
trigger1=p2stateno=[200,4999]
trigger1=!inguarddist
trigger1=root,movetype=H
trigger1=root,stateno=[5000,5100]
var(45)=enemynear,stateno
[State 100000]
type=varset
triggerall=root,var(59)
triggerall = var(47)
triggerall = p2stateno!=var(47)
triggerall = enemynear,stateno >= 200
triggerall = enemynear,stateno!=var(47)
triggerall = enemynear,prevstateno!=var(47)
triggerall = var(40)=[3,4]
triggerall = root,movetype=H &&(root,stateno!=[120,155])
triggerall = root,prevstateno=[120,155]
triggerall = root,time = 1
trigger1 = p2stateno=var(41)
trigger2 = p2stateno=var(42)
trigger3 = p2stateno=var(43)
trigger4 = p2stateno=var(44)
var(48)=enemynear,stateno
[State 100000]
type=varset
triggerall=root,var(59)
triggerall = var(40)=[3,4]
triggerall = root,movetype=H &&(root,stateno!=[120,155])
triggerall = root,prevstateno=[120,155]
triggerall = root,time = 1
trigger1 = p2stateno=var(41)
trigger2 = p2stateno=var(42)
trigger3 = p2stateno=var(43)
trigger4 = p2stateno=var(44)
var(47)=enemynear,stateno
[State -3]
type = VarSet
triggerall=root,var(59)
triggerall=enemynear,movetype!=I
trigger1 = var(40)=3
var(40) = 1
[State -3]
type = VarSet
triggerall=root,var(59)
triggerall=var(1)>=4
triggerall=enemynear,movetype!=I
trigger1 = var(40)=4
var(40) = 2


;===========================================================================
;var(49)リバーサルガード

[State -3]
type = VarSet
triggerall=root,var(59)
trigger1 = var(56)>=1
Trigger1 = root,time=1
trigger1 = root,movetype=H &&(root,stateno!=[120,155])
var(49) = var(56)


;===========================================================================
;var(50〜53)いちおー飛び道具対策


;ラウンド開始直後
[State 100000]
type=varset
trigger1=var(55)=0
var(52)=enemynear,numhelper
[State 100000]
type=varset
trigger1 = var(55)=0
var(53)=enemynear,numproj
[State 100000]
type=varset
trigger1=var(54)>=0&&var(55)=0
;trigger1=roundstate=1||roundstate=2&&time<5
trigger1=root,ctrl
var(55)=-60

[State 100000]
type=varadd
trigger1=roundstate=2
trigger1=var(55)<-1
var(55)=1

[State 100000]
type=varset
trigger1=roundstate=2
trigger1=var(55)>=1
trigger1=enemynear,numhelper=var(52)
trigger2 = var(55)=[-2,-1]
var(55)=1


;初期変数セット
[State 100000]
type=varset
trigger1=!var(50)
trigger1=!var(52)
trigger1=root,prevstateno=[190,194]
var(52)=enemynear,numhelper
[State 100000]
type=varset
trigger1 = !var(51)
trigger1 = !var(53)
trigger1=root,prevstateno=[190,194]
var(53)=enemynear,numproj

;フラグ消去（東方のキャンセル対策に確認ヘルパー）
[State -3]
type = null;helper
trigger1=!NumHelper(36)
trigger1=(root,inguarddist=0)*(enemynear,movetype=I)*(enemynear,stateno=[40,119])
helpertype=normal
name="danmaku"
stateno=36
ID=36
pos=0,0
keyctrl=1
pausemovetime=99999999
supermovetime=99999999
persistent = 0

[State 100000]
type=varset
trigger1=numhelper(36)
trigger1=helper(36),var(0)=0
trigger1=(root,inguarddist=0)*(enemynear,movetype=I)*(enemynear,stateno=[40,119])
var(52)=enemynear,numhelper



;パワー溜め感知
[State 100000]
type=varset
trigger1=roundstate=2
trigger1=var(55)>0
trigger1=enemynear,numhelper>var(52)
var(54)=enemynear,stateno

[State 100000]
type=varadd
trigger1=roundstate=2
trigger1=var(54)>0
trigger1=var(55)>0
trigger1=enemynear,numhelper>var(52)
trigger1=enemynear,stateno=var(54)
trigger1=enemynear,power>var(57)
var(55)=1


;現在のヘルパー数参照
[State 100000]
type=varadd
trigger1=var(55)>0
triggerall=roundstate = 2
trigger1=enemynear,numhelper>var(52)
var(50)=1
[State 100000]
type=varset
trigger1=enemynear,numhelper=var(52)
trigger2=root,stateno=[150,155]
trigger3=var(50) > 60
trigger4=enemynear,movetype=H||root,statetype=A;不具合防止
trigger5=var(55)!=[1,5]
var(50)=0
[State 100000]
type=varadd
trigger1=enemynear,numproj>var(53)
var(51)=1
[State 100000]
type=varset
triggerall=roundstate = 2
trigger1=enemynear,numproj=var(53)
trigger2=root,stateno=[150,155]
trigger3=var(51) > 60
var(51)=0
[State 100000]
type=varset
trigger1 = !var(50)
trigger1=enemynear,ctrl||root,stateno=[150,155]
var(52)=enemynear,numhelper
[State 100000]
type=varset
trigger1 = !var(51)
trigger1=enemynear,ctrl||root,stateno=[150,155]
var(53)=enemynear,numproj


;===========================================================================
;var(56)起き上がり投げ無敵F(一応リバサ暴れ防止も兼ねる）

[State -3]
type = VarSet
trigger1 = var(56)>=0
trigger1 = root,stateno=5120
Trigger1 = root,animtime=-1
var(56) = 12
[State -3]
type = VarSet
trigger1 = enemynear,stateno=5120
Trigger1 = enemynear,animtime=-1
var(56) = -12
[State -3]
type = Varadd
trigger1 = var(56)!=0
var(56) = ifelse(var(56)>0,-1,1)

;===========================================================================
;var(57) 相手パワー参照

[State 100000]
type=varset
trigger1=roundstate=2
trigger1=enemynear,stateno!=var(54)
trigger2 =p2movetype=H
var(58)=0

;使い回せるvarはできるだけ節約
[State 100000]
type=varset
trigger1=roundstate=2
trigger1=var(55)>0
trigger1=enemynear,power>var(57)
var(54)=enemynear,stateno

[State 100000]
type=varadd
trigger1=roundstate=2
trigger1=enemynear,stateno=var(54)
trigger1=enemynear,power>var(57)
var(58)=1


;1F前のpowerを記憶することで判定する
[State 100000]
type=varset
trigger1=1
var(57)=enemynear,power


;===========================================================================
;var(59) ヘルパー式起動法

[State 100000]
type=varset
trigger1=(command="a"&&root,command="a")+(command="b"&&root,command="b")+(command="c"&&root,command="c")+(command="x"&&root,command="x")+(command="y"&&root,command="y")+(command="z"&&root,command="z")+(command="start"&&root,command="start")
trigger2=(command="up"&&root,command="up")+(command="down"&&root,command="down")+(command="fwd"&&root,command="fwd")+(command="back"&&root,command="back")
trigger3=root,var(59)
trigger4=(root,power=root,powermax)*(enemynear,power=enemynear,powermax)*(root,life=root,lifemax)*(enemynear,life=enemynear,lifemax)
var(59)=-1

[State 100000]
type=varset
triggerall=var(59)=0
;trigger1=root,movetype!=H
;trigger1=(root,movetype=A)-(HitPauseTime=0)
trigger1=(command!="a"&&root,command="a")+(command!="b"&&root,command="b")+(command!="c"&&root,command="c")+(command!="x"&&root,command="x")+(command!="y"&&root,command="y")+(command!="z"&&root,command="z")+(command!="start"&&root,command="start")
trigger2=(command!="up"&&root,command="up")+(command!="down"&&root,command="down")+(command!="fwd"&&root,command="fwd")+(command!="back"&&root,command="back")
;trigger2=root,stateno<105
;trigger2=root,prevstateno!=[120,155]
;trigger2=root,p2dist X >0;コマンド逆になるから防止（facingが機能してないっぽい？）
;trigger2=root,stateno!=52&&root,prevstateno!=52&&root,prevstateno!=20;飛び越えた後の着地あたりが怪しい
;Trigger2=facing= root,facing
;trigger2=(command!="up"&&root,command="up")+(!root,inguarddist&&command!="down"&&root,command="down")+(command!="fwd"&&root,command="fwd")+(!root,inguarddist&&command!="back"&&root,command="back")
;trigger2=(command!="up"+root,command="up")+(command!="down"+root,command="down")+(command!="fwd"+root,command="fwd")+(command!="back"+root,command="back")!=4
;trigger2=(command!="up"+root,command="up")+(command!="down"+root,command="down")+(command!="fwd"+root,command="fwd")+(command!="back"+root,command="back")!=2
;Trigger3=facing!=root,facing
;trigger3=(command!="up"&&root,command="up")+(command!="down"&&root,command="down")+(command!="fwd"&&root,command="back")+(command!="back"&&root,command="fwd")
var(59)=1



;===========================================================================
;不具合防止
[State 100000]
type = SelfState
trigger1 = !IsHelper
Value = 0
[State 100000]
type = NotHitBy
trigger1 = IsHelper
value = SCA
[State 100000]
type = assertspecial
trigger1 = 1
flag = invisible
;flag2 = noautoturn


[Statedef 36]
Type = A
Ctrl = 0
Movetype = I
Physics = N

[State 36]
type = SelfState
trigger1 = !IsHelper
Value = 0
[State 36]
type = NotHitBy
trigger1 = IsHelper
value = SCA
[State 100000]
type = assertspecial
trigger1 = 1
flag = invisible
;flag2 = noautoturn

[State -1, PosAdd] 
type = PosAdd 
trigger1 = 1 
x = ceil(rootDist X) +ceil(root,p2dist X/2)

[state 36]
type = varset
Trigger1 = time=0
var(0)=0

[state 36]
type = varset
Trigger1 = inguarddist
var(0)=1

[state 36]
type = destroyself
trigger1 = enemynear,stateno!=[40,119]





[Statedef 110000]
Type = A
Ctrl = 0
Movetype = I
Physics = N
[state 120000]
type = varset
Trigger1 = time=0
var(0)=0
[state 110000]
type = velset
Trigger1 = 1;root,numprojID(110000) > 0
x = 10
[State 100000]
type = SelfState
trigger1 = !IsHelper
Value = 0
[State 1825]
type = assertspecial
trigger1 = 1
flag = invisible
[State 10000]
type = NotHitBy
value = SCA
trigger1 = 1
[state 110000]
type=Projectile
trigger1 = time = 0
trigger1 = numprojID(110000) < 1
velocity = 10,0
projID = 110000
projanim = 0;110000;万が一被ったら変更
projhits = 9999
projpriority = 9999
offset = 0,9999
projstagebound = const(size.ground.front)
projedgebound = 100000
projremovetime = -1
supermovetime = 9999
pausemovetime = 9999
[state 110000]
type = velset
trigger1 = vel X > 0
Trigger1 = root,numprojID(110000) = 0
x = 0
[state 110000]
type=null;Projectile;そもそも確認用に出す必要が無かった
trigger1 = time > 0
trigger1 = vel X = 0
trigger1 = numprojID(110000) =0
trigger1 = numprojID(110001) <0
velocity = 0,0
projID = 110001
projanim = 0;110001;万が一被ったら変更
projhits = 9999
projpriority = 9999
offset = 0,9999
projremovetime = -1
supermovetime = 9999
pausemovetime = 9999
[state 110000]
type = varset
trigger1 = vel X = 0
Trigger1 = root,numprojID(110000) = 0
trigger1 = NumHelper(110000)
trigger1 = vel X= 0
var(0) = ceil(rootdist X)
[state 110000]
type = destroyself
trigger1 = time > 0
trigger1 = var(0)
trigger1 = NumHelper(35)
trigger1 = helper(35),var(36)

[Statedef 120000]
Type = A
Ctrl = 0
Movetype = I
Physics = N
Sprpriority = 1
[state 120000]
type = varset
Trigger1 = time=0
var(0)=0
;逆向きに飛んで貰う
[State 100000]
type = null;turn
trigger1 = NumHelper(35)
trigger1=facing=helper(35),facing
;不具合防止
[State 100000]
type = SelfState
trigger1 = !IsHelper
Value = 0
[State 1825]
type = assertspecial
trigger1 = 1
flag = invisible
[State 10000]
type = NotHitBy
value = SCA
trigger1 = 1
[state 110000]
type = velset
;trigger1 = helper(110000),facing
Trigger1 = 1;root,numprojID(120000) > 0
x = -10
[state 110000]
type=Projectile
;trigger1 = helper(110000),facing
trigger1 = time=0;numprojID(120000) < 1
velocity = -10,0
projID = 120000
projanim = 0;110000;万が一被ったら変更
projhits = 9999
projpriority = 9999
offset = 0,9999
projstagebound = const(size.ground.front);front
projedgebound = 100000
projremovetime = -1
supermovetime = 9999
pausemovetime = 9999
[state 110000]
type = velset
trigger1 = vel X < 0
Trigger1 = root,numprojID(120000) = 0
x = 0
[state 110000]
type = varset
trigger1 = time>0
trigger1 = vel X= 0
Trigger1 = root,numprojID(120000) = 0
trigger1 = NumHelper(120000)
var(0) = ceil(rootdist X)
[state 110000]
type = destroyself
trigger1 = time > 0
trigger1 = var(0)
trigger1 = NumHelper(35)
trigger1 = helper(35),var(37)
;===========================================================================
[StateDef 150000]
physics=N
ctrl=0
[State 100000]
type=nothitby
value = SCA
trigger1 = 1
[State 100000]
type=varset
trigger1=inguarddist
var(1)=1
[State 100000]
type=varset
trigger1=!inguarddist
var(1)=0
[State 100000]
type = turn
trigger1 = p2dist X < 0
[State -1, PosAdd] 
type = PosAdd 
trigger1 = 1
x = ceil(rootDist X)+ceil(root,p2dist X/3)
[State 100000]
type = SelfState
trigger1 = !IsHelper
Value = 0
[State 100000]
type = NotHitBy
trigger1 = IsHelper
value = SCA
[State 100000]
type = assertspecial
trigger1 = 1
flag = invisible
;flag2 = noautoturn
[StateDef 150001]
physics=N
ctrl=0
[State 100000]
type=nothitby
value = SCA
trigger1 = 1
[State 100000]
type=varset
trigger1=inguarddist
var(1)=1
[State 100000]
type=varset
trigger1=!inguarddist
var(1)=0
[State 100000]
type = turn
trigger1 = p2dist X < 0
[State -1, PosAdd] 
type = PosAdd 
trigger1 = 1 
x = ceil(rootDist X) +ceil(root,p2dist X*2/3)
[State 100000]
type = SelfState
trigger1 = !IsHelper
Value = 0
[State 100000]
type = NotHitBy
trigger1 = IsHelper
value = SCA
[State 100000]
type = assertspecial
trigger1 = 1
flag = invisible
;flag2 = noautoturn
;===========================================================================

; Jump Start
[Statedef 39]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = 1
sysvar(1) = 1


[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
; Jump Start
[Statedef 38]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0


[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------



;---------------------------------------------------------------------------
;サーキットスパーク
[Statedef 950]
Type     = S
MoveType = A
Physics  = S
Anim     = 950
Ctrl     = 0
VelSet = 0,0
PowerAdd = 0
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = posSet
;Trigger1 = palno = 12
;Trigger1 = helper(5901),var(54) = 1
Trigger1 = Time = 0
y = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 12

[State -1]
Type = PlaySnd
Trigger1 = Time = 1
Value = s5120, 2
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = EnvShake
Trigger1 = Time = 6
Time  = 24
Ampl  = 5
Freq  = 90

[State -1]
Type = Explod
Trigger1 = Time = 6
Anim = 10950
ID = 10950
Pos = 0,0
PosType = P1
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
TriggerAll = !(palNo = 12 && helper(5901),var(53) = 1)
Trigger1 = RoundState <= 2
Trigger1 = Time = 11
Trigger1 = Var(13) <= 0
V = 51
Value = 177
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PowerSet
Trigger1 = RoundState <= 2
Trigger1 = Time = 11
Trigger1 = Var(13) > 0
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = RoundState <= 2
Trigger1 = Time = 11
Trigger1 = Var(13) > 0
V = 13
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 10
Value = s950, 0
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PalFX
Trigger1 = Time >= 8
Time = 16
Add = 255-Var(7),255-Var(7),255-Var(7)
IgnoreHitPause = 0
Peresistent = 1

[State -1]
Type = VarAdd
Trigger1 = Time = [12,24]
V = 7
Value = 20

[State -1]
Type = BGPalFX
Trigger1 = Time >= 0
Time = 1
Add = 0-Var(8),0-Var(8),0-Var(8)
IgnoreHitPause = 0
Peresistent = 1

[State -1]
Type = VarAdd
Trigger1 = Time = [0,25]
V = 8
Value = 5

[State -1]
Type = VarAdd
Trigger1 = AnimTime >= -6
V = 8
Value = -20

[State -1]
Type = Explod
TriggerAll = Var(51) = 0
TriggerAll = Var(0)/1000%10 = 0
TriggerAll = NumExplod(25200) = 0
Trigger1 = Time = 11
Anim = 25200
PosType = Left
Pos = 160, 30
BindTime = -1
RemoveTime = -2
Ownpal = 1
OnTop = 1
IgnoreHitPause = 1
SuperMoveTime = 99999
PauseMoveTime = 99999
SprPriority = 8
ID = 25200
Persistent = 0

[State -1]
Type = VarRangeSet
Trigger1 = AnimTime = 0
First = 7
Last = 8
Value = 0

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = animelem = 4
Attr = S, NT
Damage = Ceil(FVar(0)*(10-Var(4)%2))
AnimType = Hard
HitFlag = MAFD
Priority = 4, Hit
PauseTime = 1, 1+Var(41)
SparkNo = -1
Guard.SparkNo = -1
SparkXY = -Random%20, -50-Random%20
HitSound = s10, IfElse(Var(26)=2,2,IfElse(Var(26)=3,22,12))
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = High
Air.Type = High
Ground.SlideTime = 10
Ground.HitTime  = 10
Ground.Velocity = -1.8,-10
Air.Velocity = IfElse(Var(50)=1,-1.8,-5),IfElse(Var(50)=1,-10,FVar(25))
Down.Velocity = -6,-2.5
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff =0
Down.CornerPush.VelOff = 0
YAccel = .48
Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = 42
GetPower = 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11)
EnvShake.Time = 15
EnvShake.Ampl = 5
EnvShake.Freq = 90

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = AttackDist
Trigger1 = 1
Value = 30
Persistent = 1

[State -1] 
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1
;---------------------------------------------------------------------------
;サーキットスパーク
[Statedef 951]
Type     = A
MoveType = A
Physics  = N
Anim     = 951
Ctrl     = 0
VelSet = 0,0
PowerAdd = 0
Facep2 = 1

[State -1]
Type = VelSet
Trigger1 = Time <= 29
Y = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 12

[State -1]
Type = PlaySnd
Trigger1 = Time = 1
Value = s5120, 2
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = EnvShake
Trigger1 = Time = 6
Time  = 24
Ampl  = 5
Freq  = 90

[State -1]
Type = Explod
Trigger1 = Time = 6
Anim = 10950
ID = 10950
Pos = 0,0
PosType = P1
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
TriggerAll = !(palNo = 12 && helper(5901),var(53) = 1)
Trigger1 = RoundState <= 2
Trigger1 = Time = 11
Trigger1 = Var(13) <= 0
V = 51
Value = 177
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PowerSet
Trigger1 = RoundState <= 2
Trigger1 = Time = 11
Trigger1 = Var(13) > 0
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = RoundState <= 2
Trigger1 = Time = 11
Trigger1 = Var(13) > 0
V = 13
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 10
Value = s950, 0
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PalFX
Trigger1 = Time >= 8
Time = 16
Add = 255-Var(7),255-Var(7),255-Var(7)
IgnoreHitPause = 0
Peresistent = 1

[State -1]
Type = VarAdd
Trigger1 = Time = [12,24]
V = 7
Value = 20

[State -1]
Type = BGPalFX
Trigger1 = Time >= 0
Time = 1
Add = 0-Var(8),0-Var(8),0-Var(8)
IgnoreHitPause = 0
Peresistent = 1

[State -1]
Type = VarAdd
Trigger1 = Time = [0,25]
V = 8
Value = 5

[State -1]
Type = VarAdd
Trigger1 = AnimTime >= -6
V = 8
Value = -20

[State -1]
Type = Explod
TriggerAll = Var(51) = 0
TriggerAll = Var(0)/1000%10 = 0
TriggerAll = NumExplod(25200) = 0
Trigger1 = Time = 11
Anim = 25200
PosType = Left
Pos = 160, 30
BindTime = -1
RemoveTime = -2
Ownpal = 1
OnTop = 1
IgnoreHitPause = 1
SuperMoveTime = 99999
PauseMoveTime = 99999
SprPriority = 8
ID = 25200
Persistent = 0

[State -1]
Type = VarRangeSet
Trigger1 = AnimTime = 0
First = 7
Last = 8
Value = 0

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Time = animelem = 5
Attr = S, NT
Damage = Ceil(FVar(0)*(10-Var(4)%2))
AnimType = Hard
HitFlag = MAFD
Priority = 4, Hit
PauseTime = 1, 1+Var(41)
SparkNo = -1
Guard.SparkNo = -1
SparkXY = -Random%20, -50-Random%20
HitSound = s10, IfElse(Var(26)=2,2,IfElse(Var(26)=3,22,12))
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = High
Air.Type = High
Ground.SlideTime = 10
Ground.HitTime  = 10
Ground.Velocity = -1.8,-10
Air.Velocity = IfElse(Var(50)=1,-1.8,-5),IfElse(Var(50)=1,-10,FVar(25))
Down.Velocity = -6,-2.5
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff =0
Down.CornerPush.VelOff = 0
YAccel = .48
Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = 42
GetPower = 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11)
EnvShake.Time = 15
EnvShake.Ampl = 5
EnvShake.Freq = 90

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = AttackDist
Trigger1 = 1
Value = 30
Persistent = 1

[State -1] 
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 51
Ctrl = 1

;---------------------------------------------------------------------------
;強制開放
[Statedef 990]
Type     = S
MoveType = A
Physics  = S
Anim     = 990
Ctrl     = 0
VelSet = 0,0
PowerAdd = 0
Facep2 = 1

[State -1]
Type = Varadd
TriggerAll = var(13) = 1
Trigger1 = time = 0
V = 47
Value = 1

[State -1] 
Type = null;ChangeState
TriggerAll = var(42) = 2
TriggerAll = var(13) = 1
Trigger1 = time = 0
Value = 194

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 0
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 20

[State 1000,***]
Trigger1 = roundno > 2
Trigger1 = Var(47) > 3
Trigger1 = palno != 12
type = null;AssertSpecial
trigger1 = 1
flag = nobg

[State -1]
Type = null;Explod
Trigger1 = roundno > 2
Trigger1 = Var(47) > 3
Trigger1 = Time = 10
Anim = 10950
ID = 10950
Pos = 0,0
PosType = P1
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = EnvShake
Trigger1 = Time = 15
Time  = 24
Ampl  = 5
Freq  = 90

[State -1]
Type = Helper
Trigger1 = Time = 15
StateNo = 10990
ID = 10990
Pos = 0,15
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = Time = 15
StateNo = 10991
ID = 10991
Pos = -5,-80
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarRandom
Trigger1 = Time = 1
V = 1
Range = 0,1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Var(1) = 0
Trigger1 = Time = 1
Value = s5120, 2
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Var(1) = 1
Trigger1 = Time = 1
Value = s990, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 15
Value = sIfElse((Var(26)=[2,3]),990,950), IfElse((Var(26)=[2,3]),1,0)
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PalFX
Trigger1 = Time >= 12
Time = 16
Add = 255-Var(8),255-Var(8),255-Var(8)
IgnoreHitPause = 0
Peresistent = 1

[State -1]
Type = VarAdd
Trigger1 = Time >= 16
Trigger1 = Time <= 28
V = 8
Value = 20

[State -1]
Type = VarSet
Trigger1 = RoundState <= 2
Trigger1 = Var(13) = 1
Trigger1 = Time = 19
V = 13
Value = -1

[State -1]
Type = VarSet
Trigger1 = RoundState <= 2
Trigger1 = Var(13) = 0
Trigger1 = Time = 19
V = 14
Value = 1

[State -1]
Type = VarSet
TriggerAll = Time = 19
Trigger1 = Var(14) = 1
V = 46
Value = 30
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
TriggerAll = Time = 19
Trigger1 = Var(13) = -1
V = 46
Value = 60
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
TriggerAll = Time = 19
Trigger1 = Var(13) = -1
Trigger2 = Var(14) = 1
V = 49
Value = (Power)
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
TriggerAll = Var(51) = 0
TriggerAll = Var(0)/1000%10 = 0
TriggerAll = NumExplod(25200) = 0
Trigger1 = Time = 19
Anim = 25200
PosType = Left
Pos = 160, 30
BindTime = -1
RemoveTime = -2
Ownpal = 1
OnTop = 1
IgnoreHitPause = 1
SuperMoveTime = 99999
PauseMoveTime = 99999
SprPriority = 8
ID = 25200
Persistent = 0

[State -1]
Type = AfterImage
Trigger1 = Var(13) = -1
Trigger1 = Time = 19
Time = 99999
Trans = Add
Length   = 10
TimeGap  = 1
FrameFap = 1
PalBright = 0 , 0 , 0
PalContrast = 150 , 150 , 150
PalAdd = 100 , 100 , 0
PalMul = .5 , .5 , .5
IgnoreHitPause = 1
Peresistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = AfterImage
Trigger1 = Var(13) = 0
Trigger1 = Time = 19
Time = 999999
Trans = Add
Length   = 10
TimeGap  = 1
FrameFap = 1
PalBright = 0 , 0 , 0
PalContrast = 50 , 50 , 255
PalAdd = 0 , 0 , 0
PalMul = .5 , .5 , .5
IgnoreHitPause = 1
Peresistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = AnimTime = 0
V = 8
Value = 0

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(50) = 1
Trigger1 = animelem = 4
Attr = S, NA
Damage = Ceil(FVar(0)*(10-Var(4)%2))
AnimType = Hard
HitFlag = MAFD
Priority = 4, Hit
PauseTime = 1, 1+Var(41)
SparkNo = -1
Guard.SparkNo = -1
SparkXY = -Random%20, -50-Random%20
HitSound = s10, IfElse(Var(26)=2,2,IfElse(Var(26)=3,22,12))
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = High
Air.Type = High
Ground.SlideTime = 10
Ground.HitTime  = 10
Ground.Velocity = -5
Air.Velocity = -3,-3.2
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
P2Facing = 1
Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
GetPower = 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11)
P2StateNo = 5600
ID = 5600
EnvShake.Time = 15
EnvShake.Ampl = 5
EnvShake.Freq = 90

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(50) = 2
Trigger1 = animelem = 4
Attr = S, NA
Damage = Ceil(FVar(0)*(10-Var(4)%2))
AnimType = Hard
HitFlag = MAFD
Priority = 4, Hit
PauseTime = 1, 1+Var(41)
SparkNo = -1
Guard.SparkNo = -1
SparkXY = -Random%20, -50-Random%20
HitSound = s10, IfElse(Var(26)=2,2,IfElse(Var(26)=3,22,12))
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = High
Air.Type = High
Ground.SlideTime = 10
Ground.HitTime  = 10
Ground.Velocity = -5
Air.Velocity = -3*Var(50),IfElse(Var(50)=1,-3.2,FVar(25))
Down.Velocity = -6,-2.5
Ground.CornerPush.VelOff = -6
Air.CornerPush.VelOff = -4*Var(50)
Down.CornerPush.VelOff = -8
YAccel = .48
Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
GetPower = 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11)
ID = 5600
EnvShake.Time = 15
EnvShake.Ampl = 5
EnvShake.Freq = 90

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = AttackDist
Trigger1 = 1
Value = 30
Persistent = 1

[State -1] 
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; 未定
[Statedef 2000]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
VelSet = 0,0
Anim = 2000
SprPriority = 2
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 34

[State -1]
Type = SuperPause
Trigger1 = Time = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = Time = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = Time = 1
StateNo = IfElse(Var(26)=3,6015,6010)
ID = 10001
Name = "EX_Effect"
Pos = 18,-40
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PowerAdd
Trigger1 = Time = 8
Trigger1 = Var(13) >= 0
Value = -1000

[State -1]
Type = PowerAdd
TriggerAll = Time = 8
Trigger1 = Var(13) = -1
Value = -500

[State -1]
Type = PlaySnd
Trigger1 = Time = 1
Value = s1100, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 5
Value = s1000, 1
Channel = 3

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 5
Value = s2000, 0
Channel = 4

[State -1]
Type = Explod
Trigger1 = AnimElem = 5
ID = 1005
PosType = P1
Pos = 0,0
Anim = 1005
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 1
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = EnvShake
Trigger1 = AnimElem = 5
Time  = 8
Ampl  = 5
Freq  = 90

[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = MoveHit = 1
Trigger1 = FVar(1) > 0.80
FV = 1
Value = 0.80
IgnoreHitPause = 1

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 5
Attr = S, SA
Damage = Ceil(FVar(0)*(180-Var(4)%2))
AnimType = Up
HitFlag = M
GuardFlag = M
Priority = 2, Hit
PauseTime = 1, 9+Var(41)
Guard.PauseTime = 1,9
GuardSound = s120, IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -Random%20
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = Low
Air.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0,-11
Guard.Velocity = -7
Air.Velocity = -1*Var(50),IfElse(Var(50)=1,-6,FVar(25))
Down.Velocity = -2,-2.5
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = IfElse(Var(50)=1,0,-4)
Down.CornerPush.VelOff = -3
Guard.CornerPush.VelOff = -8
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = 53
GetPower = 0, 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11), Ceil(IfElse(FVar(16)=0,1,FVar(16))*5)

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = AttackDist
Trigger1 = 1
Value = 320
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; 崩拳EX
[Statedef 2100]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
VelSet = 0,0
Anim = 2100
SprPriority = 2
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = [0,3]
Trigger2 = Time = [44,45]
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = NotHitBy
Trigger1 = AnimElem = 7
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 34

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 7
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 7
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 7
StateNo = IfElse(Var(26)=3,6015,6010)
ID = 10001
Name = "EX_Effect"
Pos = 10,-48
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PowerAdd
Trigger1 = Time = 8
Trigger1 = Var(13) >= 0
Value = -1000

[State -1]
Type = PowerAdd
TriggerAll = Time = 8
Trigger1 = Var(13) = -1
Value = -500

[State -1]
Type = VelSet
Trigger1 = Time = [45,48]
X = 9.5

[State -1]
Type = VelSet
Trigger1 = Time = 49
X = 0

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 7
Value = s2100, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 10
Value = s110, 0
Channel = 3

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 11
Value = s30, IfElse((Var(26)=[2,3]),2,12)
Channel = 2

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 10
Value = s2000, 0
Channel = 6

[State -1]
Type = Explod
Trigger1 = AnimElem = 11
ID = 1105
PosType = P1
Pos = 5,-5
Anim = 1105
Ownpal = 1
SprPriority = 4
IgnoreHitPause = 1
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = EnvShake
Trigger1 = AnimElem = 10
Time  = 8
Ampl  = 5
Freq  = 90

[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = MoveHit = 1
Trigger1 = FVar(1) > 0.01
FV = 1
Value = 0.70*FVar(1)
IgnoreHitPause = 1

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
TriggerAll = AnimElem = 12
Trigger1 = Var(50) = 1
Attr = S, SA
Damage = Ceil(FVar(0)*(180-Var(4)%2)),Ceil(FVar(1)*18)
AnimType = Hard
HitFlag = MAFD
GuardFlag = MA
Priority = 3, Hit
PauseTime = 10, 10+Var(41)
Guard.PauseTime = 10,10
HitSound = s10, IfElse(Var(26)=2,2,IfElse(Var(26)=3,22,12))
GuardSound = s120, IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -30-Random%20
SparkNo = -1
Guard.SparkNo = s161
Ground.Type = Low
Air.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1,-6.6
Guard.Velocity = -8
Air.Velocity = -1*Var(50),IfElse(Var(50)=1,-6.2,FVar(25))
AirGuard.Velocity = -2,IfElse(Var(50)=1,-2.8,FVar(25))
Down.Velocity = -4,-2.5
Ground.CornerPush.VelOff = -2
Air.CornerPush.VelOff = -2*Var(50)
Down.CornerPush.VelOff = -5
Guard.CornerPush.VelOff = -9
P2StateNo = 5600
ID = 5600
P2Facing = 1
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
GetPower = 0, 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11), Ceil(IfElse(FVar(16)=0,1,FVar(16))*5)

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
TriggerAll = AnimElem = 12
Trigger1 = Var(50) = 2
Attr = S, SA
Damage = Ceil(FVar(0)*(180-Var(4)%2)),Ceil(FVar(1)*18)
AnimType = Hard
HitFlag = MAFD
GuardFlag = MA
Priority = 3, Hit
PauseTime = 10, 10+Var(41)
Guard.PauseTime = 10,10
HitSound = s10, IfElse(Var(26)=2,2,IfElse(Var(26)=3,22,12))
GuardSound = s120, IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -30-Random%20
SparkNo = -1
Guard.SparkNo = s161
Ground.Type = Low
Air.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1,-6.6
Guard.Velocity = -8
Air.Velocity = -1*Var(50),IfElse(Var(50)=1,-6.2,FVar(25))
AirGuard.Velocity = -2,IfElse(Var(50)=1,-2.8,FVar(25))
Down.Velocity = -4,-2.5
Ground.CornerPush.VelOff = -2
Air.CornerPush.VelOff = -2*Var(50)
Down.CornerPush.VelOff = -5
Guard.CornerPush.VelOff = -9
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = 30
GetPower = 0, 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11), Ceil(IfElse(FVar(16)=0,1,FVar(16))*5)

[State -1]
Type = Explod
Trigger1 = MoveHit
ID = 1106
PosType = P1
Pos = 0,0
Anim = 1106
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; 宝石魔術EX
[Statedef 2200]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
VelSet = 0,0
Anim = 2200
SprPriority = 2
Facep2 = 1

[State -1]
Type = ChangeState
Trigger1 = Time = 0
Trigger1 = PalNo = 12
Trigger1 = Helper(5901),Var(49) = 1
Value = 2250

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = AnimElem = 3
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 35

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 3
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 3
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 3
StateNo = IfElse(Var(26)=3,6015,6010)
ID = 10002
Name = "EX_Effect"
Pos = 0,-60
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PowerAdd
Trigger1 = Time = 8
Trigger1 = Var(13) >= 0
Value = -1000

[State -1]
Type = PowerAdd
TriggerAll = Time = 8
Trigger1 = Var(13) = -1
Value = -500

[State -1]
Type = VarRandom
Trigger1 = AnimElem = 4
V = 1
Range = 0,1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s2200, 2
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 4
Value = s2200, 0+var(1)
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 4
Value = s1505, 0
Channel = 5
Volume = 255
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 3
Anim = 2505
ID = 2505
PosType = P1
Pos = 35,-70
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 1
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 4
Anim = 2506
ID = 2506
PosType = P1
Pos = 35,-70
Ownpal = 1
SprPriority = 4
IgnoreHitPause = 1
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 4
Anim = 2504
ID = 2504
PosType = P1
Pos = 35,-70
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 1
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = null;Helper
Trigger1 = AnimElem = 3
StateNo = 2508
ID = 2505
PosType = P1
Pos = 35,-70
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -2]
type = RemoveExplod
Trigger1 = AnimElem = 4
Trigger1 = Floor(Fvar(38))%10 = 0
ID = 2530
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -2]
type = RemoveExplod
Trigger1 = AnimElem = 4
Trigger1 = Floor(Fvar(38)) != 0
ID = 2540
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Varadd
Trigger1 = AnimElem = 4
Trigger1 = Fvar(38) != 0
FV = 38
Value = -1
IgnoreHitPause = 1
Persistent = 0

[State -2]
Type = Explod
TriggerAll = Var(13) != -1
Trigger1 = NumExplod(2530) = 0
Anim = 2530+Floor(Fvar(38)/10)
PosType = Left
Pos = IfElse(TeamSide=1,22,302), 211-Floor(Var(0)/100000)
BindTime = -1
RemoveTime = -1
Ownpal = 1
Scale = 0.5,0.5
IgnoreHitPause = 1
SuperMoveTime = 99999
PauseMoveTime = 99999
SprPriority = IfElse(Var(26)=3,6,7)
ID = 2530

[State -2]
Type = Explod
TriggerAll = Var(13) != -1
Trigger1 = NumExplod(2540) = 0
Anim = 2530+Floor(Fvar(38))%10
PosType = Left
Pos = IfElse(TeamSide=1,28,308), 211-Floor(Var(0)/100000)
BindTime = -1
RemoveTime = -1
Ownpal = 1
Scale = 0.5,0.5
IgnoreHitPause = 1
SuperMoveTime = 99999
PauseMoveTime = 99999
SprPriority = IfElse(Var(26)=3,6,7)
ID = 2540

[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
;TriggerAll = Var(50) = 1
Trigger1 = Time = 42
Trigger2 = Time = 47
Trigger3 = Time = 52
Trigger4 = Time = 57
Trigger5 = Time = 62
Trigger6 = Time = 67
Trigger7 = Time = 72
Trigger8 = Time = 77
Trigger9 = Time = 82
Attr = S, HA
AnimType  = Hard
Damage    = Ceil(FVar(0)*(30-Var(4)%2))
HitFlag = MAFD
GuardFlag = MA
Priority = 4, Hit
PauseTime = 1,15+Var(41)
Guard.PauseTime = 1,1
HitSound   = s10,IfElse(Var(26)=2,5,IfElse(Var(26)=3,25,15))
GuardSound = s120,IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -60-Random%20
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1
Guard.Velocity = -1
Air.Velocity = -1.4*Var(50),IfElse(Var(50)=1,-7.4,FVar(25))
Down.Velocity = -2,-2.5
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
YAccel = .48
P2StateNo = 5600
ID = 5600
P2Facing = 1
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = 30
GetPower = 0,0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11), Ceil(IfElse(FVar(16)=0,1,FVar(16))*5)

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; 散財魔術
[Statedef 2250]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
VelSet = 0,0
Anim = 2200
SprPriority = 2
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 3
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 3
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 3
StateNo = IfElse(Var(26)=3,6015,6010)
ID = 10002
Name = "EX_Effect"
Pos = 0,-60
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PowerAdd
Trigger1 = Time = 8
Trigger1 = Var(13) >= 0
Value = -1000

[State -1]
Type = PowerAdd
TriggerAll = Time = 8
Trigger1 = Var(13) = -1
Value = -500

[State -1]
Type = VarRandom
Trigger1 = AnimElem = 4
V = 1
Range = 0,1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s2200, 2
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 4
Value = s2200, 0+var(1)
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 4
Value = s1505, 0
Channel = 5
Volume = 255
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 3
Anim = 2505
ID = 2505
PosType = P1
Pos = 35,-70
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 1
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 4
Anim = 2506
ID = 2506
PosType = P1
Pos = 35,-70
Ownpal = 1
SprPriority = 4
IgnoreHitPause = 1
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 4
Anim = 2504
ID = 2504
PosType = P1
Pos = 35,-70
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 1
Persistent = 0
RemoveTime = -2
RemoveOnGetHit = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = AnimElem = 4
StateNo = 2504
ID = 2514
PosType = P1
Pos = 35,-70
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
;SuperMoveTime = 9999
;PauseMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = AnimElem = 4
StateNo = 2506
ID = 2515
PosType = P1
Pos = 35,-70
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
;SuperMoveTime = 9999
;PauseMoveTime = 9999

[State -1]
Type = null; Helper
Trigger1 = AnimElem = 4
StateNo = 2508
ID = 2505
PosType = P1
Pos = 35,-70
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -2]
type = RemoveExplod
Trigger1 = AnimElem = 4
Trigger1 = Floor(Fvar(38))%10 = 0
ID = 2530
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -2]
type = RemoveExplod
Trigger1 = AnimElem = 4
Trigger1 = Floor(Fvar(38)) != 0
ID = 2540
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Varadd
Trigger1 = AnimElem = 4
Trigger1 = Fvar(38) != 0
FV = 38
Value = -1
IgnoreHitPause = 1
Persistent = 0

[State -2]
Type = Explod
TriggerAll = Var(13) != -1
Trigger1 = NumExplod(2530) = 0
Anim = 2530+Floor(Fvar(38)/10)
PosType = Left
Pos = IfElse(TeamSide=1,22,302), 211-Floor(Var(0)/100000)
BindTime = -1
RemoveTime = -1
Ownpal = 1
Scale = 0.5,0.5
IgnoreHitPause = 1
SuperMoveTime = 99999
PauseMoveTime = 99999
SprPriority = IfElse(Var(26)=3,6,7)
ID = 2530

[State -2]
Type = Explod
TriggerAll = Var(13) != -1
Trigger1 = NumExplod(2540) = 0
Anim = 2530+Floor(Fvar(38))%10
PosType = Left
Pos = IfElse(TeamSide=1,28,308), 211-Floor(Var(0)/100000)
BindTime = -1
RemoveTime = -1
Ownpal = 1
Scale = 0.5,0.5
IgnoreHitPause = 1
SuperMoveTime = 99999
PauseMoveTime = 99999
SprPriority = IfElse(Var(26)=3,6,7)
ID = 2540

[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
;TriggerAll = Var(50) = 1
Trigger1 = Time = 42
Trigger2 = Time = 47
Trigger3 = Time = 52
Trigger4 = Time = 57
Trigger5 = Time = 62
Trigger6 = Time = 67
Trigger7 = Time = 72
Trigger8 = Time = 77
Trigger9 = Time = 82
Attr = S, HA
AnimType  = Hard
Damage    = Ceil(FVar(0)*(30-Var(4)%2))
HitFlag = MAFD
GuardFlag = MA
Priority = 4, Hit
PauseTime = 1,15+Var(41)
Guard.PauseTime = 1,1
HitSound   = s10,IfElse(Var(26)=2,5,IfElse(Var(26)=3,25,15))
GuardSound = s120,IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -60-Random%20
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1
Guard.Velocity = -1
Air.Velocity = -1.4*Var(50),IfElse(Var(50)=1,-7.4,FVar(25))
Down.Velocity = -2,-2.5
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
YAccel = .48
P2StateNo = 5600
ID = 5600
P2Facing = 1
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = 30
GetPower = 0,0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11), Ceil(IfElse(FVar(16)=0,1,FVar(16))*5)

[State -1]
Type = null;ChangeState
Trigger1 = Time > 85
Trigger1 = Numtarget > 0
Trigger1 = target,Alive
Value = 3100
Ctrl = 0

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1


;---------------------------------------------------------------------------
; 連環腿EX
[Statedef 2300]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
VelSet = 0,0
Anim = 2300
SprPriority = 2
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 45

[State -1]
Type = SuperPause
Trigger1 = Time = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = Time = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = Time = 1
StateNo = IfElse(Var(26)=3,6015,6010)
ID = 10001
Name = "EX_Effect"
Pos = 0,-40
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PowerAdd
Trigger1 = Time = 8
Trigger1 = Var(13) >= 0
Value = -1000

[State -1]
Type = PowerAdd
TriggerAll = Time = 8
Trigger1 = Var(13) = -1
Value = -500

[State -1]
Type = StateTypeSet
Trigger1 = AnimElem = 3
StateType = A
Physics = N

[State -1]
Type = VelSet
Trigger1 = AnimElem = 3
X = 5
Y = -8.6

[State -1]
Type = VelSet
Trigger1 = AnimElem = 6
X = 2.5
Y = -2.2

[State -1]
Type = StateTypeSet
Trigger1 = AnimElem = 10
StateType = A
Physics = A

[State -1]
Type = PlaySnd
Trigger1 = Time = 1
Value = s2300, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 4
Value = s2300, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 3
Trigger2 = AnimElem = 7
Value = s41, IfElse((Var(26)=[2,3]),0,10)

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 3
Trigger2 = AnimElem = 7
Value = s30, IfElse((Var(26)=[2,3]),1,11)

[State -1]
Type = Explod
Trigger1 = AnimElem = 3
ID = 2305
PosType = P1
Pos = 0,0
Anim = 1305
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = Explod
Trigger1 = AnimElem = 7
ID = 2306
PosType = P1
Pos = 0,0
Anim = 1306
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 16
Value = s41, IfElse((Var(26)=[2,3]),1,11)

[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarRandom
Trigger1 = MoveHit
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 2
Attr = S, SA
Damage = Ceil(FVar(0)*(60-Var(4)%2)),Ceil(FVar(1)*6)
AnimType = Hard
HitFlag = MAFD
GuardFlag = M
Priority = 4, Hit
PauseTime = 6, 6+Var(41)
Guard.PauseTime = 6,6
HitSound = s10, IfElse(Var(26)=2,5,IfElse(Var(26)=3,25,15))
GuardSound = s120, IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -20-Random%20
SparkNo = -1
Guard.SparkNo = s161
Ground.Type = Low
Air.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -5
Guard.Velocity = -8
Air.Velocity = -1*Var(50),IfElse(Var(50)=1,-6.8,FVar(25))
Down.Velocity = -4,-2.5
Ground.CornerPush.VelOff = -6
Air.CornerPush.VelOff = -2*Var(50)
Down.CornerPush.VelOff = -5
Guard.CornerPush.VelOff = -9
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = 30
GetPower = 0, 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*15), Ceil(IfElse(FVar(16)=0,1,FVar(16))*7)

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 4
Attr = S, SA
Damage = Ceil(FVar(0)*(60-Var(4)%2)),Ceil(FVar(1)*6)
AnimType = Hard
HitFlag = MAFD
GuardFlag = M
Priority = 4, Hit
PauseTime = 15, 15+Var(41)
Guard.PauseTime = 15,15
HitSound = s10, IfElse(Var(26)=2,5,IfElse(Var(26)=3,25,15))
GuardSound = s120, IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -40-Random%20
SparkNo = -1
Guard.SparkNo = s161
Ground.Type = Low
Air.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1,-8
Guard.Velocity = -8
Air.Velocity = -1*Var(50),IfElse(Var(50)=1,-8,FVar(25))
Down.Velocity = -4,-2.5
Ground.CornerPush.VelOff = -2
Air.CornerPush.VelOff = -2*Var(50)
Down.CornerPush.VelOff = -5
Guard.CornerPush.VelOff = -9
YAccel = .48
ID = 2300
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = 30
GetPower = 0, 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11), Ceil(IfElse(FVar(16)=0,1,FVar(16))*5)

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 8
Attr = S, SA
Damage = Ceil(FVar(0)*(100-Var(4)%2)),Ceil(FVar(1)*10)
AnimType = Hard
HitFlag = MAFD
GuardFlag = MA
Priority = 4, Hit
PauseTime = 15, 15+Var(41)
Guard.PauseTime = 15,15
HitSound = s10, IfElse(Var(26)=2,5,IfElse(Var(26)=3,25,15))
GuardSound = s120, IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -50-Random%20
SparkNo = -1
Guard.SparkNo = s161
Ground.Type = Low
Air.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1,-8
Guard.Velocity = -8
Air.Velocity = -1*Var(50),IfElse(Var(50)=1,-8,FVar(25))
AirGuard.Velocity = -2,IfElse(Var(50)=1,-2.8,FVar(25))
Down.Velocity = -4,-2.5
Ground.CornerPush.VelOff = -2
Air.CornerPush.VelOff = -2*Var(50)
Down.CornerPush.VelOff = -5
Guard.CornerPush.VelOff = -9
YAccel = .48
ID = 2301
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = 60
GetPower = 0, 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11), Ceil(IfElse(FVar(16)=0,1,FVar(16))*5)

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 15
Attr = S, SA
Damage = Ceil(FVar(0)*(100-Var(4)%2)),Ceil(FVar(1)*10)
AnimType = Hard
HitFlag = MAFD
GuardFlag = MA
Priority = 4, Hit
PauseTime = 15, 15+Var(41)
Guard.PauseTime = 15,15
HitSound = s10, IfElse(Var(26)=2,5,IfElse(Var(26)=3,25,15))
GuardSound = s120, IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -50-Random%20
SparkNo = -1
Guard.SparkNo = s161
Ground.Type = Low
Air.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1,8
Guard.Velocity = 8
Air.Velocity = -1*Var(50),IfElse(Var(50)=1,8,FVar(25))
AirGuard.Velocity = -2,IfElse(Var(50)=1,2.8,FVar(25))
Down.Velocity = -4,2.5
Ground.CornerPush.VelOff = -2
Air.CornerPush.VelOff = -2*Var(50)
Down.CornerPush.VelOff = -5
Guard.CornerPush.VelOff = -9
YAccel = .48
ID = 2301
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = 60
GetPower = 0, 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11), Ceil(IfElse(FVar(16)=0,1,FVar(16))*5)

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

;---------------------------------------------------------------------------
; 空中連環腿EX
[Statedef 2350]
Type    = A
MoveType= A
Physics = N
Juggle  = 0
Ctrl = 0
VelSet = 0,0
Anim = 2350
SprPriority = 2

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 38

[State -1]
Type = SuperPause
Trigger1 = Time = 1
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = Time = 1
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = Time = 1
StateNo = IfElse(Var(26)=3,6015,6010)
ID = 10001
Name = "EX_Effect"
Pos = 3,-38
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PowerAdd
Trigger1 = Time = 8
Trigger1 = Var(13) >= 0
Value = -1000

[State -1]
Type = PowerAdd
TriggerAll = Time = 8
Trigger1 = Var(13) = -1
Value = -500

[State -1]
Type = StateTypeSet
Trigger1 = Anim = 2355
StateType = S
Physics = S

[State -1]
Type = ChangeAnim
Trigger1 = Anim = 2350
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value = 2355

[State -1]
Type = VelSet
Trigger1 = Anim = 2350
Trigger1 = AnimElem = 2
X = 1.8
Y = -6

[State -1]
Type = VelAdd
Trigger1 = Anim = 2350
Trigger1 = Vel Y <= 7.5
Trigger1 = Time >= 37
Y = .34

[State -1]
Type = VelSet
Trigger1 = Anim = 2355
X = 0
Y = 0

[State -1]
Type = PosSet
Trigger1 = Anim = 2355
Y = 0

[State -1]
Type = PlaySnd
Trigger1 = Anim = 2350
Trigger1 = Time = 1
Value = s2300, 1
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
TriggerAll = Anim = 2350
Trigger1 = AnimElem = 2
Trigger2 = AnimElem = 5
Value = s41, IfElse((Var(26)=[2,3]),0,10)

[State -1]
Type = PlaySnd
TriggerAll = Anim = 2350
Trigger1 = AnimElem = 2
Trigger2 = AnimElem = 5
Value = s30, IfElse((Var(26)=[2,3]),1,11)

[State -1]
Type = Explod
Trigger1 = Anim = 2350
Trigger1 = AnimElem = 2
ID = 2355
PosType = P1
Pos = 0,0
Anim = 1305
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = Explod
Trigger1 = Anim = 2350
Trigger1 = AnimElem = 5
ID = 2356
PosType = P1
Pos = 0,0
Anim = 1306
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = PlaySnd
Trigger1 = Anim = 2355
Trigger1 = AnimElem = 2
Value = s41, IfElse((Var(26)=[2,3]),1,11)

[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarRandom
Trigger1 = MoveHit
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = MoveHit = 1
Trigger1 = NumTarget(5600) > 0
Trigger1 = FVar(1) > 0.70
FV = 1
Value = 0.70
IgnoreHitPause = 1

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Anim = 2350
Trigger1 = AnimElem = 3
Attr = S, SA
Damage = Ceil(FVar(0)*(100-Var(4)%2)),Ceil(FVar(1)*10)
AnimType = Hard
HitFlag = MAFD
GuardFlag = MA
Priority = 4, Hit
PauseTime = 15, 15+Var(41)
Guard.PauseTime = 15,15
HitSound = s10, IfElse(Var(26)=2,5,IfElse(Var(26)=3,25,15))
GuardSound = s120, IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -40-Random%20
SparkNo = -1
Guard.SparkNo = s161
Ground.Type = Low
Air.Type = Low
Ground.SlideTime = 15
Ground.HitTime  = 15
Ground.Velocity = -1,-7.8
Guard.Velocity = -8
Air.Velocity = -1*Var(50),IfElse(Var(50)=1,-7.8,FVar(25))
AirGuard.Velocity = -2,IfElse(Var(50)=1,-2.8,FVar(25))
Down.Velocity = -4,-2.5
Ground.CornerPush.VelOff = -2
Air.CornerPush.VelOff = -2*Var(50)
Down.CornerPush.VelOff = -5
Guard.CornerPush.VelOff = -9
YAccel = .48
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = 30
GetPower = 0, 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11), Ceil(IfElse(FVar(16)=0,1,FVar(16))*5)

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Anim = 2350
Trigger1 = AnimElem = 6
Attr = S, SA
Damage = Ceil(FVar(0)*(150-Var(4)%2)),Ceil(FVar(1)*15)
AnimType = Hard
HitFlag = MAFD
GuardFlag = MA
Priority = 4, Hit
PauseTime = 15, 15+Var(41)
Guard.PauseTime = 15,15
HitSound = s10, IfElse(Var(26)=2,5,IfElse(Var(26)=3,25,15))
GuardSound = s120, IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -50-Random%20
SparkNo = -1
Guard.SparkNo = s161
Ground.Type = Low
Air.Type = Low
Ground.SlideTime = 15
Ground.HitTime  = 15
Ground.Velocity = -1,-6.8
Guard.Velocity = -8
Air.Velocity = -1*Var(50),IfElse(Var(50)=1,-6.8,FVar(25))
AirGuard.Velocity = -2,IfElse(Var(50)=1,-2.8,FVar(25))
Down.Velocity = -4,-2.5
Ground.CornerPush.VelOff = -2
Air.CornerPush.VelOff = -2*Var(50)
Down.CornerPush.VelOff = -5
Guard.CornerPush.VelOff = -9
P2StateNo = 5600
ID = 5600
P2Facing = 1
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
GetPower = 0, 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11), Ceil(IfElse(FVar(16)=0,1,FVar(16))*5)

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = ChangeState
Trigger1 = Anim = 2355
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;吸血衝動
[Statedef 2400]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
Anim      = 2400
PowerAdd  = 0
velset = 0,0
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 15
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 21

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 4
Anim = -1
Time = 35 
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 4
Value = s990, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = AnimElem = 4
StateNo = IfElse(Var(26)=3,6015,6010)
ID = 10003
Name = "EX_Effect"
Pos = 0,-70
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PowerAdd
Trigger1 = Time = 8
Trigger1 = Var(13) >= 0
Value = -1000

[State -1]
Type = PowerAdd
TriggerAll = Time = 8
Trigger1 = Var(13) = -1
Value = -500

[State -1]
Type = Helper
Trigger1 = AnimElem = 7
StateNo = 860
ID = 861
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = P2MoveType != H
Trigger1 = AnimElem = 7
Attr = S, ST
HitFlag = M
Priority = 1, Miss
SparkNo = -1
Guard.SparkNo = -1
SprPriority = 1
P1StateNo = 2450
P2StateNo = 2455
P2Facing = 1
Fall = 1
Fall.Recover = 0

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 8
Value = s810, 0

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;吸血衝動
[Statedef 2410]
Type      = A
MoveType  = A
Physics   = S
Ctrl      = 0
Anim      = 2410
PowerAdd  = 0
velset = 0,0
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 15
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 21

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 4
Anim = -1
Time = 35 
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 4
Value = s990, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = AnimElem = 4
StateNo = IfElse(Var(26)=3,6015,6010)
ID = 10003
Name = "EX_Effect"
Pos = 0,-70
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PowerAdd
Trigger1 = Time = 8
Trigger1 = Var(13) >= 0
Value = -1000

[State -1]
Type = PowerAdd
TriggerAll = Time = 8
Trigger1 = Var(13) = -1
Value = -500

[State -1]
Type = Helper
Trigger1 = AnimElem = 7
StateNo = 860
ID = 861
PosType = P1
Pos = 0,0
Ownpal = 1
SprPriority = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = P2MoveType != H
Trigger1 = AnimElem = 7
Attr = A, ST
HitFlag = A
Priority = 1, Miss
SparkNo = -1
Guard.SparkNo = -1
SprPriority = 1
P1StateNo = 2451
P2StateNo = 2455
P2Facing = 1
Fall = 1
Fall.Recover = 0

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 9
Value = s2410,1;s810, 0

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = AnimElem = 12
Value = 51
Ctrl = 1
;---------------------------------------------------------------------------
;吸血衝動
[Statedef 2450]
Type    = S
MoveType= A
Physics = N
Anim = 2450
PowerAdd = 0

[State -1]
Type = Varadd
Trigger1 = Time = 0
V = 47
Value = 1

[State -1]
Type = PlaySnd
Trigger1 = Time = 37
Value = s3000, IfElse((Var(26)=[2,3]),2,12)

[State -1]
Type = Helper
Trigger1 = Time = 16
ID = 2405
Postype = P1
Pos = 0,0
StateNo = 2405
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Width
Trigger1 = AnimElem = 1
Edge = 30,0

[State -1]
Type = TargetBind
Trigger1 = AnimElem = 1
Pos = 25, 0

[State -1]
Type = Explod
Trigger1 = Time = 37
Anim = 3012
ID = 3012
Pos = -30,0
PosType = P1
Ownpal = 1
SprPriority = 4

[State -1]
Type = TargetLifeAdd
Trigger1 = Time = 41
Value = -Ceil(FVar(0)/(1.00-(0.08*FVar(4)))*(250-Var(4)%2))

[State -1]
Type = LifeAdd
Trigger1 = Time = 41
Value = Ceil(FVar(0)/(1.00-(0.08*FVar(4)))*125)

[State -1]
Type = VarAdd
Trigger1 = Time = 41
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = TargetState
Trigger1 = Time = 57
Value = 2456

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;吸血衝動
[Statedef 2451]
Type    = A
MoveType= A
Physics = N
Anim = 2451
PowerAdd = 0

[State -1]
Type = Varadd
Trigger1 = Time = 0
V = 47
Value = 1

[State -1]
Type = PlaySnd
Trigger1 = Time = 37
Value = s3000, IfElse((Var(26)=[2,3]),2,12)

[State -1]
Type = Helper
Trigger1 = Time = 16
ID = 2405
Postype = P1
Pos = 0,0
StateNo = 2405
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = Width
Trigger1 = AnimElem = 1
Edge = 30,0

[State -1]
Type = TargetBind
Trigger1 = AnimElem = 1
Pos = 25, 0

[State -1]
Type = Explod
Trigger1 = Time = 37
Anim = 3012
ID = 3012
Pos = -30,0
PosType = P1
Ownpal = 1
SprPriority = 4

[State -1]
Type = TargetLifeAdd
Trigger1 = Time = 41
Value = -Ceil(FVar(0)/(1.00-(0.08*FVar(4)))*(250-Var(4)%2))

[State -1]
Type = LifeAdd
Trigger1 = Time = 41
Value = Ceil(FVar(0)/(1.00-(0.08*FVar(4)))*125)

[State -1]
Type = VarAdd
Trigger1 = Time = 41
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = TargetState
Trigger1 = Time = 57
Value = 2456

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = ChangeState
Trigger1 = Time = 57
Value = 2452
Ctrl = 1

;---------------------------------------------------------------------------
; 空中後ダッシュ
[Statedef 2452]
Type    = A
Physics = A
Anim    = 115
Ctrl    = 0
VelSet  = 0,0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
type = VarSet
trigger1 = Time = 1
sysvar(1) = -1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 11
Value = Var(11)+10

[State -1, VelSet]
Type = VelSet
Trigger1 = Time = [0,1]
X = -3

[State -1, VelSet]
Type = VelSet
Trigger1 = Time >= 2
X = -2.5

[State -1, VelSet]
Type = VelSet
Trigger1 = Time = 0
Y = -3.4

[State -1, CtrlSet]
Type = CtrlSet
Trigger1 = Time >= 6
Value = 1

;---------------------------------------------------------------------------
;吸血衝動・投げられている相手
[Statedef 2455]
Type    = A
MoveType= H
Physics = N
VelSet = 0,0

[State -1]
Type = ChangeAnim2
Trigger1 = Time = 0
Value = 831

[State -1] 
Type = SelfState
Trigger1 = Time >= 60
Trigger1 = P2MoveType != A
Value = 5035

;---------------------------------------------------------------------------
;吸血衝動・相手の空中の状態
[Statedef 2456]
Type    = A
MoveType= H
Physics = N
VelSet = -2.5,-9.5
PowerAdd = 0

[State -1]
type = VelAdd
Trigger1 = 1
y = .47

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 30
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5030)
Trigger1 = Time = 5
Value = 5030

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5035)
Trigger1 =! SelfAnimExist(5030)
Trigger1 = Time = 5
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Value = 5035

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5050)
Trigger1 =! SelfAnimExist(5030)
Trigger1 =! SelfAnimExist(5035)
Trigger1 = Time = 5
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Trigger3 = Anim = 5035
Trigger3 = AnimTime = 0
Value = 5050

[State -1] 
Type = SelfState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y >= 0
Value = 5100 

;---------------------------------------------------------------------------
;アルトネーゲル　EX
[Statedef 2500]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
Anim = 2500
SprPriority = 2
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = [0,45]
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 2
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 2
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 2
StateNo = IfElse(Var(26)=3,6015,6010)
ID = 10001
Name = "EX_Effect"
Pos = -12,-60
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = Time = 42
StateNo = 9000
ID = 9011
PosType = P1
Ownpal = 1
SprPriority = 5

[State -1]
Type = Helper
Trigger1 = Time = 44
StateNo = 9000
ID = 9012
PosType = P1
Ownpal = 1
SprPriority = 5

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 2
Value = s2100, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PowerAdd
Trigger1 = Time = 8
Trigger1 = Var(13) >= 0
Value = -1000

[State -1]
Type = PowerAdd
TriggerAll = Time = 8
Trigger1 = Var(13) = -1
Value = -500

[State -1]
Type = PosAdd
Trigger1 = Time = 0
X = 5

[State -1]
Type = PosAdd
Trigger1 = Time = [41,47]
X = 5

[State -1]
Type = Helper
Trigger1 = Time >= 41
StateNo = 755
ID = 755
Ownpal = 1
Keyctrl = 0
SprPriority = -5
IgnoreHitPause = 0
Persistent = 3

[State -1]
Type = VelSet
Trigger1 = AnimElem = 6
X = 1.2
Y = -7.6

[State -1]
Type = VelSet
Trigger1 = AnimElem = 16
Y = -1

[State -1]
Type = StateTypeSet
Trigger1 = AnimElem = 6
StateType = A
Physics = N

[State -1]
Type = VelAdd
Trigger1 = Time = [50,66]
Y = .3

[State -1]
Type = VelAdd
Trigger1 = Time >= 67
Y = .2

[State -1]
Type = VelSet
Trigger1 = Pos Y >= 4
Trigger1 = Time >= 67
Y = 4

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 6
Value = s1405, 0
Channel = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 6
ID = 1405
PosType = P1
Pos = 0,0
Anim = 1405
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
BindTime = -1
Removetime = -2
Removeongethit = 1

[State -1]
Type = Helper
Trigger1 = AnimElem = 6
StateNo = 2505
ID = 2505
PosType = P1
Pos = 0,0
Ownpal = 1
Keyctrl = 0
SprPriority = 4
IgnoreHitPause = 0
Persistent = 0

[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 3
Attr = S, NA
AnimType  = Medium
Damage    = Ceil(FVar(0)*(60-Var(4)%2))
HitFlag = MAFD
GuardFlag = M
Priority = 3, Hit
PauseTime = 6,6+Var(41)
Guard.PauseTime = 6,6
HitSound   = s10,IfElse(Var(26)=2,2,IfElse(Var(26)=3,22,12))
GuardSound = s120,IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -40-Random%20
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = Low
Ground.SlideTime = 10
Ground.HitTime  = 10
Ground.Velocity = -6
Air.Velocity = IfElse(Var(50)=1,-2,-5),IfElse(Var(50)=1,-7,FVar(25))
Down.Velocity = -5,-2.5
Ground.CornerPush.VelOff = -6
Air.CornerPush.VelOff = IfElse(Var(50)=1,-3,-6)
Down.CornerPush.VelOff = -6
YAccel = .48
ID = 2100
Kill = 1
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = 23
GetPower = 0, 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11), Ceil(IfElse(FVar(16)=0,1,FVar(16))*5)

[State -1]
type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 6
Attr = S, NA
AnimType  = Up
Damage    = Ceil(FVar(0)*(40-Var(4)%2))
HitFlag = MAFD
GuardFlag = M
Priority = 3, Hit
PauseTime = 6,6+Var(41)
Guard.PauseTime = 6,6
HitSound   = s10,IfElse(Var(26)=2,2,IfElse(Var(26)=3,22,12))
GuardSound = s120,IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -55-Random%20
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = Low
Ground.SlideTime = 10
Ground.HitTime  = 10
Ground.Velocity = 0,-11.6
Guard.Velocity = -8
Air.Velocity = IfElse(Var(50)=1,0,-5),IfElse(Var(50)=1,-11.4,FVar(25))
Down.Velocity = -5,-2.5
Ground.CornerPush.VelOff = 0
Guard.CornerPush.VelOff = -9
Air.CornerPush.VelOff = IfElse(Var(50)=1,0,-6)
Down.CornerPush.VelOff = -6
YAccel = .48
ID = 2101
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = 51
GetPower = 0, 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11), Ceil(IfElse(FVar(16)=0,1,FVar(16))*5)

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 8
Attr = S, NA
AnimType  = Up
Damage    = Ceil(FVar(0)*(60-Var(4)%2))
HitFlag = MAFD
GuardFlag = M
Priority = 3, Hit
PauseTime = 6,6+Var(41)
Guard.PauseTime = 6,6
HitSound   = s20,IfElse((Var(26)=[2,3]),0,10)
GuardSound = s120,IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -65-Random%20
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = High
Ground.SlideTime = 10
Ground.HitTime  = 10
Ground.Velocity = 0,-11.6
Guard.Velocity = -8
Air.Velocity = IfElse(Var(50)=1,0,-5),IfElse(Var(50)=1,-11.4,FVar(25))
Down.Velocity = -5,-2.5
Ground.CornerPush.VelOff = 0
Guard.CornerPush.VelOff = -9
Air.CornerPush.VelOff = IfElse(Var(50)=1,0,-6)
Down.CornerPush.VelOff = -6
YAccel = .48
Kill = 1
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = 51
GetPower = 0, 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11), Ceil(IfElse(FVar(16)=0,1,FVar(16))*5)

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = ChangeState
Trigger1 = Time > 57
Trigger1 = (Vel Y >= 0) && (Pos Y >= 0)
Value = 52
Ctrl = 0

;---------------------------------------------------------------------------
;アルトシューレ　EX
[Statedef 2600]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
VelSet = 0,0
Ctrl = 0
Anim = 2600
SprPriority = 2
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = [0,43]
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 2
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 2
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 2
StateNo = IfElse(Var(26)=3,6015,6010)
ID = 10001
Name = "EX_Effect"
Pos = -10,-75
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 2
Value = s2200, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PowerAdd
Trigger1 = Time = 8
Trigger1 = Var(13) >= 0
Value = -1000

[State -1]
Type = PowerAdd
TriggerAll = Time = 8
Trigger1 = Var(13) = -1
Value = -500

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 5
Value = s1505, 0
Channel = 5
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 14
Value = s1505, 0
Channel = 6
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 2605
ID = 2605
PosType = P1
Pos = 32,0
Ownpal = 1
Keyctrl = 0
SprPriority = 4
IgnoreHitPause = 0
Persistent = 0

[State -1]
Type = Helper
Trigger1 = AnimElem = 13
StateNo = 2605
ID = 2606
PosType = P1
Pos = 32,0
Ownpal = 1
Keyctrl = 0
SprPriority = 4
IgnoreHitPause = 0
Persistent = 0

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;空中アルトシューレ　EX
[Statedef 2700]
Type    = A
MoveType= A
Physics = N
Juggle  = 0
Ctrl = 0
Anim = 2700
SprPriority = 2

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = PosFreeze
Trigger1 = Time = [0,36]
Value = 1

[State -1]
Type = VelSet
Trigger1 = AnimElem = 1
Y = 0

[State -1]
Type = NotHitBy
Trigger1 = AnimElem = 2
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 2
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = AnimElem = 2
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 2
StateNo = IfElse(Var(26)=3,6015,6010)
ID = 10001
Name = "EX_Effect"
Pos = -10,-52
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 2
Value = s2300, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s30, IfElse((Var(26)=[2,3]),1,11)
Channel = 5
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 14
ID = 635
PosType = P1
Pos = 0,0
Anim = 635
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
BindTime = -1
Removetime = -2

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 14
Value = s1505, 0
Channel = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = AnimElem = 14
StateNo = 2705
ID = 2705
PosType = P1
Pos = 32,0
Ownpal = 1
Keyctrl = 0
SprPriority = 4
IgnoreHitPause = 0
Persistent = 0

[State -1]
Type = VelSet
Trigger1 = AnimElem = 16
X = -1.4
Y = -4.8

[State -1]
Type = StateTypeSet
Trigger1 = AnimElem = 16
Physics = A

[State -1]
Type = PowerAdd
Trigger1 = Time = 8
Trigger1 = Var(13) >= 0
Value = -1000

[State -1]
Type = PowerAdd
TriggerAll = Time = 8
Trigger1 = Var(13) = -1
Value = -500

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value = 52
Ctrl = 0


;---------------------------------------------------------------------------
; 功程四拍
[Statedef 3000]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
VelSet = 0,0
SprPriority = 2

[State -1]
Type = Varadd
Trigger1 = movehit
V = 47
Value = 1

[State -1]
Type = NotHitBy
Trigger1 = PalNo = 12
Trigger1 = helper(5901),var(49) = 1
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
Trigger1 = Time = 0
Value = IfElse(Var(13)=-1,3050,3000)

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = VarSet
Trigger1 = Var(13) = -1
Trigger1 = Time = 0
V = 7
Value = 1

[State -1]
Type = VarSet
Trigger1 = AnimTime = 0
V = 7
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = Time = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 50

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 2
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State 3300, 1]
type = Afterimage
Trigger1 = AnimElem = 2
time = 1
PalBright = 0 , 0 , 0
;PalContrast = 255 , 50 , 50
PalAdd = 0 , 0 , 0
PalMul = .5 , .5 , .5
Trans = Add
Length   = 10
TimeGap  = 1
FrameFap = 1

[State 3300, 2]
type = Afterimagetime
trigger1 = time < 110
time = 2

[State -1]
Type = Helper
Trigger1 = Var(13) != -1
Trigger1 = AnimElem = 2
StateNo = IfElse(Var(26)=3,6015,6010)
ID = 10001
Name = "EX_Effect"
Pos = 5,-46
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = Var(13) = -1
Trigger1 = AnimElem = 2
StateNo = IfElse(Var(26)=3,6025,6020)
ID = 10001
Name = "EX_Effect"
Pos = 5,-46
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PowerSet
Trigger1 = Var(13) = 1
Trigger1 = Time = 8
Trigger1 = Var(14) = 0
Value = 1000

[State -1]
Type = PowerSet
Trigger1 = Var(13) <= -1
Trigger1 = Time = 8
Trigger2 = Var(14) = 1
Trigger2 = Time = 8
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 8
V = 14
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 8
V = 13
Value = 0

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 2
Value = s3000, 4
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 9
Value = s3000, 5
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 16
Value = s3000, 6
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 24
Value = s3000, 7
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 34
Value = s3000, 8
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 35
Value = s110, 0
Channel = 3

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 36
Value = s1100, 1
Channel = 4

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 36
Value = s30, IfElse((Var(26)=[2,3]),2,12)
Channel = 2

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 35
Value = s2000, 0
Channel = 6

[State -1]
Type = Explod
Trigger1 = AnimElem = 36
ID = 1105
PosType = P1
Pos = 5,-5
Anim = 1105
Ownpal = 1
SprPriority = 4
IgnoreHitPause = 1
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = EnvShake
Trigger1 = AnimElem = 35
Time  = 8
Ampl  = 5
Freq  = 90

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 37
Value = s2000, 0
Channel = 4
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VelSet
Trigger1 = AnimElem = 3
X = 6

[State -1]
Type = VelSet
Trigger1 = AnimElem = 8
X = 0

[State -1]
Type = PosAdd
Trigger1 = AnimElem = 15
X = 10

[State -1]
Type = PosAdd
Trigger1 = AnimElem = 25
X = 15

[State -1]
Type = VelSet
Trigger1 = AnimElem = 34
X = 5

[State -1]
Type = VelSet
Trigger1 = AnimElem = 37
X = 0

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
;TriggerAll = Var(7) = 0
TriggerAll = Var(50) = 1
Trigger1 = AnimElem = 9
Attr = S, NA                                             ;立ち状態で、通常の攻撃(ｓは立ち、ｎは通常、aは攻撃を表す)
Damage = Ceil(FVar(0)*(30-Var(4)%2))                     ;ダメージ量（左が当たった時、右はガードした時）
AnimType = Light                                         ;当てた時の相手のポーズ（light/midium/hard/back）から選択
GuardFlag = M                                            ;ガードできる状態（ｍaは全ての状態でガード可能）
HitFlag = MAFD                                           ;当てる事のできる条件
Priority = 1, Hit                                        ;攻撃の優先権（0弱い　4通常　7強い
PauseTime = 0, 18+Var(41)                                 ;攻撃が当たった時の硬直時間（左が自分、右が相手）
Guard.PauseTime = 6, 6
HitSound   = s10,IfElse(Var(26)=2,2,IfElse(Var(26)=3,22,12));ヒットした時の音（ｓ*,*にすると自分の音を使う）
GuardSound = s120, IfElse((Var(26)=[2,3]),0,10)          ;ガードした時の音（同上）
SparkXY = -Random%20, -40-Random%20
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = High                                       ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
Ground.SlideTime = 10                                    ;相手が後にすべる時間
Ground.HitTime  = 10                                     ;コンボが繋がる時間（高くしすぎない事）
Ground.Velocity = -4.8                                   ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
Down.Velocity = -2.4,-2.5
Air.Type = High                                          ;空中で相手がくらった場所（上と同じ）
Air.Velocity = -1.8*Var(50),IfElse(Var(50)=1,-5.8,FVar(25));空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
Ground.CornerPush.VelOff = -3.6
Air.CornerPush.VelOff = -2.8*Var(50)
Down.CornerPush.VelOff = -5.6
YAccel = .48
ID = 200
Kill = 0
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 0
GetPower = 0,0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*9), Ceil(IfElse(FVar(16)=0,1,FVar(16))*4)

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
;TriggerAll = Var(7) = 0
TriggerAll = Var(50) = 1
Trigger1 = AnimElem = 18
Attr = C, NA
Damage    = Ceil(FVar(0)*(90-Var(4)%2))
AnimType  = Hard
HitFlag = MAFD
GuardFlag = L
Priority  = 2, Hit
PauseTime = 1,10+Var(41)
Guard.PauseTime = 10,10
HitSound   = s10,IfElse(Var(26)=2,2,IfElse(Var(26)=3,22,12))
SparkXY = -Random%20, -Random%20
SparkNo = -1
Guard.SparkNo = s160
GuardSound = s120,IfElse((Var(26)=[2,3]),0,10)
Ground.Type = Trip
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = 0,-2
Guard.Velocity = -10
Air.Velocity = IfElse(Var(50)=1,0,-5),IfElse(Var(50)=1,-2.6,FVar(25))
Down.Velocity = -4,-2.5
Ground.CornerPush.VelOff = 0
Guard.CornerPush.VelOff = -12
Air.CornerPush.VelOff = IfElse(Var(50)=1,0,-6)
Down.CornerPush.VelOff = -6
YAccel = .48
Kill = 0
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = 0,0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*30), Ceil(IfElse(FVar(16)=0,1,FVar(16))*15)

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
;TriggerAll = Var(7) = 0
TriggerAll = Var(50) = 1
Trigger1 = AnimElem = 27
Attr = C, NA
Damage    = Ceil(FVar(0)*(50-Var(4)%2))
AnimType  = Medium
HitFlag = MAFD
GuardFlag = L
Priority  = 1, Hit
PauseTime = 1,8+Var(41)
Guard.PauseTime = 8,8
HitSound   = s10,IfElse(Var(26)=2,2,IfElse(Var(26)=3,22,12))
GuardSound = s120,IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -10-Random%20
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = Low
Ground.SlideTime = 13
Ground.HitTime  = 13
Ground.Velocity = -4.8
Air.Velocity = -2*Var(50),IfElse(Var(50)=1,-4.6,FVar(25))
Down.Velocity = -4,-2.5
Ground.CornerPush.VelOff = -5.8
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -6
YAccel = .48
Kill = 0
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 0
GetPower = 0,0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*15), Ceil(IfElse(FVar(16)=0,1,FVar(16))*7)

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
;TriggerAll = Var(7) = 0
TriggerAll = AnimElem = 37
Trigger1 = Var(50) = 1
Attr = S, NA
AnimType  = Hard
Damage    = Ceil(FVar(0)*(250-Var(4)%2)),Ceil(FVar(1)*10)
HitFlag = MAFD
GuardFlag = M
Priority = 3, Hit
PauseTime = 10,10+Var(41)
Guard.PauseTime = 10,10
HitSound   = s10,IfElse(Var(26)=2,2,IfElse(Var(26)=3,22,12))
GuardSound = s120,IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -40-Random%20
SparkNo = -1
Guard.SparkNo = s161
Ground.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -9
Air.Velocity = -2*Var(50),IfElse(Var(50)=1,-5.4,FVar(25))
Down.Velocity = -6,-2.5
Ground.CornerPush.VelOff = -10
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -7
P2StateNo = Ifelse(anim = 3000,5600,3051)
ID = Ifelse(anim = 3000,5600,3051)
P2Facing = 1
Kill = Ifelse(anim = 3000,1,0)
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = 0,0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*30), Ceil(IfElse(FVar(16)=0,1,FVar(16))*15)

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
;TriggerAll = Var(7) = 0
TriggerAll = AnimElem = 37
Trigger1 = Var(50) = 2
Trigger2 = P2StateType != A
Attr = S, NA
AnimType  = Hard
Damage    = Ceil(FVar(0)*(250-Var(4)%2)),Ceil(FVar(1)*10)
HitFlag = MAFD
GuardFlag = M
Priority = 3, Hit
PauseTime = 10,10+Var(41)
Guard.PauseTime = 10,10
HitSound   = s10,IfElse(Var(26)=2,2,IfElse(Var(26)=3,22,12))
GuardSound = s120,IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -40-Random%20
SparkNo = -1
Guard.SparkNo = s161
Ground.Type = Low
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -9
Air.Velocity = -2*Var(50),IfElse(Var(50)=1,-5.2,FVar(25))
Down.Velocity = -6,-2.5
Ground.CornerPush.VelOff = -10
Air.CornerPush.VelOff = -3*Var(50)
Down.CornerPush.VelOff = -7
P2StateNo = Ifelse(anim = 3000,5600,3051)
ID = Ifelse(anim = 3000,5600,3051)
YAccel = .48
Kill = Ifelse(anim = 3000,1,0)
Guard.Kill = 0
Fall = 0
Air.Fall = 1
Fall.Recover = 0
GetPower = 0,0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*30), Ceil(IfElse(FVar(16)=0,1,FVar(16))*15)

[State -1]
Type = Explod
Trigger1 = MoveHit = 1
ID = 1106
PosType = P1
Pos = 0,0
Anim = 1106
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = Explod
Trigger1 = time = [108,110]
Trigger1 = movehit = 1
ID = 3105
PosType = P1
Pos = 0,0
Random = 0,0
Anim = 3105
Ownpal = 1
SprPriority = 4
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarSet
Trigger1 = 1
FV = 26
Value = 0.50
IgnoreHitPause = 1

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1] 
Type = ChangeState
TriggerAll = numtarget > 0
Trigger1 = anim = 3050
;Trigger1 = AnimTime = 0
Trigger1 = target,StateNo = 3053
Value = 3050
Ctrl = 1

[State -1] 
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; 宝石魔術EX
[Statedef 3050]
Type    = S
MoveType= A
Physics = S
Juggle  = 0
Ctrl = 0
VelSet = 0,0
Anim = 3051
SprPriority = 2
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State 3300 , 2]
type = helper
TriggerAll = numtarget > 0
triggerAll = Var(54) != 99
trigger1 = time = 0
trigger1 = target,life <= Ceil(FVar(0)*(250-Var(4)%2))
trigger1 = NumHelper(340001) = 0
id = 340001
pos = 0,0
postype = left
stateno = 340001
helpertype = normal
ownpal = 1
sprpriority = 99999999
ignorehitpause = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
supermove = 1
ignorehitpause = 1
persistent = 1

[state 3300, 2]
type = playsnd
TriggerAll = numtarget > 0
triggerAll = numpartner = 0
trigger1 = time = 0
triggerAll = enemy,NumHelper(340000) = 0
triggerAll = enemy,NumHelper(340001) = 0
triggerAll = enemy,NumHelper(340002) = 0
triggerAll = enemy,NumHelper(340003) = 0
triggerAll = enemy,NumHelper(340004) = 0
triggerAll = Var(54) != 99
trigger1 = target,life <= Ceil(FVar(0)*(250-Var(4)%2))
value = 9999,var(54)
volume = -255
persistent = 0
ignorehitpause = 1
loop = 1
channel = 12


[state 3300, 2]
type = playsnd
TriggerAll = numtarget > 0
triggerAll = numpartner > 0
trigger1 = time = 0
triggerAll = enemy,NumHelper(340000) = 0
triggerAll = enemy,NumHelper(340001) = 0
triggerAll = enemy,NumHelper(340002) = 0
triggerAll = enemy,NumHelper(340003) = 0
triggerAll = enemy,NumHelper(340004) = 0
triggerAll = partner,NumHelper(340000) = 0
triggerAll = partner,NumHelper(340001) = 0
triggerAll = partner,NumHelper(340002) = 0
triggerAll = partner,NumHelper(340003) = 0
triggerAll = partner,NumHelper(340004) = 0
triggerAll = Var(54) != 99
trigger1 = target,life <= Ceil(FVar(0)*(250-Var(4)%2))
value = 9999,var(54)
volume = -255
persistent = 0
ignorehitpause = 1
loop = 1
channel = 12

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 2
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = Pause
Trigger1 = Time >= 37
Trigger1 = Time <= 45
Anim = -1
Time = 5
P2DefMul = 1
Darken = 0
Persistent = 1

[State -1]
Type = VarSet
Trigger1 = AnimElem = 2
V = 44
Value = 35

[State -1]
Type = Helper
Trigger1 = AnimElem = 2
StateNo = IfElse(Var(26)=3,6015,6010)
ID = 10002
Name = "EX_Effect"
Pos = 0,-74
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PowerAdd
Trigger1 = Time = 8
Trigger1 = Var(13) >= 0
Value = -1000

[State -1]
Type = PowerAdd
TriggerAll = Time = 8
Trigger1 = Var(13) = -1
Value = -500

[State -1]
Type = VarRandom
Trigger1 = AnimElem = 3
V = 1
Range = 0,1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 2
Value = s2200, 2
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s3050, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s41, IfElse((Var(26)=[2,3]),0,10)
Channel = 3

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 3
Value = s1505, 0
Channel = 5
Volume = 255
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 2
Anim = 3054
ID = 3054
PosType = P1
Pos = 47,-75
Ownpal = 1
scale = 0.5,0.5
SprPriority = 3
IgnoreHitPause = 1
Persistent = 0
RemoveTime = 90
RemoveOnGetHit = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = AnimElem = 3
StateNo = 3060
ID = 3060
PosType = P1
Pos = 47,-75
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarAdd
Trigger1 = MoveHit
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = null;HitDef
TriggerAll = Var(25)/10%10 < 3
;TriggerAll = Var(50) = 1
Trigger1 = Time = 42
Trigger2 = Time = 47
Trigger3 = Time = 52
Trigger4 = Time = 57
Trigger5 = Time = 62
Trigger6 = Time = 67
Trigger7 = Time = 72
Trigger8 = Time = 77
Trigger9 = Time = 82
Attr = S, HA
AnimType  = Hard
Damage    = Ceil(FVar(0)*(30-Var(4)%2))
HitFlag = MAFD
GuardFlag = MA
Priority = 4, Hit
PauseTime = 1,15+Var(41)
Guard.PauseTime = 1,1
HitSound   = s10,IfElse(Var(26)=2,5,IfElse(Var(26)=3,25,15))
GuardSound = s120,IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -60-Random%20
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1
Guard.Velocity = -1
Air.Velocity = -1.4*Var(50),IfElse(Var(50)=1,-7.4,FVar(25))
Down.Velocity = -2,-2.5
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
YAccel = .48
P2StateNo = 5600
ID = 5600
P2Facing = 1
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = IfElse(P2MoveType = A,0,1)
Fall.RecoverTime = 30
GetPower = 0,0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11), Ceil(IfElse(FVar(16)=0,1,FVar(16))*5)

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarSet
Trigger1 = 1
V = 43
Value = -1
IgnoreHitPause = 1

[State -1]
Type = ChangeState
TriggerAll = PalNo = 12
TriggerAll = helper(5901),Var(49) = 1
TriggerAll = Random%100<Helper(5901),Var(55)
Trigger1 = Time = 70
Trigger1 = numtarget > 0
Trigger1 = target,Alive
Value = 3100
Ctrl = 0

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; 壁叩き付け　１
[Statedef 3051]
Type     = A
MoveType = H
Physics  = N
Ctrl     = 0
VelSet   = 0,0

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = PosSet
Trigger1 = Pos Y > 0
Y = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitFallSet
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = OffSet
Trigger1 = Time >= 0
X = 1
Persistent = 4

[State -1]
Type = OffSet
Trigger1 = Time >= 2
X = -1
Persistent = 4

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5030)
Trigger1 = 1
Value = 5030

[State -1]
Type = ChangeState
Trigger1 = GetHitVar(HitShakeTime) = 0
Value = 3502

;---------------------------------------------------------------------------
; 壁叩き付け　２
[Statedef 3502]
Type     = A
MoveType = H
Physics  = N
Ctrl     = 0
VelSet   = 0,0

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = PlayerPush
Trigger1 = Time >= 0
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Width
Trigger1 = 1
Edge = 0,-Const(Size.Air.Back)
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1] 
Type = VelSet
Trigger1 = Time = 0
X = -11

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5030)
Trigger1 = Time = 0
Value = 5030

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5035)
Trigger1 =! SelfAnimExist(5030)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Value = 5035

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5050)
Trigger1 =! SelfAnimExist(5030)
Trigger1 =! SelfAnimExist(5035)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Trigger3 = Anim = 5035
Trigger3 = AnimTime = 0
Value = 5050

[State -1]
Type = ScreenBound
Trigger1 = Time <= 25
Value = 1
MoveCamera = 1,1

[State -1]
Type = ScreenBound
Trigger1 = Time > 25
Value = 1
MoveCamera = 0,1

[State -1]
Type = ChangeState
TriggerAll = BackEdgeDist <= 0
Trigger1 = 1
Value = 3053

;---------------------------------------------------------------------------
; 壁叩き付け　３
[Statedef 3053]
Type     = A
MoveType = H
Physics  = N
Ctrl     = 0
VelSet   = 0,0

[State -1]
Type = NotHitBy
Trigger1 = Time < 10
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = Width
Trigger1 = Time = [0,6]
Edge = -Const(Size.Air.Front),-Const(Size.Air.Back)
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Width
Trigger1 = Time >= 7
Trigger1 = Const(Size.Air.Front)-(Time-7) > 0
Edge = -Const(Size.Air.Front)+(Time-7),0
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitFallSet
Trigger1 = Vel Y > 0
Trigger1 = Pos Y >= -30
Trigger2 = Vel Y > 4
Value = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5030)
Trigger1 = Time = 0
Value = 5030

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5035)
Trigger1 =! SelfAnimExist(5030)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Value = 5035

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5050)
Trigger1 =! SelfAnimExist(5030)
Trigger1 =! SelfAnimExist(5035)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Trigger3 = Anim = 5035
Trigger3 = AnimTime = 0
Value = 5050

[State -1]
Type = EnvShake
Trigger1 = Time = 0
Time  = 10
Ampl  = 5
Freq  = 90

[State -1]
Type = VelSet
Trigger1 = Time = 5
X = -1.5
Y = -4.6

[State -1]
Type = VelAdd
Trigger1 = Time >= 6
Y = .48

[State -1]
Type = Turn
Trigger1 = Time = 0

[State -1]
Type = SelfState
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value = 5100

;---------------------------------------------------------------------------
;カッティング・セブンカラーズ
[Statedef 3100]
type    = S
movetype = A
physics = S
velset = 0,0
SprPriority = -1
anim = ifelse(statetype = S,3100,3101);9977

[State -1]
Type = PowerSet
Trigger1 = 1
Value = 0

[State -1]
Type = varset
Trigger1 = 1
V = 13
value = 0

[State 9000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2 = NoFG
flag3 = GlobalNoShadow

[State 3300, 2]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay
ignorehitpause = 1

[State explod]
type = Explod
trigger1 = 1
anim = 3109
id = 6500
sprpriority = 20
postype = back
pos = 0,0
vel = 0,0
bindtime = -1
removetime = 1
;pausemovetime = 60
;supermovetime = 60
supermove = 1
pausemove = 1
ignorehitpause = 1
under = 0
ownpal = 1
ontop = 1

[state  -1]
type = null;AllPalFX
trigger1 = time = 0
time = 10
add = 256,256,256
mul = 256,256,256
invertall = 0
color = 256

[State 1200, 1]
type = HitDef
trigger1 = time = 0 && numtarget
Attr = , SA
animtype  = hard
air.animtype = back
HitFlag = MAFP
GuardFlag = 
sparkno = -1
priority = 3, Hit
pausetime = 0,14
guard.dist = 0
ground.type = low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
air.velocity = -6,-6
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = .00000001
guard.cornerpush.veloff = -11.2
yaccel = .5
kill = 0
;palfx.time = 12
;palfx.add = 255,255,255
;palfx.mul = 128,128,128
fall = 0
air.fall = 1
fall.recover = 0
air.recover = 0
getpower = 0,0
givepower = 35,35
p2stateno = 3110

[State -1]
Type = VarAdd
Trigger1 = time = 0
V = 47
Value = 2
IgnoreHitPause = 1
Persistent = 1

[state -1]
type = hitadd
trigger1 = movehit = 1
value = -1

[State 1200, 2]
type = ChangeState
trigger1 = !ishelper
Trigger1 = time > 9
Trigger1 = time > 9 && numtarget || movehit
Trigger2 = time > 9
value = 3101
ctrl = 1


;---------------------------------------------------------------------------
; エグゼキューション
[Statedef 3101]
Type     = S
MoveType = A
Physics  = N
VelSet   = 0,0
Anim     = 1000
Ctrl     = 0
Facep2   = 1

[State 3300 , 2]
type = helper
triggerAll = Var(54) != 99
triggerAll = NumHelper(340001) = 0
triggerAll = numtarget > 0
triggerAll = time = 0
trigger1 = target,life <= 500
id = 340001
pos = 0,0
postype = left
stateno = 340001
helpertype = normal
ownpal = 1
sprpriority = 99999999
ignorehitpause = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
supermove = 1
ignorehitpause = 1
persistent = 1

[state 3300, 2]
type = playsnd
triggerAll = numpartner = 0
triggerAll = enemy,NumHelper(340000) = 0
triggerAll = enemy,NumHelper(340001) = 0
triggerAll = enemy,NumHelper(340002) = 0
triggerAll = enemy,NumHelper(340003) = 0
triggerAll = enemy,NumHelper(340004) = 0
triggerAll = Var(54) != 99
triggerAll = numtarget > 0
triggerAll = time = 0
trigger1 = target,life <= 500
value = 9999,var(54)
volume = -255
persistent = 0
ignorehitpause = 1
loop = 1
channel = 12

[state 3300, 2]
type = playsnd
triggerAll = numpartner > 0
triggerAll = enemy,NumHelper(340000) = 0
triggerAll = enemy,NumHelper(340001) = 0
triggerAll = enemy,NumHelper(340002) = 0
triggerAll = enemy,NumHelper(340003) = 0
triggerAll = enemy,NumHelper(340004) = 0
triggerAll = partner,NumHelper(340000) = 0
triggerAll = partner,NumHelper(340001) = 0
triggerAll = partner,NumHelper(340002) = 0
triggerAll = partner,NumHelper(340003) = 0
triggerAll = partner,NumHelper(340004) = 0
triggerAll = Var(54) != 99
triggerAll = numtarget > 0
triggerAll = time = 0
trigger1 = target,life <= 500
value = 9999,var(54)
volume = -255
persistent = 0
ignorehitpause = 1
loop = 1
channel = 12

[State 3002,1]
type = BGPalfx
trigger1 = NumHelper(340001) = 1
add = -512,-512,-512
time = 50
ignorehitpause = 1

[state -1]
type = posset
trigger1 = numtarget > 0
trigger1 = time = 0
x = 0
y = 0

[State -1]
Type = TargetBind
Trigger1 = time = 0
Pos = 80,0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 105, 1]
type = VelSet
trigger1 = Time = 1
x = -5
y = -7

[State 105, 1]
type = VelSet
trigger1 = Time > 1
y = Vel Y+Const(Movement.yaccel)

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 1
Value = s1200, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 5
Value = s30, 2
Channel = 3

[State -1]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 3114
ID = 2505
PosType = P1
Pos = 0,-70
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
;SuperMoveTime = 9999
;PauseMoveTime = 9999

[State -1]
Type = null;SuperPause
Trigger1 = Time = 0
Anim = -1
Time = 12
MoveTime = 12
P2DefMul = 1
Darken = 0

[State -1]
Type = VarSet
Trigger1 = Time = 8
V = 14
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 8
V = 13
Value = 0

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = VarRandom
Trigger1 = Time = 0
V = 5
Range = 0,31
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = HitDef
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 8
Attr = S, SA
Damage = Ceil(FVar(0)*(0-Var(4)%2))
HitFlag = MAFD
GuardFlag = 
Priority = 4, Hit
PauseTime = 11,11+Var(41)
HitSound   = s20,30
GuardSound = s120,IfElse((Var(26)=[2,3]),0,10)
SparkXY = -Random%20, -35-Random%20
SparkNo = -1
Guard.SparkNo = s160
AnimType = Midium
Ground.Type = High
Ground.SlideTime = 15
Ground.HitTime  = 15
Ground.Velocity = 0,-11
Air.Velocity = -1*Var(50),-5
AirGuard.Velocity = -2*Var(50),-2.5
Ground.CornerPush.VelOff = 0
Guard.CornerPush.VelOff = -12.5
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = -5*Var(50)
Fall.XVelocity = 0
YAccel = .42
ID = 5600
P2Facing = 1
P2StateNo = 3103
Kill = 1
Guard.Kill = 0
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = 0,0
GivePower = 0, 0

[State -1]
Type = null;Helper
Trigger1 = MoveHit
StateNo = 6000
ID = 6002
PosType = P2
Pos = IfElse(MoveType=H,Ceil(P2Dist X/2),0),-30-Ceil(P2BodyDist Y)
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = pos y >= 0
Trigger1 = time > 5
Value = 3102

[State -1]
Type = null;ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 3102]
type    = S
physics = S
velset = 0,0
ctrl = 0

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 4
Value = s3100, random%2
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 3002,1]
type = BGPalfx
trigger1 = NumHelper(340001) = 1
add = -512,-512,-512
time = 50
ignorehitpause = 1

[State -1]
Type = Explod
Trigger1 = Time = 0
Anim = 10042
ID = 10042
PosType = P1
Pos = 0,0
Ownpal = 1
Scale = 0.5,0.5
SprPriority = 0
IgnoreHitPause = 1
RemoveTime = -2
RemoveOnGetHit = 1

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s41, IfElse((Var(26)=[2,3]),1,11)

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 3102

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
sysvar(2) = 0

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 3103

;---------------------------------------------------------------------------
; エグゼキューション
[Statedef 3103]
Type     = S
MoveType = A
Physics  = N
VelSet   = 0,0
Anim     = 3103
Ctrl     = 0
Facep2   = 1

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 3002,1]
type = BGPalfx
trigger1 = NumHelper(340001) = 1
add = -512,-512,-512
time = 50
ignorehitpause = 1

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = 4
y = -12

[State 105, 1]
type = VelSet
trigger1 = animelem = 9
x = 0
y = 0

[State 105, 1]
type = VelSet
trigger1 = Time < 16
y = Vel Y+Const(Movement.yaccel)

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 9
Anim = -1
Time = 35
MoveTime = 35
P2DefMul = 1
Darken = 0

[State -1]
Type = Helper
Trigger1 = AnimElem = 9
StateNo = IfElse(Var(26)=3,6025,6020)
ID = 10002
Name = "EX_Effect"
Pos = -5,-78
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = AnimElem = 12
StateNo = 3117
ID = 3117
PosType = P1
Pos = 25,-55
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
;SuperMoveTime = 9999
;PauseMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = AnimElem = 12
StateNo = 3116
ID = 3116
PosType = P1
Pos = 25,-55
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
;SuperMoveTime = 9999
;PauseMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = AnimElem = 12
StateNo = 3113
ID = 3113
PosType = P1
Pos = 48,-32
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 0
Persistent = 0
;SuperMoveTime = 9999
;PauseMoveTime = 9999

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 3104

;---------------------------------------------------------------------------
; 空中後ダッシュ
[Statedef 3104]
Type    = A
Physics = A
Anim    = 115
Ctrl    = 0
VelSet  = 0,0

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = -1

[State -1]
type = PlaySnd
trigger1 = Time = 1
value = s110, 0

[State -1]
Type = VarRandom
Trigger1 = AnimElem = 2
V = 1
Range = 0,1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Var(1) = 0
Trigger1 = AnimElem = 2
Value = s115, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = null;Explod
Trigger1 = AnimElem = 2
Anim = 116
ID = 116
Postype = P1
Pos = -45,-55
Ownpal = 1
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
Removetime = -2
Removeongethit = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 11
Value = Var(11)+10

[State -1, VelSet]
Type = VelSet
Trigger1 = Time = [0,1]
X = -3

[State -1, VelSet]
Type = VelSet
Trigger1 = Time >= 2
X = -2.4

[State -1, VelSet]
Type = VelSet
Trigger1 = Time = [0,1]
Y = -3.8

[State -1]
Type = VelAdd
Trigger1 = 1
Y = -.12

[State -1]
Type = varset
trigger1 = WIN
V = 1
value = 100

;---------------------------------------------------------------------------
;カッティング・セブンカラーズ・投げられている相手
[Statedef 3110]
Type    = A
MoveType= H
Physics = N
VelSet = 0,0

[State -1] 
type = Turn
TriggerAll = !(((Floor(EnemyNear,Pos X-Pos X)>0) && (Facing = 1)) ||((Floor(EnemyNear,Pos X-Pos X)<0) && (Facing = -1)))
TriggerAll = NumEnemy = 1
trigger1 = time = 0

[State -1] 
Type = DestroySelf
Trigger1 = Ishelper

[state -1]
Type = AfterImageTime
Trigger1 = 1
Time = 0

[State -1]
Type = HitOverRide
Trigger1 = 1
Attr = , NT, ST, HT
Time = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = NotHitBy
Trigger1 = time < 150
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
Trigger1 = 1;Time = 0
Value = 5010;5030

[State -1] 
Type = SelfState
Trigger1 = Time >= 300
Trigger1 = P2MoveType != A
Value = 5030

;---------------------------------------------------------------------------
;カッティング・セブンカラーズ・投げられている相手
[Statedef 3111]
Type    = A
MoveType= H
Physics = N
VelSet = 0,0

[State -1] 
type = Turn
TriggerAll = !(((Floor(EnemyNear,Pos X-Pos X)>0) && (Facing = 1)) ||((Floor(EnemyNear,Pos X-Pos X)<0) && (Facing = -1)))
TriggerAll = NumEnemy = 1
trigger1 = time = 0

[State -1] 
Type = DestroySelf
Trigger1 = Ishelper

[state -1]
Type = AfterImageTime
Trigger1 = 1
Time = 0

[State -1]
Type = HitOverRide
Trigger1 = 1
Attr = , NT, ST, HT
Time = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
Trigger1 = 1;Time = 0
Value = 5010;5030

[State -1] 
Type = StateTypeSet
Trigger1 = Time >= 10
Trigger1 = P2MoveType != A
StateType = S
MoveType = H
Phisics = S

[State -1] 
Type = ChangeState
Trigger1 = Time >= 10
Trigger1 = P2MoveType != A
Value = 5030

;---------------------------------------------------------------------------
;カッティング・セブンカラーズ・投げられている相手
[Statedef 3122]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = SelfState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = SelfState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 3123 ;HITA_UP (transition)

;---------------------------------------------------------------------------
;カッティング・セブンカラーズ・投げられている相手
[Statedef 3123]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = AnimTime = 0
trigger3 = Vel Y > 0
trigger3 = Pos Y >= 10
trigger4 = Time = 0
trigger4 = Anim != 5035
value = 3124

;---------------------------------------------------------------------------
;カッティング・セブンカラーズ・投げられている相手
[Statedef 3124]
type    = A
movetype= H
physics = N

[State 5050, 1]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090
value = 5050

[State 5050, 2]
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;絶技雷極・安崩拳
[Statedef 3100]
Type    = S
MoveType = A
Physics = S
Ctrl    = 0
Anim    = 3100
VelSet  = 0,0
Facep2 = 1

[State -1]
Type = Varadd
Trigger1 = time = 0
V = 47
Value = 2

[State -1]
Type = VarRandom
Trigger1 = AnimElem = 1
V = 1
Range = 0,1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 3300 , 2]
type = helper
triggerAll = Var(54) != 99
triggerAll = NumHelper(340001) = 0
TriggerAll = time = 0
Trigger1 = Var(1) = 0
Trigger1 = p2life <= 340
Trigger2 = Var(1) = 1
Trigger2 = p2life <= 230
id = 340001
pos = 0,0
postype = left
stateno = 340001
helpertype = normal
ownpal = 1
sprpriority = 99999999
ignorehitpause = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
supermove = 1
ignorehitpause = 1
persistent = 1

[state 3300, 2]
type = playsnd
triggerAll = numpartner = 0
triggerAll = enemy,NumHelper(340000) = 0
triggerAll = enemy,NumHelper(340001) = 0
triggerAll = enemy,NumHelper(340002) = 0
triggerAll = enemy,NumHelper(340003) = 0
triggerAll = enemy,NumHelper(340004) = 0
triggerAll = Var(54) != 99
triggerAll = time = 0
Trigger1 = Var(1) = 0
Trigger1 = p2life <= 340
Trigger2 = Var(1) = 1
Trigger2 = p2life <= 230
value = 9999,var(54)
volume = -255
persistent = 0
ignorehitpause = 1
loop = 1
channel = 12

[state 3300, 2]
type = playsnd
triggerAll = numpartner > 0
triggerAll = enemy,NumHelper(340000) = 0
triggerAll = enemy,NumHelper(340001) = 0
triggerAll = enemy,NumHelper(340002) = 0
triggerAll = enemy,NumHelper(340003) = 0
triggerAll = enemy,NumHelper(340004) = 0
triggerAll = partner,NumHelper(340000) = 0
triggerAll = partner,NumHelper(340001) = 0
triggerAll = partner,NumHelper(340002) = 0
triggerAll = partner,NumHelper(340003) = 0
triggerAll = partner,NumHelper(340004) = 0
triggerAll = Var(54) != 99
triggerAll = time = 0
Trigger1 = Var(1) = 0
Trigger1 = p2life <= 340
Trigger2 = Var(1) = 1
Trigger2 = p2life <= 230
value = 9999,var(54)
volume = -255
persistent = 0
ignorehitpause = 1
loop = 1
channel = 12

[state -1]
type = posset
triggerAll = NumHelper(340001) = 1
trigger1 = time = 0
x = 70*Facing-Ceil(ScreenPos X-Pos X)*Facing
y = 0

[State -1] 
type = Turn
triggerAll = NumHelper(340001) = 1
trigger1 = time < 10 
TriggerAll = !(((Floor(EnemyNear,Pos X-Pos X)>0) && (Facing = 1)) ||((Floor(EnemyNear,Pos X-Pos X)<0) && (Facing = -1)))


[state a];束縛用
type = Helper
;triggerall = !numtarget
triggerAll = NumHelper(340001) = 1
trigger1 = time = 0
name = "sd"
ID = 3110
pos = 0,0
postype = p2
stateno = 3110
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State -1]
Type = NotHitBy
triggerAll = NumHelper(340001) = 1
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State -1]
Type = NotHitBy
Trigger1 = AnimElem = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 88

[State -1]
Type = SuperPause
Trigger1 = AnimElem = 5
Anim = -1
Time = 79
MoveTime = 79
P2DefMul = 1
Darken = 0

[State -1]
Type = Helper
Trigger1 = Var(1) = 0
Trigger1 = AnimElem = 5
StateNo = IfElse(Var(26)=3,6015,6010)
ID = 10001
Name = "EX_Effect"
Pos = 18,-50
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = Var(1) = 1
Trigger1 = AnimElem = 5
StateNo = IfElse(Var(26)=3,6025,6020)
ID = 10001
Name = "EX_Effect"
Pos = 18,-50
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PowerSet
Trigger1 = Time = 8
Trigger1 = Var(13) <= -1
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 8
V = 13
Value = 0

[State -1]
Type = VarAdd
Trigger1 = Time = [70,85]
V = 7
Value = 8
IgnoreHitPause = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = BGPalFx
Trigger1 = Time = [30,85]
Time = 1
Add = -128+Var(7),-126+Var(7),-128+Var(7)
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarSet
Trigger1 = Time = 86
V = 7
Value = 0
IgnoreHitPause = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VelSet
Trigger1 = Time = [47,81]
X = 2
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VelSet
Trigger1 = Time = 82
X = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PosAdd
Trigger1 = Time = [47,49]
Y = -4
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PosAdd
Trigger1 = Time = [50,53]
Y = -3
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PosAdd
Trigger1 = Time = [54,58]
Y = -2
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PosAdd
Trigger1 = Time = [59,62]
Y = -1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PosAdd
Trigger1 = Time = [65,69]
Y = 1
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PosAdd
Trigger1 = Time = [70,74]
Y = 2
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PosAdd
Trigger1 = Time = [75,78]
Y = 3
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PosAdd
Trigger1 = Time = [79,81]
Y = 4
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Var(1) = 1
Trigger1 = AnimElem = 1
Value = s3100, 0
Volume = 255
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Var(1) = 0
Trigger1 = AnimElem = 1
Value = s3100, 1
Volume = 255
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Var(1) = 0
Trigger1 = AnimElem = 12
Value = s3100, 2
Volume = 255
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 10
Value = s41, IfElse((Var(26)=[2,3]),1,11)
Channel = 6
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 12
Value = s2000, 0
Channel = 2

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 12
Value = s3005, 0
Channel = 3

[State -1]
Type = Explod
Trigger1 = AnimElem = 12
ID = 3105
PosType = P1
Pos = 0,0
Random = 0,0
Anim = 3105
Ownpal = 1
SprPriority = 4
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = AnimElem = 12
ID = 3106
PosType = P1
Pos = 0,0
Random = 0,0
Anim = 3106
Ownpal = 1
SprPriority = 5
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = VarAdd
Trigger1 = MoveHit = 1
V = 4
Value = 1
IgnoreHitPause = 1
Persistent = 0

[State -1]
Type = VarSet
Trigger1 = MoveHit = 1
Trigger1 = Var(1) = 1
Trigger1 = FVar(1) > 0.60
FV = 1
Value = 0.60
IgnoreHitPause = 1

[State -1]
Type = HitDef
triggerAll = NumHelper(340001) = 1
TriggerAll = Var(25)/10%10 < 3
Trigger1 = AnimElem = 12
Attr = S, HA
Damage = 9999
AnimType = Hard
HitFlag = MA
Priority = 4, Hit
PauseTime = 15, 15+Var(41)
Guard.PauseTime = 15,15
SparkNo = -1
Guard.SparkNo = -1
SparkXY = -Random%20, -30-Random%20
HitSound = s10, IfElse(Var(26)=2,2,IfElse(Var(26)=3,22,12))
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = High
Air.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1,-7.2
Air.Velocity = -1,-7.2
AirGuard.Velocity = -3,-3
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
P2StateNo = 3160
ID = 5600
P2Facing = 1
Kill = 1
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = 0, 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11), Ceil(IfElse(FVar(16)=0,1,FVar(16))*5)
EnvShake.Time = 15
EnvShake.Ampl = 5
EnvShake.Freq = 90

[State -1]
Type = HitDef
triggerAll = NumHelper(340001) = 0
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(1) = 0
Trigger1 = AnimElem = 12
Attr = S, HA
Damage = Ceil(FVar(0)*(400-Var(4)%2))
AnimType = Hard
HitFlag = MA
Priority = 4, Hit
PauseTime = 15, 15+Var(41)
Guard.PauseTime = 15,15
SparkNo = -1
Guard.SparkNo = -1
SparkXY = -Random%20, -30-Random%20
HitSound = s10, IfElse(Var(26)=2,2,IfElse(Var(26)=3,22,12))
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = High
Air.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1,-7.2
Air.Velocity = -1,-7.2
AirGuard.Velocity = -3,-3
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
Palfx.Time = 90
Palfx.Mul =  255,255,255
Palfx.Add = 100,-120,-120
Palfx.SinAdd = 30,10,10,9
P2StateNo = 3160
ID = 5600
P2Facing = 1
Kill = 1
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = 0, 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11), Ceil(IfElse(FVar(16)=0,1,FVar(16))*5)
EnvShake.Time = 15
EnvShake.Ampl = 5
EnvShake.Freq = 90

[State -1]
Type = HitDef
triggerAll = NumHelper(340001) = 0
TriggerAll = Var(25)/10%10 < 3
Trigger1 = Var(1) = 1
Trigger1 = AnimElem = 12
Attr = S, HA
Damage = Ceil(FVar(0)*(280-Var(4)%2))
AnimType = Hard
HitFlag = MA
Priority = 4, Hit
PauseTime = 15, 15+Var(41)
Guard.PauseTime = 15,15
SparkNo = -1
Guard.SparkNo = -1
SparkXY = -Random%20, -30-Random%20
HitSound = s10, IfElse(Var(26)=2,2,IfElse(Var(26)=3,22,12))
SparkNo = -1
Guard.SparkNo = s160
Ground.Type = High
Air.Type = High
Ground.SlideTime = 16
Ground.HitTime  = 16
Ground.Velocity = -1,-7.2
Air.Velocity = -1,-7.2
AirGuard.Velocity = -3,-3
Ground.CornerPush.VelOff = 0
Air.CornerPush.VelOff = 0
Down.CornerPush.VelOff = 0
Guard.cornerPush.VelOff = 0
Airguard.CornerPush.VelOff = 0
P2StateNo = 3160
ID = 5600
P2Facing = 1
Kill = 1
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = 0, 0
GivePower = Ceil(IfElse(FVar(16)=0,1,FVar(16))*11), Ceil(IfElse(FVar(16)=0,1,FVar(16))*5)
EnvShake.Time = 15
EnvShake.Ampl = 5
EnvShake.Freq = 90

[State -1]
Type = Helper
TriggerAll = Var(0)%10 = 0
Trigger1 = Var(1) = 0
Trigger1 = NumHelper(8000) = 0
Trigger1 = MoveHit
StateNo = 8000
ID = 8000
PosType = P2
Pos = 0,-50
Ownpal = 1
SprPriority = -1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Helper
Trigger1 = RoundState = 2
Trigger1 = Var(1) = 1
Trigger1 = NumTarget(5600) > 0
Trigger1 = Target(5600),StateNo = 3161
StateNo = 3150
ID = 3150
Pos = 0,0
PosType = P2
Ownpal = 1
SprPriority = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = MoveHitReset
Trigger1 = MoveContact
IgnoreHitPause = 1
Persistent = 1

[State -1]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

;----------------------------------------------------------------------------
;(HELPER)束縛用ヘルパー
[Statedef 3210]
type = A
ctrl = 0
anim = 9977;2310
velset = 0,0
movetype = A
physics = N
sprpriority = 3

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;---------------------[攻撃]
[State 2310, 2]
type = HitDef
triggerall = RoundState = 2
trigger1 = animelem = 1
attr = A,HP
damage    = 0,0
priority = 10,Hit
animtype  = hard
hitflag = MAFD
guardflag = 
getpower = 0,0
givepower = 0,0
pausetime = 0,0
sparkno = s-1
sparkxy = 0,0
hitsound   = s-1,0
guard.sparkno = s-1
guardsound = s-1,0
ground.type = high
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0,0
air.velocity = -0,0
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
p2stateno = 3111
numhits = 0
Affectteam = B

[state a]
type = null;ParentVarSet
triggerall = !ishelper(2311)
trigger1 = movehit && numtarget
trigger2 = root,movehit && root,numtarget
var(27) = 0
persistent = 0

[state a]
type = null;ParentVarAdd
triggerall = !ishelper(2311)
trigger1 = movehit && numtarget
trigger2 = root,movehit && root,numtarget
var(25) = 1
persistent = 0

[state a]
type = null;ParentVarSet
triggerall = !ishelper(2311)
trigger1 = movehit && numtarget
var(5) = 10*target,ID+numtarget
ignorehitpause = 1

[state a];ガードエフェクト
type = null;Helper
trigger1 = moveguarded
name = "hit"
ID = 7010
pos = 0,-70+30*(p2statetype=C)
postype = p2
facing = -1
stateno = 7010
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
persistent = 0

[State var]
type = varset
trigger1 = 1
fvar(28) = parent,fvar(28)


;---------------------[]
[state a]
type = DestroySelf
trigger1 = parent,stateno = 3106

[state -1]
type = changeanim
trigger1 = movehit
trigger1 = target,stateno = 3111
value = 9976


;---------------------------------------------------------------------------
;(ENEMY)ヒット、空中束縛
[Statedef 3111]
type    = U
movetype= A
physics = N
ctrl = 0
velset = 0,0
sprpriority = -1
anim = 140

[state a]
type = PosSet
triggerall = time = 0 
trigger1 = teammode = Single
trigger2 = teammode = turns 
y = 0
x = enemy,pos x + 100*-Facing;-Ceil(ScreenPos X-Pos X)*Facing

[State -1] 
type = Turn
trigger1 = time < 10 
TriggerAll = !(((Floor(EnemyNear,Pos X-Pos X)>0) && (Facing = 1)) ||((Floor(EnemyNear,Pos X-Pos X)<0) && (Facing = -1)))


[State 1000, 3]
type = null;playerpush
trigger1 = 1
value = 0

[state -1]
type = null;nothitby
trigger1 = 1
value = SCA

[state a]
type = SelfState
trigger1 = ishelper
value = prevstateno

[State 820, 1]
type = null;ChangeAnim2
Trigger1 = enemy,stateno = [3103,3199]
Trigger1 = GetHitVar(chainid) = 2410
value = 5030

[State 820, 1]
type = null;ChangeAnim2
Trigger1 = enemy,stateno = [3103,3199]
Trigger1 = GetHitVar(chainid) = 2411
value = 5002

[state a]
type = null;PosFreeze
trigger1 = 1
value = 1

[state a]
type = null;lifeset
trigger1 = time = 8
Trigger2 = enemy,stateno = 3106
;trigger1 = enemy(0),stateno = 2603
;trigger1 = enemy,time > 0
;trigger2 = enemy(1),stateno = 2603
;trigger3 = enemy(2),stateno = 2603
value = 0

[State 860]
type = null;ChangeState
trigger1 = Time = 9
trigger1 = !alive;RoundState != 2
Trigger2 = enemy,stateno = 3106
trigger2 = !alive
value = 3163

[State 860]
type = Selfstate
trigger1 = Time = 9
trigger1 = alive
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;絶技雷極・安崩拳P2
[Statedef 3160]
Type     = A
MoveType = H
Physics  = N
Ctrl     = 0
VelSet   = 0,0

[state -1]
type = lifeset
trigger1 = enemy,numhelper(3203) = 1
value = 0

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = HitFallSet
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = OffSet
Trigger1 = Time >= 0
X = 1
Persistent = 4

[State -1]
Type = OffSet
Trigger1 = Time >= 2
X = -1
Persistent = 4

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5030)
Trigger1 = 1
Value = 5030

[State -1]
Type = ChangeState
Trigger1 = GetHitVar(HitShakeTime) = 0
Value = 3161

;---------------------------------------------------------------------------
; 絶技雷極・安崩拳P2
[Statedef 3161]
Type     = A
MoveType = H
Physics  = N
Ctrl     = 0
VelSet   = 0,0

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = PlayerPush
Trigger1 = Time >= 0
Value = 0
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1] 
Type = VelSet
Trigger1 = Time = 0
X = -11

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5030)
Trigger1 = Time = 0
Value = 5030

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5035)
Trigger1 =! SelfAnimExist(5030)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Value = 5035

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5050)
Trigger1 =! SelfAnimExist(5030)
Trigger1 =! SelfAnimExist(5035)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Trigger3 = Anim = 5035
Trigger3 = AnimTime = 0
Value = 5050

[State -1]
Type = ScreenBound
Trigger1 = Time <= 25
Value = 1
MoveCamera = 1,1

[State -1]
Type = ScreenBound
Trigger1 = Time > 25
Value = 1
MoveCamera = 0,1

[State -1]
Type = ChangeState
TriggerAll = BackEdgeDist <= 1
Trigger1 = 1
Value = 3162

;---------------------------------------------------------------------------
; 絶技雷極・安崩拳P2
[Statedef 3162]
Type     = A
MoveType = H
Physics  = N
Ctrl     = 0
VelSet   = 0,0

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = HitFallSet
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5030)
Trigger1 = Time = 0
Value = 5030

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5035)
Trigger1 =! SelfAnimExist(5030)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Value = 5035

[State -1]
Type = ChangeAnim
TriggerAll = SelfAnimExist(5050)
Trigger1 =! SelfAnimExist(5030)
Trigger1 =! SelfAnimExist(5035)
Trigger1 = Time = 0
Trigger2 = Anim = 5030
Trigger2 = AnimTime = 0
Trigger3 = Anim = 5035
Trigger3 = AnimTime = 0
Value = 5050

[State -1]
Type = EnvShake
Trigger1 = Time = 0
Time  = 10
Ampl  = 5
Freq  = 90

[State -1]
Type = VelSet
Trigger1 = Time = 5
X = -1.5
Y = -6.6

[State -1]
Type = VelAdd
Trigger1 = Time >= 6
Y = .48

[State -1]
Type = Turn
Trigger1 = Time = 0

[State -1]
Type = SelfState
Trigger1 = Enemy,NumHelper(3150) = 0
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value = 5100

[State -1]
Type = ChangeState
Trigger1 = Enemy,NumHelper(3150) = 1
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value = 3163

;---------------------------------------------------------------------------
;絶技雷極・安崩拳P2
[Statedef 3163]
Type    = S
MoveType = H
Physics = N
VelSet = 0,0
Ctrl    = 0

[State -1]
Type = EnvShake
Trigger1 = Time = 0
Time  = 10
Ampl  = 5
Freq  = 90

[State -1]
Type = HitFallSet
Trigger1 = 1
Value = 0
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1]
Type = ChangeAnim
Trigger1 = Time = 0
Value = 5110

[State -1]
Type = ChangeAnim
Trigger1 = Anim = 5110
Trigger1 = Time >= 20
Value = 5120

[State -1]
Type = ChangeState
Trigger1 = Anim = 5120
Trigger1 = AnimTime = 0
Value = 3164

;---------------------------------------------------------------------------
;絶技雷極・安崩拳P2
[Statedef 3164]
Type    = S
MoveType = H
Physics = S
VelSet = 0,0
Ctrl    = 0

[State -1]
Type = ChangeAnim
Trigger1 = Time = 0
Value = 5300

[State -1]
Type = SelfState
Trigger1 = Time >= 1
Trigger1 = Enemy,NumHelper(3150) = 0
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;FA永遠の絆『刹牙崩拳』
[Statedef 4000]
type    = S
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 0

[State 3300 , 2]
type = lifeset
triggerAll = palno != 12
trigger1 = life > 300
value = 300

[State 3300 , 2]
type = helper
triggerAll = palno != 12
trigger1 = Time = 0
trigger1 = NumHelper(350000) = 0
id = 350000
pos = 0,0
postype = left
stateno = 350000
helpertype = normal
ownpal = 1
sprpriority = 99999999
ignorehitpause = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
supermove = 1
ignorehitpause = 1
persistent = 1

[State -1]
Type = PowerSet
Trigger1 = Var(13) <= -1
Trigger1 = Time = 4
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 4
V = 13
Value = 0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 52, Ora Remove]
type = RemoveExplod
trigger1 = Time = 0
ID = 7400
ignorehitpause = 1

[State 52, Ora Remove]
type = RemoveExplod
trigger1 = Time = 0
ID = 1402
ignorehitpause = 1

[State 52, Ora Remove]
type = RemoveExplod
trigger1 = Time = 0
ID = 7401
ignorehitpause = 1

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = 2

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 3300

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 64

[State 3000, Superpause]
type = SuperPause
trigger1 = Time = 0
time = 47
movetime = 47
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, VarSet]
type = null;VarSet
triggerall = Time = 4
trigger1 = enemynear,stateno != [120,155]
fvar(36) = 54

[State 3000, AfterImage]
type = null;AfterImage
;triggerall = prevstateno != [3000,3999]
trigger1 = Time = 4
time = 999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast =  150,50,50
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State -1]
Type = Helper
trigger1 = time = 2
StateNo = 6025
ID = 10003
Name = "EX_Effect"
Pos = 0,-40
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 105, 1]
type = null;statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 3000, Voice]
type = PlaySnd
trigger1 = Time = 3
value = 820,0
channel = 0

[State 650, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 0
channel = 10

[State 3000, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 620,0
channel = 1

[State 1200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
animtype  = hard
air.animtype = back
hitflag = MAF
guardflag = M
priority = 3, Hit
pausetime = 0,14
sparkno = -1;S8220+(random%8)
guard.sparkno = S160
sparkxy = -10, -68
hitsound   = S1,1
guardsound = S1,0
damage = ceil(ifelse((14*fvar(0))<7,7,(14*fvar(0)))),0
guard.dist = 0
ground.type = low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
air.velocity = -6,-6
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = .00000001
guard.cornerpush.veloff = -11.2
yaccel = .5
kill = 0
;envshake.time = 15
;envshake.ampl = 4
palfx.time = 12
palfx.add = 255,255,255
palfx.mul = 128,128,128
fall = 0
air.fall = 1
fall.recover = 0
air.recover = 0
getpower = 0,0
givepower = 35,35
p2stateno = 4005

[State 3300 , 2]
type = helper
triggerAll = Var(54) != 99
trigger1 = movehit
trigger1 = NumHelper(340004) = 0
id = 340004
pos = 0,0
postype = left
stateno = 340004
helpertype = normal
ownpal = 1
sprpriority = 99999999
ignorehitpause = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
supermove = 1
ignorehitpause = 1
persistent = 1
[State 2000]
type = BGPalfx
triggerAll = Var(54) != 99
trigger1 = movehit
Add = -256,-256,-256
time = 620
[state 3300, 2]
type = playsnd
triggerAll = numpartner = 0
triggerAll = enemy,NumHelper(340000) = 0
triggerAll = enemy,NumHelper(340001) = 0
triggerAll = enemy,NumHelper(340002) = 0
triggerAll = enemy,NumHelper(340003) = 0
triggerAll = enemy,NumHelper(340004) = 0
triggerAll = Var(54) != 99
trigger1 = movehit
value = 9999,2
volume = -300
persistent = 0
ignorehitpause = 1
loop = 1
channel = 12
[state 3300, 2]
type = playsnd
triggerAll = numpartner > 0
triggerAll = enemy,NumHelper(340000) = 0
triggerAll = enemy,NumHelper(340001) = 0
triggerAll = enemy,NumHelper(340002) = 0
triggerAll = enemy,NumHelper(340003) = 0
triggerAll = enemy,NumHelper(340004) = 0
triggerAll = partner,NumHelper(340000) = 0
triggerAll = partner,NumHelper(340001) = 0
triggerAll = partner,NumHelper(340002) = 0
triggerAll = partner,NumHelper(340003) = 0
triggerAll = partner,NumHelper(340004) = 0
triggerAll = Var(54) != 99
trigger1 = movehit
value = 9999,2
volume = -300
persistent = 0
ignorehitpause = 1
loop = 1
channel = 12

[State 210, 3]
type = Turn
triggerall = time > 1 && numtarget && movehit
trigger1 = facing = -1

[State 1200, 2]
type = ChangeState
trigger1 = time > 1 && numtarget && movehit
value = 4001
persistent = 0

[State 1200, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;FA奇跡を起こせ！二人の絆
[Statedef 4001]
type    = S
movetype = A
physics = N
velset = 0,0
SprPriority = -1
anim = 9978

[state -1]
type = hitadd
trigger1 = time = 0
value = -1

[State 1200, 1]
type = HitDef
trigger1 = time = 0 && numtarget
Attr = , SA
animtype  = hard
air.animtype = back
HitFlag = MAFP
GuardFlag = 
sparkno = -1
priority = 3, Hit
pausetime = 0,14
guard.dist = 0
ground.type = low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
air.velocity = -6,-6
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = .00000001
guard.cornerpush.veloff = -11.2
yaccel = .5
kill = 0
palfx.time = 12
;palfx.add = 255,255,255
;palfx.mul = 128,128,128
fall = 0
air.fall = 1
fall.recover = 0
air.recover = 0
getpower = 0,0
givepower = 35,35
p2stateno = 4005

[State 1000, 3]
type = posset
trigger1 = time = 0
time = 1
x = -120

[State 1200, 2]
type = ChangeState
trigger1 = !ishelper
Trigger1 = time > 1 && numtarget && movehit
Trigger2 = prevstateno != 4000
Trigger2 = time > 1
value = 4002
ctrl = 1

;---------------------------------------------------------------------------
;FA奇跡を起こせ！二人の絆
[Statedef 4002]
type    = S
movetype = A
physics = N
velset = 0,0
SprPriority = -1
anim = 0;9978
ctrl = 0

;---------------------[背景]
[State explod];背景を描画
type = Explod
trigger1 = time = 0
anim = 27017
id = 6500
sprpriority = -999
postype = back
pos = 0,0
vel = -16,0
bindtime = -1
removetime = 422
;pausemovetime = 60
;supermovetime = 60
supermove = 1
pausemove = 1
ignorehitpause = 1
under = 0
ownpal = 1

[State explod];背景を描画
type = Explod
trigger1 = time = 0
anim = 27017
id = 6500
sprpriority = -999
postype = back
pos = 640,0
vel = -16,0
bindtime = -1
removetime = 422
;pausemovetime = 60
;supermovetime = 60
supermove = 1
pausemove = 1
ignorehitpause = 1
under = 0
ownpal = 1

[State 2000]
type = superpause
Trigger1 = time = 0
darken = 0
time =410
anim = -1
;sound = S3,1
pos = 0,0
movetime = 410
;supermovetime = 410

[State -1, Helper]
Type = Helper
Trigger1 = Time = 0
Stateno = 10190
ID = 10190
Name = "shiki"
Pos = 100,0
PosType = Left
Ownpal = 1
Keyctrl = 0
SprPriority = 2
IgnoreHitPause = 1
supermove = 1
pausemovetime = 99999
supermovetime = 99999
Persistent = 0
helperype = Normal
size.xscale = 0.5
size.yscale = 0.5

[State -1, Helper]
Type = Helper
Trigger3 = TeamMode = turns
Trigger2 = TeamMode = Single
Trigger1 = TeamMode = simul
TriggerAll = Time = 411;1
Stateno = 3800;15006
ID = 15006
Name = "Lion"
Pos = 100,0
PosType = Left
Ownpal = 1
Keyctrl = 0
SprPriority = 2
IgnoreHitPause = 1
pausemovetime = 99999
supermovetime = 99999
Persistent = 0
helperype = Player;Normal;
size.xscale = 0.5
size.yscale = 0.5

[State 1200, 2]
type = ChangeState
TriggerAll = helper(5901),var(48) = 1
Trigger1 = TeamMode = Single
Trigger1 = Time = 411
Trigger2 = TeamMode = simul
Trigger2 = Time = 411
Trigger3 = TeamMode = turns
Trigger3 = Time = 411
value = 3800
ctrl = 1

[State 1200, 2]
type = ChangeState
Trigger1 = TeamMode = Single
Trigger1 = Time = 412;2
Trigger2 = TeamMode = simul
Trigger2 = Time = 412;2
Trigger3 = TeamMode = turns
Trigger3 = Time = 412;2
value = 3800
ctrl = 1

;---------------------------------------------------------------------------
;FA奇跡を起こせ！二人の絆
[Statedef 4005]
type    = A
movetype = H
physics = N
velset = 0,0
SprPriority = -1

[State 758, Velocity]
type = PosSet
trigger1 = prevstateno != 4005
trigger2 = enemy,stateno = 4001
y = 0
x = 0
[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 1

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[State 5070, 1]
type = ChangeAnim
trigger1 = time = 0
value = 5001

[state -1]
Type = lifeadd
trigger1 = enemy,StateNo = 13100
value = -9999

[state -1]
Type = selfstate
trigger1 = enemy,StateNo = 0
value = 5100

;---------------------------------------------------------------------------
;魔神剣・刹牙
[Statedef 3800]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 0
ctrl = 0
anim = ifelse(ishelper,3800,3802)
sprpriority = 2
facep2 = 1

;-----BC 共通ステート部分 此処〜-----

[State 3000, AS]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noFG

[State 3000, AS]
type = AssertSpecial
trigger1 = 1
flag = globalnoshadow
flag2 = timerfreeze
flag3 = unguardable

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1000, 0]
type = RemoveExplod
trigger1 = time = 0
persistent = 0

[State 1000, 0]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 20
under = 0

[State 1000, 0]
type = EnvColor
trigger1 = time = [20,30]
value = ceil(255-(time-20)*25.5),ceil(255-(time-20)*25.5),ceil(255-(time-20)*25.5)
time = 1
under = 0

[State 1000, 0]
type = EnvColor
trigger1 = time = 30
value = 0,0,0
time = 30
under = 0

[State 200, Sound]
type = PlaySnd
trigger1 = Time = 5
trigger1 = ishelper
value = 2, 0;17
channel = 10
volume = 0;400

[State 200, Sound]
type = PlaySnd
trigger1 = Time = 5
trigger1 = !ishelper
value = 990, 0;17
channel = 10
volume = 999

[State 3000, Explod]
type = Explod
trigger1 = time = 0
trigger1 = !ishelper
anim = 6001
ID = 6001
pos = 180,170
postype = back
removetime = -2
bindtime = -1
supermovetime = 9999
pausemovetime = 9999
ontop = 1
ownpal = 1
scale = const(size.xscale)*0.5,const(size.yscale)*0.5
ignorehitpause = 1
persistent = 0

[State 3000, Explod]
type = Explod
trigger1 = time = 0
trigger1 = !ishelper
anim = 6003
ID = 6001
pos = 140,170
postype = back
removetime = -2
bindtime = -1
supermovetime = 9999
pausemovetime = 9999
ontop = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 3000, Cut-In1]
type = Helper
trigger1 = time = 0
trigger1 = ishelper
name = "cut-in"
id = 6000
stateno = 3802
ownpal = 1
postype = left
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
persistent = 0

[State 1000, 0]
type = EnvColor
trigger1 = time = [60,385]
value = 255,255,255
time = 1
under = 1

[State 1000, 0]
type = EnvColor
trigger1 = time = [385,405]
value = ceil(255-(time-385)*12.75),ceil(255-(time-385)*12.75),ceil(255-(time-385)*12.75)
time = 1
under = 1

[State 1000, 0]
type = BGPalFx
trigger1 = time = [405,425]
mul = ceil((time-405)*12.75),ceil((time-405)*12.75),ceil((time-405)*12.75)
time = 1

[State 3000, posset]
type = posset
trigger1 = ishelper
trigger1 = time = 40
x = -100 * -facing
y = 0

[State -1] 
type = Turn
trigger1 = time = 40
TriggerAll = !(((Floor(EnemyNear,Pos X-Pos X)>0) && (Facing = 1)) ||((Floor(EnemyNear,Pos X-Pos X)<0) && (Facing = -1)))


[State 1000, 0]
type = TargetBind
trigger1 = ishelper
trigger1 = time = 40
time = 1
pos = 100,0

[State 3000, posset]
type = Null;posadd
trigger1 = time = 41
trigger1 = p2dist x != 50
x = p2dist x -100
y = 0

;-----BC 共通ステート部分 此処迄-----

[State 1000, 0]
type = PowerAdd
trigger1 = time = 0
value = -3000

[State 230, 0]
type = VelSet
trigger1 = ishelper
trigger1 = AnimElem = 19
x = -8
y = -12

[State 230, 0]
type = VelSet
trigger1 = ishelper
trigger1 = AnimElem = 26
x = 0
y = -10

[State 230, 0]
type = PosSet
trigger1 = !ishelper
trigger1 = AnimElem = 26
x = -50*facing
y = -250

[State 230, 0]
type = null;PosSet
trigger1 = ishelper
trigger1 = AnimElem = 22
x = -50*facing
y = 0

[State 230, 0]
type = VelMul
trigger1 = !ishelper
trigger1 = AnimElem = 27,> 0
trigger1 = AnimElem = 35,< 0
y = .9

[State 1070, 1]
type = Gravity
trigger1 = !ishelper
;trigger1 = AnimElem = 27,> 0
;trigger1 = Vel Y < -0
trigger1 = AnimElem = 35,> 10

[State 20000, 1]
type = VarSet
trigger1 = time = 0
var(0) = 3800

[State 200, 連携処理]
type = VarSet
trigger1 = Time = 0
var(1) = 0

[State -1]
type = VarSet
trigger1 = time = 0
var(56) = 0

[State 200, 連携処理]
type = VarAdd
triggerall = var(54)
trigger1 = Time = 0
fvar(1) = 0

[State -2, CC消費]
type = VarAdd
trigger1 = Time = 0
var(40) = 0

[State 200, 時間取得]
type = VarSet
trigger1 = AnimElem = 32
trigger2 = AnimElem = 33
trigger3 = AnimElem = 34
var(49) = gametime

[State -2, BC拡大演出可否]
type = VarSet
triggerall = !var(44)
trigger1 = TeamMode = single || TeamMode = turns
trigger1 = Enemy,TeamMode = single || Enemy,TeamMode = turns
var(44) = 1

[State -2, BC拡大演出可否]
type = VarSet
trigger1 = !fvar(28)
trigger2 = enemy,alive = 0
trigger3 = enemy,life <= 0
trigger4 = fvar(28) < 1
fvar(28) = 1

[State -2, BC拡大演出]
type = AngleDraw
trigger1 = fvar(28) != 1
trigger1 = var(44) = 1
value = 0
scale = fvar(28),fvar(28)

[State 200, BC拡大演出]
type = null;ParentVarSet
triggerall = var(44) = 1
trigger1 = AnimElem = 1
fvar(28) = 1.25

[State 200, BC拡大演出]
type = null;PanrentVarAdd
triggerall = var(44) = 1
trigger1 = animelemtime(30) >= 0
trigger1 = animelemtime(35) <= 2
fvar(28) = -.02

[State 200, BC拡大演出]
type = VarSet
triggerall = var(44) = 1
trigger1 = AnimElem = 1
fvar(28) = 1.25

[State 200, BC拡大演出]
type = VarAdd
triggerall = var(44) = 1
trigger1 = animelemtime(30) >= 0
trigger1 = animelemtime(35) <= 2
fvar(28) = -.02

[State 200, BC拡大演出]
type = Null;AngleDraw
trigger1 = var(44) = 1
value = 0
scale = fvar(28),fvar(28)

[State 200, クリティカル]
type = VarSet
trigger1 = Time = 0
V = 15
Value = 0

[State 20000, PalFX]
type = Null;PalFX
trigger1 = time < 10
time = 1
add = -ceil(time*2.4),-ceil(time*4.0),-ceil(time*1.2)
persistent = 1

[State 20000, PalFX]
type = Null;PalFX
trigger1 = time >= 10
trigger1 = time < 28
time = 1
add = -24,-40,-12
persistent = 1

[State 20000, PalFX]
type = Null;PalFX
trigger1 = time >= 28
trigger1 = time < 38
time = 1
add = -24+ceil((time-28)*2.4),-40+ceil((time-28)*4.0),-12+ceil((time-28)*1.2)
persistent = 1

[State 3000, AfterImage]
type = Null;AfterImage
trigger1 = AnimElem = 5
time = 11
TimeGap  = 2
framegap = 1
length = 6
PalBright = 1,1,1
PalContrast = 256, 256, 256
PalAdd = 0,0,0
PalMul = .8,.8,.8
trans = add1

[State 800, 3]
type = Helper
trigger1 = ishelper
trigger1 = AnimElem = 18
stateno = 3801
id = 3801
keyctrl = 0
ownpal = 1

[State 800, 3]
type = Helper
trigger1 = !ishelper
trigger1 = AnimElem = 32
stateno = 3806
id = 3806
keyctrl = 0
ownpal = 1
pos = -65,-35

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 32
Value = s2000, 0
Channel = 2

[State -1]
Type = PlaySnd
Trigger1 = AnimElem = 32
Value = s3005, 0
Channel = 3

[State 1000, 0]
type = HitDef
trigger1 = AnimElem = 32
;trigger2 = AnimElem = 33
;trigger3 = AnimElem = 34
attr = S, HA
animtype = Light
damage = ceil((194)*fvar(6))
getpower = 19
givepower = 19
hitflag = MAFD
guardflag = LA
pausetime = 0,0
sparkxy = -0, 0
hitsound = S3005,0
guardsound = S0,1
ground.type = High
ground.slidetime = 8
ground.hittime = 24
air.hittime = 24
ground.velocity = -4,2
air.velocity = -4,2
Fall.Recover = 0
kill = 0
id = var(49)

[State 3300, 2]
type = TargetState
trigger1 = MoveHit = 1
value = 3960
id = var(49)

[State 1000, 2]
type = StateTypeSet
trigger1 = AnimElem = 19
statetype = A
physics = N

[State 1000, 2]
type = StateTypeSet
trigger1 = ishelper
trigger1 = AnimElem = 22
statetype = S
physics = N

;-----BC 演出ステート部分 此処〜-----

[State 200, Sound]
type = PlaySnd
trigger1 = ishelper
trigger1 = AnimElem = 9,20
value = 4, 11
channel = 10
volume = 400

[State 200, Sound]
type = PlaySnd
trigger1 = ishelper
trigger1 = AnimElem = 16
value = 6, 11
channel = 10
volume = 400

[State 200, Sound]
type = PlaySnd
trigger1 = !ishelper
trigger1 = AnimElem = 24,46
value = 2350, 0;9
channel = 10
volume = 999

[State 200, Sound]
type = PlaySnd
trigger1 = !ishelper
trigger1 = AnimElem = 30
value = 3100, 2
channel = 10
volume = 999

[State 200, Sound]
type = null;PlaySnd
trigger1 = AnimElem = 32
value = 0, 2

[State 200, Sound]
type = null;PlaySnd
trigger1 = AnimElem = 32
value = 0, 7

[State 20000, PalFX]
type = PalFX
trigger1 = time = [200,220]
time = 1
add = -ceil((time-200)*2.0),-ceil((time-200)*12.5),-ceil((time-200)*12.0)
persistent = 1

[State 20000, PalFX]
type = PalFX
trigger1 = time = [220,300]
time = 1
add = -40,-250,-240
persistent = 1

[State 20000, PalFX]
type = PalFX
trigger1 = time = [300,370]
time = 1
add = -240,-240,-240
persistent = 1

[State 20000, PalFX]
type = PalFX
trigger1 = time = [370,400]
time = 1
add = -240+ceil((time-370)*8),-240+ceil((time-370)*8),-240+ceil((time-370)*8)
persistent = 1

[State 20000, PalFX]
type = Trans
trigger1 = time = [300,330]
trans = AddAlpha
alpha = 0,256

[State 10000, Trans]
type = Trans
trigger1 = time = [330,362]
trans = AddAlpha
alpha = ceil((time-330)*8),256-ceil((time-330)*8)

[State 1000, 0]
type = ScreenBound
trigger1 = AnimElem = 19,> 0
trigger1 = AnimElem = 26,< 0
value = 0
movecamera = 0,0

[State 3000, BGHelper]
type = Helper
trigger1 = ishelper
trigger1 = AnimElem = 9
name = "bg-helper"
id = 6830
stateno = 3803
ownpal = 1
postype = back
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
persistent = 0

[State 3000, Explod]
type = Explod
trigger1 = ishelper
trigger1 = AnimElem = 9
anim = 6806
ID = 6800
ownpal = 1
sprpriority = -5
scale = fvar(28),fvar(28)

[State 3000, Explod]
type = Explod
trigger1 = ishelper
trigger1 = AnimElem = 15,> 0
trigger1 = AnimElem = 18,< 0
trigger1 = time % 8 = 0
anim = 6800
ID = 6800
pos = 0,-time%40
ownpal = 1
sprpriority = 5

[State 3000, Explod]
type = Explod
trigger1 = ishelper
trigger1 = AnimElem = 16,> 0
trigger1 = AnimElem = 18,< 0
trigger1 = time % 4 = 0
anim = 6801
ID = 6800
pos = 0,-time%26
ownpal = 1
sprpriority = -5

[State 3000, Explod]
type = Explod
trigger1 = ishelper
trigger1 = AnimElem = 16,> 0
trigger1 = AnimElem = 18,< 0
trigger1 = time % 12 = 0
anim = 16801
ID = 6800
pos = 0,-40+time%18
ownpal = 1
sprpriority = -5

[State 3000, Explod]
type = Explod
trigger1 = ishelper
trigger1 = AnimElem = 18,> 0
trigger1 = AnimElem = 24,< 0
trigger1 = time % 6 = 0
anim = 6830
ID = 6830
pos = -180+((time%13)*10)
postype = back
vel = 0,-2
accel = 0,.05
ownpal = 1
sprpriority = 5

[State 3000, Explod]
type = Explod
trigger1 = ishelper
trigger1 = AnimElem = 18,> 0
trigger1 = AnimElem = 24,< 0
trigger1 = time % 6 = 3
anim = 6831
ID = 6830
pos = -180+((time%13)*10)
postype = back
vel = 0,-2
accel = 0,.05
ownpal = 1
sprpriority = -5

[State 3000, Explod]
type = Explod
trigger1 = ishelper
trigger1 = AnimElem = 17,> 50
trigger1 = AnimElem = 20,< 0
trigger1 = time % 2 = 0
anim = 6802
ID = 6800
pos = 0,0
accel = -.1*fvar(28),-.05*fvar(28)
ownpal = 1
sprpriority = -5
scale = fvar(28),fvar(28)

[State 3000, Explod]
type = null;Explod
trigger1 = AnimElem = 29
anim = 6804
ID = 6800
accel = .01*fvar(28),.01*fvar(28)
ownpal = 1
sprpriority = -5
scale = fvar(28),fvar(28)

[State 3000, Explod]
type = null;Explod
trigger1 = AnimElem = 29
anim = 6805
ID = 6800
accel = .01*fvar(28),-.01*fvar(28)
ownpal = 1
sprpriority = -5

;-----BC 演出ステート部分 此処迄-----

[State 3000, BC End]
type = Helper
trigger1 = !ishelper
trigger1 = AnimElem = 35, 10
name = "bc-end"
stateno = 3805
ownpal = 1
postype = left
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
persistent = 0

[State 3000, BC End]
type = Helper
trigger1 = !ishelper
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
name = "bc-end"
stateno = 3804
ownpal = 1
postype = left
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
persistent = 0

[State 230, 0]
type = PosSet
trigger1 = ishelper
trigger1 = AnimElem = 35
x = 100
y = 0

[State 1070, 2]
type = ChangeState
trigger1 = ishelper
trigger1 = AnimElem = 35
value = 0

[State 1070, 2]
type = ChangeState
trigger1 = !ishelper
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 51

;---------------------------------------------------------------------------
;刹牙エフェクトA
[Statedef 3801]
type    = S
movetype= A
physics = N
juggle  = 1
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1999
sprpriority = 8

[State 1001, ASpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1

[State 1001, NotHit]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1001, VelSet]
type = VelSet
trigger1 = time = 8
y = -2.8

[State 1001, VarSet]
type = VarSet
trigger1 = time = 0
fvar(7) = root,fvar(7)
ignorehitpause = 1

[State 1001, Proj]
type = Projectile
trigger1 = time = 8
trigger2 = time = 16
trigger3 = time = 24
trigger4 = time = 32
trigger5 = time = 40
trigger6 = time = 90
trigger7 = time = 98
trigger8 = time = 106
ProjID = 3801
ProjAnim = 3801
projremovetime = 4
projedgebound = 30
projstagebound = 30
attr = A, HP
animtype = Light
damage = ceil((333)*fvar(7))
getpower = 33
givepower = 33
hitflag = MAFD
guardflag = MA
pausetime = 0,4
sparkno = -1
guard.sparkno = -1
hitsound = S0,6
guardsound = S0,1
ground.type = High
ground.slidetime = 8
ground.hittime = 24
air.hittime = 24
ground.velocity = 0,-4.2
air.velocity = 0,-4.2
fall.recover = 0
air.recover = 0
kill = 0
p2stateno = 3960

[State 1001, Proj]
type = Projectile
trigger1 = time = 46
trigger2 = time = 52
trigger3 = time = 56
trigger4 = time = 60
trigger5 = time = 80
trigger6 = time = 84
ProjID = 3801
ProjAnim = 3801
projremovetime = 4
projedgebound = 30
projstagebound = 30
attr = A, HP
animtype = Light
damage = ceil((333)*fvar(7))
getpower = 33
givepower = 33
hitflag = MAFD
guardflag = MA
pausetime = 0,2
sparkno = -1
guard.sparkno = -1
hitsound = S0,6
guardsound = S0,1
ground.type = High
ground.slidetime = 8
ground.hittime = 24
air.hittime = 24
ground.velocity = 0,-4.2
air.velocity = 0,-4.2
fall.recover = 0
air.recover = 0
kill = 0
p2stateno = 3960

[State 1001, Proj]
type = Projectile
trigger1 = time = 62
trigger2 = time = 64
trigger3 = time = 66
trigger4 = time = 68
trigger5 = time = 70
trigger6 = time = 72
trigger7 = time = 74
trigger8 = time = 76
ProjID = 3801
ProjAnim = 3801
projremovetime = 4
projedgebound = 30
projstagebound = 30
attr = A, HP
animtype = Light
damage = ceil((333)*fvar(7))
getpower = 33
givepower = 33
hitflag = MAFD
guardflag = MA
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
hitsound = S0,6
guardsound = S0,1
ground.type = High
ground.slidetime = 8
ground.hittime = 24
air.hittime = 24
ground.velocity = 0,-4.2
air.velocity = 0,-4.2
fall.recover = 0
air.recover = 0
kill = 0
p2stateno = 3960

[State 3000, Explod]
type = Explod
trigger1 = time = [10,75]
trigger1 = time % 3 = 0
anim = 6801
ID = 16801
pos = -80+ceil(time*1.2),(((time%13)*9)-100)+ceil(time*1.2)
ownpal = 1
sprpriority = -5

[State 3000, Explod]
type = Explod
trigger1 = time = [65,100]
trigger1 = time % 3 = 0
anim = 16801
ID = 16801
pos = 20+ceil(time*1.2),(((time%13)*9)-100)+ceil(time*.4)
ownpal = 1
sprpriority = -5

[State 3000, Explod]
type = Explod
trigger1 = time = [20,100]
trigger1 = time % 4 = 0
anim = 6803
ID = 16801
pos = 0,ceil((((time%7)*10)+ceil(40-time/2))*fvar(28))
accel = -.02*fvar(28),.1*fvar(28)
ownpal = 1
sprpriority = IfElse(time%8=0,5,-5)
scale = fvar(28),fvar(28)

[State 1001, DSelf]
type = DestroySelf
trigger1 = time = 120

;---------------------------------------------------------------------------
;Cut-IN1
[Statedef 3802]
type    = S
movetype= A
physics = N
juggle  = 1
poweradd= 0
ctrl = 0
velset = 0,0
anim = 6000
sprpriority = 5

[State 210, テスト用]
type = Null;pause
trigger1 = 1
time = 10

[State 160, SND]
type = PlaySnd
trigger1 = time = 0
value = S12,1

[State 2180, 0]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1
supermovetime = 9999
pausemovetime = 9999

[State 2180, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 4900, 2]
type = PosSet
trigger1 = time = 0
x = 0
y = (240-ScreenPos Y)-120

[State 4900, BG]
type = Explod
trigger1 = time = 20
anim = 6020
ID = 6020
pos = 0,0
postype = left
removetime = 48
bindtime = -1
supermovetime = 9999
pausemovetime = 9999
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 4900, 4]
type = Explod
trigger1 = time = 20
;trigger1 = parent,ishelper
anim = 6011
ID = 6011
pos = 240,120
postype = back
facing = -root,facing
removetime = -2
bindtime = -1
supermovetime = 9999
pausemovetime = 9999
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 4900, 4]
type = Explod
trigger1 = time = 20
;trigger1 = !parent,ishelper
anim = 6010
ID = 6010
pos = 100,120
postype = back
facing = root,facing
removetime = -2
bindtime = -1
supermovetime = 9999
pausemovetime = 9999
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0
scale = 0.5,0.5

[State 1100, 4]
type = ModifyExplod
trigger1 = time > 56
ID = 6010
scale = 0.5+(time-56)*.2,0.5+(time-56)*.2

[State 1100, 4]
type = ModifyExplod
trigger1 = time > 56
ID = 6011
scale = 1+(time-56)*.2,1+(time-56)*.2

[State 4900, 枠]
type = Explod
trigger1 = time = 20
anim = 6021
ID = 6021
pos = 0,0
postype = left
removetime = 48
bindtime = -1
supermovetime = 9999
pausemovetime = 9999
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 3]
type = HitDef
trigger1 = time = 0
attr = S, HA
;affectteam = B
animtype = Light
damage = 0,0
getpower = 0
givepower = 0
hitflag = MAFD
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
numhits = 0
p2facing = root,facing
fall.recover = 0
air.recover = 0

[State 3300, 2]
type = TargetState
trigger1 = MoveHit
value = 3950

[State 1000, 2]
type = HitOverRide
trigger1 = 1
time = 1
attr = SCA,AA,AP,AT
stateno = 6999
ignorehitpause = 1

[State 4900, DSelf]
type = DestroySelf
trigger1 = time = 68

;---------------------------------------------------------------------------
;刹牙 - BG
[Statedef 3803]
type    = S
movetype= A
physics = N
juggle  = 1
poweradd= 0
ctrl = 0
velset = 0,0
anim = 6999
sprpriority = -5

[State 2180, 0]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1
supermovetime = 9999
pausemovetime = 9999

[State 2180, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 2180, 1]
type = Null;VarSet
trigger1 = var(1) = 1
var(0) = 1

[State 2180, 1]
type = Null;VarSet
trigger1 = root,Anim = 3140
trigger1 = root,AnimTime = -64
var(1) = 64

[State 2180, 1]
type = Null;VarAdd
trigger1 = var(1) > 0
var(1) = -1

[State 1000, 0]
type = Null;BGPalFx
trigger1 = Var(1) > 0
mul = 256-(var(1)*4),256-(var(1)*4),256-(var(1)*4)
time = 1

[State 3000, Explod]
type = Explod
trigger1 = time = 0
anim = 6830
ID = 6830
pos = 0,-50
postype = back
vel = 0,.2
accel = 0,.02
sprpriority = 5
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
ignorehitpause = 0

[State 3000, Explod]
type = Explod
trigger1 = time = 0
anim = 6831
ID = 6830
pos = 0,50
postype = back
vel = 0,-.2
accel = 0,-.02
sprpriority = -5
supermovetime = 9999
pausemovetime = 9999
ownpal = 1
ignorehitpause = 0

[State 3000, MExplod]
type = Null;ModifyExplod
trigger1 = Var(1) > 0
ID = 6830
trans = addalpha
alpha = var(1)*4,256
ignorehitpause = 0

[State 3000, RExplod]
type = Null;RemoveExplod
trigger1 = Var(0) = 1
ID = 6830
ignorehitpause = 0

[State -2]
type = Null;DisplayToClipboard
trigger1 = 1
text="var(40) %d / var(1) %f / var(6) %d / var(5) %d / pos %f"
params = var(40),var(1),var(6),var(5),pos y

[State 1000, 2]
type = HitOverRide
trigger1 = 1
time = 1
attr = SCA,AA,AP,AT
stateno = 6999
ignorehitpause = 1

[State 4900, DSelf]
type = DestroySelf
trigger1 = NumExplod(6830) = 0

;---------------------------------------------------------------------------
;BC End
[Statedef 3804]
type    = S
movetype= A
physics = N
juggle  = 1
poweradd= 0
ctrl = 0
velset = 0,0
anim = 6000
sprpriority = 5

[State 210, テスト用]
type = Null;pause
trigger1 = 1
time = 10

[State 2180, 0]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1
supermovetime = 9999
pausemovetime = 9999

[State 2180, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 4900, 2]
type = PosSet
trigger1 = time = 0
x = 0
y = (240-ScreenPos Y)-120

[State 200, 3]
type = HitDef
trigger1 = time = 0
attr = S, HA
affectteam = F
animtype = Light
damage = 0,0
getpower = 0
givepower = 0
hitflag = MAFD
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
numhits = 0
fall.recover = 0
air.recover = 0

[State 1000, 2]
type = HitOverRide
trigger1 = 1
time = 1
attr = SCA,AA,AP,AT
stateno = 6999
ignorehitpause = 1

[State 4900, DSelf]
type = DestroySelf
trigger1 = time = 10
;---------------------------------------------------------------------------
;BC End
[Statedef 3805]
type    = S
movetype= A
physics = N
juggle  = 1
poweradd= 0
ctrl = 0
velset = 0,0
anim = 6000
sprpriority = 5

[State 210, テスト用]
type = Null;pause
trigger1 = 1
time = 10

[State 2180, 0]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignorehitpause = 1
supermovetime = 9999
pausemovetime = 9999

[State 2180, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 4900, 2]
type = PosSet
trigger1 = time = 0
x = 0
y = (240-ScreenPos Y)-120

[State 200, 3]
type = HitDef
trigger1 = time = 0
attr = S, HA
animtype = Light
damage = 1,1
getpower = 0
givepower = 0
hitflag = MAFD
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
numhits = 0
ground.velocity = -enemy,facing*(enemy,vel x)/2,(enemy,vel y)/2
air.velocity = -enemy,facing*(enemy,vel x)/2,(enemy,vel y)/2
p2stateno = 3970
fall.recover = 0
air.recover = 0

[State 200, 3]
type = HitDef
trigger1 = time = 0
trigger1 = numhelper(340004) != 0;parent,stateno = 3800
attr = S, HA
animtype = Light
damage = 99999,99999
getpower = 0
givepower = 0
hitflag = MAFD
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
numhits = 0
ground.velocity = -enemy,facing*(enemy,vel x)/2,(enemy,vel y)/2
air.velocity = -enemy,facing*(enemy,vel x)/2,(enemy,vel y)/2
p2stateno = 3970
fall.recover = 0
air.recover = 0

[State 1000, 2]
type = HitOverRide
trigger1 = 1
time = 1
attr = SCA,AA,AP,AT
stateno = 6999
ignorehitpause = 1

[State 4900, DSelf]
type = DestroySelf
trigger1 = time = 10

;---------------------------------------------------------------------------
;都古エフェクト
[Statedef 3806]
type    = S
movetype= A
physics = N
juggle  = 1
poweradd= 0
ctrl = 0
velset = 0,0
anim = 3105
sprpriority = 8

[State -1]
Type     = Trans
Trigger1 = 1
Trans    = Add

[State -1]
Type     = AngleDraw
Trigger1 = 1
Scale    = 1,1

[State -1]
Type     = AngleSet
Trigger1 = 1
Value    = -45
[State -1, NotHitBy]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1,end]
type = Destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;敵動作(BC開始)
[Statedef 3950]
type    = S
movetype= H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 0

[State 900, 0]
type = ChangeState
trigger1 = alive = 0
trigger2 = life <= 0
value = 3999
ignorehitpause = 1

[State 2180, 0]
type = AssertSpecial
trigger1 = 1
flag = invisible
ignorehitpause = 1
supermovetime = 9999
pausemovetime = 9999

[State 900, 1]
type = ChangeAnim2
trigger1 = Time >= 0
value = 3950
ignorehitpause = 1

[State 216]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 216]
type = PosSet
trigger1 = Time = 0
y = 0

[State 900, 2]
type = ChangeState
trigger1 = Time = 9999
trigger2 = RoundState != 2
value = 3997
ctrl = 0
ignorehitpause = 1

[State 900, BC拡大演出]
type = AngleDraw
trigger1 = numenemy
trigger1 = enemy,authorname = "kisaragiryuto"
trigger1 = enemy,var(44) = 1
value = 0
scale = enemy,fvar(28),enemy,fvar(28)

[State 900, 0]
type = AngleSet
trigger1 = Time = 0
value = 0
;---------------------------------------------------------------------------
;敵動作(BC)
[Statedef 3960]
type    = U
movetype= H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 0

[State 160, SND]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random < 500
value = S5000,random&3

[State 900, 0]
type = ChangeState
trigger1 = alive = 0
trigger2 = life <= 0
value = 3999
ignorehitpause = 1

[State 900, 0]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel)
statetype = A

[State 900, 1]
type = ChangeAnim
trigger1 = Time >= 0
value = 5010
ignorehitpause = 1

[State 900, 2]
type = ChangeState
trigger1 = GetHitVar(hitshaketime) = 0
trigger1 = life > 0
value = 3961
ctrl = 0
ignorehitpause = 1

[State 900, BC拡大演出]
type = AngleDraw
trigger1 = numenemy
trigger1 = enemy,authorname = "kisaragiryuto"
trigger1 = enemy,var(44) = 1
value = 0
scale = enemy,fvar(28),enemy,fvar(28)

[State 900, 0]
type = AngleSet
trigger1 = Time = 0
value = 0
;---------------------------------------------------------------------------
[Statedef 3961]
type    = U
movetype= H
physics = U
ctrl = 0
sprpriority = 0

[State 900, 1]
type = ChangeAnim
trigger1 = Time >= 0
value = 5015
ignorehitpause = 1

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 901, Gravity]
type = VelAdd
trigger1 = statetype = A
y = GetHitVar(yaccel)

[State 216]
type = PosSet
trigger1 = vel y > 0
trigger1 = pos y >= 0
y = 0

[State 902, Friction]
type = StateTypeSet
trigger1 = statetype != A
physics = S

[State 900, 2]
type = ChangeState
trigger1 = statetype != A
trigger1 = Time = 9999
value = 3997
ctrl = 0
ignorehitpause = 1

[State 900, 2]
type = ChangeState
trigger1 = statetype = A
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 3962
ctrl = 0
ignorehitpause = 1

[State 900, BC拡大演出]
type = AngleDraw
trigger1 = numenemy
trigger1 = enemy,authorname = "kisaragiryuto"
trigger1 = enemy,var(44) = 1
value = 0
scale = enemy,fvar(28),enemy,fvar(28)

[State 900, 0]
type = AngleSet
trigger1 = Time = 0
value = 0
;---------------------------------------------------------------------------
[Statedef 3962]
type    = U
movetype= H
physics = U
ctrl = 0
sprpriority = 0

[State 900, 1]
type = ChangeAnim
trigger1 = Time >= 0
value = 5015
ignorehitpause = 1

[State 216]
type = VelSet
trigger1 = Time = 0
y = IfElse(vel y>10,-5,-(vel y) * .5)
persistent = 0

[State 216]
type = VelMul
trigger1 = Time = 0
x = .5
persistent = 0

[State 902, Gravity]
type = VelAdd
trigger1 = statetype = A
y = GetHitVar(yaccel)

[State 216]
type = PosSet
trigger1 = vel y > 0
trigger1 = pos y >= 0
y = 0

[State 900, 2]
type = ChangeState
trigger1 = statetype = A
trigger1 = vel y > 0 && vel y <= 3
trigger1 = pos y >= 0
value = 3963
ctrl = 0
ignorehitpause = 1

[State 900, 2]
type = ChangeState
trigger1 = statetype = A
trigger1 = vel y > 3
trigger1 = pos y >= 0
value = 3962
ctrl = 0
ignorehitpause = 1

[State 900, BC拡大演出]
type = AngleDraw
trigger1 = numenemy
trigger1 = enemy,authorname = "kisaragiryuto"
trigger1 = enemy,var(44) = 1
value = 0
scale = enemy,fvar(28),enemy,fvar(28)

[State 900, 0]
type = AngleSet
trigger1 = Time = 0
value = 0
;---------------------------------------------------------------------------
[Statedef 3963]
type    = S
movetype= H
physics = S
ctrl = 0
sprpriority = 0

[State 216]
type = VelSet
trigger1 = Time = 0
y = 0

[State 216]
type = PosSet
trigger1 = Time = 0
y = 0

[State 900, 1]
type = ChangeAnim
trigger1 = Time >= 0
value = 5015
ignorehitpause = 1

[State 900, 2]
type = ChangeState
trigger1 = Time = 2
value = 3964
ctrl = 0

[State 900, BC拡大演出]
type = AngleDraw
trigger1 = numenemy
trigger1 = enemy,authorname = "kisaragiryuto"
trigger1 = enemy,var(44) = 1
value = 0
scale = enemy,fvar(28),enemy,fvar(28)

[State 900, 0]
type = AngleSet
trigger1 = Time = 0
value = 0
;---------------------------------------------------------------------------
[Statedef 3964]
type    = U
movetype= H
physics = S
ctrl = 0
sprpriority = 0

[State 900, 1]
type = ChangeAnim
trigger1 = Time >= 0
value = 5015
ignorehitpause = 1

[State 216]
type = VelSet
trigger1 = Time = 0
y = 0

[State 216]
type = PosSet
trigger1 = Time = 0
y = 0

[State 900, 2]
type = SelfState
trigger1 = Time = 9999
value = 0
ctrl = 1

[State 900, BC拡大演出]
type = AngleDraw
trigger1 = numenemy
trigger1 = enemy,authorname = "kisaragiryuto"
trigger1 = enemy,var(44) = 1
value = 0
scale = enemy,fvar(28),enemy,fvar(28)

[State 900, 0]
type = AngleSet
trigger1 = Time = 0
value = 0
;---------------------------------------------------------------------------
;敵動作(BC終了)
[Statedef 3970]
type    = U
movetype= H
physics = U
ctrl = 0
sprpriority = 0

[State 900, 0]
type = ChangeState
trigger1 = alive = 0
trigger2 = life <= 0
value = 3999
ignorehitpause = 1

[State 900, 1]
type = ChangeAnim
trigger1 = statetype != A
trigger1 = Time >= 0
value = 5015
ignorehitpause = 1

[State 900, 1]
type = ChangeAnim
triggerall = statetype = A
trigger1 = Time = 0
trigger1 = vel y < 0
value = 5030
ignorehitpause = 1

[State 900, 1]
type = ChangeAnim
triggerall = statetype = A
triggerall = SelfAnimExist(5035)
trigger1 = anim = 5030
trigger1 = AnimTime = 0
trigger2 = Time = 0
trigger2 = vel y >= 0
value = 5035
ignorehitpause = 1

[State 900, 1]
type = ChangeAnim
triggerall = statetype = A
trigger1 = !SelfAnimExist(5035)
trigger1 = anim = 5030
trigger1 = AnimTime = 0
trigger2 = !SelfAnimExist(5035)
trigger2 = Time = 0
trigger2 = vel y >= 0
trigger3 = anim = 5035
trigger3 = AnimTime = 0
value = 5050
ignorehitpause = 1

[State 902, Gravity]
type = VelAdd
trigger1 = statetype = A
y = GetHitVar(yaccel)

[State 216]
type = PosSet
trigger1 = vel y > 0
trigger1 = pos y >= 0
y = 0

[State 900, 2]
type = ChangeState
trigger1 = statetype != A
trigger1 = Time = 40
trigger1 = life > 0
value = 3973
ctrl = 0
ignorehitpause = 1

[State 900, 2]
type = ChangeState
trigger1 = statetype = A
trigger1 = vel y > 0
trigger1 = pos y >= 0
trigger1 = life > 0
value = 3971
ctrl = 0
ignorehitpause = 1

[State 900, BC拡大演出]
type = AngleDraw
trigger1 = numenemy
trigger1 = enemy,authorname = "kisaragiryuto"
trigger1 = enemy,var(44) = 1
value = 0
scale = enemy,fvar(28),enemy,fvar(28)

[State 900, 0]
type = AngleSet
trigger1 = Time = 0
value = 0
;---------------------------------------------------------------------------
[Statedef 3971]
type    = U
movetype= H
physics = U
ctrl = 0
sprpriority = 0

[State 900, 1]
type = ChangeAnim
trigger1 = Time >= 0
value = 5015
ignorehitpause = 1

[State 216]
type = VelSet
trigger1 = Time = 0
y = IfElse(vel y>10,-5,-(vel y) * .5)
persistent = 0

[State 216]
type = VelMul
trigger1 = Time = 0
x = .5
persistent = 0

[State 902, Gravity]
type = VelAdd
trigger1 = statetype = A
y = GetHitVar(yaccel)

[State 216]
type = PosSet
trigger1 = vel y > 0
trigger1 = pos y >= 0
y = 0

[State 900, 2]
type = ChangeState
trigger1 = statetype = A
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 3972
ctrl = 0
ignorehitpause = 1

[State 900, BC拡大演出]
type = AngleDraw
trigger1 = numenemy
trigger1 = enemy,authorname = "kisaragiryuto"
trigger1 = enemy,var(44) = 1
value = 0
scale = enemy,fvar(28),enemy,fvar(28)

[State 900, 0]
type = AngleSet
trigger1 = Time = 0
value = 0
;---------------------------------------------------------------------------
[Statedef 3972]
type    = L
movetype= H
physics = N
ctrl = 0
sprpriority = 0

[State 216]
type = VelSet
trigger1 = Time = 0
y = 0

[State 216]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 6]
type = VelMul
trigger1 = 1
x = .8

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 900, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 5100

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 3973

[State 900, BC拡大演出]
type = AngleDraw
trigger1 = numenemy
trigger1 = enemy,authorname = "kisaragiryuto"
trigger1 = enemy,var(44) = 1
value = 0
scale = enemy,fvar(28),enemy,fvar(28)

[State 900, 0]
type = AngleSet
trigger1 = Time = 0
value = 0
;---------------------------------------------------------------------------
[Statedef 3973]
type    = L
movetype= H
physics = N
ctrl = 0
sprpriority = 0

[State 5100, 6]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 900, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 5110

[State 5100, 12]
type = ChangeState
trigger1 = Time = 32
value = 3998

[State 900, BC拡大演出]
type = AngleDraw
trigger1 = numenemy
trigger1 = enemy,authorname = "kisaragiryuto"
trigger1 = enemy,var(44) = 1
value = 0
scale = enemy,fvar(28),enemy,fvar(28)

[State 900, 0]
type = AngleSet
trigger1 = Time = 0
value = 0

;---------------------------------------------------------------------------
[Statedef 3999]
type = U
movetype = H
physics = U
ctrl = 0
sprpriority = 0

[State 999, 0]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger1 = 1
value = 5000
ignorehitpause = 1

;-----------------------------------------------------------------------------------------

[statedef 10190]
type    = S
movetype = A
physics = N
velset = 0,0
SprPriority = -1
anim = 1;10190

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 420


[state -1]
type = posset
trigger1 = 1
x = 120
y = 0

[state -1]
type = playsnd
trigger1 = time = 20
value = 4000,1
volume = 0
[state -1]
type = playsnd
trigger1 = time = 100
value = 190,1
volume = 9999

[state -1]
type = playsnd
trigger1 = time = 200
value = 4000,0
volume = 0

[state -1]
type = playsnd
trigger1 = time = 320
value = 195,4
volume = 9999

[state -1]
type = turn
trigger1 = time = 0

[state -1]
type = destroyself
trigger1 = time = 412


;---------------------------------------------------------------------------
;極技・无二打
[Statedef 3200]
Type    = S
Physics = S
Anim    = 3200
Ctrl    = 0
Facep2 = 1

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 2
Value = 0

[State 3300 , 2]
type = lifeset
triggerAll = palno != 12
trigger1 = life > 300
value = 300

[State 3300 , 2]
type = helper
triggerAll = palno != 12
trigger1 = Time = 0
trigger1 = NumHelper(350000) = 0
id = 350000
pos = 0,0
postype = left
stateno = 350000
helpertype = normal
ownpal = 1
sprpriority = 99999999
ignorehitpause = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
supermove = 1
ignorehitpause = 1
persistent = 1

[State -1]
Type = PowerSet
Trigger1 = Var(13) <= -1
Trigger1 = Time = 0
Value = 0

[State -1]
Type = VarSet
Trigger1 = Time = 0
V = 13
Value = 0

[State -1]
Type = HitOverRide
Trigger1 =! MoveHit
Trigger1 = time = [8,98]
Attr = SCA, NP, SP, HP
StateNo = 3201
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 0
Value = s3200, 0
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = SuperPause
Trigger1 = Time = 1
Anim = -1
Time = 60
MoveTime = 60
P2DefMul = 1
Darken = 0

[State -1]
Type = Helper
Trigger1 = Time = 1
StateNo = 6015
ID = 10001
Name = "EX_Effect"
Pos = 8,-40
PosType = P1
Ownpal = 1
Keyctrl = 0
SprPriority = 5
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = NotHitBy
Trigger1 = MoveHit = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1
IgnoreHitPause = 1

[State -1]
Type = ReversalDef
Trigger1 = P2StateNo != [400,409]
Trigger1 =! MoveContact
Reversal.Attr = SCA, NA,SA,HA,NP,SP,HP,NT,ST,HT
NumHits = 0
;Pausetime = 13,17
;HitSound = S901,IfElse((Var(26)=[2,3]),0,10)+Random%2
SparkNo = -1
Guard.SparkNo = -1
SparkXY = 0,0
;GetPower = IfElse(FVar(16)=0,0,50),0

[State -1]
Type = ReversalDef
Trigger1 = P2StateNo = [400,409]
Trigger1 =! MoveContact
Reversal.Attr = SCA, NA,SA,HA,NP,SP,HP,NT,ST,HT
NumHits = 0
;Pausetime = 13,17
;HitSound = S901,IfElse((Var(26)=[2,3]),0,10)+Random%2
SparkNo = -1
Guard.SparkNo = -1
SparkXY = 0,0
;GetPower = IfElse(FVar(16)=0,0,50),0

[State -1]
Type = HitOverRide
Trigger1 =! MoveHit
;Trigger1 = EnemyNear(Var(57)),numproj > 0;HitDefAttr != SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
Trigger1 = time = [8,98]
Attr = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
StateNo = 3201
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1] 
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
Ctrl = 1

[State -1]
Type = targetState
Trigger1 = numtarget > 0
Trigger1 = !target,ishelper
Trigger1 = MoveHit
Value = 3205


[State -1]
Type = ChangeState
Trigger1 = MoveHit
Value = 3201

;---------------------------------------------------------------------------
;極技・无二打
[Statedef 3201]
type    = A
movetype = H
Physics = S
velset = 0,0
SprPriority = -1
anim = 9978

[State 3300 , 2]
type = helper
triggerAll = Var(54) != 99
trigger1 = time = 0
trigger1 = NumHelper(340004) = 0
id = 340004
pos = 0,0
postype = left
stateno = 340004
helpertype = normal
ownpal = 1
sprpriority = 99999999
ignorehitpause = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
supermove = 1
ignorehitpause = 1
persistent = 1

[State 2000]
type = BGPalfx
triggerAll = Var(54) != 99
trigger1 = time = 0
Add = -256,-256,-256
time = 620
pausemovetime = 99999999999999
supermovetime = 99999999999999
supermove = 1
ignorehitpause = 1
persistent = 1

[state 3300, 2]
type = playsnd
triggerAll = numpartner = 0
triggerAll = enemy,NumHelper(340000) = 0
triggerAll = enemy,NumHelper(340001) = 0
triggerAll = enemy,NumHelper(340002) = 0
triggerAll = enemy,NumHelper(340003) = 0
triggerAll = enemy,NumHelper(340004) = 0
triggerAll = Var(54) != 99
trigger1 = time = 0
value = 9999,3
volume = -300
persistent = 0
ignorehitpause = 1
loop = 1
channel = 12

[state 3300, 2]
type = playsnd
triggerAll = numpartner > 0
triggerAll = enemy,NumHelper(340000) = 0
triggerAll = enemy,NumHelper(340001) = 0
triggerAll = enemy,NumHelper(340002) = 0
triggerAll = enemy,NumHelper(340003) = 0
triggerAll = enemy,NumHelper(340004) = 0
triggerAll = partner,NumHelper(340000) = 0
triggerAll = partner,NumHelper(340001) = 0
triggerAll = partner,NumHelper(340002) = 0
triggerAll = partner,NumHelper(340003) = 0
triggerAll = partner,NumHelper(340004) = 0
triggerAll = Var(54) != 99
trigger1 = time = 0
value = 9999,3
volume = -300
persistent = 0
ignorehitpause = 1
loop = 1
channel = 12

[State 1200, 1]
type = HitDef
trigger1 = 1;time = 0 && numtarget
Attr = , SA
animtype  = hard
air.animtype = back
HitFlag = MAFP
GuardFlag = 
priority = 3, Hit
pausetime = 0,14
guard.dist = 0
ground.type = low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
air.velocity = -6,-6
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = .00000001
guard.cornerpush.veloff = -11.2
yaccel = .5
kill = 0
;palfx.time = 12
;palfx.add = 255,255,255
;palfx.mul = 128,128,128
fall = 0
air.fall = 1
fall.recover = 0
air.recover = 0
getpower = 0,0
givepower = 35,35
p2stateno = 3205

[State 3000, posset]
type = null;posset
trigger1 = time = 0
x = -20 * facing

[State 1200, 2]
type = ChangeState
trigger1 = 0;!ishelper
Trigger1 = time > 1 && numtarget && movehit
Trigger2 = enemy,stateno = 3205
Trigger2 = !target,ishelper
Trigger2 = time > 1
value = 3202
ctrl = 1


;---------------------------------------------------------------------------
;極技・无二打
[Statedef 3202]
Type    = S
MoveType = A
Physics = S
velset = 0,0
SprPriority = -1
anim = 3201
ctrl = 0

[State -1]
Type = Varadd
Trigger1 = time = 0
V = 47
Value = 1

[State 3000, posset]
type = posset
trigger1 = time = 0
x = -20 * facing

[state -1]
type = nothitby
trigger1 = 1
value = SCA

[State 3300 , 2]
type = helper
triggerAll = Var(54) != 99
trigger1 = time = 0
trigger1 = NumHelper(340004) = 0
id = 340004
pos = 0,0
postype = left
stateno = 340004
helpertype = normal
ownpal = 1
sprpriority = 99999999
ignorehitpause = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
supermove = 1
ignorehitpause = 1
persistent = 1

[State 2000]
type = BGPalfx
triggerAll = Var(54) != 99
trigger1 = movehit
Add = -256,-256,-256
time = 620

[state 3300, 2]
type = playsnd
triggerAll = numpartner = 0
triggerAll = enemy,NumHelper(340000) = 0
triggerAll = enemy,NumHelper(340001) = 0
triggerAll = enemy,NumHelper(340002) = 0
triggerAll = enemy,NumHelper(340003) = 0
triggerAll = enemy,NumHelper(340004) = 0
triggerAll = Var(54) != 99
trigger1 = time = 0
value = 9999,3
volume = -300
persistent = 0
ignorehitpause = 1
loop = 1
channel = 12
lowpriority = 1

[state 3300, 2]
type = playsnd
triggerAll = numpartner > 0
triggerAll = enemy,NumHelper(340000) = 0
triggerAll = enemy,NumHelper(340001) = 0
triggerAll = enemy,NumHelper(340002) = 0
triggerAll = enemy,NumHelper(340003) = 0
triggerAll = enemy,NumHelper(340004) = 0
triggerAll = partner,NumHelper(340000) = 0
triggerAll = partner,NumHelper(340001) = 0
triggerAll = partner,NumHelper(340002) = 0
triggerAll = partner,NumHelper(340003) = 0
triggerAll = partner,NumHelper(340004) = 0
triggerAll = Var(54) != 99
trigger1 = time = 0
value = 9999,3
volume = -300
persistent = 0
ignorehitpause = 1
loop = 1
channel = 12
lowpriority = 1

;---------------------[背景]
[State explod];背景を描画
type = Explod
trigger1 = time = 0
anim = 27017
id = 6500
sprpriority = -999
postype = back
pos = 0,0
vel = -16,0
bindtime = -1
removetime = -1
;pausemovetime = 60
;supermovetime = 60
supermove = 1
pausemove = 1
ignorehitpause = 1
under = 0
ownpal = 1

[State explod];背景を描画
type = Explod
trigger1 = time = 0
anim = 27017
id = 6500
sprpriority = -999
postype = back
pos = 640,0
vel = -16,0
bindtime = -1
removetime = -1
;pausemovetime = 60
;supermovetime = 60
supermove = 1
pausemove = 1
ignorehitpause = 1
under = 0
ownpal = 1

[State 2000]
type = superpause
Trigger1 = time = 0
darken = 0
time =270
anim = -1
;sound = S3,1
pos = 0,0
movetime = 270
;supermovetime = 410

[State -1]
Type = PlaySnd
Trigger1 = Time = 10
Value = s750, 0
Volume = 999
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 90
Value = s230, 0
Volume = 999
Channel = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 90
Value = s3200, 5
Channel = 2
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 90
Value = s3200, 6
Channel = 3
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State explod]
type = Explod
trigger1 = time = 90
anim = 3203
id = 3203
sprpriority = 4;999
postype = p1
pos = 0,0
;vel = -16,0
bindtime = -1
removetime = 180
;pausemovetime = 60
;supermovetime = 60
supermove = 1
pausemove = 1
ignorehitpause = 1
under = 0
ownpal = 1
scale = 2,2

[State explod]
type = Explod
trigger1 = time = 90
anim = 3204
id = 3204
sprpriority = 4;999
postype = p1
pos = 0,0
;vel = -16,0
bindtime = -1
removetime = 180
;pausemovetime = 60
;supermovetime = 60
supermove = 1
pausemove = 1
ignorehitpause = 1
under = 0
ownpal = 1
scale = 2,2

[State -1]
Type = PlaySnd
Trigger1 = Time = 110
Value = s3200, 6
Channel = 3
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 130
Value = s3200, 6
Channel = 3
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 150
Value = s3200, 6
Channel = 3
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 170
Value = s3200, 6
Channel = 3
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 190
Value = s3200, 6
Channel = 3
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 210
Value = s3200, 6
Channel = 3
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 230
Value = s3200, 6
Channel = 3
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 250
Value = s3200, 6
Channel = 3
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 270
Value = s3200, 1
Channel = 1
Volume = 999
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = PlaySnd
Trigger1 = Time = 270
Value = s2000, 0
Channel = 2

[State -1]
Type = PlaySnd
Trigger1 = Time = 270
Value = s3005, 0
Channel = 3

[State -1]
Type = Explod
Trigger1 = Time = 270
ID = 3105
PosType = P1
Pos = 0,10
Random = 0,0
Anim = 3105
Ownpal = 1
SprPriority = 4
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = Explod
Trigger1 = Time = 270
ID = 3106
PosType = P1
Pos = 0,10
Random = 0,0
Anim = 3106
Ownpal = 1
SprPriority = 5
BindTime = -1
RemoveTime = -2
RemoveOnGetHit = 1
IgnoreHitPause = 1
Persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 800, 3]
type = Helper
trigger1 =  Time = 270
stateno = 3203
id = 3203
keyctrl = 0
ownpal = 1
pos = 40,-53
SuperMoveTime = 9999
PauseMoveTime = 9999

[state -1]
type = targetlifeadd
trigger1 = Time = 270
value = -9999
SuperMoveTime = 9999
PauseMoveTime = 9999

[state -1]
Type = targetstate
trigger1 = Time = 270
value = 3160
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 1200, 2]
type = ChangeAnim
trigger1 = time = 300
value = 3202

[State 1200, 2]
type = ChangeState
trigger1 = anim = 3202
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;都古エフェクト
[Statedef 3203]
type    = S
movetype= A
physics = N
juggle  = 1
poweradd= 0
ctrl = 0
velset = 0,0
anim = 3005
sprpriority = 8

[State -1]
Type     = Trans
Trigger1 = 1
Trans    = Add

[State -1]
Type     = AngleDraw
Trigger1 = 1
Scale    = 1,1

[State -1]
Type     = AngleSet
Trigger1 = 1
Value    = -90

[State -1, NotHitBy]
Type = NotHitBy
Trigger1 = 1
Value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
Time = 1

[State -1,end]
type = Destroyself
trigger1 = animtime = 0


;---------------------------------------------------------------------------
;極技・无二打
[Statedef 3205]
type    = A
movetype = H
physics = N
velset = 0,0
SprPriority = -1

[State -1,end]
type = Destroyself
trigger1 = 1

[state -1]
type = nothitby
trigger1 = 1
value = SCA

[state -1]
type = lifeset
trigger1 = enemy,numhelper(3203) = 1
value = 0

[State 758, Velocity]
type = PosSet
trigger1 = Time = 0
y = 0
x = 20 * -facing

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 1

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[State 5070, 1]
type = ChangeAnim
trigger1 = time = 0
value = 5001

[state -1]
Type = changestate
trigger1 = enemy,numhelper(3203) = 1
value = 3160

[state -1]
Type = selfstate
trigger1 = enemy,StateNo = 0
value = 5100

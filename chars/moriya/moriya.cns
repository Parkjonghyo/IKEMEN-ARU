;var(8) = 歩月ループ確率
;var(9) = 歩月ループ回数制限
;Var(10) = 刀の光用
;Var(11) = 空牙用
;Var(12) = カウンター用
;Var(13) = キャラの向き用
;Var(14) = 朧用
;Var(15) = 歩月〜朧用
;Var(16) = AI用ガード制御用
;var(17) = ライフゲージ用
;Var(18) = 投げ用弾き制御用
;Var(19) = 起き上がり投げ無敵用
;Var(20) = 先行入力用
;Var(22) = 通常技用
;Var(23) = 連殺斬用
;Var(25) = 楓・雪用
;Var(27) = 朧ヘルパー用
;Var(28) = 走り用
;Var(29) = ガード不能攻撃用
;Var(30) = 剣質用
;Var(31) = タイプ用
;Var(32) = 血１用
;Var(33) = 血２用
;Var(34) = 血３用
;Var(35) = 血４用
;Var(36) = 十六夜月華の光用
;Var(37) = 勝利メッセージ用
;Var(38) = 剣質ゲージ重複防止
;Var(40) = 昇華用
;Var(41) = 月読み画面用
;Var(47) = AI用コンボ制御
;Var(48) = AI用歩月ループ制御
;Var(49) = AI乱舞奥義ループ防止用
;Var(50) = 乱舞奥義用
;Var(53) = AI固め投げ乱数用
;Var(55) = AI歩月停止用
;Var(58) = AI行動乱数用
;Var(59) = AIフラグ

;fvar(10) = 弾きインターバル設定用
;fvar(11) = 弾き精度設定用
;fvar(12) = 弾き反応速度設定用
;fvar(13) = AI弾き確率指定用
;fvar(14) = AIガードキャンセル使用率設定
;fvar(15) = 投げ回避率設定用
;fvar(16) = AI連続技・固め制御用
;fvar(17) = AI連続技・固め制御用
;fvar(18) = AI固め投げ頻度用
;fvar(19) = AI固め投げ精度用

;fvar(20) = 根性値のオン/オフ設定用スイッチ
;fvar(21) = 極の防御力設定スイッチ

;--------------------------------------------
[Data]
life = 1000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 35
airjuggle = 10
KO.echo = 0
volume = 75
IntPersistIndex = 1

[Size]
xscale = 1
yscale = 1
ground.back = 16
ground.front = 15
stand.height = 80
head.pos = -22,-96
mid.pos = -14,-58
air.back =15
air.front = 23
z.width = 3
attack.width = 4,4
attack.dist = 160
proj.attack.dist = 90

[Velocity]
walk.fwd  = 2.1
walk.back = -2.0
runjump.fwd = 4,-25
jump.neu = 0,-9.6
jump.back = -3
jump.fwd = 3

[Movement]
airjump.num = 0
yaccel = .5
stand.friction = .85
crouch.friction = .82

; かまえ
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, 1]
type = VarSet
trigger1 = time = 0
var(10) = 0

[State 0, 1]
type = VarSet
trigger1 = time = 0
var(11) = 0

[State 0, 1]
type = VarSet
trigger1 = time = 0
var(14) = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3]
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

; Jump Start
[Statedef 40]
type = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 7]
type = StopSnd
trigger1 = time = 0
channel = 1

[State 40, 1]
type = ChangeState
triggerall = Time = 0
triggerall = var(59) != 0
trigger1 = p2stateno = 5400 || p2stateno = 9940 || p2stateno = 9950
trigger2 = p2stateno = 9910 || p2stateno = 9920 || p2stateno = 243 || p2stateno = 244
trigger3 = p2stateno = 8140 || p2stateno = 8145
trigger4 = fvar(16) != 0
value = ifelse(prevstateno = 100,101,0)
ctrl = 1

[State 40, 1]
type = ChangeState
trigger1 = Time = 0
trigger1 = var(59) != 0
trigger1 = enemynear,movetype = H
value = 0
ctrl = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 40, 3]
type = VarSet
trigger1 = command = "longjump"
trigger2 = prevstateno = 100 && command = "holdfwd"
var(5) = 1

[State 40, 4]
type = VarSet
trigger1 = var(59) = 0
trigger1 = command = "holdfwd"
trigger2 = var(59) != 0
trigger2 = p2bodydist X >= 70
sysvar(1) = 1

[State 40, 5]
type = VarSet
trigger1 = var(59) = 0
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 6]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 8]
type = PlaySnd
trigger1 = Var(5) && Sysvar(1) != 0 && AnimTime = 0 
value = 40,0

[State 40, 9]
type = ChangeState
trigger1 = AnimTime = 0 && command != "holdup"
value = 950
ctrl = 1

[State 40, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 41
ctrl = 1

; Jump Up
[Statedef 41]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = VelSet
trigger1 = Time = 0 && Var(5)
x = IfElse(vel x = 0,0,IfElse(vel x < 0,-4.8,4.8))

[State 50, 3]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 4]
type = AfterImage
trigger1 = Time = 0 && Var(5) && Vel X != 0
time = 10
framegap = 2
length = 8
palbright = 0,0,0
PalContrast = 240,255,255
PalMul      = .8,.8,.8

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = Turn
trigger1 = P2bodydist X <= -30
trigger1 = Time = 1
value = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 1
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ランニング
[Statedef 100]
type = S
physics = S
anim = 100
ctrl = 0

[State 100, 1]
type = PlaySnd
trigger1 = Time = 0
value = 100,0
channel = 1
loop = 1

[State 100, 3]
type = VelSet
trigger1 = Time >= 3
x = 6

[State 100, 4]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 101, 3]
type = ChangeState
trigger1 = Time >= 0
trigger1 = command = "holdup"
value = 40
ctrl = 0

[State 101, 3]
type = PlaySnd
trigger1 = Time >= 0
trigger1 = command = "holdup"
value = 40,1

[State 100, 6]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "a"
trigger1 = command = "b" 
value = 210

[State 100, 3]
type = varset
trigger1 = Time = 0
var(28) = 0

[State 100, 3]
type = varset
trigger1 = Time >= 12
var(28) = 1

[State 100, 3]
type = varset
trigger1 = var(28) = 1
trigger1 = command = "a" || command = "b" 
var(28) = 2

[State 100, 6]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = var(28) = [1,2]
trigger1 = command = "a" || command = "b" 
value = 240

[State 100, 6]
type = ChangeState
trigger1 = var(20)!=0
value = var(20)
ctrl = 0

[State 100, 6]
type = ChangeState
trigger1 = var(22)!=0
value = var(22)
ctrl = 0

[State 100, 7]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdfwd"
value = 101

;ランニング（ストップ）
[Statedef 101]
type = S
physics = S
anim = 101
sprpriority = 1
ctrl = ifelse(var(59)!=0,1,0)

[State 101, 2]
type = PlaySnd
trigger1 = animelem = 1
value = 101,0

[State 101, 3]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = Time <= 9
trigger1 = command = "holdup"
trigger1 = command = "holdfwd"||command = "holdback"
value = 40
ctrl = 0

[State 101, 3]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "holdback"
trigger1 = p2movetype = A
value = 120
ctrl = 0

[State 101, 4]
type = ChangeState
trigger1 = var(20)!=0
value = var(20)
ctrl = 0

[State 100, 6]
type = ChangeState
trigger1 = var(22)!=0
value = var(22)
ctrl = 0

[State 101, 5]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;バックダッシュ（スタート）
[Statedef 105]
type = S
physics = N
anim = 105
ctrl = 0

[State 105, 1]
type = ChangeAnim
trigger1 = time = 0
trigger1 = P2Dist X < 0
value = 5

[State 105, 2]
type = Turn
trigger1 = time = 0
trigger1 = P2Dist X < 0

[State 105, 3]
type = VelMul
trigger1 = 1
x = 0.88

[State 105, 4]
type = VelSet
trigger1 = AnimElem = 3, = 10
x = 0

[State 105, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 106

;バックダッシュ（空中）
[Statedef 106]
type = A
physics = N
anim = 106

[State 106, 1]
type = VelSet
trigger1 = Time = 0
x = -8
y = -5.2

[State 106, 2]
type = PlaySnd
trigger1 = Time = 0
value = 105,0

[State 106, 3]
type = VelAdd
trigger1 = Time > 0
x = .2
y = .50

[State 106, 4]
type = VelAdd
trigger1 = Time > 12
y = .20

[State 106, 7]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 107

;バックダッシュ（着地）
[Statedef 107]
type = S
physics = S
anim = 107
velset = 0,0

[State 107, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 107, 2]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 107, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------
;小ジャンプ
[Statedef 950]
type = A
movetype = I
physics = A
anim = 950
ctrl = 1

[State 1100, 5]
type = PlayerPush
trigger1 = Time > 6
trigger1 = Time < 18
value = 0

[State 950, 1]
type = VelSet
trigger1 = var(59) = 0
trigger1 = Time = 0
x = IfElse(vel x = 0,0,IfElse(vel x < 0,-2,2))
y = -7

[State 950, 1]
type = VelSet
triggerall = var(59) != 0
triggerall = Time = 0
trigger1 = p2bodydist X < 50
trigger1 = P2StateType != L
trigger2 = BackEdgebodyDist < 20
trigger2 = P2bodydist X <= 30
trigger2 = P2StateType = L
x = 0
y = -7

[State 950, 1]
type = VelSet
triggerall = var(59) != 0
triggerall = Time = 0
trigger1 = p2bodydist X >= 50
trigger2 = p2bodydist X >= 30
trigger2 = enemynear,HitDefAttr = SC, NT,ST,HT
x = const(velocity.jump.fwd.x)
y = -7

[State 950, 2]
type = VelSet
trigger1 = Time = 0 && Var(5)
x = IfElse(vel x = 0,0,IfElse(vel x < 0,-4.8,4.8))

[State 50, 4]
type = AfterImage
trigger1 = Time = 0 && Var(5) && Vel X != 0
time = 10
framegap = 2
length = 8
palbright = 0,0,0
PalContrast = 240,255,255
PalMul      = .8,.8,.8

[State 950, 4]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;勝ちポーズ判定
[Statedef 180]
type = S
velset = 0

[State 180, 3]
type = ChangeState
trigger1 = Time = 0 && var(26) = 1
value = 184

[State 180, 1]
type = ChangeState
trigger1 = Time = 0 && Matchover = 0
value = 181

[State 180, 2]
type = ChangeState
trigger1 = Time = 0 && var(25) = 0 && Matchover = 1 
value = ifelse(var(30)=1,182,184)

[State 180, 3]
type = ChangeState
trigger1 = Time = 0 && var(25) = 1 && Matchover = 1 
value = 183

; 勝ちポーズ１
[Statedef 181]
type = S
movetype = I
physics = S
anim = 181

[State 181, 1]
type = PlaySnd
trigger1 = animelem = 7
value = 1000,1

[State 181, 1]
type = PlaySnd
trigger1 = animelem = 15
value = 183,0

[State 181, 2]
type = AssertSpecial
trigger1 = Time = [0,300]
flag = RoundNotOver

[State 181, 3]
type = SprPriority
trigger1 = Time = 0
value = 0

;勝ちポーズ２
[Statedef 182]
type = S
movetype = I
physics = S
anim = 182

[State 182, 1]
type = PlaySnd
trigger1 = animelem = 8
value = 210,2

[State 182, 1]
type = PlaySnd
trigger1 = animelem = 14, = 10
value = 181,1

[State 182, 1]
type = PlaySnd
trigger1 = animelem = 15
value = 1000,1

[State 182, 1]
type = PosAdd
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
trigger4 = animelem = 6
trigger5 = animelem = 7
trigger6 = animelem = 8
x = 10

[State 180, 1]
type = ChangeState
triggerall = Matchover = 1
trigger1 = time = 300
trigger2 = command = "s"
value = 186

[State 182, 2]
type = AssertSpecial
trigger1 = Time = [0,300]
flag = RoundNotOver

;勝ちポーズ（楓・雪用）
[Statedef 183]
type = S
movetype = I
physics = S
anim = 183

[State 183, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 182,0

[State 183, 2]
type = PlaySnd
trigger1 = animelem = 28
value = 1000,1

[State 180, 1]
type = ChangeState
triggerall = Matchover = 1
trigger1 = time = 300
trigger2 = command = "s"
value = 186

[State 183, 3]
type = AssertSpecial
trigger1 = Time = [0,300]
flag = RoundNotOver

;勝ちポーズ（技・極用）
[Statedef 184]
type = S
movetype = I
physics = S
anim = 184

[State 183, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 210,2

[State 183, 2]
type = PlaySnd
trigger1 = animelem = 16
value = 1000,1

[State 180, 1]
type = ChangeState
triggerall = Matchover = 1
trigger1 = time = 300
trigger2 = command = "s"
value = 186

[State 183, 3]
type = AssertSpecial
trigger1 = Time = [0,300]
flag = RoundNotOver

;勝利メッセージ
[Statedef 186]
type = S
ctrl = 0
velset = 0,0
sprpriority = 6

[State 2060, 12]
type = EnvColor
trigger1 = time = 1
time = 10
value = 0,0,0
ontop = 1
ignorehitpause = 1

[State 181,1]
type = VarSet
trigger1= time = 1
var(37) = ifelse(Life>650,1,ifelse(Life<350,3,2))

[State 181,1]
type = PlaySnd
trigger1 = Time = 2
value = 9000,0

[State 801, 0]
type = Explod
trigger1 = time = 1
anim = 186
pos = 0,0
sprpriority = 1000
postype = left

[State 801, 0]
type = Explod
trigger1= var(37) = 1
trigger1 = time = 1
anim = 187
pos = 110,180
sprpriority = 1001
postype = left

[State 801, 0]
type = Explod
trigger1= var(37) = 2
trigger1 = time = 1
anim = 188
pos = 104,180
sprpriority = 1001
postype = left

[State 801, 0]
type = Explod
trigger1= var(37) = 3
trigger1 = time = 1
anim = 189
pos = 86,180
sprpriority = 1001
postype = left

[state 189, nofg]
type = assertspecial
trigger1 = time = [0,1200]
flag = NoFG
flag2=nobardisplay
flag3= invisible

[state 189, nofg]
type = assertspecial
trigger1 = time = [0,1200]
flag = NoBG
flag2= nomusic

[state 180, 1]
type = assertspecial
trigger1 = time = [0,400]
flag = roundnotover

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;イントロ１
[Statedef 191]
type = S
anim = 191
velset = 0,0

[State 230, 7]
type = Explod
trigger1 = Var(30) = 1
trigger1 = numexplod(21000)=0
anim = ifelse(facing=1,21000,21010)
id = 21000
pos = 0,-140
postype = p1
removetime = 3
sprpriority = 30
bindtime = -1
ownpal = 1
[State 230, 7]
type = Explod
trigger1 = Var(30) = 2
trigger1 = numexplod(21001)=0
anim = ifelse(facing=1,21001,21011)
id = 21001
pos = 0,-140
postype = p1
removetime = 3
sprpriority = 30
bindtime = -1
ownpal = 1
[State 230, 7]
type = Explod
trigger1 = Var(30) = 3
trigger1 = numexplod(21002)=0
anim = ifelse(facing=1,21002,21012)
id = 21002
pos = 0,-140
postype = p1
removetime = 3
sprpriority = 30
bindtime = -1
ownpal = 1


[State 181,1]
type = VarSet
trigger1= time = 0
var(17) = life / 4

[State 191, 5]
type = PlaySnd
trigger1 = AnimElem = 4
value = 191,1

[State 191, 4]
type = PlaySnd
trigger1 = AnimElem = 9 && var(25) != 1
value = 191,0

[State 191, 5]
type = PlaySnd
trigger1 = AnimElem = 9 && var(25) = 1
value = 192,0

[State 191, 4]
type = PlaySnd
trigger1 = AnimElem = 28 && var(25) = 1
value = 192,1

[State 191, 3]
type = AssertSpecial
trigger1 = Time = [0,180]
flag = Intro

[State 190, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;挑発
[Statedef 195]
type = S
movetype = I
physics = S
anim = 195
velset = 0
ctrl = 0

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 5
value = 195,0
channel = 3

[State 1000, 4]
type = CtrlSet
trigger1 = time = 44
value = 1

[State 195, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち　後　弱斬り
[Statedef 200]
type = S
movetype = A
physics = S
anim = 200
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 5

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,0+floor(Random/250.0)

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = Light
damage = ifelse(var(12)=1,45,39),ifelse(var(30)=1,3,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,10,5),ifelse(var(50)=0,10,5)
guard.pausetime =ifelse(var(30)=1,0,10),ifelse(var(30)=1,0,10)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-84
hitsound = S200,5
guardsound = S210,0+floor(Random/500.0)
ground.type = High
ground.slidetime = 18
ground.hittime =  18
ground.velocity = -4
guard.velocity = -4
ground.cornerpush.veloff = -6
guard.cornerpush.veloff = -6
guard.ctrltime = 12

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 3
trigger1 = p2statetype = A
attr = S, NA
animtype = Light
damage = ifelse(var(12)=1,45,39),ifelse(var(30)=1,3,0)
hitflag = AF
pausetime = ifelse(var(50)=0,10,5),ifelse(var(50)=0,10,5)
guard.pausetime =ifelse(var(30)=1,0,10),ifelse(var(30)=1,0,10)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-84
hitsound = S200,5
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3     
p2stateno = ifelse(var(50) > 0,243,9910)

[State 200, 5]
type = ChangeState
trigger1 = var(30) = 1 && moveguarded
value = 350
ignorehitpause = 1

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち　遠距離　弱斬り
[Statedef 210]
type = S
movetype = A
physics = S
anim = 210
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 5

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,0+floor(Random/250.0)

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,2

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 4
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 5
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 211
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 212
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype = Light
damage = ifelse(var(12)=1,45,39),ifelse(var(30)=1,3,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,5,3),ifelse(var(50)=0,5,3)
guard.pausetime =ifelse(var(30)=1,0,5),ifelse(var(30)=1,0,5)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-76
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = ifelse(var(23) > 0,-3,-5)
guard.velocity = ifelse(var(23) > 0,-3,-5)
ground.cornerpush.veloff = ifelse(var(23) > 0,-5,-7)
guard.cornerpush.veloff = ifelse(var(23) > 0,-5,-7)
guard.ctrltime = 11

[State 210, 3]
type = HitDef
trigger1 = AnimElem = 4
trigger1 = p2statetype = A
attr = S, NA
animtype = Light
damage = ifelse(var(12)=1,45,39),ifelse(var(30)=1,3,0)
hitflag = AF
pausetime = ifelse(var(50)=0,5,3),ifelse(var(50)=0,5,3)
guard.pausetime =ifelse(var(30)=1,0,5),ifelse(var(30)=1,0,5)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-76
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 200, 5]
type = ChangeState
trigger1 = var(30) = 1 && moveguarded
value = 350
ignorehitpause = 1

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 210, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち　弱斬り2
[Statedef 220]
type = S
movetype = A
physics = S
anim = 220
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 5

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 220,0+floor(Random/250.0)

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210,2

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 5
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 6
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 221
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
anim = 222
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
anim = 223
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6, = 2
anim = 224
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 7
anim = 225
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype = Light
damage = ifelse(var(12)=1,45,39)
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,5,3),ifelse(var(50)=0,5,3)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20111
guard.sparkno = S20310
sparkxy = -10,-76
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = ifelse(var(23) > 0,-3.5,-5)
guard.velocity = -3
ground.cornerpush.veloff = ifelse(var(23) > 0,-5.5,-7)
guard.cornerpush.veloff = -5

[State 210, 3]
type = HitDef
trigger1 = AnimElem = 5
trigger1 = p2statetype = A
attr = S, NA
animtype = Light
damage = ifelse(var(12)=1,45,39)
hitflag = AF
pausetime = ifelse(var(50)=0,5,3),ifelse(var(50)=0,5,3)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20111
guard.sparkno = S20310
sparkxy = -10,-76
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 210, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;逸刀・水無月
[Statedef 230]
type = S
movetype = A
physics = S
anim = 230
poweradd = 0
velset = 0,0
ctrl = 0

[State 230, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -130
persistent = 0
ignorehitpause = 1

[State 230, 1]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 5

[State 200, 0]
type = VelSet
trigger1 = time = [10,17]
x = 3

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 4
value = 220,2+floor(Random/250.0)

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 210,2

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 6
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 7
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 231
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 232
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 7
anim = 233
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8
anim = 234
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8, = 2
anim = 235
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype = Hard
damage = ifelse(var(12)=1,65,57),ifelse(var(30)=1,6,0)
guardflag = H
hitflag = M
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = ifelse(var(23) > 0,-4,-6)

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 6
trigger1 = p2statetype = A
attr = S, NA
animtype = Light
damage = ifelse(var(12)=1,65,57),ifelse(var(30)=1,6,0)
hitflag = AF
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 230, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち　強斬り
[Statedef 240]
type = S
movetype = A
physics = S
anim = 240
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = ChangeAnim
trigger1 = prevstateno = 100
trigger1 = var(28) = [1,2]
trigger1 = time = 0
value = 245

[State 200, 0]
type = VelSet
trigger1 = anim = 245
trigger1 = time = [0,3]
x = 6

[State 230, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 230, 1]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 6

[State 1000, 2]
type = Width
trigger1 = time = [0,4]
value = 5,0

[State 1000, 2]
type = Width
trigger1 = time = [5,8]
value = 10,0

[State 1000, 2]
type = Width
trigger1 = time = [9,20]
value = 15,0

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 5
value = 220,2+floor(Random/250.0)

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 210,2

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 6
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 8
v = 10
value = 2

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 9
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 241
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 2 
persistent = 2
ignorehitpause = 1
anim = 242
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 9
anim = 243
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 9, = 2 
anim = 244
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype = Hard
damage = ifelse(anim=245,ifelse(var(12)=1,85,78),ifelse(var(12)=1,100,90)),ifelse(var(30)=1,9,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
guard.pausetime =ifelse(var(30)=1,0,12),ifelse(var(30)=1,1,12)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = ifelse(var(23)>0||anim =235,-6.2,-9)
guard.velocity = -4
ground.cornerpush.veloff = ifelse(var(23)>0||anim =235,-6.2,-9)
guard.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
triggerall = p2statetype = A
trigger1 = AnimElem = 6
attr = S, NA
animtype = Light
damage = ifelse(anim=245,ifelse(var(12)=1,85,78),ifelse(var(12)=1,100,90))
hitflag = AF
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
guard.pausetime =ifelse(var(30)=1,0,12),ifelse(var(30)=1,0,12)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 3121, 3]
type = Explod
trigger1 = movehit
id = 20230
anim = 20230
pos = 0, -70
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 200, 5]
type = ChangeState
trigger1 = var(30) = 1 && moveguarded
value = 350
ignorehitpause = 1

[State 200, 0]
type = ChangeState
trigger1 = anim = 245
trigger1 = var(30) >= 2
trigger1 = movecontact
trigger1 = command = "b"
trigger1 = command = "holddown"
value = 410

[State 200, 0]
type = ChangeState
trigger1 = anim = 245
trigger1 = var(30) >= 2
trigger1 = movecontact
trigger1 = command = "b"
trigger1 = command != "holdfwd"
value = 240

[State 200, 0]
type = ChangeState
trigger1 = anim = 245
trigger1 = var(30) >= 2
trigger1 = movecontact
trigger1 = command = "b"
trigger1 = command = "holdfwd"
value = 250

[State 230, 12]
type = ChangeState
trigger1 = movecontact
trigger1 = var(23) = 1 && var(10) = 1
trigger1 = prevstateno = 210
trigger1 = command = "x"
value = 290

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち　前　強斬り
[Statedef 250]
type = S
movetype = A
physics = S
anim = 250
poweradd = 0
velset = 0
ctrl = 0

[State 240, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -160
persistent = 0
ignorehitpause = 1

[State 240, 1]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 6

[State 200, 0]
type = ChangeAnim
trigger1 = var(30) >= 2
trigger1 = anim = 250
trigger1 = time = 0
value = 251

[State 210, 0]
type = posadd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 6
trigger5 = AnimElem = 8
trigger6 = AnimElem = 9
x = 10

[State 210, 0]
type = posadd
trigger1 = AnimElem = 7
x = 15

[State 210, 0]
type = posadd
trigger1 = AnimElem = 15
trigger2 = AnimElem = 18
trigger3 = AnimElem = 19
x = -10

[State 210, 0]
type = posadd
trigger1 = AnimElem = 16
trigger2 = AnimElem = 17
x = -20

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 6
value = 220,2+floor(Random/250.0)

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 210,2

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 9
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 10
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 7
anim = 12210
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 12211
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 10
anim = 12212
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 9
attr = S, NA
animtype = Hard
damage = ifelse(var(50)=1,ifelse(var(12)=1,115,100),ifelse(var(12)=1,165,150)),ifelse(var(30)=1,12,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(30)=1,15,12),ifelse(var(30)=1,15,12)
guard.pausetime =ifelse(var(30)=1,0,12),ifelse(var(30)=1,0,12)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,4
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -10
guard.velocity = -5
ground.cornerpush.veloff = -10
guard.cornerpush.veloff = -5

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 9
trigger1 = p2statetype = A
attr = S, NA
animtype = Light
damage = ifelse(var(50)=1,ifelse(var(12)=1,115,100),ifelse(var(12)=1,165,150)),ifelse(var(30)=1,15,0)
hitflag = AF
pausetime = ifelse(var(30)=1,15,12),ifelse(var(30)=1,15,12)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,4
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 3121, 3]
type = Explod
trigger1 = movehit
id = 20230
anim = 20230
pos = 0, -70
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 200, 5]
type = ChangeState
trigger1 = var(30) = 1 && moveguarded
value = 350
ignorehitpause = 1

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち　蹴り
[Statedef 260]
type = S
movetype = A
physics = S
anim = 260
poweradd = 0
velset = 0
ctrl = 0

[State 250, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 250, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 5

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -100
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 5

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 220,0+floor(Random/250.0)

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210,5

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 4
trigger1 = p2statetype != L
attr = S, NA
animtype = Light
damage = ifelse(var(12)=1,45,39),ifelse(var(30)=1,3,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,10,5),ifelse(var(50)=0,10,5)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-10
envshake = 10
hitsound = S200,5
guardsound = S210,4
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -5
guard.velocity = -3
ground.cornerpush.veloff = -5
guard.cornerpush.veloff = -3

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 4
trigger1 = p2statetype != L
trigger1 = p2statetype = A
attr = S, NA
animtype = Light
damage = ifelse(var(12)=1,45,39),ifelse(var(30)=1,3,0)
hitflag = AF
pausetime = ifelse(var(50)=0,10,5),ifelse(var(50)=0,10,5)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-10
hitsound = S200,5
guardsound = S210,4
air.velocity = -2,-3
airguard.velocity = -3     
p2stateno = ifelse(var(50) > 0,243,9910)

[State 200, 3]
type = HitDef
trigger1 = NumTarget(300) = 0
trigger1 = AnimElem = 4
trigger1 = p2stateno != 5100
trigger1 = p2stateno != 5101
trigger1 = p2statetype = L
id = 300
attr = S, NA
animtype = Light
damage = 39
hitflag = FD
pausetime = 10,10
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-10
hitsound = S200,5
guardsound = S210,4
ground.hittime = 30

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち　前　蹴り
[Statedef 270]
type = S
movetype = A
physics = S
anim = 270
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 6

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -160
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 220,2+floor(Random/250.0)

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210,6

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype = Light
damage = ifelse(var(12)=1,70,57),ifelse(var(30)=1,6,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = s20010
guard.sparkno = S20300
sparkxy = -10,-84
envshake = 10
hitsound = S200,5
guardsound = S210,4
p2facing = 1
ground.type = High
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 5
trigger1 = p2statetype = A
attr = S, NA
animtype = Light
damage = ifelse(var(12)=1,70,57),ifelse(var(30)=1,6,0)
hitflag = AF
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20010
guard.sparkno = S20300
sparkxy = -10,-84
hitsound = S200,5
guardsound = S210,4
air.velocity = -2,-3
airguard.velocity = -3     
p2stateno = ifelse(var(50) > 0,243,9910)

[State 222, 3]
type = TargetState
trigger1 = MoveHit && hitpausetime = 1
trigger1 = p2statetype != A
ignorehitpause = 1
persistent = 0
value = 271

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;強蹴りやられ
[Statedef 271]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 271, 0]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 271, 0]
type = PlayerPush
trigger1 = time >= 0
value = 0

[State 271, 0]
type = ChangeAnim
trigger1 = time >= 0
value = 5017

[State 271,1]
type = PosAdd
trigger1 = time >= 1
x = -10

[State 271, 6]
type = PlaySnd
trigger1 = time >= 1
trigger1 = backedgedist <= 5
value = F7, 2

[State 271, 6]
type = EnvShake
trigger1 = time >= 1
trigger1 = backedgedist <= 5
time = 10

[State 271, 7]
type = ChangeState
trigger1 = time >= 1
trigger1 = backedgedist <= 5
value = 272

;跳ね返り
[Statedef 272]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 272, 0]
type = ChangeAnim
trigger1 = time < 7
value = 5030

[State 272, 1]
type = ChangeAnim
trigger1 = time = 7
value = 5050

[State 272, 2]
type = VelSet
trigger1 = time = 7
x = 2
y = -6

[State 272, 3]
type = VelAdd
trigger1 = time >= 7
y = .5

[State 271, 2]
type = ScreenBound
trigger1 = time < 7
value = 1
movecamera = 0

[State 271, 6]
type = EnvShake
trigger1 = time > 7
trigger1 = Vel Y > 0
trigger1 = Pos Y > 15
time = 5

[State 272, 5]
type = SelfState
trigger1 = time > 7
trigger1 = Vel Y > 0
trigger1 = Pos Y > 15
value = 5100

;逸刀・花残
[Statedef 280]
type = S
movetype = A
physics = S
anim = 280
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 6

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 4
value = 220,2+floor(Random/250.0)

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 210,2

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 6
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 7
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 281
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 282
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 283
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 7
anim = 284
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 7, = 2
anim = 285
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype = Hard
damage = ifelse(var(12)=1,93,78),ifelse(var(30)=1,9,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
guard.pausetime =ifelse(var(30)=1,0,12),ifelse(var(30)=1,0,12)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = ifelse(var(23)>0,-6.2,-9)
guard.velocity = -4
ground.cornerpush.veloff = ifelse(var(23)>0,-6.2,-9)
guard.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = p2statetype = A
trigger1 = AnimElem = 6
attr = S, NA
animtype = Light
damage = ifelse(var(12)=1,93,78)
hitflag = AF
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
guard.pausetime =ifelse(var(30)=1,0,12),ifelse(var(30)=1,0,12)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 200, 5]
type = ChangeState
trigger1 = var(30) = 1 && moveguarded
value = 350
ignorehitpause = 1

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;特殊技（地上）
[Statedef 290]
type = S
movetype = A
physics = S
anim = 290
velset = 0,0
ctrl = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 291

;特殊技（空中）
[Statedef 291]
type = A
movetype = A
physics = N
anim = 291
velset = 0,0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -160
persistent = 0
ignorehitpause = 1

[State 1505, 3]
type = VelSet
trigger1 = AnimElem = 1
y = -4.1

[State 1505, 3]
type = VelSet
trigger1 = AnimElem = 1
x = 4.2

[State 1505, 4]
type = VelAdd
trigger1 = Time >= 1
y = .5

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 5
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 6
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 3
anim = 611
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 612
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 220, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 210,2

[State 220, 2]
type = PlaySnd
trigger1 = animelem = 2
value = 220,2+floor(Random/250.0)

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = A, NA
animtype = Hard
damage = ifelse(var(12)=1,72,57)
guardflag = H
hitflag = MAF
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-50
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -10
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(var(50) > 0||var(12) > 0,243,241)

[State 3121, 3]
type = Explod
trigger1 = movehit
id = 20210
anim = 20210
pos = 0, -50
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 1505, 9]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10
value = 292

;特殊技（着地）
[Statedef 292]
type = S
movetype = A
physics = S
anim = 292
poweradd = 0
ctrl = 0

[State 1505, 3]
type = CtrlSet
trigger1 = var(50) > 0
trigger1 = time = 0
value = 1

[State 210, 0]
type = VelSet
trigger1 = time = 0
x = 5
y = 0

[State 210, 0]
type = VarSet
trigger1 = time = 0
v = 10
value = 0

[State 410, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;ダウン追い撃ち
[Statedef 300]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 300

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 5

[State 220, 2]
type = PlaySnd
trigger1 = animelem = 4
value = 220,0+floor(Random/250.0)

[State 220, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 210,2

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 8
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 9
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 301
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
anim = 302
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 7
anim = 303
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 304
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 9
anim = 305
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 250, 3]
type = HitDef
trigger1 = NumTarget(300) = 0
trigger1 = p2stateno != 5100
trigger1 = p2stateno != 5101
trigger1 = AnimElem = 8
id = 300
attr = S, NA
damage = 54
hitflag = FD
pausetime = 8,8
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-50
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.hittime = 30

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 250, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;打ち上げ
[Statedef 310]
type = S
movetype = A
physics = S
anim = 310
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -160
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 6

[State 220, 1]
type = PlaySnd
trigger1 = animelem = 10
value = 210,2

[State 220, 2]
type = PlaySnd
trigger1 = animelem = 9
value = 220,2+floor(Random/250.0)

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
x = 8

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 6
x = 15

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 7
x = 12

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 14
trigger2 = AnimElem = 15
x = -10

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 16
x = -10

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 17
trigger2 = AnimElem = 18
x = -18

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 11, = 2
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 12
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 9
anim = 311
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 11
anim = 312
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 313
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 12
anim = 314
pos = 0,0
sprpriority = 3
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 11, = 2
trigger1 = p2stateno != 131 || p2stateno != 132
attr = S, NA
animtype = Light
damage = ifelse(var(12)=1,67,51)
guardflag = H
hitflag = MAF
pausetime = ifelse(var(50)=0,8,6),ifelse(var(50)=0,8,6)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,85)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,85)
givepower = 20,20
sparkno = S20150
guard.sparkno = S20310
sparkxy = -10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -2.5,-2.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -4
air.cornerpush.veloff = -4
p2stateno = ifelse(p2statetype=A,ifelse(var(50)>0,8140,9910),8140)

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 11, = 2
trigger1 = p2stateno = 131 || p2stateno = 132
attr = S, NA
animtype = hard
damage = ifelse(var(12)=1,67,51)
guardflag = H
hitflag = MAF
pausetime = ifelse(var(50)=0,8,6),ifelse(var(50)=0,8,6)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,85)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,85)
givepower = 20,20
sparkno = S20150
guard.sparkno = S20310
sparkxy = -10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 150
ground.hittime  = 45
ground.velocity = -9
guard.velocity = -4
air.velocity = -2.5,-2.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -4
air.cornerpush.veloff = -4
p2stateno = 9970

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;ガード不能攻撃
[Statedef 320]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 320

[State 310, 0]
type = SprPriority
trigger1 = time = 0
value = 1

[State 310, 1]
type = Explod
trigger1 = time = 0
anim = 330
pos = -5,0
sprpriority = 2
bindtime = -1
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time = 6
anim = 331
pos = -5,0
sprpriority = 2
bindtime = -1
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time = 12
anim = 332
pos = -5,0
sprpriority = 2
bindtime = -1
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time = 18
anim = 333
pos = -5,0
sprpriority = 2
bindtime = -1
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time = 24
anim = 334
pos = -5,0
sprpriority = 2
bindtime = -1
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time >= 30
anim = 335
pos = -5,0
sprpriority = 2
bindtime = -1
ownpal = 1
persistent = 8
[State 310, 1]
type = Explod
trigger1 = time >= 34
anim = 336
pos = -5,0
sprpriority = 2
bindtime = -1
ownpal = 1
persistent = 8

[State 310, 1]
type = Explod
trigger1 = time = 0
anim = 340
pos = -5,0
sprpriority = 1
bindtime = -1
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time = 6
anim = 341
pos = -5,0
sprpriority = 1
bindtime = -1
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time = 12
anim = 342
pos = -5,0
sprpriority = 1
bindtime = -1
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time = 18
anim = 343
pos = -5,0
sprpriority = 1
bindtime = -1
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time = 24
anim = 344
pos = -5,0
sprpriority = 1
bindtime = -1
ownpal = 1
[State 310, 1]
type = Explod
trigger1 = time >= 30
anim = 345
pos = -5,0
sprpriority = 1
bindtime = -1
ownpal = 1
persistent = 8
[State 310, 1]
type = Explod
trigger1 = time >= 34
anim = 346
pos = -5,0
sprpriority = 1
bindtime = -1
ownpal = 1
persistent = 8

[State 310, 1]
type = varset
trigger1 = animtime = 0
var(29) = 0

[State 310, 1]
type = varset
trigger1 = time = 0
trigger1 = command = "hold_x" && command = "hold_b" 
var(29) = 1

[State 310, 1]
type = varset
trigger1 = time = 0
trigger1 = command = "hold_c"
var(29) = 2

[State 310, 7]
type = ChangeState
trigger2 = time >= 42
trigger2 = var(29) = 1
trigger2 = command != "hold_x" || command != "hold_b" 
trigger1 = time >= 42
trigger1 = var(29) = 2
trigger1 = command != "hold_c"
trigger3 = time >= 86
value = 321

;ガード不能攻撃
[Statedef 321]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 321

[State 311, 0]
type = PlaySnd
trigger1 = AnimElem = 1
value = 220,7

[State 311, 0]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,2

[State 311, 0]
type = VarSet
trigger1 = AnimElem = 3
v = 10
value = 1

[State 311, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 4
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 325
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 326
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 327
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
anim = 328
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = Hard
damage = ifelse(var(12)=1,165,147)
hitflag = MAF
pausetime = 15,15
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20160
guard.sparkno = S20310
sparkxy = 0,-70
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = ifelse(var(23) > 0,-6.5,-10)
ground.cornerpush.veloff = -10
guard.cornerpush.veloff = -10
p2stateno = 241

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 311, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;通常攻撃相手ガード時
[Statedef 350]
velset = 0,0
ctrl = 0

[State 350, 0]
type = ChangeAnim
trigger1 = time = 0 && prevstateno=200
value = 350

[State 350, 0]
type = ChangeAnim
trigger1 = time = 0 && prevstateno=210
value = 351

[State 350, 1]
type = ChangeAnim
trigger1 = time = 0 && prevstateno=240
trigger2 = time = 0 && prevstateno=280
value = 352

[State 350, 2]
type = ChangeAnim
trigger1 = time = 0 && prevstateno=250
value = 353

[State 350, 3]
type = ChangeAnim
trigger1 = time = 0 && prevstateno=400
value = 360

[State 350, 3]
type = ChangeAnim
trigger1 = time = 0 && prevstateno=410
value = 361

[State 350, 4]
type = PosAdd
trigger1 = time = 0 && prevstateno = 250
x = -30

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && animtime = 0
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && animtime = 0
value = var(20)
ctrl = 0

[State 350, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = ifelse(prevstateno=400||prevstateno=410, 11, 0)
ctrl = 1

;しゃがみ　弱斬り
[Statedef 400]
type = C
movetype = A
physics = C
anim = 400
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 5

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,0+floor(Random/250.0)

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,5

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 4
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 5
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 401
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 402
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5, = 2
anim = 403
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
animtype = Light
damage = ifelse(var(12)=1,45,39),ifelse(var(30)=1,3,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,5,3),ifelse(var(50)=0,5,3)
guard.pausetime =ifelse(var(30)=1,0,5),ifelse(var(30)=1,0,5)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-40
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = low
ground.slidetime = 18
ground.hittime =  18
ground.velocity = ifelse(var(23) > 0,-3.5,-5)
guard.velocity = -3
ground.cornerpush.veloff = ifelse(var(23) > 0,-3.5,-5)
guard.cornerpush.veloff = -3

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 4
trigger1 = p2statetype = A
attr = C, NA
animtype = Light
damage = ifelse(var(12)=1,45,39),ifelse(var(30)=1,3,0)
hitflag = AF
pausetime = 5,5
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-40
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3     
p2stateno = ifelse(var(50) > 0,243,9910)

[State 200, 5]
type = ChangeState
trigger1 = var(30) = 1 && moveguarded
value = 350
ignorehitpause = 1

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;しゃがみ　強斬り
[Statedef 410]
type = C
movetype = A
physics = C
anim = 410
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 6

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 220,2+floor(Random/250.0)

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210,2

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 6
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 7
v = 10
value = 2

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 8
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 411
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 412
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 2
persistent = 2
ignorehitpause = 1
anim = 413
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8
anim = 414
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8, = 2
anim = 415
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = movecontact = 0
trigger1 = AnimElem = 6
trigger1 = prevstateno != 400
attr = C, NA
animtype = Hard
damage = ifelse(var(12)=1,93,78),ifelse(var(30)=1,6,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
guard.pausetime =ifelse(var(30)=1,0,12),ifelse(var(30)=1,0,12)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-40
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = ifelse(var(23) > 0,-6.2,-9)
guard.velocity = -4
ground.cornerpush.veloff = ifelse(var(23) > 0,-6.2,-9)
guard.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = movecontact = 0
trigger1 = AnimElem = 6
trigger1 = p2statetype = A
trigger1 = prevstateno != 400
attr = C, NA
animtype = Light
damage = ifelse(var(12)=1,93,78),
hitflag = AF
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
guard.pausetime =ifelse(var(30)=1,0,12),ifelse(var(30)=1,0,12)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-40
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 230, 3]
type = HitDef
trigger1 = movecontact = 0
trigger1 = AnimElem = 7
attr = C, NA
animtype = Hard
damage = ifelse(var(12)=1,123,108),ifelse(var(30)=1,9,0)
guardflag = M
hitflag = M
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
guard.pausetime =ifelse(var(30)=1,0,12),ifelse(var(30)=1,0,12)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-40
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = ifelse(var(23) > 0,-6.2,-9)
guard.velocity = -4
ground.cornerpush.veloff = ifelse(var(23) > 0,-6.2,-9)
guard.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = movecontact = 0
trigger1 = AnimElem = 7
trigger1 = p2statetype = A
attr = C, NA
animtype = Light
damage = ifelse(var(12)=1,123,108),ifelse(var(30)=1,9,0)
hitflag = AF
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
guard.pausetime =ifelse(var(30)=1,0,12),ifelse(var(30)=1,0,12)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-40
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 200, 5]
type = ChangeState
trigger1 = var(30) = 1 && moveguarded
value = 350
ignorehitpause = 1

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;しゃがみ　蹴り
[Statedef 420]
type = C
movetype = A
physics = C
anim = 420
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 5

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 220,0+floor(Random/250.0)

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210,5

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
animtype = Light
damage = ifelse(var(12)=1,45,39),ifelse(var(30)=1,3,0)
guardflag = L
hitflag = M
pausetime = ifelse(var(50)=0,8,5),ifelse(var(50)=0,8,5)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-10
hitsound = S200,5
guardsound = S210,4
ground.type = low
ground.slidetime = 19
ground.hittime =  19
ground.velocity = -4.5
guard.velocity = -3
ground.cornerpush.veloff = -5
guard.cornerpush.veloff = -3

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 3
trigger1 = p2statetype = A
attr = C, NA
animtype = Light
damage = ifelse(var(12)=1,45,39)
hitflag = AF
pausetime = ifelse(var(50)=0,8,5),ifelse(var(50)=0,8,5)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-10
hitsound = S200,5
guardsound = S210,4
air.velocity = -2,-3
airguard.velocity = -3     
p2stateno = ifelse(var(50) > 0,243,9910)

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 420, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;しゃがみ　前　蹴り
[Statedef 430]
type = C
movetype = A
physics = C
anim = 430
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = ChangeState
trigger1 = prevstateno = 100
trigger1 = var(28) = 1
trigger1 = time = 0
value = 435

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = var(50) > 0
trigger1 = time = 0
x = 6

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,2+floor(Random/250.0)

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,6

[State 430, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage   = ifelse(var(12)=1,87,72),ifelse(var(30)=1,9,0)
guardflag = L
hitflag = MA
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20010
guard.sparkno = S20300
sparkxy = -10,-20
hitsound   = S200,6
guardsound = S210,3
ground.type = Trip
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -2.5,-8
air.velocity = -2.4,-8
airguard.velocity = -3   
fall = 1
fall.recover = 0
yaccel = 0.62
p2stateno = 8190

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 430, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;ダッシュしゃがみ　強蹴り
[Statedef 435]
type = C
movetype = A
physics = C
anim = 435
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VelSet
trigger1 = time = [0,3]
x = 6

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 220,2+floor(Random/250.0)

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210,6

[State 430, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
damage   = ifelse(var(12)=1,87,72),ifelse(var(30)=1,6,0)
guardflag = L
hitflag = MA
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20010
guard.sparkno = S20300
sparkxy = -10,-20
hitsound   = S200,6
guardsound = S210,3
ground.type = Trip
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -2.5
guard.velocity = -4
air.velocity = -2.4,-8
airguard.velocity = -3   
fall = 1
fall.recover = 0
yaccel = 0.62
p2stateno = 8190

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 430, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

; ジャンプ　弱斬り
[Statedef 600]
type = A
movetype = A
physics = A
anim = 600
poweradd = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 3
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 4
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 401
pos = 0,-25
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 402
pos = 0,-25
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4, = 2
anim = 403
pos = 0,-25
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 220, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 210,2

[State 220, 2]
type = PlaySnd
trigger1 = animelem = 2
value = 220,1+floor(Random/250.0)

[State 1100, 5]
type = PlayerPush
trigger1 = time >= 0 && time<= 5
trigger1 = Vel X >= 4
value = 0

[State 220, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
animtype = Hard
damage = ifelse(var(12)=1,45,39),ifelse(var(30)=1,3,0)
guardflag = H
hitflag = M
pausetime = ifelse(var(50)=0,5,3),ifelse(var(50)=0,5,3)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-50
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4
ground.cornerpush.veloff = -4

[State 210, 3]
type = HitDef
trigger1 = AnimElem = 3
trigger1 = p2statetype = A
attr = A, NA
animtype = Light
damage = ifelse(var(12)=1,45,39),ifelse(var(30)=1,3,0)
guardflag = A
hitflag = AF
pausetime = ifelse(var(50)=0,5,3),ifelse(var(50)=0,5,3)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = -10,-50
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 600, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50

;ジャンプ　強斬り
[Statedef 610]
type = A
movetype = A
physics = A
anim = 610
poweradd = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 5
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 6
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 3
anim = 611
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 612
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6, = 0
anim = 613
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6, = 2
anim = 614
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 220, 1]
type = PlaySnd
trigger1 = animelem =3
value = 210,2

[State 220, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 220,2+floor(Random/250.0)

[State 1100, 5]
type = PlayerPush
trigger1 = time >= 0 && time<= 5
trigger1 = Vel X >= 4
value = 0

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = A, NA
animtype = Hard
damage = ifelse(var(12)=1,83,78),ifelse(var(30)=1,6,0)
guardflag = H
hitflag = M
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = -10,-50
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
ground.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 5
trigger1 = p2statetype = A
attr = A, NA
animtype = Light
damage = ifelse(var(12)=1,83,78),ifelse(var(30)=1,6,0)
guardflag = A
hitflag = AF
pausetime = ifelse(var(50)=0,12,10),ifelse(var(50)=0,12,10)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = -10,-60
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
p2stateno = ifelse(var(50) > 0,243,9910)

[State 610, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50

;ジャンプ　蹴り
[Statedef 620]
type = A
movetype = A
physics = A
anim = 620
poweradd = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,0+floor(Random/250.0)

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210,5

[State 1100, 5]
type = PlayerPush
trigger1 = time >= 0 && time<= 5
trigger1 = Vel X >= 4
value = 0

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
animtype = Light
damage = ifelse(var(12)=1,45,39),ifelse(var(30)=1,3,0)
guardflag = H
hitflag = M
pausetime = ifelse(var(50)=0,8,5),ifelse(var(50)=0,8,5)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-10
hitsound = S200,5
guardsound = S210,4
ground.type = High
ground.slidetime = 17
ground.hittime =  17
ground.velocity = -4
ground.cornerpush.veloff = -4

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 3
trigger1 = p2statetype = A
attr = A, NA
animtype = Light
damage = ifelse(var(12)=1,45,39),ifelse(var(30)=1,3,0)
guardflag = AF
hitflag = AF
pausetime = ifelse(var(50)=0,8,5),ifelse(var(50)=0,8,5)
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-10
hitsound = S200,5
guardsound = S210,4
air.velocity = -2,-3
airguard.velocity = -3     
p2stateno = ifelse(var(50) > 0,243,9910)

[State 620, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50

;---------------------------------------------------------------------------
;五月雨
[Statedef 900]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 900

[State 200, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 5000,0

[State 900, 3]
type = HitDef
Trigger1 = Time = 0
trigger1 = p2bodydist X <= 30
attr = S, NT
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
hitflag = M-
numhits = 0
priority = 7, Hit
sparkno = -1
sprpriority = -1
p2facing = 1
ground.hittime = 30
p1stateno = ifelse((var(59)=0 && command = "holdback")||(var(59)!=0 && BackEdgebodyDist<60),901,911)
p2stateno = ifelse((var(59)=0 && command = "holdback")||(var(59)!=0 && BackEdgebodyDist<60),903,913)

[State 900, 5]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;１P
[Statedef 901]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 901

[state 911, 1]
type = sprpriority
trigger1 = Animelem = 1
value = 1

[state 911, 2]
type = sprpriority
trigger1 = Animelem = 5
value = -1

[State 911, 3]
type = PlaySnd
trigger1 = animelem = 5
value = 900,0

[State 911, 3]
type = PlaySnd
trigger1 = animelem = 7
value = 900,1

[State 911, 4]
type = targetbind
trigger1 = Animelem = 1
pos =  50,0
time = 1

[State 911, 4]
type = targetbind
trigger1 = Animelem = 5
pos =  10,-80
time = 1

[State 911, 5]
type = targetbind
trigger1 = Animelem = 6
pos =  -10,-90
time = 1

[State 1000, 2]
type = Width
trigger1 = AnimElem = 6
trigger2 = AnimElem = 7
trigger3 = AnimElem = 8
value = 20,30

[State 905, 11]
type = null;TargetLifeAdd
trigger1 = AnimElem = 6
value = -100

[State 905, 11]
type = Turn
trigger1 = AnimElem = 1
value = 0

[State 905, 11]
type = Turn
trigger1 = AnimElem = 14
value = 0

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 911, 6]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;P２
[Statedef 903]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 905, 11]
type = Turn
trigger1 = time = 0
value = 0

[State 5050, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 903

[State 2020, 2.2]
type = sprpriority
trigger1 = time >= 3
trigger1 = animtime <= 0
value = 1

[State 5050, 6]
type = ChangeState
trigger1 = animtime = 0
value = 914

;後ろ投げ１P
[Statedef 911]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 901

[state 911, 1]
type = sprpriority
trigger1 = Animelem = 1
value = 1

[state 911, 2]
type = sprpriority
trigger1 = Animelem = 5
value = -1

[State 911, 3]
type = PlaySnd
trigger1 = animelem = 5
value = 900,0

[State 911, 3]
type = PlaySnd
trigger1 = animelem = 7
value = 900,1

[State 911, 4]
type = targetbind
trigger1 = Animelem = 5
pos =  10,-80
time = 1

[State 911, 5]
type = targetbind
trigger1 = Animelem = 6
pos =  -1,-82
time = 1

[State 1000, 2]
type = Width
trigger1 = AnimElem = 6
trigger2 = AnimElem = 7
trigger3 = AnimElem = 8
value = 20,30

[State 905, 11]
type = Turn
trigger1 = AnimElem = 14
value = 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 911, 6]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;後ろ投げP２
[Statedef 913]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 5050, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 903

[State 2020, 2.2]
type = sprpriority
trigger1 = time >= 3
trigger1 = animtime <= 0
value = 1

[State 5050, 6]
type = ChangeState
trigger1 = animtime = 0
value = 914

;P２吹っ飛び
[Statedef 914]
type = A
movetype = H
physics = N
velset = 0,0

[State 905, 11]
type = Turn
trigger1 = time = 0
value = 0

[State 8145, 1]
type = PosAdd
trigger1 = Time = 0
y = 60

[State 8145, 1]
type = Velset
trigger1 = Time = 0
x = -5
y = -15

[State 8145, 1]
type = VelAdd
trigger1 = Time >= 0
y = .5

[State 8145, 1]
type = VelAdd
trigger1 = Time >= 5
y = .6

[State 8145, 1]
type = Velset
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
x = -2

[State 905, 11]
type = LifeAdd
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = -100

[State 8145, 2]
type = ChangeAnim
trigger1 = animexist(5061)
trigger1 = Time = 0
value = 5061

[State 8145, 3]
type = ChangeAnim
trigger1 = !animexist(5061)
trigger1 = Time = 5
value = 5050

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;------------------------------
;逸刀・朧　上段(始め)
[Statedef 1000]
type = S
movetype = A
physics = S
anim = 1000
poweradd = 0
velset = 0
ctrl = 0

[State 1000, 0]
type = varset
trigger1 = time = 0
var(27) = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 8
value = 1000,1

[State 1000, 9]
type = ChangeState
trigger1 = var(59) !=0
trigger1 = animtime = 0
value = 1010

[State 1000, 9]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "y"
value = 1470

[State 1000, 9]
type = ChangeState
trigger1 = var(59) =0
trigger1 = command != "hold_a"
trigger1 = time >= 12
value = 1050

[State 1000, 3]
type = ChangeState
trigger1 = animtime = 0
value = 1010

;逸刀・朧　上段(溜め)
[Statedef 1010]
type = S
movetype = A
physics = S
anim = 1010
poweradd = 0
velset = 0
ctrl = 0

[State 200, 1]
type =Palfx
trigger1 = time = 90
trigger2 = time = 92
trigger3 = time = 170
trigger4 = time = 172
time = 1
add = 60,60,60
ignorehitpause = 1

[State 1000, 9]
type = varadd
trigger1 = time = 90
trigger2 = time = 170
var(27) = 1

[State 1000, 9]
type = varset
trigger1 = var(27) >= 3
var(27) = 2

[State 1000, 9]
type = ChangeState
trigger1 = var(59) != 0
trigger1 = time = 5
value = 1050

[State 1000, 9]
type = ChangeState
triggerall = var(59) = 0
trigger1 = command = "y"
value = 1470

[State 1000, 9]
type = ChangeState
triggerall = var(59) = 0
trigger1 = command != "hold_a"
trigger1 = time >= 0
trigger2 = command = "hold_a"
trigger2 = animtime = 0
value = 1050

;逸刀・朧　上段
[Statedef 1050]
type = S
movetype = A
physics = S
anim = 1050
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 1000,0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 1000,2

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 210,2

[State 210, 0]
type = VarAdd
trigger1 = time = 2
trigger2 = time = 4
trigger3 = time = 6
trigger4 = time = 8
trigger5 = time = 10
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = time = 12
v = 10
value = 0

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 1060
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = Var(10) = 2
persistent = 2
ignorehitpause = 1
anim = 1061
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = Var(10) = 3
persistent = 2
ignorehitpause = 1
anim = 1062
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = Var(10) = 4
persistent = 2
ignorehitpause = 1
anim = 1063
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = Var(10) = 5
persistent = 2
ignorehitpause = 1
anim = 1064
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = time = 12
ignorehitpause = 1
anim = 1065
pos = 0,0
sprpriority = 3
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = animelem = 2
attr = S, SA
animtype = Light
damage = ifelse(var(12)=1,45,39),3
guardflag = M
hitflag = M
pausetime = 2,2
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = 0,-70
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4
guard.velocity = -3
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -3
[State 230, 3]
type = HitDef
trigger1 = animelem = 5
attr = S, SA
animtype = Hard
damage = ifelse(var(12)=1,72,57),9
guardflag = M
hitflag = M
pausetime = 8,8
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-70
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = p2statetype = A
trigger1 = animelem = 2
attr = S, SA
animtype = Light
damage = ifelse(var(12)=1,45,39),3
hitflag = AF
pausetime = 2,2
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = 0,-70
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
air.cornerpush.veloff = -4
p2stateno = 243
[State 230, 3]
type = HitDef
trigger1 = p2statetype = A
trigger1 = animelem = 5
attr = S, SA
animtype = Light
damage = ifelse(var(12)=1,72,57),9
hitflag = AF
pausetime = 8,9
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-80
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
air.cornerpush.veloff = -9
p2stateno = 243

[State 3121, 1]
type = Helper
triggerall = animelem = 8, = 2
trigger1 = var(27) = 1
trigger2 = var(27) = 2
id = 1070
pos = 130, -124
postype = p1
stateno = 1070
helpertype = normal
keyctrl = 0
ownpal = 1
[State 3121, 1]
type = Helper
trigger1 = animelem = 10, = 4
trigger1 = var(27) = 2
id = 1070
pos = 172, -151
postype = p1
stateno = 1070
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1000, 9]
type = VarSet
trigger1 = time = 0
trigger2 = animtime = 0
var(14) = 0
[State 1000, 9]
type = VarSet
triggerall = Var(59) = 0
triggerall = time <= 5
trigger1 = command = "a"
trigger2 = command = "x"
trigger3 = command = "b"
var(14) = 1
[State 1000, 9]
type = ChangeState
triggerall = Var(59) = 0
trigger1 = time = 5
trigger1 = var(14) = 1
value = 1450

[State 1000, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 1400

;逸刀・朧　上段(ヘルパー)
[Statedef 1070]
type = A
movetype = A
physics = N
sprpriority = 4
velset = 0,0
anim = 1070

[State 3122, 0]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 230, 3]
type = HitDef
triggerall = movecontact = 0
trigger1 = animelem = 1
trigger2 = animelem = 3
trigger3 = animelem = 5
trigger4 = animelem = 7
trigger5 = animelem = 9
attr = S, SP
animtype = Hard
damage = ifelse(parent,var(12)=1,45,30),3
guardflag = M
hitflag = M
pausetime = 4,4
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = 0,0
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 230, 3]
type = HitDef
triggerall = movecontact = 0
triggerall = p2statetype = A
trigger1 = animelem = 1
trigger2 = animelem = 3
trigger3 = animelem = 5
trigger4 = animelem = 7
trigger5 = animelem = 9
attr = S, SP
animtype = Light
damage = ifelse(parent,var(12)=1,45,30),3
hitflag = AF
pausetime = 4,4
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = 0,0
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
air.cornerpush.veloff = 0
p2stateno = 243

[State 3121, 3]
type = Explod
trigger1 = movehit
id = 20200
anim = 20200
pos = 0, -70
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 3122, 7]
type = DestroySelf
trigger1 = animtime = 0

;逸刀・朧　中段(始め)
[Statedef 1100]
type = S
movetype = A
physics = S
anim = 1000
poweradd = 0
velset = 0
ctrl = 0

[State 1000, 0]
type = varset
trigger1 = time = 0
var(27) = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 8
value = 1000,1

[State 1000, 9]
type = ChangeState
trigger1 = var(59) != 0
trigger1 = time = 12
value = 1150

[State 1000, 9]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "y"
value = 1470

[State 1000, 9]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "hold_b"
trigger1 = time >= 12
value = 1150

[State 1000, 3]
type = ChangeState
trigger1 = animtime = 0
value = 1110

;逸刀・朧　中段(溜め)
[Statedef 1110]
type = S
movetype = A
physics = S
anim = 1010
poweradd = 0
velset = 0
ctrl = 0

[State 200, 1]
type =Palfx
trigger1 = time = 90
trigger2 = time = 92
trigger3 = time = 170
trigger4 = time = 172
time = 1
add = 60,60,60
ignorehitpause = 1

[State 1000, 9]
type = varadd
trigger1 = time = 90
trigger2 = time = 170
var(27) = 1

[State 1000, 9]
type = varset
trigger1 = var(27) >= 3
var(27) = 2

[State 1000, 9]
type = ChangeState
trigger1 = command = "y"
value = 1470

[State 1000, 9]
type = ChangeState
trigger1 = command != "hold_b"
trigger1 = time >= 0
trigger2 = animtime = 0
value = 1150

;逸刀・朧　中段
[Statedef 1150]
type = S
movetype = A
physics = S
anim = 1150
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 1000,0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 1000,2

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 210,2

[State 210, 0]
type = VarAdd
trigger1 = time = 2
trigger2 = time = 4
trigger3 = time = 6
trigger4 = time = 8
trigger5 = time = 10
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = time = 12
v = 10
value = 0

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 1160
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = Var(10) = 2
persistent = 2
ignorehitpause = 1
anim = 1161
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = Var(10) = 3
persistent = 2
ignorehitpause = 1
anim = 1162
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = Var(10) = 4
persistent = 2
ignorehitpause = 1
anim = 1163
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = Var(10) = 5
persistent = 2
ignorehitpause = 1
anim = 1164
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = time = 12
ignorehitpause = 1
anim = 1165
pos = 0,0
sprpriority = 3
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = animelem = 2
attr = S, SA
animtype = Light
damage = ifelse(var(50)>0,39,30),3
guardflag = H
hitflag = M
pausetime = 2,2
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = 0,-70
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4
guard.velocity = -3
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -3
[State 230, 3]
type = HitDef
trigger1 = animelem = 5
attr = S, SA
animtype = Hard
damage = ifelse(var(50)>0,78,63),9
guardflag = H
hitflag = M
pausetime = 8,8
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-70
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = p2statetype = A
trigger1 = animelem = 2
attr = S, SA
animtype = Light
damage = ifelse(var(50)>0,39,30),3
hitflag = AF
pausetime = 2,3
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = 0,-70
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
air.cornerpush.veloff = -4
p2stateno = 243
[State 230, 3]
type = HitDef
trigger1 = p2statetype = A
trigger1 = animelem = 5
attr = S, SA
animtype = Light
damage = ifelse(var(50)>0,78,63),9
hitflag = AF
pausetime = 8,9
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-80
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
air.cornerpush.veloff = -10
p2stateno = 243

[State 3121, 1]
type = Helper
triggerall = animelem = 8, = 2
trigger1 = var(27) = 1
trigger2 = var(27) = 2
id = 1170
pos = 170, -82
postype = p1
stateno = 1170
helpertype = normal
keyctrl = 0
ownpal = 1
[State 3121, 1]
type = Helper
trigger1 = animelem = 10, = 4
trigger1 = var(27) = 2
id = 1170
pos = 215, -94
postype = p1
stateno = 1170
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1000, 9]
type = VarSet
trigger1 = time = 0
trigger2 = animtime = 0
var(14) = 0
[State 1000, 9]
type = VarSet
triggerall = var(59) = 0
triggerall = time <= 5
trigger1 = command = "a"
trigger2 = command = "x"
trigger3 = command = "b"
var(14) = 1
[State 1000, 9]
type = ChangeState
trigger1 = time = 5
trigger1 = var(14) = 1
value = 1450

[State 1000, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 1400

;逸刀・朧　中段(ヘルパー)
[Statedef 1170]
type = A
movetype = A
physics = N
sprpriority = 4
velset = 0,0
anim = 1170

[State 3122, 0]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 230, 3]
type = HitDef
triggerall = movecontact = 0
trigger1 = animelem = 1
trigger2 = animelem = 3
trigger3 = animelem = 5
trigger4 = animelem = 7
trigger5 = animelem = 9
attr = S, SP
animtype = Hard
damage = ifelse(parent,var(12)=1,45,30),3
guardflag = H
hitflag = M
pausetime = 4,4
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = 0,0
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 230, 3]
type = HitDef
triggerall = movecontact = 0
triggerall = p2statetype = A
trigger1 = animelem = 1
trigger2 = animelem = 3
trigger3 = animelem = 5
trigger4 = animelem = 7
trigger5 = animelem = 9
attr = S, SP
animtype = Light
damage = ifelse(parent,var(12)=1,45,30),3
hitflag = AF
pausetime = 4,4
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = 0,0
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
air.cornerpush.veloff = 0
p2stateno = 243

[State 3121, 3]
type = Explod
trigger1 = movehit
id = 20200
anim = 20200
pos = 0, -70
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 3122, 7]
type = DestroySelf
trigger1 = animtime = 0

;逸刀・朧　下段(始め)
[Statedef 1200]
type = S
movetype = A
physics = S
anim = 1000
poweradd = 0
velset = 0
ctrl = 0

[State 1000, 0]
type = varset
trigger1 = time = 0
var(27) = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 8
value = 1000,1

[State 1000, 9]
type = ChangeState
trigger1 = var(59) != 0
trigger1 = time = 12
value = 1250

[State 1000, 9]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "y"
value = 1470

[State 1000, 9]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "hold_x"
trigger1 = time >= 12
value = 1250

[State 1000, 3]
type = ChangeState
trigger1 = animtime = 0
value = 1210

;逸刀・朧　下段(溜め)
[Statedef 1210]
type = S
movetype = A
physics = S
anim = 1010
poweradd = 0
velset = 0
ctrl = 0

[State 200, 1]
type =Palfx
trigger1 = time = 90
trigger2 = time = 92
trigger3 = time = 170
trigger4 = time = 172
time = 1
add = 60,60,60
ignorehitpause = 1

[State 1000, 9]
type = varadd
trigger1 = time = 90
trigger2 = time = 170
var(27) = 1

[State 1000, 9]
type = varset
trigger1 = var(27) >= 3
var(27) = 2

[State 1000, 9]
type = ChangeState
trigger1 = command = "y"
value = 1470

[State 1000, 9]
type = ChangeState
trigger1 = command != "hold_x"
trigger1 = time >= 0
trigger2 = animtime = 0
value = 1250

;逸刀・朧　下段
[Statedef 1250]
type = S
movetype = A
physics = S
anim = 1250
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 1000,0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 1000,2

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 210,2

[State 210, 0]
type = VarAdd
trigger1 = time = 2
trigger2 = time = 4
trigger3 = time = 6
trigger4 = time = 8
trigger5 = time = 10
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = time = 12
v = 10
value = 0

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 1260
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = Var(10) = 2
persistent = 2
ignorehitpause = 1
anim = 1261
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = Var(10) = 3
persistent = 2
ignorehitpause = 1
anim = 1262
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = Var(10) = 4
persistent = 2
ignorehitpause = 1
anim = 1263
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = Var(10) = 5
persistent = 2
ignorehitpause = 1
anim = 1264
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = time = 12
ignorehitpause = 1
anim = 1265
pos = 0,0
sprpriority = 3
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = animelem = 2
attr = S, SA
animtype = Light
damage = ifelse(var(50)>0,39,30),3
guardflag = L
hitflag = M
pausetime = 2,2
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4
guard.velocity = -3
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -3
[State 230, 3]
type = HitDef
trigger1 = animelem = 5
attr = S, SA
animtype = Hard
damage = ifelse(var(50)>0,78,63),9
guardflag = M
hitflag = M
pausetime = 8,8
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = p2statetype = A
trigger1 = animelem = 2
attr = S, SA
animtype = Light
damage = ifelse(var(50)>0,39,30),3
hitflag = AF
pausetime = 2,3
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
air.cornerpush.veloff = -4
p2stateno = 243
[State 230, 3]
type = HitDef
trigger1 = p2statetype = A
trigger1 = animelem = 5
attr = S, SA
animtype = Light
damage = ifelse(var(50)>0,78,63),9
hitflag = AF
pausetime = 8,9
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
air.cornerpush.veloff = -10
p2stateno = 243

[State 3121, 1]
type = Helper
triggerall = animelem = 8, = 2
trigger1 = var(27) = 1
trigger2 = var(27) = 2
id = 1270
pos = 170, -10
postype = p1
stateno = 1270
helpertype = normal
keyctrl = 0
ownpal = 1
[State 3121, 1]
type = Helper
trigger1 = animelem = 10, = 4
trigger1 = var(27) = 2
id = 1270
pos = 210, -12
postype = p1
stateno = 1270
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1000, 9]
type = VarSet
trigger1 = time = 0
trigger2 = animtime = 0
var(14) = 0
[State 1000, 9]
type = VarSet
triggerall = var(59) = 0
triggerall = time <= 5
trigger1 = command = "a"
trigger2 = command = "x"
trigger3 = command = "b"
var(14) = 1
[State 1000, 9]
type = ChangeState
trigger1 = time = 5
trigger1 = var(14) = 1
value = 1450

[State 1000, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 1400

;逸刀・朧　下段(ヘルパー)
[Statedef 1270]
type = A
movetype = A
physics = N
sprpriority = 4
velset = 0,0
anim = 1270

[State 3122, 0]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 230, 3]
type = HitDef
triggerall = movecontact = 0
trigger1 = animelem = 1
trigger2 = animelem = 3
trigger3 = animelem = 5
trigger4 = animelem = 7
trigger5 = animelem = 9
attr = S, SP
animtype = Hard
damage = ifelse(parent,var(12)=1,45,30),3
guardflag = L
hitflag = M
pausetime = 4,4
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = 0,0
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 230, 3]
type = HitDef
triggerall = movecontact = 0
triggerall = p2statetype = A
trigger1 = animelem = 1
trigger2 = animelem = 3
trigger3 = animelem = 5
trigger4 = animelem = 7
trigger5 = animelem = 9
attr = S, SP
animtype = Hard
damage = ifelse(parent,var(12)=1,45,30),3
hitflag = AF
pausetime = 4,4
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,25)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,25)
givepower = 20,20
sparkno = S20100
guard.sparkno = S20310
sparkxy = 0,0
hitsound = S200,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
air.cornerpush.veloff = 0
p2stateno = 243

[State 3121, 3]
type = Explod
trigger1 = movehit
id = 20200
anim = 20200
pos = 0, -70
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 3122, 7]
type = DestroySelf
trigger1 = animtime = 0

;逸刀・朧　全(終わり)
[Statedef 1400]
type = S
movetype = I
physics = S
anim = 1400
poweradd = 0
velset = 0
ctrl = 0

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 1400, 1]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;逸刀・朧　全(キャンセル)
[Statedef 1450]
type = S
movetype = I
physics = S
anim = 1450
poweradd = 0
velset = 0
ctrl = 0

[State 1000, 9]
type = PosAdd
trigger1 = time = 0
x = 5

[State 3121, 1]
type = Helper
triggerall = time = 8
triggerall = prevstateno = 1050
trigger1 = var(27) = 1
trigger2 = var(27) = 2
id = 1070
pos = 130, -124
postype = p1
stateno = 1070
helpertype = normal
keyctrl = 0
ownpal = 1
[State 3121, 1]
type = Helper
triggerall = animtime = 0
triggerall = prevstateno = 1050
trigger1 = var(27) = 2
id = 1070
pos = 172, -151
postype = p1
stateno = 1070
helpertype = normal
keyctrl = 0
ownpal = 1

[State 3121, 1]
type = Helper
triggerall = time = 8
triggerall = prevstateno = 1150
trigger1 = var(27) = 1
trigger2 = var(27) = 2
id = 1170
pos = 170, -82
postype = p1
stateno = 1170
helpertype = normal
keyctrl = 0
ownpal = 1
[State 3121, 1]
type = Helper
trigger1 = animtime = 0
trigger1 = prevstateno = 1150
trigger1 = var(27) = 2
id = 1170
pos = 215, -94
postype = p1
stateno = 1170
helpertype = normal
keyctrl = 0
ownpal = 1

[State 3121, 1]
type = Helper
triggerall = time = 8
triggerall = prevstateno = 1250
trigger1 = var(27) = 1
trigger2 = var(27) = 2
id = 1270
pos = 170, -10
postype = p1
stateno = 1270
helpertype = normal
keyctrl = 0
ownpal = 1
[State 3121, 1]
type = Helper
trigger1 = animtime = 0
trigger1 = prevstateno = 1250
trigger1 = var(27) = 2
id = 1270
pos = 210, -12
postype = p1
stateno = 1270
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = time = 0
trigger1 = prevstateno = 1050
ignorehitpause = 1
anim = 1066
pos = 0,0
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = time = 0
trigger1 = prevstateno = 1150
ignorehitpause = 1
anim = 1166
pos = 0,0
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = time = 0
trigger1 = prevstateno = 1250
ignorehitpause = 1
anim = 1266
pos = 0,0
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1000, 9]
type = ChangeState
trigger1 = animtime = 0
trigger1 = command = "hold_a"
value = 1460

[State 1000, 9]
type = ChangeState
trigger1 = animtime = 0
trigger1 = command = "hold_b"
value = 1461

[State 1000, 9]
type = ChangeState
trigger1 = animtime = 0
trigger1 = command = "hold_x"
value = 1462

[State 1400, 1]
type = ChangeState
trigger1 = animtime = 0
value = 1451

;逸刀・朧　全(キャンセル戻り)
[Statedef 1451]
type = S
movetype = I
physics = S
anim = 1451
poweradd = 0
velset = 0
ctrl = 0

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 1400, 1]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;逸刀・朧　上段(キャンセル溜め)
[Statedef 1460]
type = S
movetype = I
physics = S
anim = 1460
poweradd = 0
velset = 0
ctrl = 0

[State 1000, 9]
type = ChangeState
trigger1 = command = "y"
value = 1470

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000,1

[State 200, 1]
type =Palfx
trigger1 = time = 70
trigger2 = time = 72
trigger3 = time = 155
trigger4 = time = 157
time = 1
add = 80,80,80
ignorehitpause = 1

[State 1000, 9]
type = ChangeState
trigger1 = command != "hold_a"
trigger1 = animelem = 2, < 0
value = 1470

[State 1000, 9]
type = varadd
trigger1 = time = 70
trigger2 = time = 155
var(27) = 1

[State 1000, 9]
type = varset
trigger1 = var(27) >= 3
var(27) = 2

[State 1000, 9]
type = ChangeState
trigger1 = command != "hold_a"
trigger1 = animelem = 2, >= 0
trigger2 = animtime = 0
value = 1050

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 1400, 1]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;逸刀・朧　中段(キャンセル溜め)
[Statedef 1461]
type = S
movetype = I
physics = S
anim = 1460
poweradd = 0
velset = 0
ctrl = 0

[State 1000, 9]
type = ChangeState
trigger1 = command = "y"
value = 1470

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000,1

[State 200, 1]
type =Palfx
trigger1 = time = 70
trigger2 = time = 72
trigger3 = time = 155
trigger4 = time = 157
time = 1
add = 80,80,80
ignorehitpause = 1

[State 1000, 9]
type = ChangeState
trigger1 = command != "hold_b"
trigger1 = animelem = 2, < 0
value = 1470

[State 1000, 9]
type = varadd
trigger1 = time = 70
trigger2 = time = 155
var(27) = 1

[State 1000, 9]
type = varset
trigger1 = var(27) >= 3
var(27) = 2

[State 1000, 9]
type = ChangeState
trigger1 = command != "hold_b"
trigger1 = animelem = 2, >= 0
trigger2 = animtime = 0
value = 1150

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 1400, 1]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;逸刀・朧　下段(キャンセル溜め)
[Statedef 1462]
type = S
movetype = I
physics = S
anim = 1460
poweradd = 0
velset = 0
ctrl = 0

[State 1000, 9]
type = varset
trigger1 = var(27) >= 1
trigger1 = time = 0
var(27) = 2

[State 1000, 9]
type = ChangeState
trigger1 = command = "y"
value = 1470

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000,1

[State 1000, 9]
type = ChangeState
trigger1 = command != "hold_x"
trigger1 = animelem = 2, < 0
value = 1470

[State 1000, 9]
type = ChangeState
trigger1 = command = "hold_x"
trigger1 = animelem = 2, = 0
trigger2 = animelem = 2, = 0
value = 1250

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 1400, 1]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;逸刀・朧　全(キャンセル戻り)
[Statedef 1470]
type = S
movetype = I
physics = S
anim = 1470
poweradd = 0
velset = 0
ctrl = 0

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 1400, 1]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;新月
[Statedef 1500]
type = S
movetype = A
physics = S
anim = 1500
velset = 0
poweradd = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50) > 0,0,150)*ifelse(var(31)=1,3,1)
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1500,0

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3000,2

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 7
x = 1

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 8
x = 21

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 9
x = 20

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 10
x = 10

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 11
x = 10

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 16
trigger2 = AnimElem = 18
trigger3 = AnimElem = 20
x = -10

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 19
x = -30

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = animelem = 9
v = 10
value = 0

[State 210, 0]
type = VarAdd
trigger1= animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
v = 10
value = 1

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 1700
pos = 30,-100
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 2
persistent = 2
ignorehitpause = 1
anim = 1701
pos = 30,-100
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 3
persistent = 2
ignorehitpause = 1
anim = 1702
pos = 35,-100
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = animelem = 9
anim = 1703
pos = 40,-100
sprpriority = 3
ownpal = 1
ignorehitpause = 1

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype = Light
damage = ifelse(var(12)=1,34,24),3
guardflag = M
hitflag = M
pausetime = 3,3
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20010
guard.sparkno = S20300
sparkxy = -10,-70
envshake = 10
hitsound = S200,6
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 4
trigger1 = p2statetype = A
attr = S, SA
animtype = Light
damage = ifelse(var(12)=1,34,24),3
hitflag = AF
pausetime = 3,13
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20010
guard.sparkno = S20300
sparkxy = -10,-70
hitsound = S200,6
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3     
air.cornerpush.veloff = 0
p2stateno = ifelse(p2stateno = 8145||p2stateno=244||p2stateno=9950,243,9910)

[State 230, 3]
type = HitDef
trigger1 = animelem = 6
attr = S, SA
animtype = Hard
damage = ifelse(var(12)=1,90,78),9
guardflag = M
hitflag = MAF
pausetime = 10,10
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -3.5,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = -10
p2stateno = 243

[State 3121, 3]
type = Explod
trigger1 = animelem = 6, >= 0
trigger1 = movehit
id = 20220
anim = 20220
pos = 0, -70
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = animtime = 0
v = 11
value = 0

[State 1600, 3]
type = ctrlset
triggerall = var(50) > 0
triggerall = movecontact
trigger1 = var(59) != 0
trigger1 = time >= 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = var(59) = 0
trigger1 = animelem = 4, >= 0
trigger1 = command = "新月裏"
trigger1 = var(30) >= 2
v = 11
value = 1

[State 1500, 5]
type = ChangeState
trigger1 = animelem = 6, > 0 && animelem = 12, < 0
trigger1 = movecontact
trigger1 = var(11) = 1
value = 1650

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 1500, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;新月・裏
[Statedef 1600]
type = S
movetype = A
physics = S
anim = 1600
velset = 0
poweradd = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50) > 0,0,150)*ifelse(var(31)=1,3,1)
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 8
value = 1500,0

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 11
value = 3000,2

[State 1500, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 8

[State 1000, 2]
type = Width
trigger1 = animelem = 2,>= 0
trigger1 = animelem = 7,< 0
value = 20,0

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 13
x = 10

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 5
x = 20

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 15
trigger3 = AnimElem = 16
x = 15

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 7
x = 12

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 14
x = 7

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 17
x = 10

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 18
x = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = animelem = 14
v = 10
value = 0

[State 210, 0]
type = VarAdd
trigger1= animelem = 11
trigger2 = animelem = 12
trigger3 = animelem = 13
v = 10
value = 1

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 1700
pos = 20,-100
sprpriority = 0
removetime = 1
bindtime = -1
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 2
persistent = 2
ignorehitpause = 1
anim = 1701
pos = 20,-100
sprpriority = 0
removetime = 1
bindtime = -1
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 3
persistent = 2
ignorehitpause = 1
anim = 1702
pos = 20,-100
sprpriority = 0
removetime = 1
bindtime = -1
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = animelem = 14
anim = 1703
pos = 20,-100
sprpriority = 0
ownpal = 1
ignorehitpause = 1

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 9
attr = S, SA
animtype = Light
damage = ifelse(var(12)=1,40,30),3
guardflag = M
hitflag = M
pausetime = 4,4
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20010
guard.sparkno = S20300
sparkxy = -10,-70
hitsound = S200,6
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 9
trigger1 = p2statetype = A
attr = S, SA
animtype = Light
damage = ifelse(var(12)=1,40,30),3
hitflag = AF
pausetime = 4,4
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20010
guard.sparkno = S20300
sparkxy = -10,-70
hitsound = S200,6
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3     
air.cornerpush.veloff = 0
p2stateno = ifelse(p2stateno=8145||p2stateno=244||p2stateno=9950,243,9910)

[State 230, 3]
type = HitDef
trigger1 = animelem = 11
attr = S, SA
animtype = Hard
damage = ifelse(var(12)=1,110,96),12
guardflag = M
hitflag = MAF
pausetime = 10,10
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -3.5,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = -10
p2stateno = 245

[State 3121, 3]
type = Explod
trigger1 = animelem = 10, >= 0
trigger1 = movehit
id = 20220
anim = 20220
pos = 0, -70
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 1600, 3]
type = ctrlset
triggerall = var(50) > 0
triggerall = movecontact
triggerall = var(59) != 0
trigger1 = time >= 19
value = 1

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 1500, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;双月
[Statedef 1650]
type = S
movetype = A
physics = S
anim = 1650
velset = 0
poweradd = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 1000, 2]
type = Width
trigger1 = 1
value = 5,0

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 11
value = 3000,2

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 20
value = 1500,1

[State 1100, 1]
type = Explod
trigger1 = time = 0
anim = 1703
pos = 20,-100
sprpriority = 3
ownpal = 1
ignorehitpause = 1

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 13
x = 10

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 5
x = 20

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 15
trigger3 = AnimElem = 16
x = 15

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 7
x = 12

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 14
x = 7

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 17
x = 10

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 18
x = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = animelem = 14
v = 10
value = 0

[State 210, 0]
type = VarAdd
trigger1= animelem = 11
trigger2 = animelem = 12
trigger3 = animelem = 13
v = 10
value = 1

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 1700
pos = 20,-100
sprpriority = 0
removetime = 1
bindtime = -1
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 2
persistent = 2
ignorehitpause = 1
anim = 1701
pos = 20,-100
sprpriority = 0
removetime = 1
bindtime = -1
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 3
persistent = 2
ignorehitpause = 1
anim = 1702
pos = 20,-100
sprpriority = 0
removetime = 1
bindtime = -1
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = animelem = 14
anim = 1703
pos = 20,-100
sprpriority = 0
ownpal = 1
ignorehitpause = 1

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 9
attr = S, SA
animtype = Light
damage = ifelse(var(12)=1,40,30),3
guardflag = M
hitflag = M
pausetime = 4,4
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20010
guard.sparkno = S20300
sparkxy = -10,-70
envshake = 10
hitsound = S200,6
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 9
trigger1 = p2statetype = A
attr = S, SA
animtype = Light
damage = ifelse(var(12)=1,40,30),3
hitflag = AF
pausetime = 4,4
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20010
guard.sparkno = S20300
sparkxy = -10,-70
hitsound = S200,6
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3     
air.cornerpush.veloff = 0
p2stateno = 243

[State 230, 3]
type = HitDef
trigger1 = animelem = 11
attr = S, SA
animtype = Hard
damage = ifelse(var(12)=1,70,57),6
guardflag = M
hitflag = MAF
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-90
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -3.5,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = -10
p2stateno = 247

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 1500, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------月影（力・極）----------
;弱　月影　一発目
[Statedef 2000]
type = S
movetype = A
physics = S
anim = 2000
poweradd = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50) > 0,0,120)*ifelse(var(31)=1,3,1)
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 4
value = 2000,0

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 2000,1

[State 210, 0]
type = velset
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 7, < 0
x = 4

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 7
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 8
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 2010
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
anim = 2011
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 2012
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8, = 0
anim = 2013
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8, = 2
anim = 2014
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8, = 4
anim = 2015
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 7
attr = S, SA
animtype = Hard
damage = ifelse(var(12) != 0,45,30),3
guardflag = M
hitflag = M
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20101
guard.sparkno = S20310
sparkxy = 10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 7
trigger1 = p2statetype = A
attr = S, SA
animtype = Light
damage = ifelse(var(12) != 0,45,30),3
hitflag = AF
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20101
guard.sparkno = S20310
sparkxy = 10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(var(50)>0,243,9910)

[State 3121, 3]
type = Explod
trigger1 = movehit
id = 20220
anim = 20220
pos = -10, -70
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 1000, 2]
type = Width
trigger1 = animelem = 4,>=0
value = 20,0

[State 200, 0]
type = VarSet
trigger1 = var(40) = 0 && var(30) != 2
trigger1 = Var(10) = 1
trigger1 = movecontact
trigger1 = command = "十六夜月華"
var(40) = 1
persistent = 0
ignorehitpause = 1

[State 410, 4]
type = ChangeState
trigger1 = time = [21,31]
trigger1 = movecontact
trigger1 = command = "新月"
value = 1500

[State 410, 4]
type = ChangeState
trigger1 = time = [21,31]
trigger1 = movecontact
trigger1 = command = "新月裏"
value = 1600

[State 410, 4]
type = ChangeState
trigger1 = time = [21,31]
trigger1 = movecontact
trigger1 = command = "上段朧"
value = 1000

[State 410, 4]
type = ChangeState
trigger1 = time = [21,31]
trigger1 = movecontact
trigger1 = command = "中段朧"
value = 1100

[State 410, 4]
type = ChangeState
trigger1 = time = [21,31]
trigger1 = movecontact
trigger1 = command = "下段朧"
value = 1200

[State 410, 4]
type = ChangeState
trigger1 = time = [21,31]
trigger1 = movecontact
trigger1 = command = "弱月影"
value = ifelse(var(30)=2,2025,2020)

[State 410, 4]
type = ChangeState
trigger1 = time = [21,31]
trigger1 = movecontact
trigger1 = command = "強月影"
value = 2100

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;弱　月影　二発目
[Statedef 2020]
type = S
movetype = A
physics = S
anim = 2020
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 8
value = 2010,0

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 9
value = 2010,1

[State 1000, 2]
type = Width
trigger1 = animelem = 2,>=0
value = 10,0

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
x = 5

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 6
x = 15

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 7
x = 12

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 12
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 13
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 9
anim = 2030
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 10
anim = 2031
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 11
anim = 2032
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 2034
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 13
anim = 2034
pos = 0,0
sprpriority = 3
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 13, = 2
anim = 2035
pos = 0,0
sprpriority = 3
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 12
attr = S, SA
animtype = Light
damage = ifelse(var(12) != 0,65,51),9
guardflag = M
hitflag = M
pausetime = 12,11
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -5
guard.cornerpush.veloff = -3
air.cornerpush.veloff = 0
p2stateno = 8140

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 12
trigger1 = p2statetype = A
attr = S, SA
animtype = Light
damage = ifelse(var(12) != 0,65,51),9
hitflag = AF
pausetime = 12,11
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.slidetime = 10
ground.hittime = 21
ground.velocity = -10
air.velocity = -3,-3
air.cornerpush.veloff = 0
p2stateno = 8140

[State 200, 0]
type = VarSet
trigger1 = var(40) = 0 && var(30) != 2
trigger1 = Var(10) = 1
trigger1 = movecontact
trigger1 = command = "十六夜月華"
var(40) = 1
persistent = 0
ignorehitpause = 1

[State 410, 4]
type = ChangeState
trigger1 = time = [12,23]
trigger1 = movecontact
trigger1 = command = "新月"
value = 1500

[State 410, 4]
type = ChangeState
trigger1 = time = [12,23]
trigger1 = movecontact
trigger1 = command = "新月裏"
value = 1600

[State 410, 4]
type = ChangeState
trigger1 = time = [12,23]
trigger1 = movecontact
trigger1 = command = "上段朧"
value = 1000

[State 410, 4]
type = ChangeState
trigger1 = time = [12,23]
trigger1 = movecontact
trigger1 = command = "中段朧"
value = 1100

[State 410, 4]
type = ChangeState
trigger1 = time = [12,23]
trigger1 = movecontact
trigger1 = command = "下段朧"
value = 1200

[State 410, 4]
type = ChangeState
trigger1 = command = "弱月影"
trigger1 = time = [12,23]
trigger1 = movecontact
value = 2040

[State 410, 4]
type = ChangeState
trigger1 = command = "強月影"
trigger1 = time = [12,23]
trigger1 = movecontact
value = 2100

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;弱　月影　三発目（地上）
[Statedef 2040]
type = S
movetype = A
physics = S
anim = 2040
poweradd = 0
velset = 0
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 2041

;弱　月影　三発目（空中）
[Statedef 2041]
type = A
movetype = A
physics = N
anim = 2041
velset = 0,0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2020,0

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 2020,1

[State 1505, 3]
type = PosAdd
trigger1 = AnimElem = 1
y = -10

[State 1505, 3]
type = VelSet
trigger1 = AnimElem = 1
x = 4
y = -6

[State 1505, 4]
type = VelAdd
trigger1 = Time >= 0
y = .6

[State 1505, 4]
type = VelAdd
trigger1 = Time >= 10
y = .4

[State 210, 0]
type = VarAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 5, = 4
trigger4 = AnimElem = 5, = 8
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 0
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 3
anim = 2050
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 2051
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 2
persistent = 2
ignorehitpause = 1
anim = 2052
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 3
persistent = 2
ignorehitpause = 1
anim = 2053
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 4
persistent = 2
ignorehitpause = 1
anim = 2054
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 1505, 6]
type = HitDef
trigger1 = AnimElem = 4, = 2
attr = A, SA
animtype = Hard
damage = ifelse(var(12) != 0,125,111),9
guardflag = H
hitflag = M
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 10,-70
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 1505, 6]
type = HitDef
trigger1 = AnimElem = 4, = 2
trigger1 = p2statetype = A
attr = A, SA
animtype = Hard
damage = ifelse(var(12) != 0,125,111),9
hitflag = AF
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 10,-85
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 13
ground.hittime = 18
ground.velocity = -3,11   
air.velocity = -2.3,-3
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
yaccel = 0.60
p2stateno = 8150

[State 1505, 9]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 2042

;弱　月影　三発目（着地）
[Statedef 2042]
type = S
movetype = A
physics = S
anim = 2042
poweradd = 0
velset = 0,0
ctrl = 0

[State 210, 0]
type = VarSet
trigger1 = time = 0
v = 10
value = 0

[State 410, 4]
type = VelSet
trigger1 = Time = [0,10]
x = 3

[State 410, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;強　月影　一発目
[Statedef 2100]
type = S
movetype = A
physics = S
anim = ifelse(Var(50) > 0,2101,2100)
poweradd = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50) > 0,0,120)*ifelse(var(31)=1,3,1)
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 4
value = 2000,0

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 2000,1

[State 1000, 2]
type = Width
trigger1 = animelem = 3,>=0
value = 20,0

[State 210, 0]
type = velset
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 6, < 0
x = 8

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 7
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 8
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 2010
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
anim = 2011
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 2012
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8, = 0
anim = 2013
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8, = 2
anim = 2014
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 7
attr = S, SA
animtype = Hard
damage = ifelse(var(12) != 0,65,51),6
guardflag = M
hitflag = M
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20101
guard.sparkno = S20310
sparkxy = 10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = High
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 7
trigger1 = p2statetype = A
attr = S, SA
animtype = Light
damage = ifelse(var(12) != 0,65,51),6
hitflag = AF
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20101
guard.sparkno = S20310
sparkxy = 10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
air.cornerpush.veloff = 0
p2stateno = ifelse(var(50)>0,243,9910)

[State 3121, 3]
type = Explod
trigger1 = movehit
id = 20220
anim = 20220
pos = -10, -55
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VarSet
trigger1 = var(40) = 0 && var(30) != 2
trigger1 = Var(10) = 1
trigger1 = movecontact
trigger1 = command = "十六夜月華"
var(40) = 1
persistent = 0
ignorehitpause = 1

[State 410, 4]
type = ChangeState
trigger1 = command = "新月"
trigger1 = time = [33,46]
value = 1500

[State 410, 4]
type = ChangeState
trigger1 = command = "新月裏"
trigger1 = time = [33,46]
value = 1600

[State 410, 4]
type = ChangeState
trigger1 = command = "上段朧"
trigger1 = time = [33,46]
value = 1000

[State 410, 4]
type = ChangeState
trigger1 = command = "中段朧"
trigger1 = time = [33,46]
value = 1100

[State 410, 4]
type = ChangeState
trigger1 = command = "下段朧"
trigger1 = time = [33,46]
value = 1200

[State 410, 4]
type = ChangeState
triggerall = command = "強月影"
trigger1 = time = [33,46]
trigger1 = movecontact
trigger2 = time = [38,46]
trigger2 = movecontact = 0
value = 2120

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;強　月影　二発目
[Statedef 2120]
type = S
movetype = A
physics = S
anim = 2120
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2010,0

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 2010,1

[State 1000, 2]
type = Width
trigger1 = animelem = 2,>=0
value = 20,0

[State 210, 0]
type = velset
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 5, < 0
x = 6

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 6
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 7
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 2130
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 2131
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 2132
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 7
anim = 2133
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8
anim = 2134
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 9
anim = 2135
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 10, = 0
anim = 2136
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 10, = 2
anim = 2137
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 6
attr = S, SA
animtype = Hard
damage = ifelse(var(12) != 0,80,72),6
guardflag = M
hitflag = M
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 6
trigger1 = p2statetype = A
attr = S, SA
animtype = Light
damage = ifelse(var(12) != 0,80,72),6
hitflag = AF
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
air.cornerpush.veloff = 0
p2stateno = ifelse(var(50)>0,243,9910)

[State 3121, 3]
type = Explod
trigger1 = movehit
id = 20220
anim = 20220
pos = -10, -55
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VarSet
trigger1 = var(40) = 0 && var(30) != 2
trigger1 = Var(10) = 1
trigger1 = movecontact
trigger1 = command = "十六夜月華"
var(40) = 1
persistent = 0
ignorehitpause = 1

[State 410, 4]
type = ChangeState
trigger1 = time = [8,26]
trigger1 = movecontact
trigger1 = command = "新月"
value = 1500

[State 410, 4]
type = ChangeState
trigger1 = time = [8,26]
trigger1 = movecontact
trigger1 = command = "新月裏"
value = 1600

[State 410, 4]
type = ChangeState
trigger1 = time = [8,26]
trigger1 = movecontact
trigger1 = command = "上段朧"
value = 1000

[State 410, 4]
type = ChangeState
trigger1 = time = [8,26]
trigger1 = movecontact
trigger1 = command = "中段朧"
value = 1100

[State 410, 4]
type = ChangeState
trigger1 = time = [8,26]
trigger1 = movecontact
trigger1 = command = "下段朧"
value = 1200

[State 410, 4]
type = ChangeState
triggerall = command = "強月影"
trigger1 = time = [8,26]
trigger1 = movecontact
trigger2 = time = [13,26]
trigger2 = movecontact = 0
value = ifelse(var(30)=2,2145,2140)

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;強　月影　三発目
[Statedef 2140]
type = S
movetype = A
physics = S
anim = 2140
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2020,0

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 2010,1

[State 1000, 2]
type = Width
trigger1 = animelem = 2,>=0
value = 20,0

[State 210, 0]
type = velset
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 5, < 0
x = 6

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 6
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 7
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 2150
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 2151
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 2152
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 7
anim = 2153
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8
anim = 2154
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8, = 0
anim = 2155
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8, = 2
anim = 2156
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8, = 4
anim = 2157
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 6
attr = S, SA
animtype = Hard
damage = ifelse(var(12) != 0,85,78),9
guardflag = M
hitflag = M
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = High
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 6
trigger1 = p2statetype = A
attr = S, SA
animtype = Light
damage = ifelse(var(12) != 0,85,78),9
hitflag = AF
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
air.cornerpush.veloff = 0
p2stateno = ifelse(var(50)>0,243,9910)

[State 3121, 3]
type = Explod
trigger1 = movehit
id = 20220
anim = 20220
pos = -10, -85
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VarSet
trigger1 = var(40) = 0 && var(30) != 2
trigger1 = Var(10) = 1
trigger1 = movecontact
trigger1 = command = "十六夜月華"
var(40) = 1
persistent = 0
ignorehitpause = 1

[State 410, 4]
type = ChangeState
trigger1 = time = [11,27]
trigger1 = movecontact
trigger1 = command = "新月"
value = 1500

[State 410, 4]
type = ChangeState
trigger1 = time = [11,27]
trigger1 = movecontact
trigger1 = command = "新月裏"
value = 1600

[State 410, 4]
type = ChangeState
trigger1 = time = [11,27]
trigger1 = movecontact
trigger1 = command = "上段朧"
value = 1000

[State 410, 4]
type = ChangeState
trigger1 = time = [11,27]
trigger1 = movecontact
trigger1 = command = "中段朧"
value = 1100

[State 410, 4]
type = ChangeState
trigger1 = time = [11,27]
trigger1 = movecontact
trigger1 = command = "下段朧"
value = 1200

[State 410, 4]
type = ChangeState
triggerall = command = "強月影"
trigger1 = time = [11,27]
trigger1 = movecontact
trigger2 = time = [16,27]
trigger2 = movecontact = 0
value = 2160

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;強　月影　四発目
[Statedef 2160]
type = S
movetype = A
physics = S
anim = 2160
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 5
value = 2000,0

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 2000,1

[State 1000, 2]
type = Width
trigger1 = animelem = 3,>=0
value = 20,0

[State 210, 0]
type = posadd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 6
trigger5 = AnimElem = 7
trigger6 = AnimElem = 8
trigger7 = AnimElem = 9
x = 10

[State 210, 0]
type = posadd
trigger1 = AnimElem = 14
trigger2 = AnimElem = 17
trigger3 = AnimElem = 18
x = -10

[State 210, 0]
type = posadd
trigger1 = AnimElem = 15
trigger2 = AnimElem = 16
x = -20

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 8
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 9
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
anim = 2170
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 7
anim = 2171
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 2172
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 9
anim = 2173
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 9, = 2
anim = 2174
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 10
anim = 2175
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 10, = 2
anim = 2176
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 8
attr = S, SA
animtype = Hard
damage = ifelse(var(12) != 0,100,96),9
guardflag = M
hitflag = M
pausetime = 15,15
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 10,-55
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 8
trigger1 = p2statetype = A
attr = S, SA
animtype = Light
damage = ifelse(var(12) != 0,100,96),9
hitflag = AF
pausetime = 15,15
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 10,-55
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
air.cornerpush.veloff = 0
p2stateno = ifelse(var(50)>0,243,9910)

[State 3121, 3]
type = Explod
trigger1 = movehit
id = 20230
anim = 20230
pos = -10, -60
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VarSet
trigger1 = var(40) = 0 && var(30) != 2
trigger1 = Var(10) = 1
trigger1 = movecontact
trigger1 = command = "十六夜月華"
var(40) = 1
persistent = 0
ignorehitpause = 1

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------月影（技）----------
;弱　月影　二発目
[Statedef 2025]
type = S
movetype = A
physics = S
anim = 2140
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2020,0

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 2010,1

[State 1000, 2]
type = Width
trigger1 = animelem = 1,>=0
value = 20,0

[State 210, 0]
type = velset
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 5, < 0
x = 6

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 6
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 7
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 2150
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 2151
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 2152
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 7
anim = 2153
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8
anim = 2154
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8, = 0
anim = 2155
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8, = 2
anim = 2156
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 8, = 4
anim = 2157
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 6
attr = S, SA
animtype = Hard
damage = ifelse(var(12) != 0,75,60),6
guardflag = M
hitflag = M
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = High
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 6
trigger1 = p2statetype = A
attr = S, SA
animtype = Light
damage = ifelse(var(12) != 0,75,60),6
hitflag = AF
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
air.cornerpush.veloff = 0
p2stateno = ifelse(var(50)>0,243,9910)

[State 3121, 3]
type = Explod
trigger1 = movehit
id = 20220
anim = 20220
pos = -10, -85
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 410, 4]
type = ChangeState
trigger1 = time = [11,22]
trigger1 = movecontact
trigger1 = command = "新月"
value = 1500

[State 410, 4]
type = ChangeState
trigger1 = time = [11,22]
trigger1 = movecontact
trigger1 = command = "新月裏"
value = 1600

[State 410, 4]
type = ChangeState
trigger1 = time = [11,22]
trigger1 = movecontact
trigger1 = command = "上段朧"
value = 1000

[State 410, 4]
type = ChangeState
trigger1 = time = [11,22]
trigger1 = movecontact
trigger1 = command = "中段朧"
value = 1100

[State 410, 4]
type = ChangeState
trigger1 = time = [11,22]
trigger1 = movecontact
trigger1 = command = "下段朧"
value = 1200

[State 410, 4]
type = ChangeState
trigger1 = command = "弱月影"
trigger1 = time = [11,22]
trigger1 = movecontact
value = 2045

[State 410, 4]
type = ChangeState
trigger1 = command = "強月影"
trigger1 = time = [11,22]
trigger1 = movecontact
value = 2100

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;弱　月影　三発目
[Statedef 2045]
type = S
movetype = A
physics = S
anim = 2160
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 5
value = 2000,0

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 2000,1

[State 1000, 2]
type = Width
trigger1 = animelem = 3,>=0
value = 20,0

[State 210, 0]
type = posadd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 6
trigger5 = AnimElem = 7
trigger6 = AnimElem = 8
trigger7 = AnimElem = 9
x = 10

[State 210, 0]
type = posadd
trigger1 = AnimElem = 14
trigger2 = AnimElem = 17
trigger3 = AnimElem = 18
x = -10

[State 210, 0]
type = posadd
trigger1 = AnimElem = 15
trigger2 = AnimElem = 16
x = -20

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 8
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 9
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 6
anim = 2170
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 7
anim = 2171
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 2172
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 9
anim = 2173
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 9, = 2
anim = 2174
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 10
anim = 2175
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 10, = 2
anim = 2176
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 8
attr = S, SA
animtype = Hard
damage = ifelse(var(12) != 0,95,80),9
guardflag = M
hitflag = M
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 10,-55
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 8
trigger1 = p2statetype = A
attr = S, SA
animtype = Light
damage = ifelse(var(12) != 0,95,80),9
hitflag = AF
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20110
guard.sparkno = S20310
sparkxy = 10,-55
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
air.velocity = -3.5,-3
air.cornerpush.veloff = 0
p2stateno = ifelse(var(50)>0,243,9910)

[State 3121, 3]
type = Explod
trigger1 = movehit
id = 20230
anim = 20230
pos = -10, -60
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;強　月影　三発目
[Statedef 2145]
type = S
movetype = A
physics = S
anim = 2145
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 8
value = 2010,0

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 9
value = 2010,1

[State 1000, 2]
type = Width
trigger1 = animelem = 2,>=0
value = 10,0

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
x = 10

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 5
x = 20

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 6
x = 15

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 7
x = 12

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 12
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 13
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 9
anim = 2030
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 10
anim = 2031
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 11
anim = 2032
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 2034
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 13
anim = 2034
pos = 0,0
sprpriority = 3
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 13, = 2
anim = 2035
pos = 0,0
sprpriority = 3
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 12
attr = S, SA
animtype = Light
damage = ifelse(var(12) != 0,60,45),6
guardflag = M
hitflag = M
pausetime = 12,11
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4
p2stateno = 8140

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 12
trigger1 = p2statetype = A
attr = S, SA
animtype = Light
damage = ifelse(var(12) != 0,60,45),6
guardflag = M
hitflag = AF
pausetime = 12,11
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.slidetime = 10
ground.hittime = 21
ground.velocity = -12
air.velocity = -3,-3
air.cornerpush.veloff = 0
p2stateno = 8140

[State 410, 4]
type = ChangeState
trigger1 = time >= 27
trigger1 = command = "十六夜月華"
trigger1 = power >= 1000 || (var(31) = 1 && Life <= var(17))
trigger1 = var(50) <= 15
value = 11000

[State 410, 4]
type = ChangeState
trigger1 = time >= 27
trigger1 = command = "乱舞奥義"
trigger1 = power >= 2000 || (var(31) = 1 && Life <= var(17) && power >= 1000)
trigger1 = var(30) >= 2
trigger1 = var(50) <= 15
value = 13000

[State 410, 4]
type = ChangeState
trigger1 = time = [12,27]
trigger1 = command = "新月"
value = 1500

[State 410, 4]
type = ChangeState
trigger1 = time = [12,27]
trigger1 = command = "新月裏"
value = 1600

[State 410, 4]
type = ChangeState
trigger1 = time = [12,27]
trigger1 = command = "上段朧"
value = 1000

[State 410, 4]
type = ChangeState
trigger1 = time = [12,27]
trigger1 = command = "中段朧"
value = 1100

[State 410, 4]
type = ChangeState
trigger1 = time = [12,27]
trigger1 = command = "下段朧"
value = 1200

[State 410, 4]
type = ChangeState
triggerall = command = "強月影"
trigger1 = time = [12,27]
trigger1 = movecontact
trigger2 = time = [17,27]
trigger2 = movecontact = 0
value = 2165

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;強　月影　四発目（地上）
[Statedef 2165]
type = S
movetype = A
physics = S
anim = 2040
poweradd = 0
velset = 0
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 2166

;強　月影　四発目（空中）
[Statedef 2166]
type = A
movetype = A
physics = N
anim = 2041
velset = 0,0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -110
persistent = 0
ignorehitpause = 1

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2020,0

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 2020,1

[State 1505, 3]
type = PosAdd
trigger1 = AnimElem = 1
y = -10

[State 1505, 3]
type = VelSet
trigger1 = AnimElem = 1
x = 4
y = -6

[State 1505, 4]
type = VelAdd
trigger1 = Time >= 0
y = .6

[State 1505, 4]
type = VelAdd
trigger1 = Time >= 10
y = .4

[State 210, 0]
type = VarAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 5, = 4
trigger4 = AnimElem = 5, = 8
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 0
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 3
anim = 2050
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 2051
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 2
persistent = 2
ignorehitpause = 1
anim = 2052
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 3
persistent = 2
ignorehitpause = 1
anim = 2053
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 4
persistent = 2
ignorehitpause = 1
anim = 2054
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 1505, 6]
type = HitDef
trigger1 = AnimElem = 4, = 2
attr = A, SA
animtype = Hard
damage = ifelse(var(12) != 0,115,100),9
guardflag = H
hitflag = M
sparkno = S20110
guard.sparkno = S20310
sparkxy = 10,-70
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0

[State 1505, 6]
type = HitDef
trigger1 = AnimElem = 4, = 2
trigger1 = p2statetype = A
attr = A, SA
animtype = Hard
damage = ifelse(var(12) != 0,115,100),9
sparkno = S20110
guard.sparkno = S20310
sparkxy = 10,-85
guardflag = H
hitflag = AF
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 13
ground.hittime = 18
ground.velocity = -3,11   
air.velocity = -2.3,-3
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
yaccel = 0.60
p2stateno = 8150

[State 1505, 9]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 2042

;歩月　後移動
[Statedef 3000]
type = S
movetype = I
physics = S
anim = 3000
poweradd = 0
velset = 0
ctrl = 0

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = animtime = 0
v = 15
value = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 10
value = 1000,1

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 11
value = 1800,2

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 3100

;歩月　後移動
[Statedef 3100]
type = S
movetype = I
physics = S
anim = 3100
poweradd = 0
velset = 0
ctrl = 0

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 1800,0

[State 1000, 4]
type = PosAdd
trigger1 = time = 0
x = -BackEdgeDist

[State 1000, 4]
type = VelSet
trigger1 = AnimElem = 2
x = 6

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = animtime = 0
v = 15
value = 0

[State 210, 0]
type = VarSet
trigger1 = command = "a"
trigger1 = AnimElem = 2, < 0
v = 15
value = 1

[State 210, 0]
type = VarSet
trigger1 = command = "b"
trigger1 = AnimElem = 2, < 0
v = 15
value = 2

[State 210, 0]
type = VarSet
trigger1 = command = "x"
trigger1 = AnimElem = 2, < 0
v = 15
value = 3

[State 1000, 9]
type = VarSet
trigger1 = command = "y" && command != "holddown"
trigger1 = AnimElem = 2, < 0
v = 15
value = 4

[State 1000, 9]
type = VarSet
trigger1 = command = "y" && command = "holddown"
trigger1 = AnimElem = 2, < 0
v = 15
value = 5

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 1
trigger1 = AnimElem = 2
value = 3150

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 2
trigger1 = AnimElem = 2
value = 3250

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 3
trigger1 = AnimElem = 2
value = 3350

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 4
trigger1 = AnimElem = 2
value = 4000

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 5
trigger1 = AnimElem = 2
value = 4100

[State 200, 4]
type = ChangeState
trigger1 = command = "a" && command = "x"
trigger1 = AnimElem = 2, < 0
value = 0
ctrl = 1

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;歩月　後　移動→朧
[Statedef 3150]
type = S
movetype = I
physics = S
anim = 3150
poweradd = 0
velset = 0
ctrl = 0

[State 1000, 4]
type = VelSet
trigger1 = AnimElem = 1
trigger1 = PrevStateno != 3201
x = 10

[State 1000, 1]
type = Turn
trigger1 = P2bodydist X < 0
trigger1 = AnimElem = 2
value = 0

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 1
trigger1 = AnimTime = 0
value = 1460

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 2
trigger1 = AnimTime = 0
value = 1461

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 3
trigger1 = AnimTime = 0
value = 1462

;歩月　中移動
[Statedef 3200]
type = S
movetype = I
physics = S
anim = 3000
poweradd = 0
velset = 0
ctrl = 0

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = animtime = 0
v = 15
value = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 10
value = 1000,1

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 11
value = 1800,2

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 3201

;歩月　中移動
[Statedef 3201]
type = S
movetype = I
physics = S
anim = 3100
poweradd = 0
velset = 0
ctrl = 0

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 1800,0

[State 1000, 4]
type = PosAdd
trigger1 = time = 0
x = P2bodydist X - 35

[State 1000, 4]
type = VelSet
trigger1 = animelem = 2
x = 4

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = animtime = 0
v = 15
value = 0

[State 200, 4]
type = ChangeState
triggerall = var(59) = 0
trigger1 = command = "a" && command = "x"
trigger1 = AnimElem = 2, < 0
value = 0
ctrl = 1

[State 200, 4]
type = ChangeState
triggerall = var(59) != 0
trigger1 = var(55) = 1
trigger1 = AnimElem = 2, < 0
value = 0
ctrl = 1

[State 210, 0]
type = VarSet
trigger1 = command = "a"
trigger1 = AnimElem = 2, < 0
v = 15
value = 1

[State 210, 0]
type = VarSet
trigger1 = command = "b"
trigger1 = AnimElem = 2, < 0
v = 15
value = 2

[State 210, 0]
type = VarSet
trigger1 = command = "x"
trigger1 = AnimElem = 2, < 0
v = 15
value = 3

[State 1000, 9]
type = VarSet
trigger1 = command = "y" && command != "holddown"
trigger1 = AnimElem = 2, < 0
v = 15
value = 4

[State 1000, 9]
type = VarSet
trigger1 = command = "y" && command = "holddown"
trigger1 = AnimElem = 2, < 0
v = 15
value = 5

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 1
trigger1 = AnimElem = 2
value = 3150

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 2
trigger1 = AnimElem = 2
value = 3250

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 3
trigger1 = AnimElem = 2
value = 3350

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 4
trigger1 = AnimElem = 2
value = 4000

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 5
trigger1 = AnimElem = 2
value = 4100

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;歩月　中　移動→朧
[Statedef 3250]
type = S
movetype = I
physics = S
anim = 3150
poweradd = 0
velset = 0
ctrl = 0

[State 1000, 1]
type = Turn
trigger1 = P2bodydist X < 0
trigger1 = AnimElem = 2
value = 0

[State 1000, 4]
type = VelSet
trigger1 = AnimElem = 1
trigger1 = PrevStateno != 3201
x = 6

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 1
trigger1 = AnimTime = 0
value = 1460

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 2
trigger1 = AnimTime = 0
value = 1461

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 3
trigger1 = AnimTime = 0
value = 1462

;歩月　前移動
[Statedef 3300]
type = S
movetype = I
physics = S
anim = 3000
poweradd = 0
velset = 0
ctrl = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 10
value = 1000,1

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 11
value = 1800,2

[State 1000, 4]
type = VelSet
trigger1 = AnimElem = 12
x = 50

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 3301

;歩月　前移動
[Statedef 3301]
type = S
movetype = I
physics = S
anim = 3300
poweradd = 0
velset = 0
ctrl = 0

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1800,1

[State 3120, 0]
type = Width
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 4, < 0
value =  -5, 0

[State 1000, 4]
type = PosAdd
trigger1 = numenemy =1
trigger1 = time = 0
x = P2bodydist X + 100

[State 1000, 4]
type = PosAdd
trigger1 = numenemy >= 2
trigger1 = time = 0
x = FrontEdgeDist + 40

[State 1000, 4]
type = PosAdd
trigger1 = numenemy >= 2
trigger1 = time = 1
x = P2bodydist X +40

[State 1000, 4]
type = VelSet
trigger1 = animelem = 2
x = 6

[State 1000, 1]
type = Turn
trigger1 = AnimElem = 4
value = 0

[State 200, 4]
type = ChangeState
triggerall = var(59) = 0
trigger1 = command = "a" && command = "x"
trigger1 = AnimElem = 2, < 0
value = 0
ctrl = 1

[State 200, 4]
type = ChangeState
triggerall = var(59) != 0
trigger1 = var(55) = 1
trigger1 = AnimElem = 2, < 0
value = 0
ctrl = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = animtime = 0
v = 15
value = 0

[State 210, 0]
type = VarSet
trigger1 = command = "a"
trigger1 = AnimElem = 2, < 0
v = 15
value = 1

[State 210, 0]
type = VarSet
trigger1 = command = "b"
trigger1 = AnimElem = 2, < 0
v = 15
value = 2

[State 210, 0]
type = VarSet
trigger1 = command = "x"
trigger1 = AnimElem = 2, < 0
v = 15
value = 3

[State 1000, 9]
type = VarSet
trigger1 = command = "y" && command != "holddown"
trigger1 = AnimElem = 2, < 0
v = 15
value = 4

[State 1000, 9]
type = VarSet
trigger1 = command = "y" && command = "holddown"
trigger1 = AnimElem = 2, < 0
v = 15
value = 5

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 1
trigger1 = AnimElem = 2
value = 3150

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 2
trigger1 = AnimElem = 2
value = 3250

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 3
trigger1 = AnimElem = 2
value = 3350

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 4
trigger1 = AnimElem = 2
value = 4000

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 5
trigger1 = AnimElem = 2
value = 4100

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;歩月　前　移動→朧
[Statedef 3350]
type = S
movetype = I
physics = S
anim = 3350
poweradd = 0
velset = 0
ctrl = 0

[State 3120, 0]
type = Width
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 3, < 0
value =  -5, 0

[State 1000, 4]
type = VelSet
trigger1 = AnimElem = 1
trigger1 = PrevStateno != 3201
x = 6

[State 1000, 1]
type = Turn
trigger1 = P2bodydist X < -10
trigger1 = AnimElem = 3
value = 0

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 1
trigger1 = AnimTime = 0
value = 1460

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 2
trigger1 = AnimTime = 0
value = 1461

[State 200, 4]
type = ChangeState
trigger1 = Var(15) = 3
trigger1 = AnimTime = 0
value = 1462

;起き上がり前移動
[Statedef 3600]
type = S
movetype = I
physics = N
anim = 3600
poweradd = 0
velset = 0
ctrl = 0

[State 800, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 26

[State 250, 4]
type = VelSet
trigger1 = AnimElem = 2
x = 9

[State 250, 5]
type = VelAdd
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 8, < 0
trigger1 = vel X > 0
x = -0.4

[State 250, 6]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 800, 6]
type = PlayerPush
trigger1 = animelem = 2,>=0
trigger1 = animelem = 7,<0
value = 0

[State 3120, 0]
type = Width
trigger1 = animelem = 3,>=0
trigger1 = animtime <= 0
value =  -5, 0

[State 2060, 12]
type = CtrlSet
trigger1 = animelem = 8
value = 1

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = Ctrl = 1

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (AnimTime = 0)
trigger1 = (var(20)!=0) && (Ctrl = 1)
value = var(20)
ctrl = 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;起き上がり後移動
[Statedef 3650]
type = S
movetype = I
physics = N
anim = 3650
poweradd = 0
velset = 0
ctrl = 0

[State 800, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 26

[State 250, 4]
type = VelSet
trigger1 = AnimElem = 2
x = -9

[State 250, 5]
type = VelAdd
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 8, < 0
trigger1 = vel X < 0
x = 0.5

[State 250, 6]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 800, 6]
type = PlayerPush
trigger1 = animelem = 2,>=0
trigger1 = animelem = 7,<0
value = 0

[State 3120, 0]
type = Width
trigger1 = animelem = 3,>=0
trigger1 = animtime <= 0
value =  0, -5

[State 2060, 12]
type = CtrlSet
trigger1 = animelem = 8
value = 1

[State 105, 2]
type = Turn
trigger1 = p2dist X < 0
trigger1 = Ctrl = 1

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち　弾き
[Statedef 4000]
type = S
movetype = I
physics = S
anim = 4000
velset = 0
ctrl = 0

[State 105, 2]
type = Turn
trigger1 = time = 0
trigger1 = prevstateno = 3301
trigger1 = p2dist X < 0

[State 200, 1]
type =Palfx
trigger1 = time = 0
time = 2
add = 60,60,60
persistent = 0
ignorehitpause = 1

[State 50, 4]
type = AfterImage
trigger1 = time = 0
time = 39
framegap = 3
length = 8
ignorehitpause = 1
channel = 0

[State 4000, 2]
type = ReversalDef
trigger1 = time = [0,12]
reversal.attr = SA, NA,SA,HA
numhits = 0
pausetime = 0,12
sparkno = -1
sparkxy = 20,-30
p1stateno = 4010

[State 4000, 2]
type = ReversalDef
trigger1 = time = [13,15]
reversal.attr = S, NA,SA,HA
numhits = 0
pausetime = 0,12
sparkno = -1
sparkxy = 20,-30
p1stateno = 4010

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 195, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち／しゃがみ　弾き攻撃
[Statedef 4010]
type = S
movetype = A
physics = S
anim = 4010
poweradd = 0
velset = 0
ctrl = 0

[State 200, 1]
type =Palfx
trigger1 = time = 0
time = 2
add = 225,225,225
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,2+floor(Random/250.0)

[State 2060, 12]
type = EnvColor
trigger1 = time = 6
time = 1
value = 0,0,255
under = 1
persistent = 0
ignorehitpause = 1

[State 2060, 12]
type = EnvColor
trigger1 = time = 7
time = 1
value = 255,255,255
under = 1
persistent = 0
ignorehitpause = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype = Light
damage = 0
hitflag = MAF
guardflag = M
pausetime = 12,12
getpower  = 0,0
givepower = 0,0
sparkno = S5401
guard.sparkno = S20310
sparkxy = 0,-150
hitsound = S210,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.slidetime = 10
ground.hittime = 21
ground.velocity = -12
air.velocity = -3,-3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = ifelse(p2statetype = A,9940,5400)

[State 2060, 12]
type = CtrlSet
trigger1 = animelem = 5
value = 1

[State 410, 4]
type = ChangeState
triggerall = var(59) = 0
triggerall = movehit
trigger1 = command = "x"
trigger1 = command = "b"
trigger2 = command = "y"
value = 4050

[State 105, 2]
type = Turn
triggerall = p2dist X < 0
trigger1 = (var(20)!=0) && (animtime = 0)
trigger2 = (var(20)!=0) && (animelem = 5)

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
trigger2 = (var(20)!=0) && (animelem = 5)
value = var(20)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;弾き後　攻撃
[Statedef 4050]
type = S
movetype = A
physics = S
anim = 4050
poweradd = 0
velset = 0
ctrl = 0

[State 200, 0]
type = VarAdd
trigger1 = var(50) > 0
trigger1 = movecontact
var(50) = -135
persistent = 0
ignorehitpause = 1

[State 200, 0]
type = VelSet
trigger1 = time = [0,10]
x = 3

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 4
value = 220,2+floor(Random/250.0)

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 210,2

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 6
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 7
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 4
anim = 281
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 5
anim = 282
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 283
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 7
anim = 284
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 7, = 2
anim = 285
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype = Hard
damage = ifelse(var(12) != 0,96,80)
guardflag = H
hitflag = MAF
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,85)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,85)
givepower = 20,20
sparkno = S20150
guard.sparkno = S20310
sparkxy = -10,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -10
air.type = low
air.velocity = -3.5,-3
ground.cornerpush.veloff = 0
p2stateno = 241

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;しゃがみ　弾き
[Statedef 4100]
type = C
movetype = I
physics = C
anim = 4100
velset = 0
ctrl = 0

[State 105, 2]
type = Turn
trigger1 = time = 0
trigger1 = prevstateno = 3301
trigger1 = p2dist X < 0

[State 200, 1]
type =Palfx
trigger1 = time = 0
time = 2
add = 60,60,60
persistent = 0
ignorehitpause = 1

[State 50, 4]
type = AfterImage
trigger1 = time = 0
time = 39
framegap = 3
length = 8
ignorehitpause = 1
channel = 0

[State 1000, 2]
type = ReversalDef
trigger1 = time <= 15
reversal.attr = SC, NA,SA,HA
numhits = 0
pausetime = 0,12
sparkno = -1
sparkxy = 20,-30
p1stateno = 4010

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 195, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;空中　弾き
[Statedef 4200]
type = A
movetype = I
physics = N
anim = 4200
ctrl = 0

[State 200, 1]
type =Palfx
trigger1 = time = 0
time = 2
add = 60,60,60
persistent = 0
ignorehitpause = 1

[State 50, 4]
type = AfterImage
trigger1 = time = 0
time = 39
framegap = 3
length = 8
ignorehitpause = 1
channel = 0

[State 1505, 9]
type = veladd
trigger1 = time >= 0
y = .5

[State 1000, 2]
type = ReversalDef
trigger1 = time <= 15
reversal.attr = SCA, NA,SA,HA
numhits = 0
pausetime = 0,6
sparkno = -1
sparkxy = 20,-30
p1stateno = 4220

[State 1505, 9]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4210

;空中　弾き（着地）
[Statedef 4210]
type = S
movetype = I
physics = S
anim = 4210
velset = 0,0

[State 1510, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1510, 2]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 1510, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;空中　弾き攻撃
[Statedef 4220]
type = A
movetype = A
physics = N
anim = 4220
velset = 0,0
poweradd = 0
ctrl = 0

[State 200, 1]
type =Palfx
trigger1 = time = 0
time = 2
add = 225,225,225
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 220,2+floor(Random/250.0)

[State 2060, 12]
type = VelSet
trigger1 = animelem = 5
x = 3
y = -5

[State 2060, 12]
type = veladd
trigger1 = animelem = 5, >= 0
y = .5

[State 2060, 12]
type = EnvColor
trigger1 = time = 4
time = 1
value = 0,0,255
under = 1
persistent = 0
ignorehitpause = 1

[State 2060, 12]
type = EnvColor
trigger1 = time = 5
time = 1
value = 255,255,255
under = 1
persistent = 0
ignorehitpause = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype = Light
damage = 0
hitflag = MAF
guardflag = M
pausetime = 12,12
getpower  = 0,0
givepower = 0,0
sparkno = S5401
guard.sparkno = S20310
sparkxy = 0,-140
hitsound = S210,0+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.slidetime = 10
ground.hittime = 21
ground.velocity = -12
air.velocity = -3,-3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -17
p2stateno = ifelse(p2statetype = A,9940,5400)

[State 2060, 12]
type = CtrlSet
trigger1 = time = 6
value = 1

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 41

;ガードキャンセル
[Statedef 4300]
type = S
movetype = A
physics = S
anim = 4300
poweradd = -1000*ifelse(var(31)=1,3,1)
velset = 0
ctrl = 0

[State 3000, NotHitby]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 15

[State 1000, 1]
type = PlaySnd
trigger1 = time = 0
value = 2500,0

[State 2000, 4]
type = Explod
trigger1 = time = 0
anim = 10000
pos = -22,-57
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 8
value = 2010,0

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 9
value = 2010,1

[State 1000, 2]
type = Width
trigger1 = animelem = 2,>=0
value = 10,0

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
x = 5

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 6
x = 15

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 7
x = 12

[State 210, 0]
type = VarSet
trigger1 = AnimElem = 12
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = AnimElem = 13
v = 10
value = 0

[State 210, 1]
type = Explod
trigger1 = AnimElem = 9
anim = 2030
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 10
anim = 2031
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 11
anim = 2032
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 2034
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 13
anim = 2034
pos = 0,0
sprpriority = 3
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = AnimElem = 13, = 2
anim = 2035
pos = 0,0
sprpriority = 3
bindtime = -1
ownpal = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 12
trigger1 = p2statetype != A
attr = S, SA
animtype = Hard
damage = 50,9
hitflag = MAF
guardflag = M
pausetime = 12,11
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -6.2
guard.velocity = -4
ground.cornerpush.veloff = -6.2
guard.cornerpush.veloff = -4

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 12
trigger1 = p2statetype = A
attr = S, SA
animtype = Hard
damage = 50,9
hitflag = MAF
guardflag = M
pausetime = 12,11
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -5
guard.cornerpush.veloff = -3
air.cornerpush.veloff = 0
p2stateno = 8140


[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;立ち弾きやられ
[Statedef 5400]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0

[State 5000, 4]
type = StateTypeSet
trigger1 = Time = 20
type = I

[State 8140, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = animexist(5437)
value = 5437

[State 8140, 3]
type = ChangeAnim2
trigger1 = Time = 0
trigger1 = !animexist(5437)
value = 5402

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 5100,0

[State 8145, 4]
type = SelfState
trigger1 = animtime = 0
value = 0
ctrl = 1

;十六夜月華
[Statedef 11000]
type = S
movetype = A
physics = S
anim = 11000
poweradd = ifelse(var(31)=1&&Life <= var(17),0,-1000)*ifelse(var(31)=1,3,1)
velset = 0
ctrl = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 6
value = 3000,0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 8
value = 1000,1

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 8
value = 2500,0

[State 2000, 4]
type = Explod
trigger1 = animelem = 8
anim = 10000
pos = -22,-57
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 2000, 6]
type = SuperPause
trigger1 = animelem = 9 && var(40) = 1
time = 30
anim = -1
darken = 0

[State 3000, 1]
type = Explod
trigger1 = animelem = 9 && var(40) = 1
anim = 15000
pos = ifelse(facing=1,0,1),0
postype = back
bindtime = -1
removetime = 30
sprpriority = -31
supermovetime = -1
pausemovetime = -1
ownpal = 1

[State 1000, 1]
type = VarSet
trigger1 = animelem = 10
var(40) = 0

[State 1000, 3]
type = ChangeState
trigger1 = animtime = 0
value = 11010

;十六夜月華(溜め)
[Statedef 11010]
type = S
movetype = A
physics = S
anim = 11010
poweradd = 0
velset = 0
ctrl = 0

[State 1000, 9]
type = ChangeState
trigger1 = Var(59) !=0
trigger1 = time = 0
value = 11100

[State 1000, 9]
type = ChangeState
trigger1 = command != "hold_a"
trigger1 = time >= 0
trigger2 = animtime = 0
value = 11100

;十六夜月華（攻撃）
[Statedef 11100]
type = S
movetype = A
physics = S
anim = 11100
poweradd = 0
velset = 0
ctrl = 0

[State 11100, 0]
type = Explod
trigger1 = movehit
id = 20200
anim = 20200
pos = 0, -60
postype = p2
sprpriority = 1
ownpal = 1
persistent = 10
ignorehitpause = 1

[State 1000, 1]
type = VelSet
trigger1 = animelem = 1, >= 0
trigger1 = animelem = 48, < 0
x = 1

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 3000,1

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 7
trigger3 = animelem = 13
trigger4 = animelem = 16
trigger5 = animelem = 22
trigger6 = animelem = 27
trigger7 = animelem = 32
trigger8 = animelem = 37
trigger9 = animelem = 42
value = 3000,3
ignorehitpause = 1
channel = 0

[State 100, 7]
type = StopSnd
trigger1 = movehit
trigger1 = time >= 0
ignorehitpause = 1
channel = 0

[State 210, 4]
type = VarSet
trigger1 = time = 0
v = 36
value = 0

[State 210, 0]
type = VarAdd
trigger1 = time >= 0
v = 36
value = 1

[State 11100, 2]
type = EnvColor
trigger1 = movehit
time = 2
value = 200,0,0
under = 1
ignorehitpause = 1
ignorepausetime = 1

[State 1000, 1]
type = PlaySnd
trigger1 = movehit
trigger1 = animelem = 32, < 0
value = 200,0+floor(Random/250.0)
ignorepausetime = 1
ignorehitpause = 1
channel = 4

[State 1000, 1]
type = PlaySnd
trigger1 = movehit
trigger1 = animelem = 32, >= 0
trigger1 = time <= 45
value = 200,0+floor(Random/250.0)
ignorepausetime = 1
ignorehitpause = 1

[State 11100, 3]
type = MoveHitReset
trigger1 = 1
ignorehitpause = 1
ignorepausetime = 1

[State 230, 3]
type = HitDef
trigger1 = animelem = 2
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = M
pausetime = 3,3
getpower  = 0,0
givepower = 0,0
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-90
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
guard.velocity = -2
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -2

[State 230, 3]
type = HitDef
trigger1 = animelem = 3
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = M
pausetime = 1,1
getpower  = 0,0
givepower = 0,0
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-90
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
guard.velocity = -2
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -2

[State 230, 3]
type = HitDef
trigger1 = animelem = 8
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = M
pausetime = 3,3
getpower  = 0,0
givepower = 0,0
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-60
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
guard.velocity = -2
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -2

[State 230, 3]
type = HitDef
trigger1 = animelem = 14
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = M
pausetime = 1,1
getpower  = 0,0
givepower = 0,0
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-30
guardsound = S210,0+floor(Random/500.0)
ground.type = low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
guard.velocity = -2
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -2

[State 230, 3]
type = HitDef
trigger1 = animelem = 17
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = M
pausetime = 3,3
getpower  = 0,0
givepower = 0,0
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-90
guardsound = S210,0+floor(Random/500.0)
ground.type = low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
guard.velocity = -2
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -2

[State 230, 3]
type = HitDef
trigger1 = animelem = 20
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = M
pausetime = 1,1
getpower  = 0,0
givepower = 0,0
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-90
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
guard.velocity = -2
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -2

[State 230, 3]
type = HitDef
trigger1 = animelem = 23
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = M
pausetime = 3,3
getpower  = 0,0
givepower = 0,0
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-60
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
guard.velocity = -2
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -2

[State 230, 3]
type = HitDef
trigger1 = animelem = 24
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = M
pausetime = 1,1
getpower  = 0,0
givepower = 0,0
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-60
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
guard.velocity = -2
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -2

[State 230, 3]
type = HitDef
trigger1 = animelem = 28
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = M
pausetime = 3,3
getpower  = 0,0
givepower = 0,0
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-30
guardsound = S210,0+floor(Random/500.0)
ground.type = low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
guard.velocity = -2
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -2

[State 230, 3]
type = HitDef
trigger1 = animelem = 29
attr = S, HA
animtype = Hard
damage = 15,3
guardflag = M
hitflag = M
pausetime = 1,1
getpower  = 0,0
givepower = 0,0
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-30
guardsound = S210,0+floor(Random/500.0)
ground.type = low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
guard.velocity = -2
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -2

[State 230, 3]
type = HitDef
trigger1 = animelem = 33
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = M
pausetime = 8,8
getpower  = 0,0
givepower = 0,0
guard.pausetime = 10,10
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-90
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
guard.velocity = -2
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -2

[State 230, 3]
type = HitDef
trigger1 = animelem = 35
attr = S, HA
animtype = Hard
damage = 15,3
guardflag = M
hitflag = M
pausetime = 1,1
getpower  = 0,0
givepower = 0,0
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-90
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
guard.velocity = -2
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -2

[State 230, 3]
type = HitDef
trigger1 = animelem = 38
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = M
pausetime = 8,8
getpower  = 0,0
givepower = 0,0
guard.pausetime = 10,10
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-60
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
guard.velocity = -2
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -2

[State 230, 3]
type = HitDef
trigger1 = animelem = 40
attr = S, HA
animtype = Hard
damage = 15,3
guardflag = M
hitflag = M
pausetime = 1,1
getpower  = 0,0
givepower = 0,0
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-60
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
guard.velocity = -2
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -2

[State 230, 3]
type = HitDef
trigger1 = animelem = 43
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = M
pausetime = 14,14
getpower  = 0,0
givepower = 0,0
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-30
guardsound = S210,0+floor(Random/500.0)
ground.type = low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
guard.velocity = -2
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -2

[State 230, 3]
type = HitDef
trigger1 = animelem = 44
attr = S, HA
animtype = Hard
damage = 15,3
guardflag = M
hitflag = MAF
pausetime = 2,2
getpower  = 0,0
givepower = 0,0
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-30
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
guard.velocity = -2
ground.cornerpush.veloff = -4
guard.cornerpush.veloff = -2
p2stateno = 245

[State 230, 3]
type = HitDef
triggerall = p2statetype = A
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 8
trigger4 = animelem = 14
trigger5 = animelem = 17
trigger6 = animelem = 20
trigger7 = animelem = 23
trigger8 = animelem = 24
trigger9 = animelem = 28
trigger10 = animelem = 29
trigger11 = animelem = 33
trigger12 = animelem = 35
trigger13 = animelem = 38
trigger14 = animelem = 40
trigger15 = animelem = 43
trigger16 = animelem = 44
attr = S, HA
animtype = Hard
damage = 20,3
hitflag = AF
pausetime = 3,4
getpower  = 0,0
givepower = 0,0
sparkno = S20110
guard.sparkno = S20310
sparkxy = 0,-68
guardsound = S210,0+floor(Random/500.0)
ground.type = low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4
guard.velocity = -2
air.velocity = -3.5,-4
air.cornerpush.veloff = -4
p2stateno = 8180

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 1000, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
Ctrl = 1

;乱れ雪月花
[Statedef 12000]
type = S
movetype = A
physics = S
anim = 12000
poweradd = ifelse(var(31)=1&&Life <= var(17),-1000,-2000)*ifelse(var(31)=1,3,1)
velset = 0,0
ctrl = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 3500,0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 2500,0

[State 2000, 4]
type = Explod
trigger1 = animelem = 5
anim = 10500
pos = -25,-40
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 2200, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 1000, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 12010

;乱れ雪月花（ランニング）
[Statedef 12010]
type = S
movetype = A
physics = S
anim = 12010
poweradd = 0
velset = 0,0
ctrl = 0

[State 100, 3]
type = PlaySnd
trigger1 = Time = 0
value = 100,0
channel = 2
loop = 1

[State 3010, 1]
type = VelSet
trigger1 = time >= 0
trigger1 = time <= 35
x = 12

[State 3010, 1]
type = VelSet
trigger1 = animelem = 19
x = 1

[State 200, 3]
type = HitDef
trigger1 = time >= 0
attr = S, HA
animtype = Hard
damage = 0,9
guardflag = M
hitflag = M
pausetime = 2,2
getpower  = 0,0
givepower = 0,0
numhits = 0
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-80
hitsound = S200,5
guardsound = S210,0+floor(Random/500.0)
ground.type = low
ground.slidetime = 40
ground.hittime =  18
ground.velocity = -6
air.type = high
air.velocity = -2,-3
airguard.velocity = -3     

[State 200, 3]
type = HitDef
trigger1 = time >= 0
trigger1 = p2statetype = A
attr = S, HA
animtype = Hard
damage = 0
hitflag = AF
pausetime = 2,2
getpower  = 0,0
givepower = 0,0
numhits = 0
sparkno = S20000
guard.sparkno = S20300
sparkxy = -10,-80
hitsound = S200,5
guardsound = S210,0+floor(Random/500.0)
air.velocity = -2,-3
airguard.velocity = -3     
p2stateno = 12200

[State 1000, 9]
type = ChangeState
trigger1 = movehit
value = 12100

[State 1000, 9]
type = ChangeState
trigger1 = moveguarded
value = 12020

[State 1000, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
Ctrl = 1

;乱れ雪月花やられ
[Statedef 12200]
type = S
movetype = H
physics = S
velset = 0,0

[State 5000, 1]
type = PosSet
trigger1 = Time >= 0
y = 0

[State 5000, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5012

[State 5000, 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 3]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 4]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = S

[State 8145, 4]
type = SelfState;ChangeState
trigger1 = animtime = 0
trigger2 = time = 60
value = 5100

;乱れ雪月花（失敗）
[Statedef 12020]
type = S
movetype = I
physics = S
anim = 12020
poweradd = 0
velset = 0,0
ctrl = 0

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 1000, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
Ctrl = 1

;乱れ雪月花（攻撃）
[Statedef 12100]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 12100

[State 2060, 12]
type = EnvColor
trigger1 = time <= 107
time = 1
value = 0,0,0
under = 1
ignorehitpause = 1

[State 7800, 3]
type = BGPalfx
trigger1 = time <= 107
ignorehitpause = 1
supermove = 1
time = 1
mul = -225,-225,-225
invertall = 1

[State 2305, 1]
type = NotHitBy
trigger1 = movehit
trigger2 = time = 0
value = SCA
time = 10

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 67
value = 3000,2

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 75
value = 3500,1

[State 3121, 1]
type = Helper
trigger1 = AnimElem = 1
id = 12109
postype = front
pos = 0, 0
name = "KABE"
sprpriority = 0
stateno = 12109
helpertype = normal
keyctrl = 0
ownpal = 1

[State 3121, 1]
type = Helper
trigger1 = AnimElem = 9
id = 12101
postype = p1
pos = 0, 0
name = "ZANZOU1"
sprpriority = 0
stateno = 12101
helpertype = normal
keyctrl = 0
ownpal = 1
[State 3121, 1]
type = Helper
trigger1 = AnimElem = 15
id = 12102
postype = p1
pos = 0, 0
name = "ZANZOU2"
sprpriority = 0
stateno = 12102
helpertype = normal
keyctrl = 0
ownpal = 1
[State 3121, 1]
type = Helper
trigger1 = AnimElem = 22
id = 12103
postype = p1
pos = 0, 0
name = "ZANZOU3"
sprpriority = 0
stateno = 12103
helpertype = normal
keyctrl = 0
ownpal = 1
[State 3121, 1]
type = Helper
trigger1 = AnimElem = 29
id = 12104
postype = p1
pos = 0, 0
name = "ZANZOU4"
sprpriority = 0
stateno = 12104
helpertype = normal
keyctrl = 0
ownpal = 1
[State 3121, 1]
type = Helper
trigger1 = AnimElem = 36
id = 12105
postype = p1
pos = 0, 0
name = "ZANZOU5"
sprpriority = 0
stateno = 12105
helpertype = normal
keyctrl = 0
ownpal = 1
[State 3121, 1]
type = Helper
trigger1 = AnimElem = 43
id = 12106
postype = p1
pos = 0, 0
name = "ZANZOU6"
sprpriority = 0
stateno = 12106
helpertype = normal
keyctrl = 0
ownpal = 1
[State 3121, 1]
type = Helper
trigger1 = AnimElem = 49
id = 12107
postype = p1
pos = 0, 0
name = "ZANZOU7"
sprpriority = 0
stateno = 12107
helpertype = normal
keyctrl = 0
ownpal = 1
[State 3121, 1]
type = Helper
trigger1 = AnimElem = 58
id = 12108
postype = p1
pos = 0, 0
name = "ZANZOU8"
sprpriority = 0
stateno = 12108
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1001, 18];新月の光
type = Projectile
trigger1 = AnimElem = 7
projanim = 12050
projshadow = 68,68,68
projremovetime = 23
offset = 80,-70
velocity = -3,0
postype = p1
ignorehitpause = 1
[State 1001, 18];新月の光
type = Projectile
trigger1 = AnimElem = 14
projanim = 12050
projshadow = 68,68,68
projremovetime = 23
offset = 70,-45
velocity = -3,0
postype = p1
ignorehitpause = 1
[State 1001, 18];新月の光
type = Projectile
trigger1 = AnimElem = 27
projanim = 12050
projshadow = 68,68,68
projremovetime = 23
offset = 65,-35
velocity = -2,0
postype = p1
ignorehitpause = 1
[State 1001, 18];新月の光
type = Projectile
trigger1 = AnimElem = 34
projanim = 12050
projshadow = 68,68,68
projremovetime = 23
offset = 65,-30
velocity = -2,0
postype = p1
ignorehitpause = 1
[State 1001, 18];新月の光
type = Projectile
trigger1 = AnimElem = 42
projanim = 12050
projshadow = 68,68,68
projremovetime = 23
offset = 80,-20
velocity = -2,0
postype = p1
ignorehitpause = 1
[State 1001, 18];新月の光
type = Projectile
trigger1 = AnimElem = 48
projanim = 12050
projshadow = 68,68,68
projremovetime = 23
offset = 90,-110
velocity = -3,0
postype = p1
ignorehitpause = 1
[State 1001, 18];新月の光
type = Projectile
trigger1 = AnimElem = 57
projanim = 12050
projshadow = 68,68,68
projremovetime = 23
offset = 95,-30
velocity = -2,0
postype = p1
ignorehitpause = 1

[State 210, 1];遠強斬り光
type = Explod
trigger1 = AnimElem = 6
anim = 241
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 8
persistent = 2
ignorehitpause = 1
anim = 242
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 9
anim = 243
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1];近強斬り光
type = Explod
trigger1 = AnimElem = 13
anim = 231
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 14
persistent = 2
ignorehitpause = 1
anim = 232
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1];打ち上げ光
type = Explod
trigger1 = AnimElem = 18
anim = 12220
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 20
persistent = 2
ignorehitpause = 1
anim = 12221
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1];ダウン攻撃光
type = Explod
trigger1 = AnimElem = 27
anim = 12200
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 28
persistent = 2
ignorehitpause = 1
anim = 12201
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1];近強斬り
type = Explod
trigger1 = AnimElem = 33
anim = 231
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 34
persistent = 2
ignorehitpause = 1
anim = 232
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 34, = 2
anim = 233
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 35
anim = 234
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1];しゃがみ強斬り光
type = Explod
trigger1 = AnimElem = 40
anim = 411
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 41
persistent = 2
ignorehitpause = 1
anim = 412
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 42
persistent = 2
ignorehitpause = 1
anim = 413
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 42, = 2
anim = 414
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1];吹っ飛ばし光
type = Explod
trigger1 = AnimElem = 46
anim = 281
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 47
anim = 282
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 48
anim = 283
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1];前強斬り光
type = Explod
trigger1 = AnimElem = 55
anim = 12210
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
[State 210, 1]
type = Explod
trigger1 = AnimElem = 56
anim = 12211
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = animelem = 68
v = 10
value = 0

[State 210, 0]
type = VarSet
trigger1= animelem = 67
v = 10
value = 1

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 1700
pos = 20,-100
sprpriority = 0
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = animelem = 67
ignorehitpause = 1
anim = 1701
pos = 20,-100
sprpriority = 0
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = animelem = 68
ignorehitpause = 1
anim = 1702
pos = 20,-100
sprpriority = 0
removetime = 1
bindtime = -1
ownpal = 1
[State 1100, 1]
type = Explod
trigger1 = animelem = 69
anim = 1703
pos = 20,-100
sprpriority = 0
ownpal = 1
ignorehitpause = 1

[State 230, 3]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
animtype = Hard
damage = 50,6
guardflag = M
hitflag = MAF
pausetime = 0,0
getpower  = 0,0
givepower = 0,0
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-70
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = High
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
kill = 0
p2stateno = 9961
[State 230, 3]
type = HitDef
trigger1 = AnimElem = 14
attr = S, HA
animtype = Light
damage = 20,3
guardflag = M
hitflag = MAF
pausetime = 0,0
getpower  = 0,0
givepower = 0,0
sparkno = S20110
guard.sparkno = S20310
sparkxy = 15,-90
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = High
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
kill = 0
p2stateno = 9961
[State 230, 3]
type = HitDef
trigger1 = AnimElem = 21
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = MAF
pausetime = 0,0
getpower  = 0,0
givepower = 0,0
sparkno = S20130
guard.sparkno = S20310
sparkxy = 30,-50
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = High
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
kill = 0
p2stateno = 9960
[State 230, 3]
type = HitDef
trigger1 = AnimElem = 27
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = MAF
pausetime = 0,0
getpower  = 0,0
givepower = 0,0
sparkno = S20101
guard.sparkno = S20310
sparkxy = 0,-20
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = Low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
kill = 0
p2stateno = 9961
[State 230, 3]
type = HitDef
trigger1 = AnimElem = 34
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = MAF
pausetime = 0,0
getpower  = 0,0
givepower = 0,0
sparkno = S20110
guard.sparkno = S20310
sparkxy = 30,-95
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = High
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
kill = 0
p2stateno = 9961
[State 230, 3]
type = HitDef
trigger1 = AnimElem = 42
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = MAF
pausetime = 0,0
getpower  = 0,0
givepower = 0,0
sparkno = S20110
guard.sparkno = S20310
sparkxy = 35,-100
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = High
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
kill = 0
p2stateno = 9961
[State 230, 3]
type = HitDef
trigger1 = AnimElem = 48
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = MAF
pausetime = 0,0
getpower  = 0,0
givepower = 0,0
sparkno = S20130
guard.sparkno = S20310
sparkxy = 25,-45
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = High
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
kill = 0
p2stateno = 9961
[State 230, 3]
type = HitDef
trigger1 = AnimElem = 56
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = MAF
pausetime = 0,0
getpower  = 0,0
givepower = 0,0
sparkno = S20110
guard.sparkno = S20310
sparkxy = 20,-100
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = High
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
kill = 0
p2stateno = 9961
[State 230, 3]
type = HitDef
trigger1 = AnimElem = 65
attr = S, HA
animtype = Light
damage = 20,3
guardflag = M
hitflag = M
pausetime = 10,10
getpower  = 0,0
givepower = 0,0
sparkno = S20010
guard.sparkno = S20300
sparkxy = 0,-80
hitsound = S200,5
guardsound = S210,3+floor(Random/500.0)
ground.type = High
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
kill = 0
[State 230, 3]
type = HitDef
trigger1 = AnimElem = 66
attr = S, HA
animtype = Hard
damage = 20,3
guardflag = M
hitflag = MAF
pausetime = 4,4
getpower  = 0,0
givepower = 0,0
sparkno = S20130
guard.sparkno = S20310
sparkxy = 15,-40
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = High
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
kill = 0
p2stateno = 9962
[State 230, 3]
type = HitDef
trigger1 = AnimElem = 67
attr = S, HA
animtype = Hard
damage = 200,9
guardflag = M
hitflag = MAF
pausetime = 12,12
getpower  = 0,0
givepower = 0,0
sparkno = S20130
guard.sparkno = S20310
sparkxy = 15,-45
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = High
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
p2stateno = 247

[State 230, 3]
type = HitDef
trigger1 = p2statetype = A
trigger1 = AnimElem = 65
attr = S, HA
animtype = Light
damage = 15,3
hitflag = AF
pausetime = 10,10
getpower  = 0,0
givepower = 0,0
sparkno = S20010
guard.sparkno = S20300
sparkxy = 0,-80
hitsound = S200,5
guardsound = S210,3+floor(Random/500.0)
air.velocity = -3.5,-3
p2stateno = 9940

[State 3021, 1]
type = width
trigger1 = time < 87
value = 30,0

[State 1101, 1]
type = targetbind
triggerall = p2statetype != A && p2movetype = H
trigger1 = Animelem = 7
trigger2 = Animelem = 14
trigger3 = Animelem = 21
trigger4 = Animelem = 27
trigger5 = Animelem = 34
trigger6 = Animelem = 42
trigger7 = Animelem = 48
trigger8 = Animelem = 56
pos = 60, 0
time = 1

[State 1000, 2]
type = VelSet
trigger1 = FrontEdgeDist < 100
trigger1 = time <= 98
x = -2

[State 1000, 2]
type = VelSet
trigger1 = AnimElem = 1, = 0
trigger2 = AnimElem = 15, = 0
trigger3 = AnimElem = 22, = 0
trigger4 = AnimElem = 43, = 0
x = 3

[State 1000, 2]
type = VelSet
trigger1 = AnimElem = 9, = 0
trigger2 = AnimElem = 28, = 0
trigger3 = AnimElem = 36, = 0
trigger4 = AnimElem = 49, = 0
x = 5

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 58
x = -35

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 58
trigger2 = AnimElem = 59
trigger3 = AnimElem = 60
trigger4 = AnimElem = 69
trigger5 = AnimElem = 73
x = 5
[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 61
trigger2 = AnimElem = 62
trigger3 = AnimElem = 71
trigger4 = AnimElem = 72
x = 10
[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 63
x = 6
[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 70
x = 4
[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 74
x = 1

[State 3121, 3]
type = Explod
trigger1 = animelem = 66 || animelem = 67
trigger1 = movehit
id = 20220
anim = 20220
pos = 0, -70
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 3121, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;乱れ雪月花（ヘルパー１）
[Statedef 12101]
type = S
movetype = I
physics = N
velset = -4,0
sprpriority = 2
ctrl = 0
anim = 12101

[State 1000, 2]
type = sprpriority
trigger1 = Time >= 9
value = -1

[State 1000, 2]
type = VelSet
trigger1 = Time >= 0
x = -4

[State 210, 1]
type = Explod
trigger1 = time = 2
anim = 244
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 3122, 7]
type = DestroySelf
trigger1 = animtime = 0

;乱れ雪月花（ヘルパー２）
[Statedef 12102]
type = S
movetype = I
physics = N
velset = -4,0
sprpriority = 2
ctrl = 0
anim = 12102

[State 1000, 2]
type = sprpriority
trigger1 = Time >= 7
value = -1

[State 1000, 2]
type = VelSet
trigger1 = Time >= 0
x = -4

[State 210, 1]
type = Explod
trigger1 = time = 2
anim = 235
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 3122, 7]
type = DestroySelf
trigger1 = animtime = 0

;乱れ雪月花（ヘルパー３）
[Statedef 12103]
type = S
movetype = I
physics = N
velset = -4,0
sprpriority = 2
ctrl = 0
anim = 12103

[State 1000, 2]
type = sprpriority
trigger1 = Time >= 14
value = -1

[State 1000, 2]
type = VelSet
trigger1 = Time >= 0
x = -4

[State 210, 1]
type = Explod
trigger1 = time = 3
anim = 284
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = time = 5
anim = 285
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = time = 7
anim = 286
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 3122, 7]
type = DestroySelf
trigger1 = animtime = 0

;乱れ雪月花（ヘルパー４）
[Statedef 12104]
type = S
movetype = I
physics = N
velset = -4,0
sprpriority = 2
ctrl = 0
anim = 12104

[State 1000, 2]
type = sprpriority
trigger1 = Time >= 16
value = -1

[State 1000, 2]
type = VelSet
trigger1 = Time >= 0
x = -4

[State 210, 1]
type = Explod
trigger1 = time = 3
anim = 12202
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = time = 5
persistent = 2
ignorehitpause = 1
anim = 12203
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = time = 7
persistent = 2
ignorehitpause = 1
anim = 12204
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 3122, 7]
type = DestroySelf
trigger1 = animtime = 0

;乱れ雪月花（ヘルパー５）
[Statedef 12105]
type = S
movetype = I
physics = N
velset = -4,0
sprpriority = 2
ctrl = 0
anim = 12105

[State 1000, 2]
type = sprpriority
trigger1 = Time >= 12
value = -1

[State 1000, 2]
type = VelSet
trigger1 = Time >= 0
x = -4

[State 210, 1]
type = Explod
trigger1 = time = 2
anim = 235
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 3122, 7]
type = DestroySelf
trigger1 = animtime = 0

;乱れ雪月花（ヘルパー６）
[Statedef 12106]
type = S
movetype = I
physics = N
velset = -4,0
sprpriority = 2
ctrl = 0
anim = 12106

[State 1000, 2]
type = sprpriority
trigger1 = Time >= 10
value = -1

[State 1000, 2]
type = VelSet
trigger1 = Time >= 0
x = -4

[State 210, 1]
type = Explod
trigger1 = time = 3
anim = 415
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 3122, 7]
type = DestroySelf
trigger1 = animtime = 0

;乱れ雪月花（ヘルパー７）
[Statedef 12107]
type = S
movetype = I
physics = N
velset = -4,0
sprpriority = 2
ctrl = 0
anim = 12107

[State 1000, 2]
type = sprpriority
trigger1 = Time >= 12
value = -1

[State 1000, 2]
type = VelSet
trigger1 = Time >= 0
x = -4

[State 210, 1]
type = Explod
trigger1 = time = 2
persistent = 2
ignorehitpause = 1
anim = 284
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = time = 3
anim = 285
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 210, 1]
type = Explod
trigger1 = time = 5
anim = 286
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 3122, 7]
type = DestroySelf
trigger1 = animtime = 0

;乱れ雪月花（ヘルパー８）
[Statedef 12108]
type = S
movetype = I
physics = N
velset = -4,0
sprpriority = 2
ctrl = 0
anim = 12108

[State 1000, 2]
type = VelSet
trigger1 = Time >= 0
x = -4

[State 210, 1]
type = Explod
trigger1 = time = 2
anim = 12212
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 3122, 7]
type = DestroySelf
trigger1 = animtime = 0

;乱れ雪月花（壁用ヘルパー）
[Statedef 12109]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 12109

[State 2305, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 900, 2]
type = PlayerPush
trigger1 = 1
value = 1

[State 3120, 0]
type = Width
trigger1 = 1
value =  30, 30

[State 3122, 7]
type = DestroySelf
trigger1 = animtime = 0

; 乱舞奥義
[Statedef 13000]
type = S
movetype = I
physics = S
anim = 13000
velset = 0,0
ctrl = 0

[State 13000, 1]
type = Varadd
trigger1 = animtime = 0
v = 49
value = 1

[State 13000, 1]
type = VarSet
trigger1 = animtime = 0
v = 50
value = 1075

[State 2000, 2]
type = PlaySnd
trigger1 = animelem = 4
value = 3100,0

[State 2000, 2]
type = PlaySnd
trigger1 = animelem = 5
value = 2500,0

[State 2000, 4]
type = Explod
trigger1 = animelem = 1
anim = 10500
pos = 0,-80
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 2000, 6]
type = SuperPause
trigger1 = animelem = 1
time = 45
anim = -1
movetime = 45
darken = 0

[State 3200, 1]
type = Explod
trigger1 = animelem = 1
anim = 15100
pos = ifelse(facing=1,0,1),0
postype = back
bindtime = -1
removetime = 30
sprpriority = -9
supermovetime = -1
pausemovetime = -1
ownpal = 1

[State 780, 1]
type = PowerAdd
trigger1 = animelem = 5
value = ifelse(var(31)=1&&Life <= var(17),-1000,-2000)*ifelse(var(31)=1,3,1)

[State 6100, 1]
type = explod
trigger1 = var(13) = 1
trigger1 = animtime = 0
anim = 13010
ID = 13010
pos = 8,210+ifelse(var(31)=1,20,0)
postype = left
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 8
ownpal = 1
supermove = 1

[State 6100, 1]
type = explod
trigger1 = var(13) = 1
trigger1 = animtime = 0
anim = 13012
ID = 13012
pos = 75,212+ifelse(var(31)=1,20,0)
postype = left
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 9
ownpal = 1
scale = 0,1

[State 6100, 1]
type = explod
trigger1 = var(13) = 2
trigger1 = animtime = 0
anim = 13015
ID = 13015
pos = -80,210+ifelse(var(31)=1,20,0)
postype = right
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 8
ownpal = 1
supermove = 1

[State 6100, 1]
type = explod
trigger1 = var(13) = 2
trigger1 = animtime = 0
anim = 13013
ID = 13012
pos = -76,212+ifelse(var(31)=1,20,0)
postype = right
bindtime = -1
removetime = -1
ignorepausetime = 1
ignorehitpause = 1
sprpriority = 9
ownpal = 1
scale = 0,1

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(22)!=0) && (animtime = 0)
value = var(22)
ctrl = 0

[State 780, State]
type = ChangeState
trigger1 = animtime = 0
value = ifelse(Var(59) !=0,250,0)
ctrl = 1

;---------------------------------------------------
;月読み(スタート)
[Statedef 14000]
type = S
movetype = A
physics = S
anim = 14000
poweradd = ifelse(var(31)=1&&Life <= var(17),-1000,-2000)*ifelse(var(31)=1,3,1)
velset = 0,0
ctrl = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 3600,0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 2500,0

[State 2000, 6]
type = SuperPause
trigger1 = animelem = 1
time = 30
movetime = 16
anim = -1

[State 2000, 4]
type = Explod
trigger1 = animelem = 5
anim = 10500
pos = -25,-55
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 2200, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 1000, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 14010

;月読み(新月)
[Statedef 14010]
type = S
movetype = A
physics = S
anim = 14010
velset = 0
poweradd = 0
ctrl = 0

[State 3010, 1]
type = BGPalFX
trigger1 = 1
time = 2
invertall = 1
supermove = 1
ignorehitpause = 1

[State 1000, 2]
type = Width
trigger1 = 1
value = 10,0

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3000,2

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 6
x = 1

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 7
x = 21

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 8
x = 20

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 9
x = 10

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 10
x = 10

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = animtime = 0
v = 10
value = 0

[State 210, 0]
type = VarAdd
trigger1= animelem = 5
trigger2 = animelem = 6
v = 10
value = 1

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 1700
pos = 30,-100
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 2
persistent = 2
ignorehitpause = 1
anim = 1701
pos = 30,-100
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1

[State 2060, 12]
type = EnvColor
trigger1 = movehit
time = 1
value = 240,0,0
under = 1
persistent = 0
ignorehitpause = 1

[State 230, 3]
type = HitDef
trigger1 = animelem = 5
attr = S, HA
animtype = Hard
damage = 50,9
guardflag = M
hitflag = MAF
pausetime = 8,8
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-68
hitsound = S200,2+floor(Random/500.0)
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -3.5,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
kill = 0
p2stateno = 243

[State 3121, 3]
type = Explod
trigger1 = animelem = 5, >= 0
trigger1 = movehit
id = 20220
anim = 20220
pos = 0, -70
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 1500, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 14020

;月読み(双月)
[Statedef 14020]
type = S
movetype = A
physics = S
anim = 14020
velset = 0
poweradd = 0
ctrl = 0

[State 3010, 1]
type = BGPalFX
trigger1 = 1
time = 2
invertall = 1
ignorehitpause = 1

[State 1000, 2]
type = Width
trigger1 = 1
value = 5,0

[State 1505, 1]
type = PlaySnd
trigger1 = AnimElem = 11
value = 3000,2

[State 1100, 1]
type = Explod
trigger1 = time = 0
anim = 1703
pos = 20,-100
sprpriority = 3
ownpal = 1
ignorehitpause = 1

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 13
x = 10

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 5
x = 20

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 15
trigger3 = AnimElem = 16
x = 15

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 7
x = 12

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 14
x = 7

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 17
x = 10

[State 1500, 2]
type = PosAdd
trigger1 = AnimElem = 18
x = 1

[State 210, 0]
type = VarSet
trigger1 = time = 0
trigger2 = animelem = 14
v = 10
value = 0

[State 210, 0]
type = VarAdd
trigger1= animelem = 11
trigger2 = animelem = 12
trigger3 = animelem = 13
v = 10
value = 1

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 1700
pos = 20,-100
sprpriority = 0
removetime = 1
bindtime = -1
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 2
persistent = 2
ignorehitpause = 1
anim = 1701
pos = 20,-100
sprpriority = 0
removetime = 1
bindtime = -1
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 3
persistent = 2
ignorehitpause = 1
anim = 1702
pos = 20,-100
sprpriority = 0
removetime = 1
bindtime = -1
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = animelem = 14
anim = 1703
pos = 20,-100
sprpriority = 0
ownpal = 1
ignorehitpause = 1

[State 2060, 12]
type = EnvColor
trigger1 = movehit
time = 1
value = 240,0,0
under = 1
persistent = 0
ignorehitpause = 1

[State 230, 3]
type = HitDef
trigger1 = animelem = 11
attr = S, HA
animtype = Hard
damage = 40,6
guardflag = M
hitflag = MAF
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-90
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -3.5,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
kill = 0
p2stateno = 8160

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 3121, 1]
type = Helper
trigger1 = animelem = 21
trigger1 = movehit
id = 14030
pos = 0,0
postype = p1
stateno = 14030
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1500, 5]
type = ChangeState
trigger1 = animelem = 21;AnimTime = 0 -1
trigger1 = movehit
value = 14040

[State 1500, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;月読み（ジャンプ）ヘルパー
[Statedef 14030]
type = S
movetype = I
physics = S
anim = 14030
ctrl = 0
sprpriority = 4

[State 1000, 1]
type = PlaySnd
trigger1 = time = 0
value = 1800,2

[State 6000, 5]
type = DestroySelf
trigger1 = animtime = 0

; Jump Up
[Statedef 14040]
type    = A
movetype = A
physics = A
anim = 14040
ctrl = 0

[State 14040,0]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 2060, 12]
type = EnvColor
trigger1 = 1
time = 1
value = 0,0,0
under = 1
ignorehitpause = 1

[State 7800, 3]
type = BGPalfx
trigger1 = 1
ignorehitpause = 1
supermove = 1
time = 1
mul = -255,-255,-255
invertall = 1

[State 40, 6]
type = VelSet
trigger1 = Time = 0
y = -15

[State 230, 3]
type = HitDef
trigger1 = animelem = 1
attr = S, HA
animtype = Hard
damage = 0
guardflag = M
hitflag = MAF
pausetime = 12,12
getpower  = ifelse(var(30)=3,0.8,ifelse(var(30)=2,1,1.2))*ifelse(var(50)>0,0,50)*ifelse(var(31)=1,3,1),ifelse(var(50)>0,0,50)
givepower = 20,20
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-90
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -3.5,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
kill = 0
p2facing = 1
p1stateno = 14050
p2stateno = 14100

[State 1505, 9]
type = ChangeState
trigger1 = time = 48
value = 4210

[State 1505, 9]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 4210

;月読み（空中多段攻撃）
[Statedef 14050]
type    = A
movetype = A
physics = A
anim = 14050
ctrl = 0

[State 2000, 9]
type = AssertSpecial
trigger1 = 1
flag = NoMusic

[State 14040,0]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 40, 6]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 2060, 12]
type = EnvColor
trigger1 = 1
time = 1
value = 0,0,0
under = 1
ignorehitpause = 1

[State 7800, 3]
type = BGPalfx
trigger1 = 1
ignorehitpause = 1
supermove = 1
time = 1
mul = -255,-255,-255
invertall = 1

[State 1000, 1]
type = PlaySnd
trigger1 = time <= 120
value = 200,0+floor(Random/200.0)
ignorepausetime = 1
ignorehitpause = 1
persistent = 9

[State 2060, 12]
type = EnvColor
trigger1 = 1
time = 1
value = 240,0,0
persistent = 9
ignorepausetime = 1
ignorehitpause = 1

[State 180, 1]
type = VarRandom
trigger1 = time <= 125
v = 41
range = 0,80
persistent = 9
ignorepausetime = 1
ignorehitpause = 1

[State 1100, 1]
type = Explod
trigger1 = var(41) = [0,10]
anim = 20100
postype = p2
pos = 0,0
random = 50,50
sprpriority = 1
bindtime = -1
ownpal = 1
facing = ifelse(var(41) >= 5,-1,1)
persistent = 9
ignorehitpause = 1
[State 1100, 1]
type = Explod
trigger1 = var(41) = [11,20]
anim = 20101
postype = p2
pos = 0,0
random = 50,50
sprpriority = 1
bindtime = -1
ownpal = 1
facing = ifelse(var(41) >= 15,-1,1)
persistent = 9
ignorehitpause = 1
[State 1100, 1]
type = Explod
trigger1 = var(41) = [21,30]
anim = 20110
postype = p2
pos = 0,0
random = 50,50
sprpriority = 1
bindtime = -1
ownpal = 1
facing = ifelse(var(41) >= 25,-1,1)
persistent = 9
ignorehitpause = 1
[State 1100, 1]
type = Explod
trigger1 = var(41) = [31,40]
anim = 20111
postype = p2
pos = 0,0
random = 50,50
sprpriority = 1
bindtime = -1
ownpal = 1
facing = ifelse(var(41) >= 35,-1,1)
persistent = 9
ignorehitpause = 1
[State 1100, 1]
type = Explod
trigger1 = var(41) = [41,50]
anim = 20120
postype = p2
pos = 0,0
random = 50,50
sprpriority = 1
bindtime = -1
ownpal = 1
facing = ifelse(var(41) >= 45,-1,1)
persistent = 9
ignorehitpause = 1
[State 1100, 1]
type = Explod
trigger1 = var(41) = [51,60]
anim = 20130
postype = p2
pos = 0,0
random = 50,50
sprpriority = 1
bindtime = -1
ownpal = 1
facing = ifelse(var(41) >= 55,-1,1)
persistent = 9
ignorehitpause = 1
[State 1100, 1]
type = Explod
trigger1 = var(41) = [61,70]
anim = 20150
postype = p2
pos = 0,0
random = 50,50
sprpriority = 1
bindtime = -1
ownpal = 1
facing = ifelse(var(41) >= 65,-1,1)
persistent = 9
ignorehitpause = 1
[State 1100, 1]
type = Explod
trigger1 = var(41) = [71,80]
anim = 20160
postype = p2
pos = 0,0
random = 50,50
sprpriority = 1
bindtime = -1
ownpal = 1
facing = ifelse(var(41) >= 75,-1,1)
persistent = 9
ignorehitpause = 1

[State 1105, 3]
type = EnvShake
trigger1 = time <= 125
persistent = 9
ignorehitpause = 1
time = 5

[State 1105, 3]
type = HitAdd
trigger1 = time <= 125
value = 1
persistent = 9
ignorehitpause = 1

[State 905, 11]
type = TargetLifeAdd
trigger1 = time <= 125
value = -10
persistent = 9
ignorehitpause = 1
kill = 0

[State 1505, 9]
type = ChangeState
trigger1 = animtime = 0
value = 14070

;月読み（着地）
[Statedef 14070]
type = S
movetype = I
physics = S
anim = 14070
velset = 0,0

[State 2000, 9]
type = AssertSpecial
trigger1 = 1
flag = NoMusic

[State 14040,0]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 1510, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1510, 2]
type = PlaySnd
trigger1 = Time = 0
value = 52,0

[State 2060, 12]
type = EnvColor
trigger1 = 1
time = 1
value = 0,0,0
under = 1
ignorehitpause = 1

[State 7800, 3]
type = BGPalfx
trigger1 = 1
ignorehitpause = 1
supermove = 1
time = 1
mul = -255,-255,-255
invertall = 1

[State 1510, 2]
type = helper
trigger1 = Time = 0
helpertype = normal
id = 14060
postype = p1
pos = 0,-150
stateno = 14060
keyctrl = 0
persistent = 0
ignorehitpause = 1

[State 1510, 2]
type = helper
trigger1 = Time = 0
helpertype = normal
id = 14080
postype = p1
pos = 0,-230
stateno = 14080
keyctrl = 0
persistent = 0
ignorehitpause = 1

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 1510, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;月読み 着地前（ヘルパー）
[Statedef 14060]
type    = A
movetype = I
physics = A
anim = 14060
ctrl = 0

[State 40, 6]
type = VelSet
trigger1 = time = 0
y = 5

[State 40, 6]
type = VelAdd
trigger1 = time >= 0
y = .5

[State 50, 4]
type = AfterImage
trigger1 = Time = 0
time = 20
framegap = 5
length = 8
palbright = 0,0,0
PalContrast = 240,255,255
PalMul      = .8,.8,.8

[State 6000, 5]
type = DestroySelf
trigger1 = time = 13

;月読み　新月ヘルパー
[Statedef 14080]
type    = A
movetype = A
physics = A
anim = 14080
ctrl = 0

[State 40, 6]
type = VelSet
trigger1 = 1
y = 0

[State 210, 0]
type = VarSet
trigger1= time = 0
v = 10
value = 1

[State 210, 0]
type = VarSet
trigger1 = time = 2
v = 10
value = 0

[State 1100, 1]
type = Explod
trigger1 = Var(10) = 1
persistent = 2
ignorehitpause = 1
anim = 14081
pos = 0,0
sprpriority = 3
removetime = 1
ownpal = 1

[State 1100, 1]
type = Explod
trigger1 = time = 2
anim = 14082
pos = 0,0
sprpriority = 3
ownpal = 1
ignorehitpause = 1

[State 2060, 12]
type = EnvColor
trigger1 = time = 0 && p2stateno = 8170
time = 1
value = 240,0,0
under = 1
persistent = 0
ignorehitpause = 1

[State 230, 3]
type = HitDef
trigger1 = time = 0
attr = A, HP
animtype = Hard
damage = 150
guardflag = M
hitflag = MAF
pausetime = 20,12
getpower  = 0,0
givepower = 0
sparkno = S20130
guard.sparkno = S20310
sparkxy = 0,-90
hitsound = S1500,2
guardsound = S210,0+floor(Random/500.0)
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.slidetime = 21
ground.hittime = 21
ground.velocity = 0
guard.velocity = 0
air.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
envshake.time = 20
envshake.freq = 500
envshake.ampl = 30
p2stateno = 8170

[State 6000, 5]
type = DestroySelf
trigger1 = animtime = 0

;月読み（空中多段攻撃やられ）
[Statedef 14100]
type    = A
movetype = H
physics = A
ctrl = 0

[State 1505, 9]
type = ChangeAnim2
trigger1 = time = 0
value = 14100

[State 40, 6]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 1505, 9]
type = ChangeState
trigger1 = animtime = 0
value = 14110

;新月やられ
[Statedef 14110]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1270, 2]
type = null;VelSet
trigger1 = Time = 0
x = ifelse(p2dist X >= 0,-3,3)
y = -10

[State 5050, 3]
type = VelAdd
trigger1 = Time >= 0
y = .5

[State 5050, 3]
type = VelAdd
trigger1 = Time >= 15
y = .2

[State 5050, 1]
type = ChangeAnim
triggerall = anim != 5060
trigger1 = AnimTime = 0
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5050

[State 2160, 33]
type = Explod
trigger1 = Vel Y > 0 && Pos Y >= -0
anim = F61
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 6

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;斬りＫＯ(ヘルパー)
[Statedef 6000]
type = S
movetype = I
physics = N

[state 6000, 1]
type  = EnvColor 
trigger1 = timemod = 3,0 && time <= 35
time = 1
value = 240,0,0
under = 1
ignorehitpause = 1

[state 6000, 2]
type  = EnvColor 
trigger1 = timemod = 3,1 && time <= 35
time = 1
value = -191,0,0
under = 1
ignorehitpause = 1

[state 6000, 3]
type  = EnvColor 
trigger1 = timemod = 3,2 && time <= 35
time = 1
value = 192,0,0
under = 1
ignorehitpause = 1

[State 6000, 4]
type = PlaySnd
trigger1 = Time = 0
value = 6000,0

[State 6000, 5]
type = DestroySelf
trigger1 = RoundState = 0

;打撃ＫＯ(ヘルパー)
[Statedef 6001]
type = S
movetype = I
physics = N

[state 6000, 1]
type  = EnvColor 
trigger1 = timemod = 3,0 && time <= 35
time = 1
value = 240,0,0
under = 1
ignorehitpause = 1

[state 6000, 2]
type  = EnvColor 
trigger1 = timemod = 3,1 && time <= 35
time = 1
value = -191,0,0
under = 1
ignorehitpause = 1

[state 6000, 3]
type  = EnvColor 
trigger1 = timemod = 3,2 && time <= 35
time = 1
value = 192,0,0
under = 1
ignorehitpause = 1

[State 6000, 4]
type = PlaySnd
trigger1 = Time = 0
value = 6000,1

[State 6000, 5]
type = DestroySelf
trigger1 = RoundState = 0

;＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿
;＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/投げやられ専用＿/＿/＿/＿/＿/＿/＿/＿/
;￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣
;吹っ飛ばし　やられ　無敵
[Statedef 241]
type = A
movetype = H
physics = N

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 5030

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 242

;吹っ飛ばし　やられ
[Statedef 242]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
x = ifelse(p2dist X >= 0,-3.5,3.5)
y = -7.5

[State 1270, 2]
type = VelSet
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
x = ifelse(p2dist X >= 0,-2,2)

[State 5050, 3]
type = VelAdd
trigger1 = Time >= 0
y = .5

[State 1630, 1]
type = VelAdd
trigger1 = Time > 34
y = .6

[State 5050, 1]
type = ChangeAnim
triggerall = anim != 5060
trigger1 = AnimTime = 0
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5050

[State 1500, 1]
type = HitBy
trigger1 = Time >= 0
value = SCA, NT, ST, HT

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 6

[State 2160, 33]
type = Explod
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
anim = F61
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1

[State 5050, 4]
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
trigger1 = Command = "recovery"
value = 5200

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;新月やられ
[Statedef 243]
type = A
movetype = H
physics = N

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 5030

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 244

;新月やられ
[Statedef 244]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
x = ifelse(p2dist X >= 0,-3,3)
y = -10

[State 5050, 3]
type = VelAdd
trigger1 = Time >= 0
y = .5

[State 5050, 3]
type = VelAdd
trigger1 = Time >= 15
y = .2

[State 5050, 1]
type = ChangeAnim
triggerall = anim != 5060 ;Not if in hit up anim
trigger1 = AnimTime = 0
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
value = 5050

[State 2160, 33]
type = Explod
trigger1 = Vel Y > 0 && Pos Y >= -0
anim = F61
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 6

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;新月・裏やられ
[Statedef 245]
type = A
movetype = H
physics = N
sprpriority = -1

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 5030

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 246

;新月・裏やられ
[Statedef 246]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
x = ifelse(p2dist X >= 0,-3,3)
y = -8.5

[State 5050, 3]
type = VelAdd
trigger1 = Time >= 0
y = .5

[State 5050, 3]
type = VelAdd
trigger1 = Time >= 15
y = .3

[State 5050, 1] ;Change anim when done with last
type = ChangeAnim
triggerall = anim != 5060 ;Not if in hit up anim
trigger1 = AnimTime = 0
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
value = 5050

[State 2160, 33]
type = Explod
trigger1 = Vel Y > 0 && Pos Y >= 0
anim = F61
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 6

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;双月やられ
[Statedef 247]
type = A
movetype = H
physics = N
sprpriority = -1

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 5030

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 248

;双月やられ
[Statedef 248]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
x = ifelse(p2dist X >= 0,-6,6)
y = -4

[State 5050, 3]
type = VelAdd
trigger1 = Time >= 0
y = .5

[State 5050, 3]
type = VelAdd
trigger1 = Time >= 15
y = .3

[State 5050, 1]
type = ChangeAnim
triggerall = anim != 5060
trigger1 = AnimTime = 0
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5050

[State 2160, 33]
type = Explod
trigger1 = Vel Y > 0 && Pos Y >= 0
anim = F61
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 6

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

[State 1281, 3]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 249

;双月やられ
[Statedef 249]
type = L
movetype = H
physics = N
sprpriority = -1

[State 1270, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 10, 1]
type = VelMul
trigger1 = Time >= 0
x = .91

[State 1270, 2]
type = VelSet
trigger1 = Time >= 25
x = 0

[State 5050, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 249;

[State 1281, 3]
type = SelfState
trigger1 = time = 25
trigger1 = Life <= 0
value = 5150

[State 1281, 3]
type = SelfState
trigger1 = time = 50
trigger1 = Life > 0
value = 5120

;------------------------------------------------
;通常攻撃　空中ヒット用
[Statedef 9910]
type = A
movetype = H
physics = N

[State 8140, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
value = 5030

[State 8140, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 9920

;通常攻撃　空中ヒット用
[Statedef 9920]
type = A
movetype = H
physics = N
velset = 0,0

[State 8140, 4]
type = ChangeState
trigger1 = time = 0
trigger1 = Life <= 0
value = 242

[State 1500, 1]
type = HitBy
trigger1 = stateno = 9920
value = SCA,SA,HA,NP,SP,HP,NT,ST,HT

[State 8145, 1]
type = Velset
trigger1 = Time = 0
x = ifelse(p2dist X >= 0,-2,2)
y = -7

[State 8145, 1]
type = VelAdd
trigger1 = Time > 0
y = .5

[State 8145, 1]
type = VelAdd
trigger1 = Time >= 35
y = .3

[State 8145, 3]
type = ChangeAnim
trigger1 = Time = 5
value = 5040

[State 1500, 1]
type = NotHitBy
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = SCA
time = 2

[State 8145, 4]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 9930

; 通常攻撃　空中ヒット用（着地）
[Statedef 9930]
type = S
movetype = I
physics = S
velset = 0,0

[State 8145, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 8145, 4]
type = SelfState
trigger1 = Time = 0
value = 52

[State 8145, 4]
type = ChangeState
trigger1 = Time = 0
value = 52

;------------------------------------------------
;弾き空中ヒット用
[Statedef 9940]
type = A
movetype = A
physics = N

[State 8140, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
value = 5030

[State 8140, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 9950

;弾き空中ヒット用
[Statedef 9950]
type = A
movetype = A
physics = N
velset = 0,0

[State 8140, 4]
type = ChangeState
trigger1 = time = 0
trigger1 = Life <= 0
value = 242

[State 8145, 1]
type = Velset
trigger1 = Time = 0
x = ifelse(p2dist X >= 0,-2,2)
y = -8

[State 8145, 1]
type = VelAdd
trigger1 = Time >= 2
y = .4

[State 8145, 3]
type = ChangeAnim
trigger1 = Time = 5
value = 5040

[State 8145, 4]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 9930

;---------------------------------------------------------------------------
; 乱れ雪月花　ヒット用
[Statedef 9960]
type    = S
movetype= H
physics = N
velset = 0,0

[State 9960, 1]
type = Explod
trigger1 = time = 0
id = 20210
anim = 20210
pos = 0, -55
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 5000, 5]
type = ChangeState
trigger1 = Pos Y != 0 
value = 9910

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 3] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 4] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = a

[State 5000, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 9965 ;HITG_SLIDE

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; 乱れ雪月花　ヒット用
[Statedef 9961]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 5]
type = ChangeState
trigger1 = Pos Y != 0 
value = 9910

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 3] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 4] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = a

[State 5000, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 9965 ;HITG_SLIDE

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; 乱れ雪月花　ヒット用
[Statedef 9962]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 5]
type = ChangeState
trigger1 = Pos Y != 0 
value = 9910

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 3] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 4] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = a

[State 5000, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 243 ;HITG_SLIDE

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------
[Statedef 9965]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 8145, 4]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 打ち上げ　しゃがみガードヒット用
[Statedef 9970]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 5]
type = ChangeState
trigger1 = Pos Y != 0 
value = 9910

[State 5000, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 3] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 4] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = a

[State 5000, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 9975 ;HITG_SLIDE

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------
[Statedef 9975]
type    = S
movetype= H
physics = S

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 2]
type = ChangeAnim
trigger1 = time = [10,16]
value = 5010

[State 5001, 2]
type = ChangeAnim
trigger1 = time = 17
value = 5015

[State 5001, 2]
type = ChangeAnim
trigger1 = time = 30
value = 5005

[State 5001, 4]
type = VelSet
trigger1 = time = [0,35]
x = -2

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 8145, 4]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------
;うつぶせやられ
[Statedef 8140]
type = A
movetype = H
physics = N

[State 8140, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = animexist(5060)
value = 5060

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !animexist(5060)
value = 5030

[State 8140, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 8145

;うつぶせやられ
[Statedef 8145]
type = A
movetype = H
physics = N
velset = 0,0

[State 8145, 1]
type = Velset
trigger1 = Time = 0
x = ifelse(p2dist X >= 0,-1.3,1.3)
y = -10

[State 8145, 1]
type = VelAdd
trigger1 = Time > 0
y = .5

[State 8145, 1]
type = VelAdd
trigger1 = Time >= 30
y = .3

[State 8145, 2]
type = ChangeAnim
trigger1 = animexist(5061)
trigger1 = Time = 0
value = 5061

[State 8145, 3]
type = ChangeAnim
trigger1 = !animexist(5061)
trigger1 = Time = 5
value = 5050

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 6

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;---------------------------------------------------
;たたきつけ　やられ
[Statedef 8150]
type = A
movetype = H
physics = N

[State 8140, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 8145, 3]
type = ChangeAnim
trigger1 = Time >= 0
value = 5030

[State 8140, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 8155

;たたきつけ　やられ
[Statedef 8155]
type = A
movetype = H
physics = N
velset = 0,0

[State 8145, 3]
type = ChangeAnim
trigger1 = Time = 0
value = 5050

[State 8145, 1]
type = Velset
trigger1 = Time = 0
x = ifelse(p2dist X >= 0,-10,10)
y = 12

[State 8145, 1]
type = Velset
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
x = ifelse(p2dist X >= 0,-2,2)
y = 12

[State 8145, 1]
type = VelAdd
trigger1 = Time >= 7
y = .5

[State 183, 3]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 15

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;---------------------------------------------------
;月読み　双月やられ
[Statedef 8160]
type = A
movetype = H
physics = N

[State 8140, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = animexist(5060)
value = 5060

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !animexist(5060)
value = 5030

[State 8140, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 8165

;月読み　双月やられ
[Statedef 8165]
type = A
movetype = H
physics = N
velset = 0,0

[State 8145, 1]
type = Velset
trigger1 = time = 0
x = -0.5
y = -11

[State 8145, 1]
type = Velset
trigger1 = time = 0 && pos Y >= 0
x = -0.5
y = -13.5

[State 8145, 1]
type = VelAdd
trigger1 = Time > 0
y = .4

[State 8145, 1]
type = VelAdd
trigger1 = Time >= 45
y = .4

[State 8145, 2]
type = ChangeAnim
trigger1 = animexist(5061)
trigger1 = Time = 0
value = 5061

[State 8145, 3]
type = ChangeAnim
trigger1 = !animexist(5061)
trigger1 = Time = 5
value = 5050

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 6

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;---------------------------------------------------
;月読み　叩きつけやられ
[Statedef 8170]
type = A
movetype = H
physics = N

[State 14040,0]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 8140, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = animexist(5060)
value = 5060

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !animexist(5060)
value = 5030

[State 8140, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 8175

;月読み　叩きつけやられ
[Statedef 8175]
type = A
movetype = H
physics = N
velset = 0,0

[State 8145, 1]
type = Velset
trigger1 = Time = 0
x = -10
y = 12

[State 8145, 1]
type = Velset
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
x = -2

[State 8145, 1]
type = VelAdd
trigger1 = Time >= 7
y = .5

[State 183, 3]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 15

[State 8145, 2]
type = ChangeAnim
trigger1 = animexist(5061)
trigger1 = Time = 0
value = 5061

[State 8145, 3]
type = ChangeAnim
trigger1 = !animexist(5061)
trigger1 = Time = 5
value = 5050

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 6

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;---------------------------------------------------
;十六夜月華　空中やられ
[Statedef 8180]
type = A
movetype = H
physics = N
sprpriority = -1

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1280, 2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 5030

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 8185

;十六夜月華　空中やられ
[Statedef 8185]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[State 1270, 2]
type = VelSet
trigger1 = Time = 0
x = ifelse(p2dist X >= 0,-3,3)
y = -4

[State 5050, 3]
type = VelAdd
trigger1 = Time >= 0
y = .5

[State 5050, 3]
type = VelAdd
trigger1 = Time >= 15
y = .3

[State 5050, 1] ;Change anim when done with last
type = ChangeAnim
triggerall = anim != 5060 ;Not if in hit up anim
trigger1 = AnimTime = 0
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
value = 5050

[State 2160, 33]
type = Explod
trigger1 = Vel Y > 0 && Pos Y >= 0
anim = F61
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 6

[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;---------------------------------------------------
;しゃがみ蹴りやられ
[Statedef 8190]
type = S
movetype = H
physics = S
poweradd = 0
velset = 0,0
ctrl = 0

[State 1280, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 1500, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 1280, 2]
type = ChangeAnim
Trigger1 = Time >= 0
value = 5010

[State 1280, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 8191

;しゃがみ蹴りやられ
[Statedef 8191]
type = S
movetype = H
physics = S
poweradd = 0
velset = 0,0
ctrl = 0

[State 1500, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 410, 4]
type = PosAdd
trigger1 = Time = 2
trigger2 = Time = 7
x = -5
y = -4

[State 410, 4]
type = PosSet
trigger1 = Time = 12
y = 0

[State 410, 4]
type = ChangeAnim
trigger1 = Time = 0
value = 5000

[State 410, 4]
type = ChangeAnim
trigger1 = Time = 2
value = 5030

[State 410, 4]
type = ChangeAnim
trigger1 = Time = 7
value = 5050

[State 2160, 33]
type = Explod
trigger1 = Time = 12
anim = F61
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 1

[State 8145, 2]
type = EnvShake
trigger1 = Time = 12
time = 6

[State 410, 4]
type = SelfState
trigger1 = Time = 12
value = 5110

;--------------------------------------------------
[StateDef 10000]
ctrl=0

[State 825]
type = assertspecial
trigger1 = 1
flag = invisible

[State 10000,間違いで本体が来たら立ちへ移行]
type=selfstate
trigger1=!ishelper
value=0

[State 10000,プレイヤー判定]
type=varset
Trigger1=command="up"&&root,command="up"
Trigger2=command="down"&&root,command="down"
Trigger3=command="back"&&root,command="back"
Trigger4=command="fwd"&&root,command="fwd"
Trigger5=command="a"&&root,command="a"
Trigger6=command="b"&&root,command="b"
Trigger7=command="c"&&root,command="c"
Trigger8=command="x"&&root,command="x"
Trigger9=command="y"&&root,command="y"
Trigger10=command="z"&&root,command="z"
Trigger11=command="s"&&root,command="s"
var(59)=0

[State 10000,立ったら消失]
Type = DestroySelf
TriggerAll=isHelper
Trigger1=root,var(59)||var(59)=-1
Trigger2=command="up"&&root,command="up"
Trigger3=command="down"&&root,command="down"
Trigger4=command="back"&&root,command="back"
Trigger5=command="fwd"&&root,command="fwd"
Trigger6=command="a"&&root,command="a"
Trigger7=command="b"&&root,command="b"
Trigger8=command="c"&&root,command="c"
Trigger9=command="x"&&root,command="x"
Trigger10=command="y"&&root,command="y"
Trigger11=command="z"&&root,command="z"
Trigger12=command="s"&&root,command="s"

[State 10000,AIﾌﾗｸﾞON]
Type=varset
TriggerAll=var(59)!=-1
Trigger1=root,command="up"
Trigger2=root,command="down"
Trigger3=root,command="back"
Trigger4=root,command="fwd"
Trigger5=root,command="a"
Trigger6=root,command="b"
Trigger7=root,command="c"
Trigger8=root,command="x"
Trigger9=root,command="y"
Trigger10=root,command="z"
Trigger11=root,command="s"
var(59)=-1

;＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿
;＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/Statedef -2＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/＿/
;￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣
[Statedef -2]
[State -2, 2]
type = PlaySnd
trigger1 = stateno = 52
trigger1 = Time = 1
value = 52,0

[State -2, 4]
type = PlaySnd
triggerall = random < 500
triggerall = time = 1
triggerall = stateno = 5000
trigger1 = anim = 5000
trigger2 = anim = 5001
trigger3 = anim = 5010
trigger4 = anim = 5011
value = 5000,0

[State -2, 4]
type = PlaySnd
triggerall = random < 500
triggerall = time = 1
triggerall = stateno = 5010
trigger1 = anim = 5020
trigger2 = anim = 5021
value = 5000,0

[State -2, 5]
type = PlaySnd
triggerall = random < 500
triggerall = time = 1
triggerall = stateno = 5000
trigger1 = anim = 5002
trigger2 = anim = 5012
value = 5000,1

[State -2, 6]
type = PlaySnd
trigger1 = random < 500
trigger1 = time = 1
trigger1 = stateno = 5010
trigger1 = anim = 5022
value = 5000,1

[State -2, 6]
type = PlaySnd
trigger1 = random < 250
trigger1 = time = 1
trigger1 = stateno = 5100
value = 5100,0

;--------------------------------------------------
[State -2, 9]
type = StopSnd
trigger1 = stateno != 100
channel = 1

[State -2, 10]
type = StopSnd
trigger1 = stateno != 12010
channel = 2

[State -2, 11]
type = StopSnd
trigger1 = stateno != 195
trigger2 = stateno = 195 && time = 0
channel = 3

;--------------------------------------------------
[State -2, 対楓雪]
type = VarSet
trigger1 = p2name = "kaede"
trigger2 = p4name = "kaede"
trigger3 = p2name = "yuki"
trigger4 = p4name = "yuki"
var(25) = 1

[State -2, 剣質ゲージ重複防止]
type = VarSet
triggerall = stateno = [190,191]
triggerall = numpartner
triggerall = (partner,pos X - pos X)*facing > 0
trigger1 = p3name = "Moriya Minakata"
trigger1 = Partner,authorName = "DALA arranged by Ildanaf"
trigger2 = p3name = "Kanzaki Juzo"
trigger2 = Partner,authorName = "Nyankoro arranged by Ildanaf"
trigger3 = p3name = "kaede"
trigger3 = Partner,authorName = "DALA arranged by Ildanaf"
trigger4 = p3name = "washizuka"
trigger4 = Partner,authorName = "DALA arranged by Ildanaf"
trigger5 = p3name = "真田 小次郎"
trigger5 = Partner,authorName = "ホタリュソ(代理) arranged by Ildanaf"
var(38) = 1

;--------------------------------------------------
[State -2, 0]
type = Varset
trigger1 = movetype = H
trigger1 = enemynear,HitDefAttr = SCA, NA,NT,NP,SA,ST,SP,HA,HT,HP
v = 1
value = var(4)

[State -2, 0]
type = VarSet
triggerall = roundstate = 2
trigger1 = timemod = 2,0
v = 2
value = enemynear,power

[State -2, 0]
type = VarSet
triggerall = roundstate = 2
trigger1 = timemod = 2,1
v = 3
value = enemynear,power

[State -2, 0]
type = Varadd
triggerall = movetype = H
triggerall = enemynear,prevstateno != 0
trigger1 = timemod = 2,1
trigger1 = var(3) - var(2) <= -500
trigger2 = timemod = 2,0
trigger2 = var(2) - var(3) <= -500
v = 4
value = 1

;--------------------------------------------------
;varリセット
[State -2, 0]
type = VarSet
trigger1 = stateno = 0
trigger2 = stateno = 5120
trigger3 = ctrl = 1
trigger4 = winKO = 1
v = 1
value = 0

[State -2, 0]
type = Varset
trigger1 = movetype != H
trigger1 = enemynear,movetype != A
trigger2 = stateno = 0
trigger3 = stateno = 5120
trigger4 = ctrl = 1
trigger5 = anim = 0
v = 4
value = 0

[State -2, 1]
type = VarSet
trigger1 = movetype = H
v = 10
value = 0

[State -2, 0]
type = VarSet
trigger1 = movetype = H
v = 14
value = 0

[State -2, 0]
type = VarSet
trigger1 = movetype = H
trigger2 = stateno < 3000 
trigger2 = stateno > 3350
v = 15
value = 0

[State -2, 2]
type = varset
triggerall = stateno != 5120
triggerall = stateno != 350
trigger1 = stateno = 0
trigger2 = movetype = H
trigger3 = winKO = 1
var(20) = 0

[State -2, 3]
type = varset
trigger1 = animtime <= 0 - 10
trigger1 = stateno != 350
trigger1 = stateno != 4010
var(20) = 0

[State -2, 2]
type = varset
triggerall = stateno != 5120
trigger1 = stateno = 0
trigger2 = movetype = H
trigger3 = winKO = 1
trigger4 = var(20) != 0
var(22) = 0

[State -2, 3]
type = varset
trigger1 = animtime <= 0 - 10
var(22) = 0

[State -2, 4]
type = varset
triggerall = stateno != 5120
trigger1 = stateno = 0
trigger2 = movetype = H
trigger3 = winKO = 1
trigger4 = ctrl = 1
var(23) = 0

[State -2, 5]
type = VarSet
triggerall = stateno != 5120
trigger1 = stateno = 0
trigger2 = movetype = H
trigger3 = winKO = 1
trigger4 = ctrl = 1
var(27) = 0

[State -2, 6]
type = VarSet
triggerall = stateno != 5120
trigger1 = stateno = 0
trigger2 = movetype = H
trigger3 = winKO = 1
trigger4 = ctrl = 1
var(40) = 0

[State 1500, 1]
type = VarSet
trigger1 = stateno = 0
trigger2 = movetype = H
trigger3 = winKO = 1
trigger4 = ctrl = 1
var(55) = 0

[State -2, 7]
type = VarSet
trigger1 = stateno = 610 && movehit && time = 10
trigger1 = p2statetype != A
trigger1 = vel Y > 0
trigger1 = pos Y >= -60
trigger2 = stateno = 620 && movehit && time = [4,5]
trigger2 = p2statetype != A
trigger2 = vel Y > 0
trigger2 = pos Y >= -35
var(47) = 1

[State -2, 7]
type = VarSet
trigger1 = p2movetype != H
var(47) = 0

[State -2, 7]
type = Varadd
trigger1 = stateno = 3200 && time = 1
trigger1 = p2movetype = H
trigger2 = stateno = 3300 && time = 1
trigger2 = p2movetype = H
v = 48
value = 1

[State -2, 7]
type = VarSet
trigger1 = p2movetype != H
var(48) = 0

[State -2, 7]
type = VarSet
trigger1 = p2movetype != H
var(49) = 0

[State -2, 12];
type = RemoveExplod
trigger1 = stateno = 0
trigger2 = movetype = H
trigger3 = winKO = 1
trigger4 = ctrl = 1
trigger5 = stateno = 4210
id = 14030

;--------------------------------------------------
[State -2, 2]
type = VelSet
trigger1 = stateno = 52
x = 0

[State -2, カウンターヒット右向き]
type = Explod
triggerall = NumExplod(19998) = 0 && !Win = 1 && var(12) = 1 && var(13) = 1
triggerall = movehit
trigger1 = stateno != 3000
trigger2 = stateno != 3100
trigger3 = stateno != 3200
trigger4 = stateno != 900
trigger5 = stateno != 910
anim = 19998
ID = 19998
pos = 10,60
postype = left
sprpriority = 5
removetime = 40
ontop = 1
shadow = 0,0,0
ownpal = 1
bindtime = -1
ignorehitpause = 1

[State -2, カウンターヒット左向き]
type = Explod
triggerall = NumExplod(19998) = 0 && !Win = 1 && var(12) = 1 && var(13) = 2
triggerall = movehit
trigger1 = stateno != 3000
trigger2 = stateno != 3100
trigger3 = stateno != 3200
trigger4 = stateno != 900
trigger5 = stateno != 910
anim = 19999
ID = 19998
pos = -77,50
postype = right
sprpriority = 5
removetime = 40
ontop = 1
shadow = 0,0,0
ownpal = 1
bindtime = -1
ignorehitpause = 1

[State -2, 飛び道具カウンターヒット右向き]
type = Explod
triggerall = NumExplod(19998) = 0 && !Win = 1 && var(12) = 1 && var(13) = 1
trigger1 = ProjHit1000 = 1
trigger2 = ProjHit11010 = 1
;trigger3 = helper(12000), movehit
anim = 19998
ID = 19998
pos = 10,60
postype = left
sprpriority = 5
removetime = 40
ontop = 1
shadow = 0,0,0
ownpal = 1
bindtime = -1
ignorehitpause = 1

[State -2, 飛び道具カウンターヒット左向き]
type = Explod
triggerall = NumExplod(19998) = 0 && !Win = 1 && var(12) = 1 && var(13) = 2
trigger1 = ProjHit1000 = 1
trigger2 = ProjHit11010 = 1
;trigger3 = helper(12000), movehit
anim = 19999
ID = 19998
pos = -77,50
postype = right
sprpriority = 5
removetime = 40
ontop = 1
shadow = 0,0,0
ownpal = 1
bindtime = -1
ignorehitpause = 1

[State -2, カウンターヒット用]
type = Varset
trigger1 = P2movetype = A && var(12) != -1
var(12) = 1

[State -2, カウンターヒット用]
type = Varset
trigger1 = P2movetype != A && var(12) != -1
var(12) = 0

[State -2, 左向き]
type = VarSet
trigger1 = Facing = 1 && roundstate = 0
var(13) = 1

[State -2, 右向き]
type = VarSet
trigger1 = Facing = -1 && roundstate = 0
var(13) = 2

;------------------------------------------------------
[State -2, hazikiboushi]
type = VarSet
trigger1 = enemynear,movetype = A
trigger1 = enemynear,HitDefAttr = SCA, NT,ST,HT
var(18) = 1

[State -2, hazikiboushi]
type = VarSet
trigger1 = enemynear,movetype != A
var(18) = 0

;---------------------------------------------------------------------------
[State -2, nageboushi]
type = VarSet
trigger1 = enemynear,stateno = 5120
var(19) = 12

[State -2, nageboushi]
type = VarAdd
trigger1 = var(19) > 0
trigger1 = enemynear,statetype != L
v = 19
value = -1

;---------------------------------------------------------------------------
[State -2, 血１]
type = VarSet
triggerall = movehit
trigger1 = stateno = 210
trigger2 = stateno = 400
trigger3 = stateno = 600
trigger4 = stateno = 610
trigger5 = stateno >= 1050 && var(10) = 1
trigger5 = stateno <= 1252 && var(10) = 1
trigger6 = stateno >= 11100 && var(10) = [1,16]
trigger6 = stateno <= 11600 && var(10) = [1,16]
v = 32
value = 1
persistent = 0
ignorehitpause = 1
[State -2, 血１]
type = VarSet
trigger1 = 1
v = 32
value = 0
ignorehitpause = 0

[State -2, 血２]
type = VarSet
triggerall = movehit
trigger1 = stateno = 230
trigger2 = stateno = 410
v = 33
value = 1
persistent = 0
ignorehitpause = 1
[State -2, 血２]
type = VarSet
trigger1 = 1
v = 33
value = 0
ignorehitpause = 0

[State -2, 血３]
type = VarSet
triggerall = movehit
trigger1 = stateno = 240
trigger2 = stateno = 280
trigger3 = stateno = 640
trigger4 = stateno >= 1050 && var(10) = 3
trigger4 = stateno <= 1252 && var(10) = 3
trigger5 = stateno >= 1500 && var(10) = [1,2]
trigger5 = stateno <= 1650 && var(10) = [1,2]
trigger6 = stateno = 2020
v = 34
value = 1
persistent = 0
ignorehitpause = 1
[State -2, 血３]
type = VarSet
trigger1 = 1
v = 34
value = 0
ignorehitpause = 0

[State -2, 血４]
type = VarSet
trigger1 = movehit
trigger1 = stateno = 2160
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[State -2, 血４]
type = VarSet
trigger1 = 1
v = 35
value = 0
ignorehitpause = 0

[State -2, 3]
type = Explod
trigger1 = NumExplod(20200) = 0
trigger1 = var(32) = 1
id = 20200
anim = 20200
pos = 0, -60
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State -2, 3]
type = Explod
trigger1 = NumExplod(20210) = 0
trigger1 = var(33) = 1
id = 20210
anim = 20210
pos = 0, -50
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State -2, 3]
type = Explod
trigger1 = NumExplod(20220) = 0
trigger1 = var(34) = 1
id = 20220
anim = 20220
pos = 0, -60
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State -2, 3]
type = Explod
trigger1 = NumExplod(20230) = 0
trigger1 = var(35) = 1
id = 20230
anim = 20230
pos = 0, -60
postype = p2
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

;---------------------------------------------------------
;剣質・タイプ用
[State -2, 力]
type = varset
triggerall = stateno = 191
trigger1 = PalNo = 1
trigger2 = PalNo = 4
trigger3 = PalNo = 7
trigger4 = PalNo = 10
v = 30
value = 1

[State -2, 技]
type = varset
triggerall = stateno = 191
trigger1 = PalNo = 2
trigger2 = PalNo = 5
trigger3 = PalNo = 8
trigger4 = PalNo = 11
v = 30
value = 2

[State -2, 極]
type = varset
triggerall = stateno = 191
trigger1 = PalNo = 3
trigger2 = PalNo = 6
trigger3 = PalNo = 9
trigger4 = PalNo = 12
v = 30
value = 3

[State -2, タイプ]
type = varset
trigger1 = PalNo = [7,12]
v = 31
value = 1

[state -2]
type = removeexplod
triggerall = numexplod(21020) > 0
trigger1 = life <= var(17)
trigger2 = Matchover = 1
id = 21020
[state -2]
type = removeexplod
triggerall = numexplod(21025) > 0
trigger1 = life <= var(17)
trigger2 = Matchover = 1
id = 21025
[state -2]
type = removeexplod
triggerall = numexplod(21030) > 0
trigger1 = life > var(17)
trigger2 = roundstate = [3,4]
trigger3 = Matchover = 1
id = 21030
[state -2]
type = removeexplod
triggerall = numexplod(21035) > 0
trigger1 = life > var(17)
trigger2 = roundstate = [3,4]
trigger3 = Matchover = 1
id = 21035

[state -2]
type = removeexplod
triggerall = numexplod(21021) > 0
trigger1 = life <= var(17)
trigger2 = Matchover = 1
id = 21021
[state -2]
type = removeexplod
triggerall = numexplod(21026) > 0
trigger1 = life <= var(17)
trigger2 = Matchover = 1
id = 21026
[state -2]
type = removeexplod
triggerall = numexplod(21031) > 0
trigger1 = life > var(17)
trigger2 = roundstate = [3,4]
trigger3 = Matchover = 1
id = 21031
[state -2]
type = removeexplod
triggerall = numexplod(21036) > 0
trigger1 = life > var(17)
trigger2 = roundstate = [3,4]
trigger3 = Matchover = 1
id = 21036

[state -2]
type = removeexplod
triggerall = numexplod(21022) > 0
trigger1 = life <= var(17)
trigger2 = Matchover = 1
id = 21022
[state -2]
type = removeexplod
triggerall = numexplod(21027) > 0
trigger1 = life <= var(17)
trigger2 = Matchover = 1
id = 21027
[state -2]
type = removeexplod
triggerall = numexplod(21032) > 0
trigger1 = life > var(17)
trigger2 = roundstate = [3,4]
trigger3 = Matchover = 1
id = 21032
[state -2]
type = removeexplod
triggerall = numexplod(21037) > 0
trigger1 = life > var(17)
trigger2 = roundstate = [3,4]
trigger3 = Matchover = 1
id = 21037


[State -2, 7]
type = Explod
triggerall = Var(30) = 1
triggerall = var(31) = 1
triggerall = var(13) = 1
triggerall = numexplod(21020) = 0
trigger1 = life > var(17)
trigger1 = stateno = [191,192]
trigger1 = animtime = 0
trigger2 = life > var(17)
trigger2 = !(RoundsExisted = 0 && roundstate = [0,1])
trigger3 = roundstate = [3,4]
trigger3 = Matchover = 0
anim = 21020
id = 21020
pos = ifelse(var(38)=1,65,35),200
postype = left
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 1
triggerall = var(31) = 1
triggerall = var(13) = 2
triggerall = numexplod(21025) = 0
trigger1 = life > var(17)
trigger1 = stateno = [191,192]
trigger1 = animtime = 0
trigger2 = life > var(17)
trigger2 = !(RoundsExisted = 0 && roundstate = [0,1])
trigger3 = roundstate = [3,4]
trigger3 = Matchover = 0
anim = 21020
id = 21025
pos = ifelse(var(38)=1,-65,-35),200
postype = right
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 1
triggerall = var(31) = 1
triggerall = var(13) = 1
trigger1 = life <= var(17)
trigger1 = numexplod(21030) = 0
trigger1 = roundstate = 2
anim = 21030
id = 21030
pos = ifelse(var(38)=1,65,35),200
postype = left
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 1
triggerall = var(31) = 1
triggerall = var(13) = 2
trigger1 = life <= var(17)
trigger1 = numexplod(21035) = 0
trigger1 = roundstate = 2
anim = 21030
id = 21035
pos = ifelse(var(38)=1,-65,-35),200
postype = right
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 2
triggerall = var(31) = 1
triggerall = var(13) = 1
triggerall = numexplod(21021) = 0
trigger1 = life > var(17)
trigger1 = stateno = [191,192]
trigger1 = animtime = 0
trigger2 = life > var(17)
trigger2 = !(RoundsExisted = 0 && roundstate = [0,1])
trigger3 = roundstate = [3,4]
trigger3 = Matchover = 0
anim = 21021
id = 21021
pos = ifelse(var(38)=1,65,35),200
postype = left
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 2
triggerall = var(31) = 1
triggerall = var(13) = 2
triggerall = numexplod(21026) = 0
trigger1 = life > var(17)
trigger1 = stateno = [191,192]
trigger1 = animtime = 0
trigger2 = life > var(17)
trigger2 = !(RoundsExisted = 0 && roundstate = [0,1])
trigger3 = roundstate = [3,4]
trigger3 = Matchover = 0
anim = 21021
id = 21026
pos = ifelse(var(38)=1,-65,-35),200
postype = right
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 2
triggerall = var(31) = 1
triggerall = var(13) = 1
trigger1 = life <= var(17)
trigger1 = numexplod(21031) = 0
trigger1 = roundstate = 2
anim = 21031
id = 21031
pos = ifelse(var(38)=1,65,35),200
postype = left
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 2
triggerall = var(31) = 1
triggerall = var(13) = 2
trigger1 = life <= var(17)
trigger1 = numexplod(21036) = 0
trigger1 = roundstate = 2
anim = 21031
id = 21036
pos = ifelse(var(38)=1,-65,-35),200
postype = right
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 3
triggerall = var(31) = 1
triggerall = var(13) = 1
triggerall = numexplod(21022) = 0
trigger1 = life > var(17)
trigger1 = stateno = [191,192]
trigger1 = animtime = 0
trigger2 = life > var(17)
trigger2 = !(RoundsExisted = 0 && roundstate = [0,1])
trigger3 = roundstate = [3,4]
trigger3 = Matchover = 0
anim = 21022
id = 21022
pos = ifelse(var(38)=1,65,35),200
postype = left
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 3
triggerall = var(31) = 1
triggerall = var(13) = 2
triggerall = numexplod(21027) = 0
trigger1 = life > var(17)
trigger1 = stateno = [191,192]
trigger1 = animtime = 0
trigger2 = life > var(17)
trigger2 = !(RoundsExisted = 0 && roundstate = [0,1])
trigger3 = roundstate = [3,4]
trigger3 = Matchover = 0
anim = 21022
id = 21027
pos = ifelse(var(38)=1,-65,-35),200
postype = right
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 3
triggerall = var(31) = 1
triggerall = var(13) = 1
trigger1 = life <= var(17)
trigger1 = numexplod(21032) = 0
trigger1 = roundstate = 2
anim = 21032
id = 21032
pos = ifelse(var(38)=1,65,35),200
postype = left
bindtime = -1
sprpriority = 98
ownpal = 1

[State -2, 7]
type = Explod
triggerall = Var(30) = 3
triggerall = var(31) = 1
triggerall = var(13) = 2
trigger1 = life <= var(17)
trigger1 = numexplod(21037) = 0
trigger1 = roundstate = 2
anim = 21032
id = 21037
pos = ifelse(var(38)=1,-65,-35),200
postype = right
bindtime = -1
sprpriority = 98
ownpal = 1

;--------------------------------------------------
;剣質ダメージ設定
[State -2, 1]
type = AttackMulset
Trigger1 = var(50) <= 0 && var(12) = 0
value = ifelse(var(30)=1,1,ifelse(var(30)=2,0.6,0.7))
ignorehitpause = 1

[State -2, カウンター]
type = AttackMulset
Trigger1 = var(12) != 0
value = ifelse(var(30)=1,1.2,ifelse(var(30)=2,0.8,0.9))
ignorehitpause = 1

[State -2, 0]
type = DefenceMulset
trigger1 = fvar(20) = 1
trigger1 = life > var(17)*2
value = ifelse(var(30)=3,fvar(21),1)*ifelse(var(1)>=3,0.3,ifelse(var(1)=2,0.444,ifelse(var(1)=1,0.666,1)))
ignorehitpause = 1

[State -2, 0]
type = defenceMulSet
trigger1 = fvar(20) = 1
trigger1 = life <= var(17)*2
value = ifelse(var(30)=3,fvar(21),1)*0.8*ifelse(var(1)>=3,0.3,ifelse(var(1)=2,0.444,ifelse(var(1)=1,0.666,1)))

[State -2, 1]
type = defenceMulSet
trigger1 = fvar(20) = 1
trigger1 = life <= var(17)
value = ifelse(var(30)=3,fvar(21),1)*0.7*ifelse(var(1)>=3,0.3,ifelse(var(1)=2,0.444,ifelse(var(1)=1,0.666,1)))

[State -2, 2]
type = defenceMulSet
trigger1 = fvar(20) = 1
trigger1 = life <= var(17)*0.6
value = ifelse(var(30)=3,fvar(21),1)*0.6*ifelse(var(1)>=3,0.3,ifelse(var(1)=2,0.444,ifelse(var(1)=1,0.666,1)))

;-----------------------------------------------
;連殺斬用
[State -2, 1]
type = VarAdd
triggerall = var(30) > 1
triggerall = time = 1
trigger1 = stateno = 200
trigger2 = stateno = 210
trigger3 = stateno = 220
v = 23
value = 1
persistent = 0

;-----------------------------------------------
;十六夜月華用
[State -2, 1]
type = Explod
triggerall = NumExplod(11020) = 0
trigger1 = Var(36) = [1,2]
trigger2 = Var(36) = [16,17]
trigger3 = Var(36) = [32,33]
ID = 11020
anim = 11020
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11021) = 0
trigger1 = Var(36) = [3,4]
trigger2 = Var(36) = [18,19]
trigger3 = Var(36) = [34,35]
ID = 11021
anim = 11021
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11022) = 0
trigger1 = Var(36) = [5,6]
trigger2 = Var(36) = [20,21]
trigger3 = Var(36) = [36,37]
ID = 11022
anim = 11022
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11023) = 0
trigger1 = Var(36) = [7,8]
trigger2 = Var(36) = [22,23]
trigger3 = Var(36) = [38,39]
ID = 11023
anim = 11023
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11024) = 0
trigger1 = Var(36) = [9,10]
trigger2 = Var(36) = [24,25]
trigger3 = Var(36) = [40,41]
ID = 11024
anim = 11024
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11025) = 0
trigger1 = Var(36) = [11,12]
trigger2 = Var(36) = [26,27]
trigger3 = Var(36) = [42,43]
ID = 11025
anim = 11025
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11026) = 0
trigger1 = Var(36) = [13,14]
trigger2 = Var(36) = [28,29]
trigger3 = Var(36) = [44,45]
ID = 11026
anim = 11026
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11027) = 0
trigger1 = Var(36) = [15,16]
trigger2 = Var(36) = [30,31]
trigger3 = Var(36) = [46,47]
ID = 11027
anim = 11027
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11028) = 0
trigger1 = Var(36) = [17,18]
trigger2 = Var(36) = [32,33]
trigger3 = Var(36) = [48,49]
ID = 11028
anim = 11028
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1

[State -2, 1]
type = Explod
triggerall = NumExplod(11030) = 0
trigger1 = Var(36) = [7,8]
trigger2 = Var(36) = [22,23]
trigger3 = Var(36) = [38,39]
ID = 11030
anim = 11030
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11031) = 0
trigger1 = Var(36) = [9,10]
trigger2 = Var(36) = [24,25]
trigger3 = Var(36) = [40,41]
ID = 11031
anim = 11031
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11032) = 0
trigger1 = Var(36) = [10,11]
trigger2 = Var(36) = [26,27]
trigger3 = Var(36) = [42,43]
ID = 11032
anim = 11032
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11033) = 0
trigger1 = Var(36) = [12,13]
trigger2 = Var(36) = [28,29]
trigger3 = Var(36) = [44,45]
ID = 11033
anim = 11033
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11034) = 0
trigger1 = Var(36) = [14,15]
trigger2 = Var(36) = [30,31]
trigger3 = Var(36) = [46,47]
ID = 11034
anim = 11034
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11035) = 0
trigger1 = Var(36) = [16,17]
trigger2 = Var(36) = [32,33]
trigger3 = Var(36) = [48,49]
ID = 11035
anim = 11035
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11036) = 0
trigger1 = Var(36) = [18,19]
trigger2 = Var(36) = [34,35]
trigger3 = Var(36) = [50,51]
ID = 11036
anim = 11036
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11037) = 0
trigger1 = Var(36) = [20,21]
trigger2 = Var(36) = [36,37]
trigger3 = Var(36) = [52,53]
ID = 11037
anim = 11037
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11038) = 0
trigger1 = Var(36) = [22,23]
trigger2 = Var(36) = [38,39]
trigger3 = Var(36) = [54,55]
ID = 11038
anim = 11038
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1

[State -2, 1]
type = Explod
triggerall = NumExplod(11040) = 0
trigger1 = Var(36) = [13,14]
trigger2 = Var(36) = [27,28]
trigger3 = Var(36) = [44,45]
ID = 11040
anim = 11040
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11041) = 0
trigger1 = Var(36) = [15,16]
trigger2 = Var(36) = [29,31]
trigger3 = Var(36) = [46,47]
ID = 11041
anim = 11041
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11042) = 0
trigger1 = Var(36) = [17,18]
trigger2 = Var(36) = [32,33]
trigger3 = Var(36) = [48,49]
ID = 11042
anim = 11042
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11043) = 0
trigger1 = Var(36) = [19,20]
trigger2 = Var(36) = [34,35]
trigger3 = Var(36) = [50,51]
ID = 11043
anim = 11043
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11044) = 0
trigger1 = Var(36) = [21,22]
trigger2 = Var(36) = [36,37]
trigger3 = Var(36) = [52,53]
ID = 11044
anim = 11044
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11045) = 0
trigger1 = Var(36) = [23,24]
trigger2 = Var(36) = [38,39]
trigger3 = Var(36) = [54,55]
ID = 11045
anim = 11045
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11046) = 0
trigger1 = Var(36) = [25,26]
trigger2 = Var(36) = [40,41]
trigger3 = Var(36) = [56,57]
ID = 11046
anim = 11046
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11047) = 0
trigger1 = Var(36) = [27,28]
trigger2 = Var(36) = [42,43]
trigger3 = Var(36) = [58,59]
ID = 11047
anim = 11047
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1
[State -2, 1]
type = Explod
triggerall = NumExplod(11048) = 0
trigger1 = Var(36) = [29,30]
trigger2 = Var(36) = [44,45]
trigger3 = Var(36) = [60,61]
ID = 11048
anim = 11048
pos = 0,0
sprpriority = 3
removetime = 1
bindtime = -1
ownpal = 1
persistent = 2
ignorehitpause = 1

[State 210, 0]
type = VarSet
triggerall = stateno = 11100
trigger1 = time = 0
trigger2 = animelem = 4
trigger3 = animelem = 9
trigger4 = animelem = 15
trigger5 = animelem = 18
trigger6 = animelem = 21
trigger7 = animelem = 25
trigger8 = animelem = 30
trigger9 = animelem = 34
trigger10 = animelem = 36
trigger11 = animelem = 39
trigger12 = animelem = 41
trigger13 = animelem = 45
trigger14 = animtime = 0
v = 10
value = 0

[State -2, 3]
type = Pause
triggerall = stateno = 11100
trigger1 = var(36) <= 60
trigger1 = p2stateno = 5000 || p2stateno = 5001 || p2stateno = 5010 || p2stateno = 5011 || p2stateno = 245 || (p2stateno=246&&time<=15)
trigger1 = timemod = 2,0
trigger2 = var(36) = [16,50]
trigger2 = p2stateno = [150,153]
trigger2 = timemod = 1,0
time = 1
movetime = 0

[State -2, 4]
type = VarSet
trigger1 = stateno != 11100
v = 36
value = 0

;--------------------------------------------------
;乱れ雪月花用
[State -2, 3]
type = Pause
triggerall = stateno = 12100
triggerall = p2stateno = [9961,9965]
triggerall = timemod = 3,0
trigger1 = time = [48,51]
trigger2 = time = [62,65]
trigger3 = time = [73,75]
trigger4 = time = [84,85]
time = 1
movetime = 0

[State 9960, 1]
type = Explod
trigger1 = p2stateno = 9961
id = 20220
anim = 20220
postype = p2
pos = 0, -55
sprpriority = 1
ownpal = 1
persistent = 0
ignorehitpause = 1
;--------------------------------------------------
;乱舞奥義用
[State -2, 0]
type = VarAdd
trigger1 = var(50) > 0
v = 50
value = -1

[State -2, 1]
type = VarSet
trigger1 = var(50) < 0
trigger2 = Life <= 0
trigger3 = WinKO = 1
var(50) = 0
ignorehitpause = 0

[State -2, 2]
type = AttackMulset
Trigger1 = var(50) > 0
value = ifelse(var(30) !=2,0.5,0.4)
ignorehitpause = 1

[State -2, 2]
type =Palfx
trigger1 = (GameTime%2)=0
trigger1 = Var(50) > 0
time = 1
add = 6,55,210
ignorehitpause = 1

[State -2, 3]
type = ctrlset
triggerall = var(50) > 0
triggerall = movecontact
trigger1 = var(59) =0
trigger1 = stateno != 2000
trigger1 = stateno != 2020
trigger1 = stateno != 2025
trigger1 = stateno != 2100
trigger1 = stateno != 2120
trigger1 = stateno != 2140
trigger1 = stateno != 2145
trigger1 = stateno != 900
trigger1 = stateno != 901
trigger1 = stateno != 902
trigger1 = stateno != 910
trigger1 = stateno != 911
trigger1 = stateno != 912
trigger1 = stateno != 920
trigger1 = stateno != 921
trigger1 = stateno != 210
trigger2 = var(59)!=0
trigger2 = stateno != 1150
trigger2 = stateno != 1250
trigger2 = stateno != 1500
trigger2 = stateno != 1600
trigger2 = stateno != 2000
trigger2 = stateno != 2020
trigger2 = stateno != 2025
trigger2 = stateno != 2100
trigger2 = stateno != 2120
trigger2 = stateno != 2140
trigger2 = stateno != 2145
trigger2 = stateno != 900
trigger2 = stateno != 901
trigger2 = stateno != 902
trigger2 = stateno != 910
trigger2 = stateno != 911
trigger2 = stateno != 912
trigger2 = stateno != 920
trigger2 = stateno != 921
trigger2 = stateno != 210
value = 1

[State -2, 8]
type = modifyexplod
trigger1 = var(50) > 0
ID = 13012
scale = (1128 - Var(50)) / 1128.0,1
ignorehitpause = 1
ignorepausetime = 1

[State -2, 9]
type = RemoveExplod
trigger1 = var(50) <= 0
trigger1 = stateno != 6100
ID = 13010

[State -2, 10]
type = RemoveExplod
trigger1 = var(50) <= 0
trigger1 = stateno != 6100
ID = 13012

[State -2, 11]
type = RemoveExplod
trigger1 = var(50) <= 0
trigger1 = stateno != 6100
ID = 13015

[State -2, 12]
type = Explod
trigger1 = var(13) = 1
trigger1 = var(50) = 1
anim = 13011
pos = 8,212+ifelse(var(31)=1,20,0)
postype = left
bindtime = 1
vel = -7,0
removetime = 16
sprpriority = 7
ownpal = 1
ontop = 1
supermove = 1
ignorepausetime = 1
ignorehitpause = 1

[State -2, 13]
type = explod
trigger1 = var(13) = 2
trigger1 = var(50) = 1
anim = 13016
pos = -80,212+ifelse(var(31)=1,20,0)
postype = right
bindtime = 1
vel = 7,0
removetime = 16
sprpriority = 7
ownpal = 1
ontop = 1
supermove = 1
ignorepausetime = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
;打撃KO
[State -2, 1]
type = helper
triggerall = winko && Numhelper(6000) = 0 && var(21) = 0 ;&& movetype = A
trigger1 = stateno = 200 || stateno = 260 || stateno = 270 || stateno = 420 || stateno = 430 || stateno = 435
trigger2 = stateno = 620 || stateno = 901 || stateno = 911 || (stateno=1500&&time<=5) || (stateno=1600&&time<=16) || (stateno=1650&&time<=16) 
helpertype = normal
id = 6000
pos = 999,999
stateno = 6001
keyctrl = 0
persistent = 0
ignorehitpause = 1

;斬りKO
[State -2, 1]
type = helper
triggerall = winko && Numhelper(6000) = 0 && var(21) = 0 ;&& movetype = A
trigger1 = stateno != 200 || stateno != 260 || stateno != 270 || stateno != 420 || stateno != 430 || stateno != 435
trigger2 = stateno != 620 || stateno != 901 || stateno != 911 || (stateno=1500&&time>5) || (stateno=1600&&time>16) || (stateno=1650&&time>16) 
helpertype = normal
id = 6000
pos = 999,999
stateno = 6000
keyctrl = 0
persistent = 0
ignorehitpause = 1

[State -2, 2]
type = PlaySnd
triggerall = P2movetype = H && winko && Numhelper(6000) = 0 && var(21) = 0
trigger1 = P2stateno = 9960 
trigger2 = P2stateno = 8180
value = 6000,1
persistent = 0
ignorehitpause = 1

[State -2, 3]
type = varset
trigger1 = winko = 1
v = 21
value = 1
ignorehitpause = 1

[State -2, 5]
type = PlayerPush
trigger1 = stateno = 100
trigger1 = p2stateno = 5110
value = 0

;---------------------------------------------------------------------------
[State -2, 0]
type = VarAdd
trigger1 = fvar(10) > 0
fvar(10) = -1

[State -2, 1]
type = VarSet
trigger1 = fvar(10) < 0
trigger2 = Life <= 0
trigger3 = WinKO = 1
fvar(10) = 0
ignorehitpause = 0

;---------------------------------------------------------------------------
[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = p2statetype = S || p2statetype = C
triggerall = NumPartner = 0
trigger1 = stateno = 600 && moveguarded
trigger2 = stateno = 620 && moveguarded
fvar(16) = 1

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = p2statetype = S || p2statetype = C
triggerall = NumPartner
triggerall = partner,Life = 0
trigger1 = stateno = 600 && moveguarded
trigger2 = stateno = 620 && moveguarded
fvar(16) = 1

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = p2statetype = S || p2statetype = C
triggerall = stateno = 610 && moveguarded
trigger1 = NumPartner = 0
trigger2 = NumPartner
trigger2 = partner,Life = 0
fvar(16) = 2

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = p2statetype = S || p2statetype = C
triggerall = stateno = 420 && moveguarded
trigger1 = NumPartner = 0
trigger2 = NumPartner
trigger2 = partner,Life = 0
fvar(16) = 3

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = p2statetype = S || p2statetype = C
triggerall = NumPartner = 0
trigger1 = Var(30) > 1
trigger1 = stateno = 240 && moveguarded
trigger1 = time >= 12
trigger2 = Var(30) = 1
trigger2 = prevstateno = 240
trigger2 = stateno = 3200
trigger2 = time = 1
fvar(16) = 4

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = p2statetype = S || p2statetype = C
triggerall = fvar(16) = 4
triggerall = NumPartner = 0
trigger1 = Var(30) > 1
trigger1 = stateno = 240 && moveguarded = 1
trigger2 = Var(30) = 1
trigger2 = stateno = 240 && moveguarded
fvar(17) = 0

[State -2, nageseigyo]
type = ChangeState
value = 3200
triggerall = var(59) != 0
triggerall = p2statetype = S || p2statetype = C
triggerall = NumPartner = 0
triggerall = Var(53) = [0,(fvar(18)-1)]
trigger1 = Var(30) > 1
trigger1 = fvar(16) = 4
trigger1 = stateno = 240 && moveguarded
trigger1 = time >= 12
trigger2 = Var(30) = 1
trigger2 = stateno = 240 && moveguarded
trigger2 = time >= 12

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = p2statetype = S || p2statetype = C
triggerall = NumPartner
triggerall = partner,Life = 0
trigger1 = Var(30) > 1
trigger1 = stateno = 240 && moveguarded
trigger1 = time >= 12
trigger2 = Var(30) = 1
trigger2 = prevstateno = 240
trigger2 = stateno = 3200
trigger2 = time = 1
fvar(16) = 4

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = p2statetype = S || p2statetype = C
triggerall = fvar(16) = 4
triggerall = NumPartner
triggerall = partner,Life = 0
trigger1 = Var(30) > 1
trigger1 = stateno = 240 && moveguarded = 1
trigger2 = Var(30) = 1
trigger2 = stateno = 240 && moveguarded
fvar(17) = 0

[State -2, nageseigyo]
type = ChangeState
value = 3200
triggerall = var(59) != 0
triggerall = p2statetype = S || p2statetype = C
triggerall = NumPartner
triggerall = partner,Life = 0
triggerall = Var(53) = [0,(fvar(18)-1)]
trigger1 = Var(30) > 1
trigger1 = fvar(16) = 4
trigger1 = stateno = 240 && moveguarded
trigger1 = time >= 12
trigger2 = Var(30) = 1
trigger2 = stateno = 240 && moveguarded
trigger2 = time >= 12

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = stateno = 600 || stateno = 610 || stateno = 620 || stateno = 420
triggerall = moveguarded = 1
trigger1 = NumPartner = 0
trigger2 = NumPartner
trigger2 = partner,Life = 0
fvar(17) = 0

[State -2, nageseigyo]
type = VarAdd
triggerall = var(59) != 0
triggerall = fvar(16) > 0
triggerall = p2statetype = S || p2statetype = C
triggerall = NumPartner = 0
trigger1 = enemynear,stateno = [130, 135]
trigger2 = enemynear,stateno = [150, 159]
fvar(17) = 1

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = fvar(16) > 0
triggerall = NumPartner = 0
trigger1 = stateno = 900
trigger2 = enemynear,stateno != [130, 159]
trigger3 = p2statetype = A || p2statetype = L 
trigger4 = var(50) > 0
trigger5 = stateno = [200, 220]
fvar(16) = 0

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = NumPartner = 0
trigger1 = stateno = 900
trigger2 = p2movetype != H
trigger3 = p2statetype = A || p2statetype = L
trigger4 = enemynear,ctrl=1
fvar(17) = 0

[State -2, nageseigyo]
type = VarAdd
triggerall = var(59) != 0
triggerall = fvar(16) > 0
triggerall = p2statetype = S || p2statetype = C
triggerall = NumPartner
triggerall = partner,Life = 0
trigger1 = enemynear,stateno = [130, 135]
trigger2 = enemynear,stateno = [150, 159]
fvar(17) = 1

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = fvar(16) > 0
triggerall = NumPartner
triggerall = partner,Life = 0
trigger1 = stateno = 900
trigger2 = enemynear,stateno != [130, 159]
trigger3 = p2statetype = A || p2statetype = L 
trigger4 = var(50) > 0
trigger5 = stateno = [200, 220]
fvar(16) = 0

[State -2, nageseigyo]
type = VarSet
triggerall = var(59) != 0
triggerall = NumPartner
triggerall = partner,Life = 0
trigger1 = stateno = 900
trigger2 = p2movetype != H
trigger3 = p2statetype = A || p2statetype = L
trigger4 = enemynear,ctrl=1
fvar(17) = 0

;-----------------------------------------------
[state -2, 1]
type = DisplayToClipboard
trigger1 = 1
text="p2bodydistX=:%d,p2bodydistY=:%d,FrontEdgeDist %d,var(59) %d,var(50) %d"
params = floor(p2bodydist X),floor(p2bodydist Y),floor(FrontEdgeDist),Var(59),Var(50)
ignorehitpause = 1


;---------------------------------------------------------------------------------------------------------------
;　根性値、極防御力などの設定スイッチ　；
;---------------------------------------------------------------------------------------------------------------

;根性値のオン/オフ設定用スイッチ。

[state -2, 根性値設定用]
type = Varset
trigger1 = time = 2
trigger1 = roundstate=0
trigger2 = stateno = [191,192]
trigger2 = time = 2
fvar(20) = 1 ; 0で根性値なし（MUGENデフォルトの防御力設定になります）。1で根性値あり。デフォは１。

;--------------------------------------------------
;極の防御力設定スイッチ

[state -2, 極の防御力設定]
type = Varset
trigger1 = time = 2
trigger1 = roundstate=0
trigger2 = stateno = [191,192]
trigger2 = time = 2
fvar(21) = 1.2
; 受けるダメージの倍率を決めます。1なら他の剣質と防御力は同じ。デフォは1.2。
; 1以上だと柔らかくなり、1以下だと硬くなります。
; 2だと受けるダメージは2倍、0.5だと受けるダメージは半分になります。
; （1以下は個人的には推奨していません。）

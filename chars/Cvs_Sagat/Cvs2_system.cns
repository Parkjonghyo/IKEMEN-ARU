;=====================================================================
; SVC2-System state file                                      Ver.1.32 
;=====================================================================
	 
;----------------------------------------------------------------------
; Var使用リスト 
;----------------------------------------------------------------------
;   Var(20)  : カウンターヒットエフェクト位置（X軸）
;   Var(21)  : カウンターヒットエフェクト位置（Y軸）
;   Var(22)  : キャンセル設定
;   Var(23)  : Kグルーブゲージ増加量1
;   Var(24)  : Kグルーブゲージ増加量2
;   Var(25)  : 空中コンボヒット制限1
;   Var(26)  : 空中コンボヒット制限2
;   Var(27)  : コーナップッシュ処理1
;   Var(28)  : カウンターフラグ
;   Var(29)  : 変身キャラ判別
;   var(30)  : グルーヴ（1:Cグルーヴ 2:Aグルーヴ 3:Pグルーヴ 4:Sグルーヴ 5:Nグルーヴ 6:Kグルーヴ)
;   var(31)  : 特殊ジャンプフラグ
;   var(32)  : ジャンプ種類管理
;   var(33)  : 防御値補正
;   var(34)  : カウンターヒット用フラグ1
;   var(35)  : ブロッキング成功
;   var(36)  : スパコンレベル（0:Lv.1　1:Lv.2　2:Lv.3）
;   var(37)  : ジャストディフェンス受付時間
;   var(38)  : 削られKOフラグ
;   var(39)  : メッセージアイコン用1
;   var(40)  : スーパーコンボor超必殺技発動条件
;   var(41)  : ヒット数カウント1
;   var(42)  : ヒット数カウント2
;   var(43)  : EXグルーヴフラグ
;   var(44)  : ブロッキング無効
;   var(45)  : メッセージアイコン用2
;   var(46)  : カウンターヒット用フラグ2
;   var(47)  : オリジナルコンボフラグ
;   var(48)  : ファーストアタックフラグ
;   var(49)  : KO音声
;----------------------------------------------------------------------
;ラウンド持ち越し（var）
;   var(50)  : config保存用1
;   var(51)  : config保存用2
;   var(52)  : config保存用3
;   var(53)  : 勝敗判定
;   var(54)  : 未使用
;   var(55)  : 未使用
;   var(56)  : 未使用
;   var(57)  : 未使用
;   var(58)  : AIレベル
;   var(59)  : AI判別
;----------------------------------------------------------------------
;	fvar(0)  : トレーニングモード
;	fvar(1)  : タッグモード用フラグ
;	fvar(2)  : キャラ判別
;	fvar(3)  :
;	fvar(4)  : やられ時にゲージ消去する相手動作の判定
;	fvar(5)  : ゲージ蓄積量
;	fvar(6)  : 根性値・逆根性値
;	fvar(7)  : 相手Life
;	fvar(8)  : 持続時間
;	fvar(9)  : ゲージ蓄積による攻撃力の増加
;	fvar(10) : 攻撃値補正
;	fvar(11) : フィニッシュブロー判別
;	fvar(12) : 相手ステートナンバー取得
;	fvar(13) : リバーサルフラグ
;	fvar(14) : ラウンド開始からの経過時間
;	fvar(15) : コーナップッシュ処理2
;	fvar(16) : 自分Life
;	fvar(17) : 相手ctrl可否
;	fvar(18) : フィニッシュフラグ1
;	fvar(19) : フィニッシュフラグ2
;	fvar(20) : MAXコンボ数保存
;	fvar(21) : ダウン回避判定
;	fvar(22) : 強制停止中ガード不能時間
;	fvar(23) :
;	fvar(24) :
;	fvar(25) :
;	fvar(26) : 未使用
;	fvar(27) : 未使用
;	fvar(28) : 未使用
;	fvar(29) : 未使用
;	fvar(30) : 未使用
;----------------------------------------------------------------------
;ラウンド持ち越し（fvar）
;	fvar(31) :
;	fvar(32) :
;	fvar(33) :
;	fvar(34) :
;	fvar(35) :
;	fvar(36) : 空中ガードフラグ
;	fvar(37) : S,Kグルゲージ量
;	fvar(38) : グルーブポイント（未搭載）
;	fvar(39) : 原作判別
 
;===================================================================
;Common関連 
;===================================================================
	 
;---------------------------------------------------------------------
; Jump Start 
[Statedef 40]
type    = S
physics = S
ctrl = 0
sprpriority = 1
velset = 0,0

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((Var(30)>=3||var(43)&&floor(var(51)/10000%10)=1),39,40)

[State 40, 1]
type = NotHitBy
trigger1 = 1
value = SC,AT

[State 40, 2]
type = Turn
trigger1 = NumEnemy && Time = 0 && (PrevStateNo != [100,101]) && (PrevStateNo != [110,111]) && PrevStateNo != 4100
trigger1 = (enemynear,Pos X - Pos X) * facing < 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
trigger1 = PrevStateNo = [700,799]
var(36) = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
var(32) = 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
Trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
Trigger1 = command = "holdback"
sysvar(1) = -1

;------------------------ 小ジャンプ
[State 40, VarSet(12)]
type = VarSet
triggerall = var(32) = 0
trigger1 = PrevStateNo != 100 && PrevStateNo != 110 && PrevStateNo != 4100 && Command != "holdup" && (var(31) = 0 || var(31) > 0 && sysvar(1) = 0)
var(32) = ifelse((!var(43)&&var(30)<3||var(43)&&floor(var(51)/10000%10)=0),1,2)

[State 40,VelSet]
type = VelSet
trigger1 = AnimTime = 0 && var(32) = 2
x = ifelse(sysvar(1)=0,0,ifelse(sysvar(1)=1,const(velocity.jump.fwd.x),const(velocity.jump.back.x)))
y = floor(Const(velocity.jump.y)*.65)

;------------------------ 中ジャンプ
[State 40, VarSet(12)]
type = VarSet
triggerall = var(32) = 0 && Command != "holdup"
trigger1 = PrevStateNo != 100 && PrevStateNo != 110 && PrevStateNo != 4100 && var(31) > 0 && sysvar(1) != 0
trigger2 = (PrevStateNo = 100 || PrevStateNo = 110 || PrevStateNo != 4100) && sysvar(1) = 1
var(32) = ifelse((!var(43)&&var(30)<3||var(43)&&floor(var(51)/10000%10)=0),4,3)

[State 40,VelSet]
type = VelSet
trigger1 = AnimTime = 0 && var(32) = 3
x = ifelse(sysvar(1)=1,const(velocity.runjump.fwd.x),const(velocity.runjump.back.x))
y = floor(Const(velocity.jump.y)*.65)

;------------------------ 大ジャンプ
[State 40, VarSet(32)]
type = VarSet
triggerall = AnimTime = 0 && var(32) = 0
trigger1 = PrevStateNo != 100 && PrevStateNo != 110 && PrevStateNo != 4100 && Command = "holdup" && var(31) > 0
trigger2 = (PrevStateNo = 100 || PrevStateNo = 110 || PrevStateNo = 4100) && sysvar(1) = 1
var(32) = 4

[State 40,VelSet]
type = VelSet
trigger1 = AnimTime = 0 && var(32) = 4
x = ifelse(sysvar(1)=0,0,ifelse(sysvar(1)=1,const(velocity.jump.fwd.x)*1.5,const(velocity.jump.back.x)*1.5))
y = ifelse(sysvar(1)=0,const(velocity.jump.y)*1.10,const(velocity.jump.y))

;------------------------ ノーマルジャンプ
[State 40, VarSet(12)]
type = VarSet
triggerall = AnimTime = 0 && var(32) = 0
trigger1 = PrevStateNo != 100 && PrevStateNo != 110 && PrevStateNo != 4100 && Command = "holdup" && (var(31) = 0 || (var(32)!=4 && var(31)>0 && sysvar(1) = 0))
var(32) = 1

[State 40,VelSet]
type = VelSet
trigger1 = AnimTime = 0 && var(32) = 1
x = ifelse(sysvar(1)=0,0,ifelse(sysvar(1)=1,const(velocity.jump.fwd.x),const(velocity.jump.back.x)))
y = Const(velocity.jump.y)

[State 45, PlaySnd]
type = PlaySND
trigger1 = AnimTime = 0
value = 3,ifelse(var(32)>=3,1,0)

[State 3100, AfterImage]
type = AfterImage
triggerall = Var(30) = 1 || Var(30) = 2 && !fvar(8) || (Var(30) = [3,6])
trigger1 = Time = ifelse((Var(30)>=3||var(43)&&floor(var(51)/10000%10)=1),5,2) && var(32) >= 3
time = 20
length = 9
TimeGap  = 2
FrameGap = 3
palbright = 0,0,0
palcontrast = 100,100,100
palpostbright = 0,0,0
paladd = -30,-30,-30
palmul = .75,.75,.75
trans = add1

[State 3001, Super]
type = Helper
trigger1 = AnimTime = 0
id = 8020
name = "jump Effect"
pos =0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 4600,10]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
var(31) = 0

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43)) + Var(29)*10000

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0 && PrevStateNo = 4210
value = 41 + Var(29)*10000

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;---------------------------------------------------------------------------
; 着地
[Statedef 52]
type    = S
physics = S
anim = ifelse(Var(32)=2,48,47) + Var(29)*10000
ctrl = 0
velset = 0, 0

[State 52, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State -2,4]
type = PlaySnd
trigger1 = Time = 1
value = 3,3

[State 52, 3]
type = CtrlSet
triggerall = prevstateno != [600,799]
trigger1 = Time = 1
value = 1

[State 52, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
 
;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back) 
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150 + Var(29)*10000

[State -3, 1]
type = VarSet
trigger1 = Time = 0
var(37) = 0

[State 151, 1]
type = HitVelSet
trigger1 = PrevStateNo!=4400
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = PrevStateNo=4400
trigger1 = Time = 0
x = 0

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)-(PrevStateNo=4400)*3
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
triggerall = PrevStateNo!=4400
triggerall = statetype = S
Trigger1 = command = "holddown"
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
triggerall = PrevStateNo!=4400
triggerall = statetype = C
Trigger1 = command != "holddown"
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = PrevStateNo=4400
trigger1 = Time = GetHitVar(ctrltime)-(PrevStateNo=4400)*3
trigger2 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151 + Var(29)*10000

[State -3, 1]
type = VarSet
trigger1 = Time = 0
var(37) = 0

[State 153, 1]
type = HitVelSet
trigger1 = PrevStateNo!=4402
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = PrevStateNo=4402
trigger1 = Time = 0
x = 0

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)-(PrevStateNo=4402)*3
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
triggerall = PrevStateNo!=4402
triggerall = statetype = S
Trigger1 = command = "holddown"
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
triggerall = PrevStateNo!=4402
triggerall = statetype = C
Trigger1 = command != "holddown"
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = PrevStateNo=4402
trigger1 = Time = GetHitVar(ctrltime)-(PrevStateNo=4402)*3
trigger2 = HitOver
value = 131
ctrl = 1
 
;---------------------------------------------------------------------------
; HITG_SHAKE 
[Statedef 5000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 0]
type = LifeAdd
trigger1 = Time = 0 && Var(29)
value = -Ceil((GetHitVar(damage)*1.06)-GetHitVar(damage))
persistent = 0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype) + Var(29)*10000

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030 + Var(29)*10000

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype) + Var(29)*10000))
value = 5047 + GetHitVar(animtype) + Var(29)*10000 ;5051 - 4 + type

[State 5000, 崩れダウン]
type = ChangeAnim
trigger1 = Life <= 0 && var(38)
value = ifelse(var(38)=2,131,130) + Var(29)*10000

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000 + Var(29)*10000
trigger2 = anim = 5010 + Var(29)*10000
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001 + Var(29)*10000
trigger2 = anim = 5011 + Var(29)*10000
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012 + Var(29)*10000
trigger2 = anim = 5002 + Var(29)*10000
trigger3 = anim = 5030 + Var(29)*10000
persistent = 0
time = 15
waveform = sinesquare
ampl = 140
 
;---------------------------------------------------------------------------
; HITA_SHAKE 
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5000, 0]
type = LifeAdd
trigger1 = Time = 0 && Var(29)
value = -Ceil((GetHitVar(damage)*1.06)-GetHitVar(damage))
persistent = 0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype) + Var(29)*10000

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030 + Var(29)*10000

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype) + Var(29)*10000))
value = 5047 + GetHitVar(animtype) + Var(29)*10000 ;5051 - 4 + type

[State 5000, 崩れダウン]
type = ChangeAnim
trigger1 = Life <= 0 && var(38)
value = ifelse(var(38)=2,131,130) + Var(29)*10000

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000 + Var(29)*10000
trigger2 = anim = 5010 + Var(29)*10000
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001 + Var(29)*10000
trigger2 = anim = 5011 + Var(29)*10000
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012 + Var(29)*10000
trigger2 = anim = 5002 + Var(29)*10000
trigger3 = anim = 5030 + Var(29)*10000
trigger4 = (anim = [5051,5059]) + Var(29)*10000
persistent = 0
time = 15
waveform = sinesquare
ampl = 140
 
;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER 
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = 5210
ctrl = 0

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 1]
type = VelMul
trigger1 = Time = 4
x = .8
y = .8

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
y = -4.5

[State 5210, 1]
type = VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1

[State 5210, 2] ;Go up
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdup"
y = -2

[State 5210, 2] ;Go down
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holddown"
y = 1.5

[State 5210, 2] ;Go fwd
type = VelMul
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
x = 1

[State 5210, 2] ;Go back
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdback"
x = -1

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = Time >= 4
y = .35

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1
 
;---------------------------------------------------------------------------
; Initialize (at the start of the round) 
[Statedef 5900]
type = S

[State 5900, 1]
type = VarRangeSet
trigger1 = roundno >= 1
first = 0
last = 9
value = 0

[State 5900, 1]
type = VarRangeSet
trigger1 = roundno >= 1
first = 20
last = 28
value = 0

[State 5900, 1]
type = VarRangeSet
trigger1 = roundno >= 1
first = 31
last = 42
value = 0

[State 5900, 1]
type = VarRangeSet
trigger1 = roundno >= 1
first = 44
last = 49
value = 0

[State 5900, 1]
type = VarSet
trigger1 = var(30)!= 6 && roundno >= 1
trigger2 = var(30) = 6 && roundno = 1
fvar(37) = 0

[State 5900, 2]
type = VarRangeSet
trigger1 = roundno >= 1
fvalue = 0
first = 1
last = 30

[State 5900, 1]
type = VarSet
trigger1 = roundno >= 1
var(53) = 0

[state 190, groove]
type = helper
triggerall = !Numhelper(20000)
triggerall = var(30) = 0
triggerall = roundstate = 0
trigger1 = roundsexisted <= 0
ID = 20000
stateno = 30000
postype = P1
pos = 0,-15
name = "groove"
ontop = 1
bindtime = -1
keyctrl = 1
facing = 1+(teamside = 2)*-2
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State 5900, 3]
type = ChangeState
Trigger1 = RoundNo = 1
Trigger2 = TeamMode = Turns
Trigger2 = RoundsExisted = 0
value = 190

[State 5900, 3] ;Intro
type = ChangeState
Trigger1 = RoundNo > 1
value = 0
  
;===================================================================
; 特殊動作関連 
;===================================================================
	 
;---------------------------------------------------------------------
; 崩れダウン 
;------------------------
[Statedef 5950]
type = U
movetype = H
physics = U
ctrl = 0
velset = 0, 0

[State 151, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5201,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 154, 1]
type = ChangeAnim
trigger1 = HitShakeOver!
trigger1 = var(29)
value = ifelse((var(38) = 1),10150,10151)

[State 154, 1]
type = ChangeAnim
trigger1 = anim != [10150,10151]
trigger1 = HitShakeOver!
value = ifelse((var(38) = 1),150,151)

[State 5000, 5]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = var(38) = 1
type = S
physics = S

[State 5000, 5]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = var(38) = 2
type = C
physics = C

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitShakeOver
x = 0

[State 154, 1]
type = ChangeAnim
trigger1 = var(29)
trigger1 = HitShakeOver && anim != 15950
value = 15950

[State 154, 1]
type = ChangeAnim
trigger1 = anim != 15950
trigger1 = HitShakeOver && anim != 5950
value = 5950

[State 105,End]
type = ChangeState
trigger1 = anim = 5950 || anim = 15950
trigger1 = Time > 50
trigger1 = HitOver
value = 5150
ctrl = 0
 
;---------------------------------------------------------------------------
; ブロッキングヘルパー 
;------------------------  上段
[Statedef 4310]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0,0

[State 10000, Bind]
type = ChangeAnim
trigger1 = parent,statetype = S
value = 4310

[State 10000, Bind]
type = ChangeAnim
trigger1 = parent,statetype = C
value = 4311

[State 10000, Bind]
type = ChangeAnim
trigger1 = parent,statetype = A
value = 4312

[State 10000, Bind]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 10000, End]
type = VarSet
trigger1 = Time = 0
var(1) = 23

[State 10000, End]
type = VarSet
trigger1 = Time = 0
var(2) = 5

[State 10000, End]
type = Varadd
trigger1 = parent,Command != "Not-Neutral"
var(2) = 5
persistent = 0

[State 10000, End]
type = Varadd
trigger1 = 1
var(1) = -1

[State 10000, End]
type = Varadd
trigger1 = 1
var(2) = -1

[State 10000, End]
type = ParentVarSet
trigger1 = Time = 0
var(35) = 0

[State 10000, Bind]
type = ReversalDef
trigger1 = parent,statetype != A
reversal.attr = SA,AA,AP
pausetime = 0,18
sparkno = -1

[State 10000, Bind]
type = ReversalDef
trigger1 = parent,statetype = A
reversal.attr = SCA,AA,AP
pausetime = 0,18
sparkno = -1

[State 10000, Bind]
type = ParentVarSet
trigger1 = MoveContact
var(35) = 1

[State 10000, Bind]
type = DestroySelf
trigger1 = parent,MoveType = H
trigger2 = parent,StateNo = [1000,3999]

[State 190, 1]
type = ChangeState
trigger1 = var(2) = 0
value = 4320

;------------------------  下段
[Statedef 4311]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0,0

[State 10000, Bind]
type = ChangeAnim
trigger1 = parent,statetype = S
value = 4310

[State 10000, Bind]
type = ChangeAnim
trigger1 = parent,statetype = C
value = 4311

[State 10000, Bind]
type = ChangeAnim
trigger1 = parent,statetype = A
value = 4312

[State 10000, Bind]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 10000, End]
type = VarSet
trigger1 = Time = 0
var(1) = 23

[State 10000, End]
type = VarSet
trigger1 = Time = 0
var(2) = 5

[State 10000, End]
type = Varadd
trigger1 = parent,Command != "Not-Neutral"
var(2) = 5
persistent = 0

[State 10000, End]
type = Varadd
trigger1 = 1
var(1) = -1

[State 10000, End]
type = Varadd
trigger1 = 1
var(2) = -1

[State 10000, End]
type = ParentVarSet
trigger1 = Time = 0
var(35) = 0

[State 10000, Bind]
type = ReversalDef
trigger1 = parent,statetype != A
reversal.attr = C,AA,AP
pausetime = 0,18
sparkno = -1

[State 10000, Bind]
type = ReversalDef
trigger1 = parent,statetype = A
reversal.attr = SCA,AA,AP
pausetime = 0,18
sparkno = -1

[State 10000, Bind]
type = ParentVarSet
trigger1 = MoveContact
var(35) = 2

[State 10000, Bind]
type = DestroySelf
trigger1 = parent,MoveType = H
trigger2 = parent,StateNo = [1000,3999]

[State 190, 1]
type = ChangeState
trigger1 = var(2) = 0
value = 4320

;------------------------ 消滅
[Statedef 4320]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000

[State 10000, End]
type = Varadd
trigger1 = 1
var(1) = -1

[STate 1115,1]
type = DestroySelf
trigger1 = var(1) = 0


 
;---------------------------------------------------------------------
; ガードキャンセル攻撃 
[Statedef 4500]
type    = S
movetype= A
physics = S
ctrl = 0

[State 10000, End]
type = VarSet
trigger1 = Time = 0
var(39) = 1

[State 1000, 0]
type = PowerAdd
triggerall = time = 0
trigger1 = Var(30) <= 1 || Var(30) = 2 || Var(30) = 3|| Var(30) = 4 || Var(30) = 5
value = -ifelse(Var(30)=3,3000,ifelse(Var(30)=2,1500,1000))

[State 4100,Varadd]
type = VarSet
triggerall = Time = 0
trigger1 = Var(30) = 6 || (Var(30) = 4 && (100*life/const(data.life))>30)
fvar(37) = 0.00001

[State 5000, 4]
type = ChangeAnim
trigger1 = Time < 7
value = anim

[State 1200, NotHitBy]
type = NotHitBy
trigger1 = Time < 7
value = SCA

[State -2,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 20, 8

[State -3,Super]
type = Helper
trigger1 = Time = 0
id = 8070
name = "GUARD CANCEL"
pos = 10,-ifelse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999
persistent = 0

[State 1201,End]
type = ChangeState
trigger1 = Time = 7
value = 4505 + Var(29)*10000

;---------------------------------------------------------------------
; ガードキャンセル移動
;------------------------ 回りこみ
[Statedef 4510]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0, 0

[State 4510,Width]
type = Width
trigger1 = 1
edge = 5,0

[State 4510,VarSet]
type = VarSet
trigger1 = Time = 0
var(39) = 1

[State 1000, 0]
type = PowerAdd
triggerall = time = 0
trigger1 = Var(30) <= 1 || Var(30) = 2 || Var(30) = 3|| Var(30) = 4 || Var(30) = 5
value = -ifelse(Var(30)=3,3000,ifelse(Var(30)=2,1500,1000))

[State 4100,Varadd]
type = VarSet
triggerall = Time = 0
trigger1 = Var(30) = 6 || (Var(30) = 4 && (100*life/const(data.life))>30)
fvar(37) = 0.00001

[State 5000, 4]
type = ChangeAnim
trigger1 = Time < 7
value = anim

[State 1200, NotHitBy]
type = NotHitBy
trigger1 = 1
value2 = SCA

[State 3100, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 999999999
length = 9
TimeGap  = 2
FrameGap = 3
palbright = 0,0,0
palcontrast = 100,100,100
palpostbright = 0,0,0
paladd = -30,-30,-30
palmul = .75,.75,.75
trans = add1

[State -2,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 20, 8

[State -3,Super]
type = Helper
trigger1 = Time = 0
id = 8070
name = "GUARD CANCEL"
pos = 10,-ifelse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999
persistent = 0

[State 105,End]
type = ChangeState
trigger1 = Time >= 7
value = 4000

;------------------------ バックステップ
[Statedef 4520]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0, 0

[State 4510,Width]
type = Width
trigger1 = 1
edge = 1,0

[State 10000, End]
type = VarSet
trigger1 = Time = 0
var(39) = 1

[State 1000, 0]
type = PowerAdd
triggerall = time = 0
trigger1 = Var(30) <= 1 || Var(30) = 2 || Var(30) = 3|| Var(30) = 4 || Var(30) = 5
value = -ifelse(Var(30)=3,3000,ifelse(Var(30)=2,1500,1000))

[State 4100,Varadd]
type = VarSet
triggerall = Time = 0
trigger1 = Var(30) = 6 || (Var(30) = 4 && (100*life/const(data.life))>30)
fvar(37) = 0.00001

[State 5000, 4]
type = ChangeAnim
trigger1 = Time < 7
value = anim

[State 1200, NotHitBy]
type = NotHitBy
trigger1 = Time < 7
value2 = SCA
Time = 7

[State 3100, AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 999999999
length = 9
TimeGap  = 2
FrameGap = 3
palbright = 0,0,0
palcontrast = 100,100,100
palpostbright = 0,0,0
paladd = -30,-30,-30
palmul = .75,.75,.75
trans = add1

[State -2,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 20, 8

[State -3,Super]
type = Helper
trigger1 = Time = 0
id = 8070
name = "GUARD CANCEL"
pos = 10,-ifelse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999
persistent = 0

[State 105,End]
type = ChangeState
trigger1 = Time >= 7
value = 105
 
;---------------------------------------------------------------------
; オリコン発動 
;------------------- 地上
[Statedef 4200]
type = S
movetype = I
physics = S
ctrl = 0
anim = 4200 + Var(29)*10000
velset = 0, 0
poweradd = -3000

[State 5201,NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
Time = 53

[State 3000, Super]
type = Helper
trigger1 = Time = 5
persistent = 0
id = 8080
name = "super"
pos = 0,-60
postype = P1
stateno = 8080
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999999

[State 3000, SuperPause]
type = SuperPause
trigger1 = Time = 5
time = 39
movetime = 39
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, VarSet]
type = VarSet
trigger1 = Time = 5
trigger1 = enemynear,stateno != [120,155]
trigger1 = !(enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1)
trigger1 = !(enemynear,authorname = "H”" && enemynear,fvar(39) = 1)
trigger1 = !(enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane")
trigger2 = enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
trigger3 = enemynear,authorname = "H”" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4400,4405]))
trigger4 = enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane" && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
fvar(22) = 39

[State 3100, AfterImage]
type = AfterImage
trigger1 = Time = 5
time = 999999999
length = 9
TimeGap  = 2
FrameGap = 3
palbright = 0,0,0
palcontrast = 40,160,180
palpostbright = 0,0,0
paladd = -90,10,30
palmul = .25,.45,.55
trans = add1

[State 4100,Varadd]
type = VarSet
trigger1 = AnimTime = 0
fvar(8) = 1

[State -2, 1]
type = VarSet
trigger1 = AnimTime = 0
var(47) = 1

[State 4050,8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------- 空中
[Statedef 4210]
type = A
movetype = I
physics = N
ctrl = 0
anim = 4210 + Var(29)*10000
poweradd = -3000

[State 610, varset(F3)]
type = varset
trigger1 = Time = 0
fvar(1) = Vel X

[State 610, varset(F4)]
type = varset
trigger1 = Time = 0
fvar(2) = Vel Y

[State 610, velset]
type = velset
trigger1 = Time = 0
x = 0
y = 0
persistent = 0

[State 5201,NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
Time = 53

[State 3000, Super]
type = Helper
trigger1 = Time = 5
persistent = 0
id = 8080
name = "super"
pos = 0,-70
postype = P1
stateno = 8080
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999999

[State 3100, AfterImage]
type = AfterImage
trigger1 = Time = 5
time = 999999999
length = 9
TimeGap  = 2
FrameGap = 3
palbright = 0,0,0
palcontrast = 40,160,180
palpostbright = 0,0,0
paladd = -90,10,30
palmul = .25,.45,.55
trans = add1

[State 3000, SuperPause]
type = SuperPause
trigger1 = Time = 5
time = 39
movetime = 39
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, VarSet]
type = VarSet
trigger1 = Time = 5
trigger1 = enemynear,stateno != [120,155]
trigger1 = !(enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1)
trigger1 = !(enemynear,authorname = "H”" && enemynear,fvar(39) = 1)
trigger1 = !(enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane")
trigger2 = enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
trigger3 = enemynear,authorname = "H”" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4400,4405]))
trigger4 = enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane" && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
fvar(22) = 39

[State 610, velset]
type = velset
trigger1 = AnimTime = 0
x = FVar(1)
y = FVar(2)
persistent = 0

[State 4100,Varadd]
type = VarSet
trigger1 = AnimTime = 0
fvar(8) = 1

[State -2, 1]
type = VarSet
trigger1 = AnimTime = 0
var(47) = 1

[State 4050,8]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
 
;---------------------------------------------------------------------
; パワーMAX発動 
[Statedef 4150]
type = S
movetype = I
physics = S
anim = 4150 + Var(29)*10000
velset = 0, 0
ctrl = 0

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Time = 6
value = 20,4

[State 4150,Super]
type = Helper
trigger1 = Time = 6 && var(30)=5
id = 25050
name = "PowMAX"
pos = 0,0
postype = P1
stateno = 25050
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999
persistent = 0

[State 4150, Explod]
type = Explod
trigger1 = Time = 6
anim = 8415
pos = 0,-50
postype = P1
scale = .5,.5
sprpriority = 5
ownpal = 1

[State 4150,Varadd]
type = VarSet
trigger1 = Time = 6 && var(30)=5
fvar(8) = 662

[State 4150,Varadd]
type = VarSet
trigger1 = Time = 6 && var(30)=4
fvar(8) = 1

[State 4150,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
	 
;---------------------------------------------------------------------
; クイックMAX発動 
[Statedef 4160]
type = S
movetype = I
physics = S
anim = 0 + Var(29)*10000
velset = 0, 0
ctrl = 0

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 20,4

[State 4150, Explod]
type = Explod
trigger1 = Time = 0
anim = 8415
pos = 0,-50
postype = P1
scale = .5,.5
sprpriority = 5
ownpal = 1

[State 4150,Varadd]
type = VarSet
trigger1 = Time = 0 && var(30)=5
fvar(8) = 662

[State 4150,Varadd]
type = VarSet
trigger1 = Time = 0 && var(30)=4
fvar(8) = 1

[State 3000,ChangeState]
type = ChangeState
trigger1 = Time = 1
value = 0
ctrl = 1
  
;-------------------------------------------------------------------
; ジャストディフェンス 
;-------------------------------------------------------------------





	 
;------------------------
;ジャストディフェンス（立ち） 
[Statedef 4400]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 10000, End]
type = VarSet
trigger1 = Time = 0
var(39) = 1

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150 + Var(29)*10000

[State 10000, End]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, 0]
type = LifeAdd
trigger1 = time = 0
value = GetHitVar(damage)+ifelse((P2StateNo=[1000,3999]),(Ceil(GetHitVar(damage)*.01)*7),7)

[State -2,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 20, 6

[State 4100,Varadd]
type = VarAdd
trigger1 = Time = 0 && fvar(8)!
fvar(37) = 6

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0
anim = 8060
pos = 10,-65
postype = P1
sprpriority = 3
scale = .5,.5
bindtime = 1
ownpal = 1
ignorehitpause = 1
Supermovetime = -1

[State 150, 2]
type = ChangeState
trigger1 = time > 0
trigger1 = Time >= ifelse(GetHitVar(hitshaketime)>2,GetHitVar(hitshaketime),0)-2
value = 151
ignorehitpause = 1

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3
 
;------------------------
;ジャストディフェンス（しゃがみ） 
[Statedef 4402]
type    = C
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 10000, End]
type = VarSet
trigger1 = Time = 0
var(39) = 1

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151 + Var(29)*10000

[State 10000, End]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, 0]
type = LifeAdd
trigger1 = time = 0
value = GetHitVar(damage)+ifelse((P2StateNo=[1000,3999]),(Ceil(GetHitVar(damage)*.01)*7),7)

[State -2,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 20, 6

[State 4100,Varadd]
type = VarAdd
trigger1 = Time = 0 && fvar(8)!
fvar(37) = 6

[State 150, 2]
type = ChangeState
trigger1 = time > 0
trigger1 = Time >= ifelse(GetHitVar(hitshaketime)>2,GetHitVar(hitshaketime),0)-2
value = 153
ignorehitpause = 1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0
anim = 8060
pos = 10,-50
postype = P1
sprpriority = 3
scale = .5,.5
bindtime = 1
ownpal = 1
ignorehitpause = 1
Supermovetime = -1

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4
 
;---------------------------------------------------------------------------
;ジャストディフェンス（空中） 
;------------------------ GUARDHIT (shaking)
[Statedef 4404]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 10000, End]
type = VarSet
trigger1 = Time = 0
var(39) = 1

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152 + Var(29)*10000

[State 10000, End]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, 0]
type = LifeAdd
trigger1 = time = 0
value = GetHitVar(damage)+ifelse((P2StateNo=[1000,3999]),(Ceil(GetHitVar(damage)*.01)*7),7)

[State -2,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 20, 6

[State 4100,Varadd]
type = VarAdd
trigger1 = Time = 0 && fvar(8)!
fvar(37) = 6

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0
anim = 8060
pos = 10,-50
postype = P1
sprpriority = 3
scale = .5,.5
bindtime = 1
ownpal = 1
ignorehitpause = 1
Supermovetime = -1

[State 150, 2]
type = ChangeState
trigger1 = time > 0
trigger1 = Time >= ifelse(GetHitVar(hitshaketime)>2,GetHitVar(hitshaketime),2)-2
value = 4405
ignorehitpause = 1

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;------------------------ GUARDHIT (knocked back)
[Statedef 4405]
type    = A
movetype= H
physics = N
anim = 152
velset = -1,-5

[State -3, 1]
type = VarSet
trigger1 = Time = 0
var(37) = 0

[State 50, 3]
type = ChangeAnim
trigger1 = Time = 0
persistent = 0
value = 41
elem = 8

[State 1201,VelAdd]
type = VelAdd
trigger1 = 1
y = .35

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)+3
value = 1

[State 1201,End]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52
  
;-------------------------------------------------------------------
; ゲージ溜め動作 
[Statedef 4100]
type = S
movetype = I
physics = N
ctrl = 0
anim = 4100 + Var(29)*10000
velset = 0, 0

[State 4100,Varadd]
type = Varadd
trigger1 = Time < 20
fvar(37) = .25

[State 4100,Varadd]
type = Varadd
trigger1 = Time >= 20
fvar(37) = 1

[State 4100,Poweradd]
type = Poweradd
trigger1 = Time < 20
value = 4

[State 4100,Poweradd]
type = Poweradd
trigger1 = Time >= 20
value = 15

[State 4100, Super]
type = Helper
trigger1 = Time = 0 && NumHelper(8500) = 0
persistent = 0
id = 8500
name = "Power"
pos = 0,0
postype = P1
stateno = 8500
helpertype = normal
keyctrl = 0
ownpal = 1

[State 4100,ChangeState]
type = ChangeState
trigger1 = Command != "charge1" || Command != "charge2"
trigger2 = fvar(37) >= 100 && var(30)=4
trigger3 = var(43)&&floor(var(50)/10000000%10)=1 && Power >= 3000
value = 4101
ctrl = 0

;------------------- 終了
[Statedef 4101]
type = S
movetype = I
physics = N
ctrl = 0
anim = 4101 + Var(29)*10000
velset = 0, 0

[State 4101,Stopsnd]
type = Stopsnd
trigger1 = Time = 0
channel = 0
persistent = 0

[State 4101,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
 
;---------------------------------------------------------------------
; ダウン回避 
[Statedef 5201]
type = S
movetype = I
physics = N
anim = 5200 + Var(29)*10000
velset = 0, 0
ctrl = 0

[State 10000, End]
type = VarSet
trigger1 = Time = 0
var(39) = 1

[State 5201,PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201,VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = -7

[State 5201,VelMul]
type = VelMul
trigger1 = 1
x = .87

[State 5201,VelMul]
type = VelSet
trigger1 = AnimElem = 5
x = 0

[State 5201,NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
Time = 23

[State 5201,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
 
;---------------------------------------------------------------------
; 投げ抜け 
;------------------------ 自分側
[Statedef 950]
type = S
movetype = I
physics = N
anim = 5910 + Var(29)*10000
ctrl = 0
velset = -3, 0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0
anim = 8415
id = 8415
pos = 0,-40
scale = .5,.5
postype = P1
sprpriority = 5
bindtime = 1
ownpal = 1
persistent = 0

[State 810,TargetBind]
type = TargetBind
trigger1 = Time = 0
pos = 0,0

[State 810,TargetBind]
type = TargetState
trigger1 = Time = 0
value = 955

[State 1000, 0]
type = TargetFacing
trigger1 = time = 0
value = -1

[State 820,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 20, 8
persistent = 0

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 105, VelMul]
type = VelMul
trigger1 = 1
x = .96

[State 4100,4]
type = PlayerPush
trigger1 = P2BodyDist X < 20
value = 0

[State 105,End]
type = ChangeState
trigger1 = Time >= 30
value = 0
ctrl = 1

;------------------------ 相手側
[Statedef 955]
type = S
movetype = I
physics = N
ctrl = 0
velset = -3, 0

[State 1040,ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && (SelfAnimExist(5910) || SelfAnimExist(5940))
value = ifelse(SelfAnimExist(5940),5940,5910)

[State 820,ChangeAnim2]
type = ChangeAnim
trigger1 = Time = 0 && !SelfAnimExist(5910) && !SelfAnimExist(5940)
value = 5007

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 105, VelMul]
type = VelMul
trigger1 = 1
x = .96

[State 4100,4]
type = PlayerPush
trigger1 = P2BodyDist X < 20
value = 0

[State 105,End]
type = SelfState
trigger1 = Time >= 29
value = 0
ctrl = 1
 
;---------------------------------------------------------------------------
; 相手空中復帰 
;------------------------ 1
; HITA_UP (initial going up)
[Statedef 5031]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 10
value = 5041

[State 5030, 4]
type = SelfState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 10
value = 5050

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 5036

;------------------------ 2
[Statedef 5036]
type    = A
movetype= H
physics = N

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5041 ;HITA_RECOV

[State 5035, 4]
type = SelfState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5050 ;HITA_FALL

;------------------------ 3
; HITA_RECOV (recovering in air, not falling)
[Statedef 5041]
type    = A
movetype= H
physics = N

[State 40, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5040, 1]
type = SelfState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52
  
;===================================================================
;特殊エフェクト関連 
;===================================================================




	 
;-------------------------------------------------------------------
;ジャンプエフェクト 
;------------------------ 1
[Statedef 8020]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 1000, 0]
type = BindToRoot
trigger1 = Time > 0
pos = 0,0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0
anim = 8025
pos = 0,0
postype = P1
scale = .5,.5
sprpriority = 5
ownpal = 0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0 || Time = 2 || Time = 6
anim = 8020
pos = 0,0
postype = P1
scale = .5,.5
sprpriority = 5
ownpal = 0

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time >= 20
 
;-------------------------------------------------------------------
;パワー溜めエフェクト 
;------------------------
[Statedef 8500]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 20,3
channel = 1

[State 4110, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0 && NumExplod(8500) = 0
anim = 8500
id = 8500
pos = 0,0
scale = .5,.5
postype = P1
sprpriority = -1
bindtime = -1
ownpal = 0
removetime = -1
facing = 1
persistent = 0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0 && NumExplod(8505) = 0
anim = 8505
id = 8505
pos = 0,0
scale = .5,0
postype = P1
sprpriority = 2
bindtime = -1
ownpal = 0
removetime = -1
facing = 1
persistent = 0

[State 4110, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(30) =4 && root,fvar(37) = [0,19]
trigger2 = root,var(30)!=4 && root,var(43)&&floor(root,var(50)/10000000%10)=1 && Power = [0,599]
ID = 8505
scale  = .5,0

[State 4110, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(30) =4 && root,fvar(37) = [20,29]
trigger2 = root,var(30)!=4 && root,var(43)&&floor(root,var(50)/10000000%10)=1 && Power = [600,899]
ID = 8505
scale  = .5,.0625

[State 4110, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(30) =4 && root,fvar(37) = [30,49]
trigger2 = root,var(30)!=4 && root,var(43)&&floor(root,var(50)/10000000%10)=1 && Power = [900,1499]
ID = 8505
scale  = .5,.1275

[State 4110, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(30) =4 && root,fvar(37) = [50,79]
trigger2 = root,var(30)!=4 && root,var(43)&&floor(root,var(50)/10000000%10)=1 && Power = [1500,2399]
ID = 8505
scale  = .5,.25

[State 4110, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(30) =4 && root,fvar(37) = [80,100]
trigger2 = root,var(30)!=4 && root,var(43)&&floor(root,var(50)/10000000%10)=1 && Power = [2400,3000]
ID = 8505
scale  = .5,.5

[State 820,PlaySnd]
type = Stopsnd
trigger1 = Root,StateNo != [4100,4101]
channel = 1

[State 4110, RemoveExplod]
type = RemoveExplod
trigger1 = Root,StateNo != [4100,4101]
id = 8500

[State 4110, RemoveExplod]
type = RemoveExplod
trigger1 = Root,StateNo != [4100,4101]
id = 8505

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Root,StateNo != [4100,4101]
 
;-------------------------------------------------------------------
;オリコン発動エフェクト 
;------------------------
[Statedef 8080]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0

[State 1000, 0]
type = BGPalFX
trigger1 = 1
time = 1
invertall = 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 20,2
persistent = 0

[State -2, 1]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 1
anim = 8080
id = 8080
pos = 0,0
postype = P1
scale = 1,1
sprpriority = 5
supermove = 1
bindtime = -1
ownpal = 0
persistent = 0
Supermovetime = 999999

[State -2, 1]
type = PalFX
trigger1 = time = 18
time = 1
add = -100,-100,-100

[State -3, Burst]
type = VarSet
trigger1 = Time = 1
fvar(1) = 1

[State -3, Burst]
type = VarAdd
trigger1 = Time < 18
trigger1 = fvar(1) > 0
fvar(1) = -.06

[State -3, Burst]
type = VarSet
trigger1 = Time = 19
fvar(1) = 1

[State -3, Burst]
type = VarAdd
trigger1 = Time > 19
fvar(1) = .5

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 8080
scale = fvar(1),fvar(1)

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 2
anim = 8081
id = 8081
pos = 0,0
postype = P1
scale = .075,.075
sprpriority = 5
supermove = 1
bindtime = -1
removetime = -1
ownpal = 1
persistent = 0
Supermovetime = 999999

[State -3, Burst]
type = VarSet
trigger1 = Time = 2
fvar(2) = .075

[State -3, Burst]
type = VarAdd
trigger1 = Time > 2
trigger1 = fvar(1) < .875
fvar(2) = .07

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 8081
scale = fvar(2),fvar(2)

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 29
id = 8080

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 29
id = 8081

[State 1150, ChangeState]
type = DestroySelf
trigger1 = Time = 29
 
;-------------------------------------------------------------------
;カウンターヒットエフェクト 
;------------------------
[Statedef 8130]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0

[State -2, 1]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0
anim = 8130
id = 8130
pos = 0,0
postype = P1
scale = .275,.275
sprpriority = 5
supermove = 1
bindtime = -1
removetime = -1
ownpal = 0
persistent = 0
Supermovetime = 999999
pausemovetime = 999999

[State -3, Burst]
type = VarSet
trigger1 = Time = 0
fvar(1) = .275

[State -3, Burst]
type = VarAdd
trigger1 = fvar(1) > 0
fvar(1) = .05

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 8130
scale = fvar(1),fvar(1)

[State -2, 1]
type = PalFX
trigger1 = time = 5
time = 1
add = -50,-50,-50

[State -2, 1]
type = PalFX
trigger1 = time = 6
time = 1
add = -120,-120,-120

[State -2, 1]
type = PalFX
trigger1 = time = 7
time = 1
add = -190,-190,-190

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Time > 7
id = 8130

[State 1150, ChangeState]
type = DestroySelf
trigger1 = Time > 7
 
;-------------------------------------------------------------------
;ガードキャンセルエフェクト 
;------------------------
[Statedef 8070]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0

[State -2, 1]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0
anim = 8070
id = 8070
pos = 0,0
postype = P1
scale = 0,0
sprpriority = 5
supermove = 1
bindtime = -1
removeTime = -1
ownpal = 0
persistent = 0
Supermovetime = 999999

[State -3, Burst]
type = VarSet
trigger1 = Time = 0
fvar(1) = .15

[State -3, Burst]
type = VarAdd
trigger1 = Time > 0
fvar(1) = .05

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 8070
scale = fvar(1),fvar(1)

[State -3, Burst]
type = VarSet
trigger1 = Time = 0
var(1) = 0

[State -3, Burst]
type = VarAdd
trigger1 = Time > 3
var(1) = -43

[State -2, 1]
type = PalFX
trigger1 = Time > 3
time = 1
add = var(1),var(1),var(1)

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Time > 10
id = 8070

[State 1150, ChangeState]
type = DestroySelf
trigger1 = Time > 10
 
;-------------------------------------------------------------------
;スパコン発動エフェクト 
	 
;-----------------------------------------------------------------
;CAPCOM 
;------------------------ 1
[Statedef 8000]
type    = A
movetype= I
physics = N
anim = 8000
velset = 0,0
ctrl = 0
sprpriority = 5

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 20,0

[State 3000, BGInvert]
type = BGPalFX
trigger1 = time < 47
time = 1
invertall = 1
ignorehitpause = 1

[State -2,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 5035, 1]
type = Trans
trigger1 = 1
trans = add

[State -2, 1]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 1
anim = 8002
id = 8002
pos = 0,0
postype = P1
scale = .75,.75
sprpriority = 5
supermove = 1
bindtime = -1
removetime = 10
ownpal = 0
persistent = 0
Supermovetime = 999999
pausemovetime = 999999

[State -3, Burst]
type = VarSet
trigger1 = Time = 1
fvar(2) = .5

[State -3, Burst]
type = VarAdd
trigger1 = fvar(2) > 0
fvar(2) = .15

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 8002
scale = fvar(2),fvar(2)

[State -3, Burst]
type = VarSet
trigger1 = Time = 1
fvar(1) = 1

[State -3, Burst]
type = VarAdd
trigger1 = Time < 25
trigger1 = fvar(1) > .5
fvar(1) = -.02

[State 4900, 16]
type = AngleAdd
trigger1 = 1
value = -5.625

[State 4900, 16]
type = AngleDraw
trigger1 = 1
scale = fvar(1),fvar(1)

[State 3000, Super]
type = Helper
trigger1 = Time = 1 || Time = 6 || Time = 11 || Time = 16
id = 8001
pos = 0,0
postype = P1
stateno = 8001
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999999
pausemovetime = 999999

[State 3000, Super]
type = Helper
triggerall = !IsHelper(8000)
trigger1 = Time = 4
id = 8003
pos = 0,0
postype = P1
stateno = 8003
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999999
pausemovetime = 999999
size.xscale = 1
size.yscale = 1

[State 3000, Super]
type = Helper
triggerall = !IsHelper(8000)
trigger1 = Time = 4
id = 8004
pos = 0,0
postype = P1
stateno = 8004
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999999
pausemovetime = 999999
size.xscale = 1
size.yscale = 1

[State 3000, Super]
type = Helper
triggerall = !IsHelper(8000)
trigger1 = Time = 4
id = 8005
pos = 0,0
postype = P1
stateno = 8005
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999999
pausemovetime = 999999
size.xscale = 1
size.yscale = 1

[State 3000, Super]
type = Helper
triggerall = IsHelper(8002)
trigger1 = Time = 4
id = 8006
pos = 0,0
postype = P1
stateno = 8006
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999999
pausemovetime = 999999
size.xscale = 1
size.yscale = 1

[State 3000, Super]
type = Helper
triggerall = IsHelper(8002)
trigger1 = Time = 4
id = 8007
pos = 0,0
postype = P1
stateno = 8007
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999999
pausemovetime = 999999
size.xscale = 1
size.yscale = 1

[State 3000, Super]
type = Helper
triggerall = IsHelper(8002)
trigger1 = Time = 4
id = 8008
pos = 0,0
postype = P1
stateno = 8008
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999999
pausemovetime = 999999
size.xscale = 1
size.yscale = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = time = 48
id = 8010

[State 1150, ChangeState]
type = DestroySelf
trigger1 = time = 48

;------------------------ 2
[Statedef 8001]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State -2, 1]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0
anim = 8001
id = 8001
pos = 0,0
postype = P1
scale = .5,.5
sprpriority = 5
bindtime = -1
removetime = -1
ownpal = 0
persistent = 0
Supermovetime = 999999
pausemovetime = 999999

[State -3, Burst]
type = VarSet
trigger1 = Time = 0
fvar(1) = .5

[State -3, Burst]
type = VarAdd
trigger1 = Time > 0
fvar(1) = .025

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 8001
scale = fvar(1),fvar(1)

[State -3, Burst]
type = VarSet
trigger1 = Time = 0
var(1) = 0

[State -3, Burst]
type = VarAdd
trigger1 = Time > 0
var(1) = -15

[State -2, 1]
type = PalFX
trigger1 = 1
time = 1
add = var(1),var(1),var(1)

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 15
id = 8001

[State 1150, ChangeState]
type = DestroySelf
trigger1 = Time = 15

;------------------------ 3-1
[Statedef 8003]
type    = A
movetype= I
physics = N
anim = 8003
velset = 0,0
ctrl = 0
sprpriority = 5

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(0) = .5

[State -3, Burst]
type = VarAdd
trigger1 = Time > 17
fvar(0) = -.032

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(1) = .125

[State -3, Burst]
type = VarAdd
trigger1 = Time < 13
fvar(1) = .032

[State 1000, 0]
type = AngleSet
trigger1 = 1
value = 64-time

[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = fvar(0),fvar(1)

[State 1000, 1]
type = Trans
trigger1 = 1
trans = add

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = time = 31

;------------------------ 3-2
[Statedef 8004]
type    = A
movetype= I
physics = N
anim = 8003
velset = 0,0
ctrl = 0
sprpriority = 5

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(0) = .5

[State -3, Burst]
type = VarAdd
trigger1 = Time > 17
fvar(0) = -.032

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(1) = .125

[State -3, Burst]
type = VarAdd
trigger1 = Time < 13
fvar(1) = .032

[State 1000, 0]
type = AngleSet
trigger1 = 1
value = 184-time

[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = fvar(0),fvar(1)

[State 1000, 1]
type = Trans
trigger1 = 1
trans = add

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = time = 31

;------------------------ 3-3
[Statedef 8005]
type    = A
movetype= I
physics = N
anim = 8003
velset = 0,0
ctrl = 0
sprpriority = 5

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(0) = .5

[State -3, Burst]
type = VarAdd
trigger1 = Time > 17
fvar(0) = -.032

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(1) = .125

[State -3, Burst]
type = VarAdd
trigger1 = Time < 13
fvar(1) = .032

[State 1000, 0]
type = AngleSet
trigger1 = 1
value = 304-time

[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = fvar(0),fvar(1)

[State 1000, 1]
type = Trans
trigger1 = 1
trans = add

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = time = 31

;------------------------ 3-4
[Statedef 8006]
type    = A
movetype= I
physics = N
anim = 8003
velset = 0,0
ctrl = 0
sprpriority = 5

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(0) = .5

[State -3, Burst]
type = VarAdd
trigger1 = Time > 17
fvar(0) = -.032

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(1) = .125

[State -3, Burst]
type = VarAdd
trigger1 = Time < 13
fvar(1) = .032

[State 1000, 0]
type = AngleSet
trigger1 = 1
value = 4

[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = fvar(0),fvar(1)

[State 1000, 1]
type = Trans
trigger1 = 1
trans = add

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = time = 31

;------------------------ 3-5
[Statedef 8007]
type    = A
movetype= I
physics = N
anim = 8003
velset = 0,0
ctrl = 0
sprpriority = 5

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(0) = .5

[State -3, Burst]
type = VarAdd
trigger1 = Time > 17
fvar(0) = -.032

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(1) = .125

[State -3, Burst]
type = VarAdd
trigger1 = Time < 13
fvar(1) = .032

[State 1000, 0]
type = AngleSet
trigger1 = time = 0
value = 124

[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = fvar(0),fvar(1)

[State 1000, 1]
type = Trans
trigger1 = 1
trans = add

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = time = 31

;------------------------ 3-6
[Statedef 8008]
type    = A
movetype= I
physics = N
anim = 8003
velset = 0,0
ctrl = 0
sprpriority = 5

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(0) = .5

[State -3, Burst]
type = VarAdd
trigger1 = Time > 17
fvar(0) = -.032

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(1) = .125

[State -3, Burst]
type = VarAdd
trigger1 = Time < 13
fvar(1) = .032

[State 1000, 0]
type = AngleSet
trigger1 = time = 0
value = 244

[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = fvar(0),fvar(1)

[State 1000, 1]
type = Trans
trigger1 = 1
trans = add

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = time = 31
 
;---------------------------------------------------------------------
;SNK 
;------------------------ 1
[Statedef 8010]
type    = A
movetype= I
physics = N
anim = 8000
velset = 0,0
ctrl = 0
sprpriority = 5

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 20,1

[State 8010, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,47]
flag = NoBG
flag2 = NoFG
flag3 = GlobalNoShadow

[State 8010, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 8010, Trans]
type = Trans
trigger1 = 1
trans = add

[State 8010, PalFX]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0

[State 8010, VarSet]
type = VarSet
trigger1 = Time = 1
fvar(1) = 1

[State 8010, VarSet]
type = VarAdd
trigger1 = Time < 25
trigger1 = fvar(1) > .5
fvar(1) = -.02

[State 8010, Angle]
type = AngleAdd
trigger1 = 1
value = -5.625

[State 8010, Angle]
type = AngleDraw
trigger1 = 1
scale = fvar(1),fvar(1)

[State 8010, Helper]
type = Helper
trigger1 = Time = 1 || Time = 6 || Time = 11 || Time = 16
id = 8001
pos = 0,0
postype = P1
stateno = 8001
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999999
pausemovetime = 999999
size.xscale = .5
size.yscale = .5

[State 8010, Helper]
type = Helper
trigger1 = Time = 2
trigger2 = !IsHelper(8000) && (Time = 8 || Time = 14 || Time = 20)
id = 8011
pos = 0,0
postype = P1
stateno = 8011
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999999
pausemovetime = 999999

[State 3000, Super]
type = Helper
trigger1 = Time = 2
trigger2 = !IsHelper(8000) && (Time = 8 || Time = 14 || Time = 20)
id = 8012
pos = 0,0
postype = P1
stateno = 8012
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 99999999
pausemovetime = 999999
size.xscale = 1
size.yscale = 1

[State 1150, ChangeState]
type = DestroySelf
trigger1 = Time = 48

;------------------------ 2
[Statedef 8011]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0

[State 8011, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 8011, 1]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0

[State 8011, Explod]
type = Explod
trigger1 = Time = 2
anim = 8002
id = 8011
pos = 0,0
postype = P1
scale = 3,.5
sprpriority = 5
bindtime = -1
removetime = -1
ownpal = 0
persistent = 0
supermovetime = 999999
pausemovetime = 999999

[State 8011, Burst]
type = VarSet
trigger1 = Time = 1
fvar(2) = 2.5

[State 8011, VarAdd]
type = VarAdd
trigger1 = fvar(2) > 0
fvar(2) = -.1875

[State 8011, VarSet]
type = VarSet
trigger1 = Time = 1
fvar(3) = .75

[State 8011, VarAdd]
type = VarAdd
trigger1 = fvar(3) > 0
fvar(3) = -.05625

[State 8011, ModifyExplod]
type = ModifyExplod
trigger1 = 1
Id = 8011
scale = fvar(2),fvar(3)

[State 8011, PalFX]
type = PalFX
trigger1 = Time = 1
time = 1
mul = 85,85,85

[State 8011, PalFX]
type = PalFX
trigger1 = Time = 2
time = 1
mul = 170,170,170

[State 8011, PalFX]
type = PalFX
trigger1 = Time > 2
time = 1
mul = 256,256,256

[State 8011, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 15
id = 8011

[State 8012, DestroySelf]
type = DestroySelf
trigger1 = Time = 15

;------------------------ 3
[Statedef 8012]
type    = A
movetype= I
physics = N
anim = 8010
velset = 0,0
ctrl = 0
sprpriority = 5

[State 8012, AssertSpecial]
type = AssertSpecial
trigger1 = time = 1
flag = invisible

[State 8012, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 8012, Trans]
type = Trans
trigger1 = 1
trans = add

[State 8012, Bind]
type = BindToParent
trigger1 = root,NumHelper(8000)
trigger2 = root,NumHelper(8001)
trigger3 = root,NumHelper(8002)
pos = 0,0

[State 8012, PalFX]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0

[State 8012, VarSet]
type = VarSet
trigger1 = Time = 1
fvar(2) = .5

[State 8012, VarAdd]
type = VarAdd
trigger1 = fvar(2) > .025
fvar(2) = -.01

[State 8012, Angle]
type = AngleAdd
trigger1 = 1
value = -11.25

[State 8012, Angle]
type = AngleDraw
trigger1 = 1
scale = fvar(2),fvar(2)

[State 8012, PalFX]
type = PalFX
trigger1 = Time = 1
time = 1
mul = 85,85,85

[State 8012, PalFX]
type = PalFX
trigger1 = Time = 2
time = 1
mul = 170,170,170

[State 8012, PalFX]
type = PalFX
trigger1 = Time > 2
time = 1
mul = 256,256,256

[State 8012, DestroySelf]
type = DestroySelf
trigger1 = !root,NumHelper(8000)
trigger2 = !root,NumHelper(8001)
trigger3 = !root,NumHelper(8002)
  
;-------------------------------------------------------------------
;KOフィニッシュ演出 
;---------------------------------------------------------------------------
; 音のみ
[Statedef 9030]
ctrl = 0
anim = 20000
ownpal = 1

[State 9000, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 15,0

[State 6800, DestroySelf]
type = DestroySelf
trigger1 = roundstate != 3

	 
;-------------------------------------------------------------------
;CAPCOM 
;------------------------ 1
[Statedef 9000]
ctrl = 0
anim = 20000

[State 9000, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 15,0

[State 9000, Assert]
type = AssertSpecial
trigger1 = Time < 60
flag = NoBarDisplay
flag2 = NoMusic

[State 9000, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 60
flag = NoBG
flag2 = NoFG
flag3 = GlobalNoShadow

[State 9000, HyperComboFinish]
type = Helper
trigger1 = time = 0
ID = 9001
stateno = 9001
postype = P1
pos = ceil((319-ScreenPos X)-160)*facing,ceil((239-ScreenPos Y)-120)
supermovetime = 999999
pausemovetime = 999999
size.xscale = 1
size.yscale = 1

[State 9000, DestroySelf]
type = DestroySelf
trigger1 = RoundState != 3

;------------------------ 2
[Statedef 9001]
ctrl = 0
anim = 8650
sprpriority = -110

[State 9000, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 15, 1

[State 9000, PosFreeze]
type = PosAdd
trigger1 = time > 0
x = -ceil(ScreenPos X-fvar(1))
y = -ceil(ScreenPos Y-fvar(2))

[State 9000, PosFreeze]
type = VarSet
trigger1 = 1
fvar(1) = ScreenPos X

[State 9000, KOPosFreeze]
type = VarSet
trigger1 = 1
fvar(2) = ScreenPos Y

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 9000, VarAdd]
type = VarSet
trigger1 = time = 0
fvar(0) = .5

[State 9000, VarAdd]
type = VarAdd
trigger1 = time <= 3
fvar(0) = -.1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time > 3
fvar(0) = .06

[State 9000, Angle]
type = AngleSet
trigger1 = 1
value = root,var(32)*5

[State 9000, Angle]
type = AngleDraw
trigger1 = 1
scale = fvar(0),fvar(0)

[State 9000, DestroySelf]
type = DestroySelf
trigger1 = RoundState != 3

 
;-------------------------------------------------------------------
;SNK 
[Statedef 9010]
ctrl = 0
anim = 20000

[State 9000, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 15,0

[State 9010, Assert]
type = AssertSpecial
trigger1 = Time <= 40
flag = NoBarDisplay
flag2 = NoMusic

[State 9010, AssertSpecial]
type = AssertSpecial
trigger1 = Time <= 31
flag = NoBG
flag2 = NoFG
flag3 = GlobalNoShadow

[State 9010, EnvColor]
type = EnvColor
trigger1 = time < 8
value = (time*2)**2,(time*2)**2,(time*2)**2
time = 1
ignorehitpause = 1
under = 1

[State 9010, EnvColor]
type = EnvColor
trigger1 = time = [8,31]
value = ceil(255-((time-8)**1.5)),ceil(255-((time-8)**1.5)),ceil(255-((time-8)**1.5))
time = 1
ignorehitpause = 1
under = 1

[State 9010, EnvColor]
type = BGPalFX
trigger1 = time = [32,40]
mul = 128+((time-31)*16),128+((time-31)*16),128+((time-31)*16)
time = 1
ignorehitpause = 1

[State 9010, DestroySelf]
type = DestroySelf
trigger1 = RoundState != 3
 
;-------------------------------------------------------------------
;ファイネストKO 
[Statedef 9020]
ctrl = 0
anim = 20000

[State 9000, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 15,0

[State 9020, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 30,4

[State 9020, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 15,2

[State 9000, PlaySnd]
type = PlaySnd
trigger1 = time = 34
value = 15,3

[State 9020, Assert]
type = AssertSpecial
trigger1 = Time < 54
flag = NoBarDisplay
flag2 = NoMusic

[State 9020, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 54
flag = NoBG
flag2 = NoFG
flag3 = GlobalNoShadow

[State 9020, Burn sparks]
type = Explod
trigger1 = Time = 0
anim = 8660
postype = Left
pos = 0,0
ownpal = 1
bindtime = -1
sprpriority = -99
scale = .5,.5
supermovetime = 999999
pausemovetime = 999999

[State 9020, DestroySelf]
type = DestroySelf
trigger1 = RoundState != 3
  
;---------------------------------------------------------------------------
; 炎エフェクト 
;------------------------
[Statedef 8300]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 18600, PosSet]
type = PosSet
trigger1 = 1
x = enemynear,pos x
y = enemynear,pos y

[State -3, Burst]
type = VarSet
trigger1 = Time = 0
var(1) = enemynear,const(size.mid.pos.x)

[State -3, Burst]
type = VarSet
trigger1 = Time = 0
var(2) = enemynear,const(size.mid.pos.y)

[State -3, Burst]
type = VarSet
trigger1 = enemynear,StateNo = 5000
trigger2 = enemynear,StateNo = 5010
var(0) = 0

[State -3, Burst]
type = VarSet
trigger1 = enemynear,StateNo = 5020
trigger2 = enemynear,StateNo = 5030
trigger3 = enemynear,StateNo = 5035
trigger4 = enemynear,StateNo = 5050
trigger5 = enemynear,StateNo = 5070
var(0) = 1

[State 4110, RemoveExplod]
type = VarSet
trigger1 = enemynear,StateNo = 5100
var(0) = 2

[State -3, Burn sparks1]
type = Explod
trigger1 = Time = 0
anim = 8302+(IsHelper(8330))*30
id = 8300
postype = p1
scale = .5,.5
pos = var(1)-20,var(2)+10
ownpal = 1
bindtime = -1
removetime = 9999999
ignorehitpause = 1
sprpriority = 1

[State 1000, 0]
type = ModifyExplod
trigger1 = Time > 0
ID = 8300
postype = p1
pos = var(1)-20,var(2)+10

[State -3, Burn sparks2]
type = Explod
trigger1 = Time = 0
anim = 8302+(IsHelper(8330))*30
id = 8301
postype = p1
scale = .5,.5
pos = var(1),var(2)-5
ownpal = 1
bindtime = -1
removetime = 9999999
ignorehitpause = 1
sprpriority = 1

[State 1000, 0]
type = ModifyExplod
trigger1 = Time > 0
ID = 8301
postype = p1
pos = var(1),var(2)-5

[State -3, Burn sparks3]
type = Explod
trigger1 = Time = 0
anim = 8300+(IsHelper(8330))*30
id = 8302
postype = p1
scale = .5,.5
pos = ifelse(var(0)=1,var(1)+35,var(1)+5),ifelse(var(0)=1,var(2)+10,ifelse((var(2)+35>0),5,var(2))+35)
ownpal = 1
bindtime = -1
removetime = 9999999
ignorehitpause = 1
sprpriority = 1

[State 1000, 0]
type = ModifyExplod
trigger1 = Time > 0
ID = 8302
postype = p1
pos = ifelse(var(0)=1,var(1)+35,var(1)+5),ifelse(var(0)=1,var(2)+10,ifelse((var(2)+35>0),5,var(2))+35)

[State -3, Burn sparks4]
type = Explod
trigger1 = Time = 0
anim = 8300+(IsHelper(8330))*30
id = 8303
postype = p1
scale = .5,.5
pos = ifelse(var(0)=1,var(1)+20,var(1)-15),ifelse(var(0)=1,var(2)+5,ifelse((var(2)+35>0),5,var(2))+35)
ownpal = 1
bindtime = -1
removetime = 9999999
ignorehitpause = 1
sprpriority = 1

[State 1000, 0]
type = ModifyExplod
trigger1 = Time > 0
ID = 8303
postype = p1
pos = ifelse(var(0)=1,var(1)+20,var(1)-15),ifelse(var(0)=1,var(2)+5,ifelse((var(2)+35>0),5,var(2))+35)

[State 4110, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 90
trigger2 = enemynear,StateNo != [5000,5120]
trigger3 = enemynear,StateNo = 5100
trigger4 = enemynear,StateNo = 5040
trigger5 = enemynear,MoveType = H && Root,StateNo = 3060
trigger5 = Root,P1name = "cvsmai" || Root,P1name = "cvsiori"
trigger6 = enemynear,StateNo != [5000,5999]
trigger7 = enemynear,StateNo = [5200,5210]
trigger8 = Root,NumTarget(3000)
trigger8 = IsHelper(8300) && Root,P1name = "Raiden"
trigger9 = Root,NumTarget(1000)
trigger9 = IsHelper(8330) && Root,P1name = "Raiden"
id = 8300

[State 4110, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 90
trigger2 = enemynear,StateNo != [5000,5120]
trigger3 = enemynear,StateNo = 5100
trigger4 = enemynear,StateNo = 5040
trigger5 = enemynear,MoveType = H && Root,StateNo = 3060
trigger5 = Root,P1name = "cvsmai" || Root,P1name = "cvsiori"
trigger6 = enemynear,StateNo != [5000,5999]
trigger7 = enemynear,StateNo = [5200,5210]
trigger8 = Root,NumTarget(3000)
trigger8 = IsHelper(8300) && Root,P1name = "Raiden"
trigger9 = Root,NumTarget(1000)
trigger9 = IsHelper(8330) && Root,P1name = "Raiden"
id = 8301

[State 4110, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 90
trigger2 = enemynear,StateNo != [5000,5120]
trigger3 = enemynear,StateNo = 5100
trigger4 = enemynear,StateNo = 5040
trigger5 = enemynear,MoveType = H && Root,StateNo = 3060
trigger5 = Root,P1name = "cvsmai" || Root,P1name = "cvsiori"
trigger6 = enemynear,StateNo != [5000,5999]
trigger7 = enemynear,StateNo = [5200,5210]
trigger8 = Root,NumTarget(3000)
trigger8 = IsHelper(8300) && Root,P1name = "Raiden"
trigger9 = Root,NumTarget(1000)
trigger9 = IsHelper(8330) && Root,P1name = "Raiden"
id = 8302

[State 4110, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 90
trigger2 = enemynear,StateNo != [5000,5120]
trigger3 = enemynear,StateNo = 5100
trigger4 = enemynear,StateNo = 5040
trigger5 = enemynear,MoveType = H && Root,StateNo = 3060
trigger5 = Root,P1name = "cvsmai" || Root,P1name = "cvsiori"
trigger6 = enemynear,StateNo != [5000,5999]
trigger7 = enemynear,StateNo = [5200,5210]
trigger8 = Root,NumTarget(3000)
trigger8 = IsHelper(8300) && Root,P1name = "Raiden"
trigger9 = Root,NumTarget(1000)
trigger9 = IsHelper(8330) && Root,P1name = "Raiden"
id = 8303

[State -3, Burn sparks1]
type = Explod
trigger1 = Time = 90
trigger2 = enemynear,StateNo != [5000,5120]
trigger3 = enemynear,StateNo = 5100
trigger4 = enemynear,StateNo = 5040
trigger5 = enemynear,StateNo != [5000,5999]
trigger6 = enemynear,StateNo = [5200,5210]
anim = 8303+(IsHelper(8330))*30
id = 8305
postype = p2
scale = .5,.5
pos = ifelse(var(0)=2,0,var(1)-20),ifelse(var(0)=2,-10,var(2)+10)
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 1
persistent = 0

[State 1000, 0]
type = ModifyExplod
trigger1 = 1
ID = 8305
pos = ifelse(var(0)=2,0,var(1)-20),ifelse(var(0)=2,-10,var(2)+10)

[State -3, Burn sparks2]
type = Explod
trigger1 = Time = 90
trigger2 = enemynear,StateNo != [5000,5120]
trigger3 = enemynear,StateNo = 5100
trigger4 = enemynear,StateNo = 5040
trigger5 = enemynear,StateNo != [5000,5999]
trigger6 = enemynear,StateNo = [5200,5210]
anim = 8303+(IsHelper(8330))*30
id = 8306
postype = p2
scale = .5,.5
pos = ifelse(var(0)=2,-25,var(1)-5),ifelse(var(0)=2,-15,var(2))
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 1
persistent = 0

[State 1000, 0]
type = ModifyExplod
trigger1 = 1
ID = 8306
pos = ifelse(var(0)=2,-25,var(1)-5),ifelse(var(0)=2,-15,var(2))

[State -3, Burn sparks3]
type = Explod
trigger1 = Time = 90
trigger2 = enemynear,StateNo != [5000,5120]
trigger3 = enemynear,StateNo = 5100
trigger4 = enemynear,StateNo = 5040
trigger5 = enemynear,StateNo != [5000,5999]
trigger6 = enemynear,StateNo = [5200,5210]
anim = 8301+(IsHelper(8330))*30
id = 8307
postype = p2
scale = .5,.5
pos = ifelse(var(0)=2,25,ifelse(var(0)=1,var(1)+35,var(1)+5)),ifelse(var(0)=2,-15,ifelse((var(2)+35>0),5,var(2))+35)
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 1
persistent = 0

[State 1000, 0]
type = ModifyExplod
trigger1 = 1
ID = 2707
pos = ifelse(var(0)=2,25,ifelse(var(0)=1,var(1)+35,var(1)+5)),ifelse(var(0)=2,-15,ifelse((var(2)+35>0),5,var(2))+35)

[State -3, Burn sparks4]
type = Explod
trigger1 = Time = 90
trigger2 = enemynear,StateNo != [5000,5120]
trigger3 = enemynear,StateNo = 5100
trigger4 = enemynear,StateNo = 5040
trigger5 = enemynear,StateNo != [5000,5999]
trigger6 = enemynear,StateNo = [5200,5210]
anim = 8301+(IsHelper(8330))*30
id = 8308
postype = p2
scale = .5,.5
pos = ifelse(var(0)=2,25,ifelse(var(0)=1,var(1)+20,var(1)-15)),ifelse(var(0)=2,-15,ifelse((var(2)+35>0),5,var(2))+35)
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 1
persistent = 0

[State 1000, 0]
type = ModifyExplod
trigger1 = 1
ID = 8308
pos = ifelse(var(0)=2,25,ifelse(var(0)=1,var(1)+20,var(1)-15)),ifelse(var(0)=2,-15,ifelse((var(2)+35>0),5,var(2))+35)

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time = 90
trigger2 = enemynear,StateNo != [5000,5120]
trigger3 = enemynear,StateNo = 5100
trigger4 = enemynear,StateNo = 5040
trigger5 = enemynear,MoveType = H && Root,StateNo = 3060
trigger5 = Root,P1name = "cvsmai" || Root,P1name = "cvsiori"
trigger6 = enemynear,StateNo != [5000,5999]
trigger7 = enemynear,StateNo = [5200,5210]
trigger8 = Root,NumTarget(3000)
trigger8 = IsHelper(8300) && Root,P1name = "Raiden"
trigger9 = Root,NumTarget(1000)
trigger9 = IsHelper(8330) && Root,P1name = "Raiden"
  
;===========================================================================
;メッセージアイコン 
;---------------------------------------------------------------------------
;"BLOCKING"
;------------------------ 1段目
[Statedef 6000]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 0
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 2000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 2段目
[Statedef 6010]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 1
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 2000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 3段目
[Statedef 6020]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 2
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 2000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 4段目
[Statedef 6030]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 3
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 2000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200

;---------------------------------------------------------------------------
;"COUNTER HIT"
;------------------------ 1段目
[Statedef 6001]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 0
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 1500+fvar(11)*2000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 2段目
[Statedef 6011]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 1
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 1500+fvar(11)*2000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 3段目
[Statedef 6021]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 2
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 1500+fvar(11)*2000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 4段目
[Statedef 6031]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 3
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 1500+fvar(11)*2000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200

;---------------------------------------------------------------------------
;"FIRST ATTACK"
;------------------------ 1段目
[Statedef 6002]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 0
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 5000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 2段目
[Statedef 6012]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 1
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 5000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 3段目
[Statedef 6022]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 2
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 5000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 4段目
[Statedef 6032]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 3
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 5000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200

;---------------------------------------------------------------------------
;"GUARD CANCEL"（攻撃）
;------------------------ 1段目
[Statedef 6003]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 0
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 1000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 2段目
[Statedef 6013]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 1
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 1000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 3段目
[Statedef 6023]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 2
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 1000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 4段目
[Statedef 6033]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 3
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 1000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;---------------------------------------------------------------------------
;"GUARD CANCEL"（前方移動）
;------------------------ 1段目
[Statedef 6004]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 0
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 500
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 2段目
[Statedef 6014]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 1
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 500
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 3段目
[Statedef 6024]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 2
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 500
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 4段目
[Statedef 6034]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 3
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 500
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;---------------------------------------------------------------------------
;"GUARD CANCEL"（後方移動）
;------------------------ 1段目
[Statedef 6005]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 0
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = -1000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 2段目
[Statedef 6015]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 1
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = -1000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 3段目
[Statedef 6025]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 2
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = -1000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 4段目
[Statedef 6035]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 3
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = -1000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200

;---------------------------------------------------------------------------
;"JUST DEFENDED"
;------------------------ 1段目
[Statedef 6006]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 0
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 2段目
[Statedef 6016]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 1
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 3段目
[Statedef 6026]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 2
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 4段目
[Statedef 6036]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 3
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200

;---------------------------------------------------------------------------
;"TECH BOUNS"
;------------------------ 1段目
[Statedef 6007]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 0
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 2段目
[Statedef 6017]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 1
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 3段目
[Statedef 6027]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 2
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 4段目
[Statedef 6037]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 3
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200

;---------------------------------------------------------------------------
;"REVERSAL"
;------------------------ 1段目
[Statedef 6009]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 0
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 2000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 2段目
[Statedef 6019]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 1
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 2000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 3段目
[Statedef 6029]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 2
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 2000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 4段目
[Statedef 6039]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 3
[State -2,GP]
type = ParentVarAdd
trigger1 = time = 0
fvar(38) = 2000
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200

;---------------------------------------------------------------------------
;"FINISH"
;------------------------ 1段目
[Statedef 6100]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 0
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 2段目
[Statedef 6110]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 1
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 3段目
[Statedef 6120]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 2
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 4段目
[Statedef 6130]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 3
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;---------------------------------------------------------------------------
;"SPECIAL MOVE FINISH"
;------------------------ 1段目
[Statedef 6101]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 0
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 2段目
[Statedef 6111]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 1
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 3段目
[Statedef 6121]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 2
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 4段目
[Statedef 6131]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 3
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;---------------------------------------------------------------------------
;"ORIGINAL COMBO FINISH"
;------------------------ 1段目
[Statedef 6102]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 0
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 2段目
[Statedef 6112]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 1
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 3段目
[Statedef 6122]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 2
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 4段目
[Statedef 6132]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 3
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;---------------------------------------------------------------------------
;"SUPER COMBO FINISH"
;------------------------ 1段目
[Statedef 6103]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 0
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 2段目
[Statedef 6113]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 1
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 3段目
[Statedef 6123]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 2
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 4段目
[Statedef 6133]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 3
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;---------------------------------------------------------------------------
;"SUPER SPECIAL MOVE FINISH"
;------------------------ 1段目
[Statedef 6104]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 0
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 2段目
[Statedef 6114]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 1
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 3段目
[Statedef 6124]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 2
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 4段目
[Statedef 6134]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 3
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;---------------------------------------------------------------------------
;"FINEST KO FINISH"
;------------------------ 1段目
[Statedef 6105]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 0
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 2段目
[Statedef 6115]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 1
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 3段目
[Statedef 6125]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 2
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200
;------------------------ 4段目
[Statedef 6135]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
[State -2,2]
type = VarSet
trigger1 = time = 0
var(1) = 3
[STate 1115,1]
type = ChangeState
trigger1 = Time = 0
value = 6200

;---------------------------------------------------------------------------
; 汎用
;---------------------------------------------------------------------------
[Statedef 6200]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 4110, Explod]
type = Explod
trigger1 = time = 1 && teamside = 1
anim = PrevStateNo-var(1)*10
id = 6200
scale = .5,.5
pos = -137,94+(var(1))*19
postype = Left
bindtime = 1
facing = 1
ontop = 1
persistent = 0
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State 1000, 0]
type = ModifyExplod
trigger1 = time = 2 && teamside = 1
ID = 6200
pos = -34,94+(var(1))*19
postype = Left
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 3 && teamside = 1
ID = 6200
pos = -15,94+(var(1))*19
postype = Left
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 4 && teamside = 1
ID = 6200
pos = -4,94+(var(1))*19
postype = Left
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 5 && teamside = 1
ID = 6200
pos = 22,94+(var(1))*19
postype = Left
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 6 && teamside = 1
ID = 6200
pos = 41,94+(var(1))*19
postype = Left
[State 1000, 0]
type = ModifyExplod
trigger1 = time >= 7 && teamside = 1
ID = 6200
pos = 59,94+(var(1))*19
postype = Left

[State 4110, Explod]
type = Explod
trigger1 = time = 1 && teamside = 2
anim = PrevStateNo+50-var(1)*10
id = 6200
scale = .5,.5
pos = 52,94+(var(1))*19
postype = Right
facing = 1
bindtime = 1
ontop = 1
persistent = 0
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State 1000, 0]
type = ModifyExplod
trigger1 = time = 2 && teamside = 2
ID = 6200
pos = 34,94+(var(1))*19
postype = Right
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 3 && teamside = 2
ID = 6200
pos = 15,94+(var(1))*19
postype = Right
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 4 && teamside = 2
ID = 6200
pos = 4,94+(var(1))*19
postype = Right
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 5 && teamside = 2
ID = 6200
pos = -22,94+(var(1))*19
postype = Right
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 6 && teamside = 2
ID = 6200
pos = -41,94+(var(1))*19
postype = Right
[State 1000, 0]
type = ModifyExplod
trigger1 = time >= 7 && teamside = 2
ID = 6200
pos = -59,94+(var(1))*19
postype = Right

[State 1000, 0]
type = ModifyExplod
trigger1 = time = 91
ID = 6200
scale = .5,.4
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 92
ID = 6200
scale = .5,.3
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 93
ID = 6200
scale = .5,.2
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 94
ID = 6200
scale = .5,.1
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 95
ID = 6200
scale = .5,.0
[State 1000, 0]
type = ModifyExplod
trigger1 = time = 96
ID = 6200
scale = .5,.5

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = time > 110
ID = 6200

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = time > 110
 
;===================================================================
;グルーヴゲージ 
;===================================================================

;-------------------------------------------------------------------
;グルーヴセレクトアイコン
[Statedef 20001]
ctrl = 0
anim = 20000

[State 20000, VarSet]
type = ParentVarSet
trigger1 = PrevStateNo != 20001
trigger1 = Time = 0
var(30) = 1+random%6

[State 20000, VarSet]
type = ParentVarAdd
trigger1 = Time = 0
var(30) = Parent,command="down"-Parent,command="up"

[State 20000, VarSet]
type = ParentVarSet
trigger1 = Time = 0 && (Parent,command="down" || Parent,command="up")
var(43) = 0

[State 20000, VarSet]
type = ParentVarSet
trigger1 = Time = 0
trigger1 = Parent,command="EX"
var(43) = ifelse((Root,var(43)),0,1)

[State 20000, VarSet]
type = ParentVarSet
trigger1 = Time = 0
trigger1 = Parent,var(30) < 1
var(30) = 6

[State 20000, VarSet]
type = ParentVarSet
trigger1 = Time = 0
trigger1 = Parent,var(30) > 6
var(30) = 1

[state 190, groove]
type = helper
trigger1 = !Numhelper(20010)
ID = 20010
stateno = 20010
postype = P1
scale = .5,.5
pos = 0,-10
name = "Up-Arrow"
ontop = 1
bindtime = -1
keyctrl = 1
ownpal = 1
facing = 1+(teamside = 2)*-2

[state 190, groove]
type = helper
trigger1 = !Numhelper(20011)
ID = 20011
stateno = 20015
postype = P1
scale = .5,.5
pos = 0,10
name = "Down-Arrow"
ontop = 1
bindtime = -1
keyctrl = 1
ownpal = 1
facing = 1+(teamside = 2)*-2

[State 20000, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 0
ID = 20000

[State 20000, Explod]
type = Explod
trigger1 = Time = 0
Anim = 20000+ifelse((Parent,var(43)),7,(Parent,var(30)))
pos = 0, 0
postype = p1
ownpal = 1
bindtime = -1
pausemovetime = -1
supermovetime = -1
ontop = 1
ID = 20000
scale = .5,.5

[State 20000, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate > 1
trigger2 = Parent,command="a" || Parent,command="b" || Parent,command="c" || Parent,command="x" || Parent,command="y" || Parent,command="z"
ID = 20000

[State 206000, PlaySnd]
type = PlaySnd
trigger1 = Parent,command="down" || Parent,command="up" || Parent,command="EX"
trigger1 = time > 7
value = 10,0
channel = 10

[State 20000, PlaySnd]
type = PlaySnd
trigger1 = roundstate > 1
trigger2 = Parent,command="a" || Parent,command="b" || Parent,command="c" || Parent,command="x" || Parent,command="y" || Parent,command="z"
value = 10,1
channel = 10

[State 20000, ChangeState]
type = ChangeState
trigger1 = Parent,command="down" || Parent,command="up" || Parent,command="EX"
trigger1 = time > 7
value = 20001

[State 20000, DestroySelf]
type = DestroySelf
trigger1 = roundstate > 1
trigger2 = Parent,command="a" || Parent,command="b" || Parent,command="c" || Parent,command="x" || Parent,command="y" || Parent,command="z"

;------------------------ 上矢印
[Statedef 20010]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 4110, PalFX]
type = PalFX
trigger1= Time = 0
add = 0,0,0
Time = 1

[State 4110, Varset]
type = Varset
trigger1= NumExplod(20011)!
var(1) = 0

[State 4110, Explod]
type = Explod
trigger1 = NumExplod(20010)!
anim = 20010
id = 20010
scale = .5,.5
pos = 0,0
postype = P1
sprpriority = 5
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1

[State 4110, Explod]
type = Explod
trigger1 = NumExplod(20011)!
trigger1 = Root,command = "holdup" || Root,command = "EX"
anim = 20011
id = 20011
scale = .5,.5
pos = 0,0
vel = 0,-.2
postype = P1
sprpriority = 6
bindtime = 1
removetime = 30
ownpal = 0
ontop = 1

[State 4110, Varadd]
type = Varadd
trigger1= NumExplod(20011)
var(1) = -9

[State 4110, PalFX]
type = PalFX
trigger1= NumExplod(20011)
add = Var(1)-1,Var(1)-1,Var(1)-1
Time = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,NumHelper(20000)!
id = 20010

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,NumHelper(20000)!
id = 20011

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Root,NumHelper(20000)!

;------------------------ 下矢印
[Statedef 20015]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 4110, PalFX]
type = PalFX
trigger1= Time = 0
add = 0,0,0
Time = 1

[State 4110, Varset]
type = Varset
trigger1= NumExplod(20011)!
var(1) = 0

[State 4110, Explod]
type = Explod
trigger1 = NumExplod(20010)!
anim = 20015
id = 20010
scale = .5,.5
pos = 0,0
postype = P1
sprpriority = 5
bindtime = -1
removetime = -1
ownpal = 1
ontop = 1

[State 4110, Explod]
type = Explod
trigger1 = NumExplod(20011)!
trigger1 = Root,command = "holddown" || Root,command = "EX"
anim = 20016
id = 20011
scale = .5,.5
pos = 0,0
vel = 0,.2
postype = P1
sprpriority = 6
bindtime = 1
removetime = 30
ownpal = 0
ontop = 1

[State 4110, Varadd]
type = Varadd
trigger1= NumExplod(20011)
var(1) = -9

[State 4110, PalFX]
type = PalFX
trigger1= NumExplod(20011)
add = Var(1)-1,Var(1)-1,Var(1)-1
Time = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,NumHelper(20000)!
id = 20010

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,NumHelper(20000)!
id = 20011

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Root,NumHelper(20000)!

;-------------------------------------------------------------------
; 音
;------------------------
[Statedef 29000]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 20,5+(IsHelper(19001))*2
persistent = 0

[State 7602,DestroySelf]
type = DestroySelf
trigger1= Time = 0
	 
;---------------------------------------------------------------------
;Cグルーヴ 
;------------------------
[Statedef 21000]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0
ownpal = 1

[State 5900, 1]
type = ParentVarSet
trigger1 = 1
var(30) = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21010
id = 21010
pos = 140,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21015
id = 21010
pos = -140,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 21010
scale = 1,1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 21010
scale = 0,0

;------------------------ Lv.1
[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21020
id = 21020
pos = 140,227
scale = 1,5
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21025
id = 21020
pos = -140,227
scale = 1,5
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power <1000
Id = 21020
scale = (Power/1000.0),5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >=1000
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 21020
scale = 0,5
ignorehitpause = 1

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21030
id = 21030
pos = 140,227
scale = 1,5
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21035
id = 21030
pos = -140,227
scale = 1,5
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >=1000
Id = 21030
scale = 1.025,5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Power <1000
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 21030
scale = 0,5

;------------------------ Lv.2
[State -2, Explod(P1-Lv.2)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21020
id = 21021
pos = 98,225
scale = 1,7
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2-Lv.2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21025
id = 21021
pos = -98,225
scale = 1,7
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >=1000
trigger1 = Power <2000
Id = 21021
scale = ((Power-1000)/1000.0),7
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >=2000
trigger2 = Power <1000
trigger3 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 21021
scale = 0,7
ignorehitpause = 1

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21030
id = 21031
pos = 97,225
scale = 1,7
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21035
id = 21031
pos = -97,225
scale = 1,7
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >=2000
Id = 21031
scale = 1.025,7
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Power <2000
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 21031
scale = 0,7
ignorehitpause = 1

;------------------------ Lv.3
[State -2, Explod(P1-Lv.3)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21020
id = 21022
pos = 54,223
scale = 1,8
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2-Lv.3)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21025
id = 21022
pos = -54,223
scale = 1,8
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >=2000
trigger1 = Power <3000
Id = 21022
scale = ((Power-2000)/1000.0),8
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >=3000
trigger2 = Power <2000
trigger3 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 21022
scale = 0,8
ignorehitpause = 1

[State -2, Explod(P1-Lv.3)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21030
id = 21032
pos = 54,223
scale = 1,8
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1-Lv.3)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21035
id = 21032
pos = -54,223
scale = 1,8
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >=3000
Id = 21032
scale = 1.025,8
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Power <3000
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 21032
scale = 0,8
ignorehitpause = 1

;------------------------ 枠
[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21000
id = 21000
pos = 140,230
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21005
id = 21000
pos = -140,230
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 21000
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 21000
scale = 0,0

;------------------------ レベル表記
[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21041
id = 21041
pos = 31,223
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21051
id = 21041
pos = -31,223
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = power = [1000,2000)
Id = 21041
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = power != [1000,2000)
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
id = 21041
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21042
id = 21042
pos = 31,223
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21052
id = 21042
pos = -31,223
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = power = [2000,3000)
Id = 21042
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = power != [2000,3000)
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
id = 21042
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 21043
id = 21043
pos = 31,223
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1-Lv.1)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 21053
id = 21043
pos = -31,223
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = power >= 3000
Id = 21043
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = power < 3000
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
id = 21043
scale = 0,0
ignorehitpause = 1

;------------------------ グルーヴ表記
[State -2, Explod(C-GROOVE)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = Ifelse((Root,var(43)),27001,21001)
id = 21001
pos = 123,221
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

;------------------------ グルーヴ表記
[State -2, Explod(C-GROOVE)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = Ifelse((Root,var(43)),27001,21001)
id = 21001
pos = -123,221
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 21001
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 21001
scale = 0,0
ignorehitpause = 1

;------------------------ 音
[State -3, Burst]
type = VarSet
trigger1 = 1
var(1) = floor(power/1000)

[State -3,Super]
type = Helper
trigger1 = RoundState = 2
trigger1 = Var(1) != Var(2)
trigger1 = Var(1) > Var(2)
id = 29000
pos = 0,0
postype = P1
stateno = 29000
pausemovetime = 0
Supermovetime = 0

[State -3, Burst]
type = VarSet
trigger1 = 1
var(2) = floor(power/1000)

;------------------------ 消去
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,Numhelper(20000)
trigger2 = RoundNo = 1 && RoundState = 0

[State 1150, ChangeState]
type = DestroySelf
trigger1 = Root,Numhelper(20000)
trigger2 = RoundNo = 1 && RoundState = 0
 
;---------------------------------------------------------------------
;Aグルーヴ 
;------------------------
[Statedef 22000]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0
ownpal = 1

[State 5900, 1]
type = ParentVarSet
trigger1 = 1
var(30) = 2

[State -2, 1]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 22010
id = 22010
pos = 140,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 22015
id = 22010
pos = -140,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 22010
scale = 1,1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 22010
scale = 0,0

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 22020
id = 22020
pos = 140,230
scale = .5,.5
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 22021
id = 22021
pos = 140,230
scale = .5,.5
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 22022
id = 22022
pos = 77,227
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 22025
id = 22020
pos = -140,230
scale = .5,.5
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 22026
id = 22021
pos = -140,230
scale = .5,.5
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 22027
id = 22022
pos = -77,227
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 22000
id = 22000
pos = 140,230
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 22005
id = 22000
pos = -140,230
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 22000
scale = .5,.5

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 22000
scale = 0,0

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 22030
id = 22030
pos = 31,228
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 22030
id = 22030
pos = -31,228
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(37) >=3000
Id = 22030
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(37) <3000
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 22030
scale = 0,0
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(22020)
trigger1 = Root,fvar(37) <=1500
Id = 22020
scale = ((Root,fvar(37))/3000.0),.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(22020)
trigger1 = Root,fvar(37) >1500
Id = 22020
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 22020
scale = 0,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(22021)
trigger1 = Root,fvar(37) > 95
trigger1 = Root,fvar(37) <=1500
Id = 22021
scale = ((Root,fvar(37))/3000.0),.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(22021)
trigger1 = Root,fvar(37) >1500
Id = 22021
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(22021)
trigger1 = Root,fvar(37) <= 95
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 22021
scale = 0,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(22022)
trigger1 = Root,fvar(37) >1500
Id = 22022
scale = (((Root,fvar(37))-1500)/1500.0),1
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(22022)
trigger1 = Root,fvar(37) <=1500
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 22022
scale = 0,1
ignorehitpause = 1

;------------------------ グルーヴ表記
[State -2, Explod(A-GROOVE)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = Ifelse((Root,var(43)),27001,22001)
id = 22001
pos = 123,221
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

;------------------------ グルーヴ表記
[State -2, Explod(A-GROOVE)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = Ifelse((Root,var(43)),27001,22001)
id = 22001
pos = -123,221
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 22001
scale = .5,.5

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 22001
scale = 0,0

[State 10000, Varadd(F3)]
type = ParentVaradd
trigger1 = Root,fvar(8)
fvar(37)= -8.15

[State 1000, 0]
type = PowerAdd
trigger1 = Root,fvar(8) && Root,MoveType = H
trigger1 = Root,fvar(37) >1500
value = 1500

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(8) && Root,MoveType = H
trigger2 = Root,fvar(37) <=0
fvar(8) = 0

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(8) && Root,MoveType = H
trigger1 = Root,fvar(37) <=0
fvar(37) = 0

[State -3, Burst]
type = VarSet
trigger1 = Root,fvar(8)
var(1) = 0

[State -3, Burst]
type = VarSet
trigger1 = Root,fvar(8)
var(2) = 0

[State -3, Burst]
type = VarSet
trigger1 = Root,fvar(8)!
var(1) = floor((Root,fvar(37))/1500)

[State -3,Super]
type = Helper
trigger1 = RoundState = 2
trigger1 = Var(1) != Var(2)
trigger1 = Var(1) > Var(2)
id = 29000
pos = 0,0
postype = P1
stateno = 29000

[State -3, Burst]
type = VarSet
trigger1 = Root,fvar(8)!
var(2) = floor((Root,fvar(37))/1500)

[State -2, 1]
type = PalFX
triggerall = (GameTime%3)=0
trigger1 = Root,fvar(37) >=3000
time = 1
add = 256,256,256
ignorehitpause = 1

;------------------------ 消去
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,Numhelper(20000)
trigger2 = RoundNo = 1 && RoundState = 0

[State 1150, ChangeState]
type = DestroySelf
trigger1 = Root,Numhelper(20000)
trigger2 = RoundNo = 1 && RoundState = 0
 
;---------------------------------------------------------------------
;Pグルーヴ 
;------------------------
[Statedef 23000]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0
ownpal = 1

[State 5900, 1]
type = ParentVarSet
trigger1 = 1
var(30) = 3

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 23010
id = 23010
pos = 140,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 23015
id = 23010
pos = -140,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 23010
scale = 1,1
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 23010
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 23020
id = 23020
pos = 140,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 23025
id = 23020
pos = -140,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(23020)
Id = 23020
scale = (Power/3000.0),1
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 23020
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 23021
id = 23021
pos = 57,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 23026
id = 23021
pos = -57,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >= 1980
Id = 23021
scale = ((Power-1980)/1020.0),1
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Power < 2004
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 23021
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 23022
id = 23022
pos = 33,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 23027
id = 23022
pos = -33,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >= 2548
Id = 23022
scale = ((Power-2548)/452.0),1
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Power < 2548
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 23022
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 23030
id = 23030
pos = 140,230
postype = Left
scale = 1,1
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 23035
id = 23030
pos = -140,230
postype = Right
scale = 1,1
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >= 3000
Id = 23030
scale = 1,1
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Power < 3000
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 23030
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 23000
id = 23000
pos = 140,230
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 23005
id = 23000
pos = -140,230
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 23000
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 23000
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 23040
id = 23040
pos = 34,223
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 23040
id = 23040
pos = -34,223
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >= 3000
Id = 23040
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Power < 3000
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 23040
scale = 0,0
ignorehitpause = 1

[State -3, Burst]
type = VarSet
trigger1 = 1
var(1) = floor(power/3000)

[State -3,Super]
type = Helper
trigger1 = RoundState = 2
trigger1 = Var(1) != Var(2)
trigger1 = Var(1) > Var(2)
id = 29000
pos = 0,0
postype = P1
stateno = 29000

[State -3, Burst]
type = VarSet
trigger1 = 1
var(2) = floor(power/3000)

;------------------------ グルーヴ表記
[State -2, Explod(A-GROOVE)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = Ifelse((Root,var(43)),27001,23001)
id = 23001
pos = 123,221
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

;------------------------ グルーヴ表記
[State -2, Explod(A-GROOVE)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = Ifelse((Root,var(43)),27001,23001)
id = 23001
pos = -123,221
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 23001
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 23001
scale = 0,0
ignorehitpause = 1

;------------------------ 消去
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,Numhelper(20000)
trigger2 = RoundNo = 1 && RoundState = 0

[State 1150, ChangeState]
type = DestroySelf
trigger1 = Root,Numhelper(20000)
trigger2 = RoundNo = 1 && RoundState = 0
 
;---------------------------------------------------------------------
;Sグルーヴ（ノーマル） 
;------------------------
[Statedef 24000]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0
ownpal = 1

[State 4000,ChangeState]
type = ChangeState
trigger1 = time = 0 && floor(Root,var(52)/10%10)=1
value = 24100

[State 5900, 1]
type = ParentVarSet
trigger1 = 1
var(30) = 4

[State -2, 1]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0
ignorehitpause = 1

[State -2, 1]
type = PalFX
trigger1 = (100*parent,life/parent,const(data.life))<=30
trigger1 = (Time%3)=0
time = 1
add = 144,144,144
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 24010
id = 24010
pos = 137,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 24015
id = 24010
pos = -137,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(24010)
Id = 24010
scale = 1,1
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 24010
scale = 0,1
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 24020
id = 24020
pos = 137,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 24025
id = 24020
pos = -137,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(24020)
Id = 24020
scale = ((Root,fvar(37)))/100.0,1
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 24020
scale = 0,1
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 24000
id = 24000
pos = 137,230
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 24005
id = 24000
pos = -137,230
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(24000)
Id = 24000
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 24000
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 24030
id = 24030
pos = 27,220
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 24030
id = 24030
pos = -27,220
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)!
Id = 24030
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 24030
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 24031
id = 24031
pos = 27,220
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 24031
id = 24031
pos = -27,220
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)
Id = 24031
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)!
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 24031
scale = 0,0
ignorehitpause = 1

;------------------------ グルーヴ表記
[State -2, Explod(A-GROOVE)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = Ifelse((Root,var(43)),27001,24001)
id = 24001
pos = 123,221
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

;------------------------ グルーヴ表記
[State -2, Explod(A-GROOVE)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = Ifelse((Root,var(43)),27001,24001)
id = 24001
pos = -123,221
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(24001)
Id = 24001
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 24001
scale = 0,0
ignorehitpause = 1

[State 4100,Varadd]
type = ParentVarSet
trigger1 = (Root,fvar(37) >=100) && Root,fvar(8)!
fvar(37) = 100

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(37) =100
fvar(8) = 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Root,fvar(37) = 100
trigger1 = Root,fvar(8) = 1
value = 20,4

[State 10000, Varadd(F3)]
type = ParentVaradd
trigger1 = Root,fvar(8) = 1
fvar(37)= -.136425

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(37) <=0
fvar(8) = 0

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(37) <=0
fvar(37) = 0

;------------------------ 消去
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,Numhelper(20000)
trigger2 = RoundNo = 1 && RoundState = 0

[State 1150, ChangeState]
type = DestroySelf
trigger1 = Root,Numhelper(20000)
trigger2 = RoundNo = 1 && RoundState = 0
	 
;---------------------------------------------------------------------
;Sグルーヴ（98UM風） 
;------------------------
[Statedef 24100]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0
ownpal = 1

[State 5900, 1]
type = ParentVarSet
trigger1 = 1
var(30) = 4

[State -2, 1]
type = PalFX
trigger1 = time = 0
time = 1
add = 0,0,0
ignorehitpause = 1

[State -2, 1]
type = PalFX
trigger1 = (100*parent,life/parent,const(data.life))<=30
trigger1 = (Time%3)=0
time = 1
add = 144,144,144
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 24010
id = 24010
pos = 137,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 24015
id = 24010
pos = -137,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(24010)
Id = 24010
scale = 1,1
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 24010
scale = 0,1
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 24020
id = 24020
pos = 125,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 24025
id = 24020
pos = -125,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(24020)
Id = 24020
scale = ((Root,fvar(37))/100)*.91,1
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 24020
scale = 0,1
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 24100
id = 24000
pos = 125,230
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 24105
id = 24000
pos = -125,230
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(24000)
Id = 24000
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 24000
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 24030
id = 24030
pos = 27,220
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 24030
id = 24030
pos = -27,220
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)!=1
Id = 24030
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)=1
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 24030
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 24031
id = 24031
pos = 27,220
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 24031
id = 24031
pos = -27,220
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)=1
Id = 24031
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)!=1
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 24031
scale = 0,0
ignorehitpause = 1

;------------------------ グルーヴ表記
[State -2, Explod(A-GROOVE)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = Ifelse((Root,var(43)),27001,24001)
id = 24001
pos = 123,221
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

;------------------------ グルーヴ表記
[State -2, Explod(A-GROOVE)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = Ifelse((Root,var(43)),27001,24001)
id = 24001
pos = -123,221
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(24001)
Id = 24001
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 24001
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25030
id = 25030
pos = 137,228
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25030
id = 25030
pos = -137,228
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25035
id = 25030
pos = 137,228
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25035
id = 25030
pos = -137,228
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = root,fvar(8)=-1
Id = 25030
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = root,fvar(8)!=-1
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 25030
scale = 0,0
ignorehitpause = 1

[State 4100,Varadd]
type = ParentVarSet
trigger1 = (Root,fvar(37) >=100) && Root,fvar(8)!=1
fvar(37) = 100

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(37) =100 && Root,StateNo != [4150,4160]
fvar(8) = -1

[State -3, Burst]
type = VarSet
trigger1 = Root,fvar(8)=0
var(1) = 0

[State -3, Burst]
type = VarSet
trigger1 = var(1) != -1
trigger1 = Root,fvar(8)=-1
var(1) = 1

[State -3,Super]
type = Helper
trigger1 = RoundState = 2
trigger1 = Var(1)=1
id = 29001
pos = 0,0
postype = P1
stateno = 29000

[State -3, Burst]
type = VarSet
trigger1 = var(1)=1
var(1) = -1

[State 10000, Varadd(F3)]
type = ParentVaradd
trigger1 = Root,fvar(8) = 1
fvar(37)= -.136425

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(37) <=0
fvar(8) = 0

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(37) <=0
fvar(37) = 0

;------------------------ 消去
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,Numhelper(20000)
trigger2 = RoundNo = 1 && RoundState = 0

[State 1150, ChangeState]
type = DestroySelf
trigger1 = Root,Numhelper(20000)
trigger2 = RoundNo = 1 && RoundState = 0
  
;---------------------------------------------------------------------
;Nグルーヴ 
;---------------------------------------------------------------------
;メインゲージ
[Statedef 25000]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0
ownpal = 1

[State 5900, 1]
type = ParentVarSet
trigger1 = 1
var(30) = 5

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25010
id = 25010
pos = 114,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25015
id = 25010
pos = -114,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(25010)
Id = 25010
scale = 1,1
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 25010
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25020
id = 25020
pos = 114,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25025
id = 25020
pos = -114,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(25020)
Id = 25020
scale = ((Root,fvar(37)))/72.0,1
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 25020
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25000
id = 25000
pos = 114,230
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25005
id = 25000
pos = -114,230
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(25000)
Id = 25000
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 25000
scale = 0,0
ignorehitpause = 1

;------------------------ グルーヴ表記
[State -2, Explod(A-GROOVE)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = Ifelse((Root,var(43)),27001,25001)
id = 25001
pos = 123,221
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

;------------------------ グルーヴ表記
[State -2, Explod(A-GROOVE)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = Ifelse((Root,var(43)),27001,25001)
id = 25001
pos = -123,221
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(25001)
Id = 25001
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 25001
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25040
id = 25040
pos = 30,221
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25040
id = 25040
pos = -30,221
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power < 3000
Id = 25040
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >= 3000
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 25040
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25041
id = 25041
pos = 30,221
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25041
id = 25041
pos = -30,221
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >= 3000
Id = 25041
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Power < 3000
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 25041
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25030
id = 25030
pos = 138,228
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25030
id = 25030
pos = -138,228
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25035
id = 25030
pos = 138,228
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25035
id = 25030
pos = -138,228
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >= 1000
Id = 25030
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Power < 1000
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 25030
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25030
id = 25031
pos = 130,228
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25030
id = 25031
pos = -130,228
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25035
id = 25031
pos = 130,228
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25035
id = 25031
pos = -130,228
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >= 2000
Id = 25031
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Power < 2000
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 25031
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25030
id = 25032
pos = 122,228
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25030
id = 25032
pos = -122,228
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25035
id = 25032
pos = 122,228
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25035
id = 25032
pos = -122,228
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Power >= 3000
Id = 25032
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Power < 3000
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 25032
scale = 0,0
ignorehitpause = 1

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Power < 3000
fvar(37) = (Power-(Ceil(Power/1000)*1000))*.072

[State -3,Varadd]
type = ParentVarSet
trigger1 = Power >= 3000
fvar(37) = 72

[State -3, Burst]
type = VarSet
trigger1 = 1
var(1) = floor(power/1000)

[State -3,Super]
type = Helper
trigger1 = RoundState = 2
trigger1 = Var(1) != Var(2)
trigger1 = Var(1) > Var(2)
id = 29001
pos = 0,0
postype = P1
stateno = 29000

[State -3, Burst]
type = VarSet
trigger1 = 1
var(2) = floor(power/1000)

;------------------------ 消去
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,Numhelper(20000)
trigger2 = RoundNo = 1 && RoundState = 0

[State 1150, ChangeState]
type = DestroySelf
trigger1 = Root,Numhelper(20000)
trigger2 = RoundNo = 1 && RoundState = 0

;---------------------------------------------------------------------
;パワーMAX
[Statedef 25050]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0

[State 1000, 0]
type = PowerAdd
trigger1 = Time = 0
value = -1000

[State 4100,Varadd]
type = VarSet
trigger1 = Time = 0
var(1) = 662

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Time = 0
fvar(8) = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25060
id = 25060
pos = 142,214
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25061
id = 25060
pos = 142,214
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25065
id = 25060
pos = -142,214
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25066
id = 25060
pos = -142,214
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25070
id = 25070
pos = 142,214
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25075
id = 25070
pos = -142,214
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(25070)
Id = 25070
scale = (var(1)/662.0),1
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 25070
scale = 0,1
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 25050
id = 25050
pos = 142,214
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 25055
id = 25050
pos = -142,214
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4100,Varadd]
type = VarAdd
trigger1 = var(1) > 0
var(1) = -1

[State 4100,Varadd]
type = ParentVarSet
trigger1 = var(1) <= 0
trigger2 = RoundState = 0
fvar(8) = 0

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(25050)
Id = 25050
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 25050
scale = 0,0
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,fvar(8)!
id = 25050

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(25060)
Id = 25060
scale = 1,1
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 25060
scale = 0,1
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,fvar(8)!
id = 25060

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,fvar(8)!
id = 25070

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(25071)
Id = 25071
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 25071
scale = 0,0
ignorehitpause = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Root,fvar(8)!
id = 25071

[State 1150, ChangeState]
type = DestroySelf
trigger1 = Root,fvar(8)!
 
;---------------------------------------------------------------------
;Kグルーヴ 
;------------------------
[Statedef 26000]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0
ownpal = 1

[State 5900, 1]
type = ParentVarSet
trigger1 = 1
var(30) = 6

[State 1000, 7]
type = BindToRoot
trigger1 = 1
pos = 0,-60

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 26010
id = 26010
pos = 140,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 26015
id = 26010
pos = -140,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(26010)
Id = 26010
scale = 1,1
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 26010
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 26020
id = 26020
pos = 140,230
postype = Left
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 26025
id = 26020
pos = -140,230
postype = Right
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
persistent = 0
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(26020)
Id = 26020
scale = ((Root,fvar(37)))/72.0,1
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 26020
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 26000
id = 26000
pos = 140,230
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 26005
id = 26000
pos = -140,230
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(26000)
Id = 26000
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 26000
scale = 0,0
ignorehitpause = 1

;------------------------ グルーヴ表記
[State -2, Explod(K-GROOVE)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = Ifelse((Root,var(43)),27001,26001)
id = 26001
pos = 123,221
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

;------------------------ グルーヴ表記
[State -2, Explod(K-GROOVE)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = Ifelse((Root,var(43)),27001,26001)
id = 26001
pos = -123,221
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 1
facing = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(26001)
Id = 26001
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 26001
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 26030
id = 26030
pos = 22,225
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 26030
id = 26030
pos = -22,225
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)!
Id = 26030
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 26030
scale = 0,0
ignorehitpause = 1

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 26031
id = 26031
pos = 22,225
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 26031
id = 26031
pos = -22,225
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)
Id = 26031
scale = fvar(1),fvar(1)
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)!
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 26031
scale = 0,0
ignorehitpause = 1

[State 4100,Varadd]
type = VarSet
trigger1 = Time = 0
fvar(1) = .5

[State 4100,Varadd]
type = Varadd
trigger1 = var(1)!
trigger1 = fvar(1) < .5
fvar(1) = .002

[State 4100,Varadd]
type = VarSet
trigger1 = fvar(1) >= .5
var(1) = 1

[State 4100,Varadd]
type = Varadd
trigger1 = var(1)
trigger1 = fvar(1) > .4
fvar(1) = -.0015

[State 4100,Varadd]
type = VarSet
trigger1 = fvar(1) <= .4
var(1) = 0

[State -2, Explod(P1)]
type = Explod
trigger1 = Time = 0 && teamside = 1
anim = 26035
id = 26035
pos = 22,225
postype = Left
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State -2, Explod(P2)]
type = Explod
trigger1 = Time = 0 && teamside = 2
anim = 26035
id = 26035
pos = -22,225
postype = Right
scale = .5,.5
bindtime = -1
removetime = -1
ontop = 1
ownpal = 0
facing = 1
ignorehitpause = 1
pausemovetime = -1
Supermovetime = -1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)
Id = 26035
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = Root,fvar(8)!
trigger2 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 26035
scale = 0,0
ignorehitpause = 1

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(37) >=72 && Root,fvar(8)!
fvar(37) = 72

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(37) =72
fvar(8) = 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Root,fvar(37) = 72
trigger1 = Root,fvar(8) = 1
value = 20,10

[State -2, Explod(P2)]
type = Explod
trigger1 = Root,fvar(37) = 72
trigger1 = Root,fvar(8) = 1
anim = 8420
id = 26040
pos = 0,0
postype = P1
sprpriority = 3
scale = .5,.5
bindtime = 1
ownpal = 0
ignorehitpause = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State 4900, 16]
type = modifyExplod
trigger1 = Numexplod(26040)
Id = 26040
scale = .5,.5
ignorehitpause = 1

[State 4900, 16]
type = modifyExplod
trigger1 = NumHelper(9000)||(root,fvar(2)&&enemynear,NumHelper(9000))||root,fvar(4)
Id = 26040
scale = 0,0
ignorehitpause = 1

[State 10000, Varadd(F3)]
type = ParentVaradd
trigger1 = Root,fvar(8) = 1
fvar(37)= -.09058

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,var(53)
trigger1 = Root,fvar(8) || Root,var(53)!=1
trigger2 = Root,fvar(37) <=0
fvar(37) = 0

[State 4100,Varadd]
type = ParentVarSet
trigger1 = Root,fvar(37) <=0
fvar(8) = 0

;------------------------ 消去
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Numhelper(20000)
trigger2 = RoundNo = 1 && RoundState = 0

[State 1150, ChangeState]
type = DestroySelf
trigger1 = Numhelper(20000)
trigger2 = RoundNo = 1 && RoundState = 0
  
;===================================================================
; ナレーション 
;===================================================================

;---------------------------------------------------------------------------
;ナレーション（ファーストアタック）ナレーション（何もなし）
[Statedef 6800]
ctrl = 0
anim = 20000
ownpal = 1

[State 6800, PlaySnd]
type = Playsnd
trigger1 = Time = 0
value = 30,0
ignorehitpause = 1
channel = 0

[State 6800, StopSnd]
type = StopSnd
trigger1 = roundstate != 2
channel = 0

[State 6800, DestroySelf]
type = DestroySelf
trigger1 = Time = 360

;---------------------------------------------------------------------------
;ナレーション（ファーストアタック）
[Statedef 6801]
ctrl = 0
anim = 20000
ownpal = 1

[State -2,VarAdd]
type = ParentVarSet
trigger1 = Time = 0
var(48) = 1

[State 6801, PlaySnd]
type = Playsnd
trigger1 = Time = 0
value = 30,1
ignorehitpause = 1
channel = 0

[State 6801, StopSnd]
type = StopSnd
trigger1 = roundstate != 2
channel = 0

[State 6801, DestroySelf]
type = DestroySelf
trigger1 = Time = 360

;---------------------------------------------------------------------------
;ナレーション（コンボ）
[Statedef 6802]
ctrl = 0
anim = 20000
ownpal = 1

[State 6802, PlaySnd]
type = Playsnd
trigger1 = Time = 0
value = 30,2
ignorehitpause = 1
channel = 0

[State 6802, StopSnd]
type = StopSnd
trigger1 = roundstate != 2
channel = 0

[State 6802, DestroySelf]
type = DestroySelf
trigger1 = P2movetype != H && Time >= 360

;---------------------------------------------------------------------------
;ナレーション（大ダメージ）
[Statedef 6803]
ctrl = 0
anim = 20000
ownpal = 1

[State 6803, PlaySnd]
type = Playsnd
trigger1 = Time = 0
value = 30,3
ignorehitpause = 1
channel = 0

[State 6803, StopSnd]
type = StopSnd
trigger1 = roundstate != 2
channel = 0

[State 6803, DestroySelf]
type = DestroySelf
trigger1 = P2movetype != H && Time >= 360
 
;---------------------------------------------------------------------------
[Statedef -2] 
;---------------------------------------------------------------------------
	 
;---------------------------------------------------------------------
; ジャストディフェンス 
[State -2, Just Defended1]
type = VarAdd
trigger1 = var(37) > 0
var(37) = 1
ignorehitpause = 1

[State -2, Just Defended2]
type = VarSet
triggerall = var(37) = 0
triggerall = stateno != [140,159]
trigger1 = command = "back" && command != "down" || command = "downback"
var(37) = 1

[State -2, Just Defended3]
type = VarSet
triggerall = command != "holdback"
trigger1 = var(37) = [1,7]
trigger2 = var(37) > 13
var(37) = ifelse((var(37) = [1,7]),8,0)

[State -2, Just Defended5]
type = ChangeState
triggerall = RoundState = 2
triggerall = var(30)=6 || var(43)&&floor(var(50)/100%10)=1
triggerall = stateno = 150
trigger1 = var(37) = [1,7]
value = 4400
ignorehitpause = 1

[State -2, Just Defended6]
type = ChangeState
triggerall = RoundState = 2
triggerall = var(30)=6 || var(43)&&floor(var(50)/100%10)=1
triggerall = stateno = 152
trigger1 = var(37) = [1,7]
value = 4402
ignorehitpause = 1

[State -2, Just Defended7]
type = ChangeState
triggerall = RoundState = 2
triggerall = var(30)=6 || var(43)&&floor(var(50)/100%10)=1
triggerall = statetype = A
triggerall = stateno = 154
trigger1 = var(37) = [1,7]
value = 4404
ignorehitpause = 1

 
;---------------------------------------------------------------------
; ブロッキング 
[State -3, Blocking5]
type = helper
trigger1 = !var(44)
trigger1 = var(30) = 3 || var(43)&&floor(var(50)/10%10)=1
trigger1 = command = "fwd"
trigger1 = !NumHelper(4310)
trigger1 = Var(32) != 2
trigger1 = Ctrl
stateno = 4310
id = 4310

[State -3, Blocking5]
type = helper
trigger1 = !var(44)
trigger1 = var(30) = 3 || var(43)&&floor(var(50)/10%10)=1
trigger1 = command = "downfwd"
trigger1 = statetype != A && !NumHelper(4311)
trigger1 = Ctrl
stateno = 4311
id = 4311

[State -3, Blocking]
type = HitOverride
triggerall = Var(30) = 3 || var(43)&&floor(var(50)/10%10)=1
triggerall = RoundState = 2
triggerall = !var(44)
triggerall = statetype != A
trigger1 = Ctrl
trigger1 = NumHelper(4310)
attr = SA, AA, AP
stateno = 4300
time = 1
slot = 0

[State -3, Blocking]
type = HitOverride
triggerall = Var(30) = 3 || var(43)&&floor(var(50)/10%10)=1
triggerall = RoundState = 2
triggerall = !var(44)
triggerall = statetype != A
trigger1 = Ctrl
trigger1 = NumHelper(4311)
attr = C, AA, AP
stateno = 4301
time = 1
slot = 1

[State -3, Blocking]
type = HitOverride
triggerall = Var(30) = 3 || var(43)&&floor(var(50)/10%10)=1
triggerall = RoundState = 2
triggerall = !var(44)
triggerall = statetype = A
trigger1 = NumHelper(4310)
trigger1 = Ctrl
attr = SCA, AA, AP
stateno = 4302
time = 1
slot = 2

[State -3, Blocking5]
type = ChangeState
trigger1 = var(35) = 2
trigger1 = statetype != A
trigger1 = Ctrl
value = 4301

[State -3, Blocking5]
type = ChangeState
trigger1 = var(35) = 1
trigger1 = statetype != A
trigger1 = Ctrl
value = 4300

[State -3, Blocking5]
type = ChangeState
trigger1 = var(35) = 1
trigger1 = statetype = A
trigger1 = Ctrl
value = 4302

[State -3, Blocking7]
type = NotHitBy
trigger1 = var(44) = 1
value = SCA
Time = 1

[State -3, Blocking8]
type = VarSet
trigger1 = StateNo != [4300,4399]
var(44) = 0
ignorehitpause = 1

[State -2, Just Defended]
type = VarSet
trigger1 = Ctrl!
var(35) = 0
 
;---------------------------------------------------------------------
; ナレーション 
;---------------------------------------------------------------------
;コンボダメージ
[State -2, PowerReset]
type = VarSet
trigger1 = P2movetype != H
fvar(7) = P2life

[State -2,naration]
type = Helper
triggerall = numenemy
triggerall = roundstate = 2
triggerall = (fvar(7)-P2life)>250
trigger1 = !NumHelper(6800)&&Ceil(fvar(2))=1
trigger1 = !enemynear,NumHelper(6800)
trigger2 = !NumHelper(6800)&&!Ceil(fvar(2))
id = 6800
name = "naration_1"
pos = 0,300
postype = Left
stateno = 6803
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

;---------------------------------------------------------------------
; ファーストアタック
[State -2, PowerReset]
type = VarAdd
trigger1 = roundstate = 2
fvar(14) = 1
persistent = 1

[State -2, PowerReset]
type = VarSet
trigger1 = roundstate = 0
var(48) = 0

[State -2, PowerReset]
type = VarSet
trigger1 = roundstate = 0
fvar(14) = 0

[State 3001, Super]
type = Helper
triggerall = numenemy
triggerall = !var(48) && fvar(14) = 400
triggerall = roundstate = 2
trigger1 = !NumHelper(6800)&&!Ceil(fvar(2))
trigger2 = !NumHelper(6800)&&Ceil(fvar(2))=1
trigger2 = !enemynear,NumHelper(6800)
id = 6800
name = "naration_1"
pos = 0,300
postype = Left
stateno = 6800
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999
 
;---------------------------------------------------------------------
; メッセージアイコン 
[State -2,2]
type = VarSet
trigger1 = !NumHelper(6000)
var(45) = 0
ignorehitpause = 1

[State -2,2]
type = VarSet
trigger1 = NumHelper(6000) && !NumHelper(6001)
var(45) = 1
ignorehitpause = 1

[State -2,2]
type = VarSet
trigger1 = NumHelper(6000) && NumHelper(6001) && !NumHelper(6002)
var(45) = 2
ignorehitpause = 1

[State -2,2]
type = VarSet
trigger1 = NumHelper(6000) && NumHelper(6001) && NumHelper(6002) && !NumHelper(6003)
var(45) = 3
ignorehitpause = 1

[State -2,2]
type = VarSet
trigger1 = NumHelper(6000) && NumHelper(6001) && NumHelper(6002) && NumHelper(6003)
var(45) = 4
ignorehitpause = 1

[State -2,FIRST ATTACK]
type = helper
triggerall = roundstate = 2
trigger1 = var(45)<3
trigger1 = var(48)=0 && var(41)>0
id = 6000+var(45)
name = "FIRST ATTACK"
pos = 0,0
postype = P1
stateno = 6002+var(45)*10
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -2, Combo]
type = VarSet
trigger1 = !var(48) && var(41)>0
var(48) = 100
ignorehitpause = 1
persistent = 0

[State -2, Combo]
type = VarSet
trigger1 = !var(48) && MoveType = H && (stateno != [120,159]) && (stateno != [4100,4199])
var(48) = -100
ignorehitpause = 1
persistent = 0

[State -3,FINEST KO FINISH]
type = helper
triggerall = var(45)<3
triggerall = winKO && alive
triggerall = !fvar(18)
trigger1 = fvar(19) = 1
id = 6000+var(45)
name = "FINEST KO FINISH"
pos = 0,0
postype = P1
stateno = 6105+var(45)*10
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -3, SUPER COMBO FINISH]
type = helper
triggerall = var(45)<3
triggerall = winKO && alive
triggerall = !fvar(18)
trigger1 = fvar(19) = 0
trigger1 = fvar(11)=2
id = 6000+var(45)
name = "SUPER COMBO FINISH"
pos = 0,0
postype = P1
stateno = ifelse(var(47),6102,ifelse((var(30)<4),6103,6104))+var(45)*10
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -3, SPECIAL MOVE FINISH]
type = helper
triggerall = var(45)<3
triggerall = winKO && alive
triggerall = !fvar(18)
trigger1 = fvar(11)!=2
id = 6000+var(45)
name = "SPECIAL MOVE FINISH"
pos = 0,0
postype = P1
stateno = ifelse(var(47),6102,ifelse(fvar(11)=1,6101,6100))+var(45)*10
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -2,2]
type = VarSet
triggerall = winKO && alive
trigger1 = !fvar(18)
fvar(18) = 1
ignorehitpause = 1

[State -3, BLOCKING]
type = helper
triggerall = var(30) && var(39)
trigger1 = var(45)<3
trigger1 = Time = 1
trigger1 = TeamMode = turns || TeamMode = single
trigger1 = StateNo = 4300 || StateNo = 4301 || StateNo = 4302
id = 6000+var(45)
name = "BLOCKING"
pos = 0,0
postype = P1
stateno = 6000+var(45)*10
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -3, GUARD CANCEL]
type = helper
triggerall = var(30) && var(39)
trigger1 = var(45)<3
trigger1 = MoveType != H && Time = 1
trigger1 = TeamMode = turns || TeamMode = single
trigger1 = StateNo = 4510 || StateNo = 4520 || StateNo = 4500
id = 6000+var(45)
name = "GUARD CANCEL"
pos = 0,0
postype = P1
stateno = 6003+var(45)*10
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -3, JUST DEFENDED]
type = helper
triggerall = var(30) && var(39)
trigger1 = var(45)<3
trigger1 = Time = 1
trigger1 = TeamMode = turns || TeamMode = single
trigger1 = StateNo = 4400 || StateNo = 4402 || StateNo = 4402
id = 6000+var(45)
name = "JUST DEFENDED"
pos = 0,0
postype = P1
stateno = 6006+var(45)*10
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -3, TECH BOUNS]
type = helper
triggerall = var(30) && var(39)
trigger1 = var(45)<3
trigger1 = Time = 1
trigger1 = TeamMode = turns || TeamMode = single
trigger1 = StateNo = 5201 || anim = 5210 || anim = 5940
id = 6000+var(45)
name = "TECH BOUNS"
pos = 0,0
postype = P1
stateno = 6007+var(45)*10
helpertype = normal
keyctrl = 0
ownpal = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -2,2]
type = VarSet
triggerall = var(39)
trigger1 = StateNo != [4300,4302]
trigger1 = StateNo != [4400,4402]
trigger1 = StateNo != [4500,4520]
trigger1 = StateNo != 5201
var(39) = 0

[State -2,Reversal]
type = VarSet
trigger1 = stateno=5001 || stateno=5011 || stateno=151 || stateno=153 || stateno=140 || stateno=5120
fvar(13) = 1
ignorehitpause = 1

[State -2,Reversal]
type = helper
triggerall = var(45)<3
triggerall = fvar(13) = 1
triggerall = MoveType != H
trigger1 = StateNo = [1000,1999]
trigger2 = StateNo = [3000,3999]
id = 6000+var(45)
name = "Reversal"
pos = 0,0
postype = P1
stateno = 6009+var(45)*10
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
persistent = 0

[State -2, Combo]
type = VarSet
trigger1 = stateno!=5001 && stateno!=5011 && stateno!=151 && stateno!=153 && stateno!=140 && stateno!=5120
fvar(13) = 0
 
;-------------------------------------------------------------------
; ヒット関連 
;---------------------------------------------------------------------------
;相手空中やられ復帰後無敵引き込み
[State 880,VelSet]
type = TargetState
triggerall = NumTarget
trigger1 = Target,StateNo = 5030
value = 5031
	 
;---------------------------------------------------------------------------
; ヒット数カウント処理 
[State -2,2]
type = VarSet
trigger1 = NumTarget!
var(41) = 0

[State -2,2]
type = VarSet
triggerall = var(42)!
trigger1 = NumTarget
trigger1 = Target,StateNo != [120,159]
trigger1 = HitPauseTime != 0
trigger2 = ProjHit=1
var(42) = 1
ignorehitpause = 1

[State -2,2]
type = Varadd
trigger1 = NumTarget
trigger1 = var(42) = 1
var(41) = 1
ignorehitpause = 1

[State -2,naration]
type = Helper
triggerall = var(48)=100 && fvar(14) < 400
trigger1 = (!NumHelper(6800)&&!Ceil(fvar(2))) || (!NumHelper(6800)&&Ceil(fvar(2))=1&&!enemynear,NumHelper(6800))
id = 6800
name = "naration_2"
pos = 0,300
postype = Left
stateno = 6801
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -2,GP]
type = VarAdd
trigger1 = var(42)=1
fvar(38) = ifelse(var(41)>5,500,2000)
ignorehitpause = 1

[State -2,2]
type = VarSet
trigger1 = var(42) = 1
var(42) = -1
ignorehitpause = 1

[State -2,2]
type = VarSet
trigger1 = HitPauseTime = 0
var(42) = 0
ignorehitpause = 1

;---------------------------------------------------------------------
;多段ヒット
[State 3001, Super]
type = Helper
triggerall = numenemy
triggerall = roundstate = 2
triggerall = var(41) >= 5+(var(47))*5
triggerall = fvar(20)+1 = var(41)
trigger1 = !NumHelper(6800)&&Ceil(fvar(2))=1
trigger1 = !enemynear,NumHelper(6800)
trigger2 = !NumHelper(6800)&&!Ceil(fvar(2))
id = 6800
name = "naration_3"
pos = 0,0
postype = P1
stateno = 6802
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999999999999

[State -2, Combo]
type = VarSet
trigger1 = fvar(20) < var(41)
fvar(20) = var(41)
 
;---------------------------------------------------------------------
; カウンターヒット処理 
[State -2,Counter8]
type = VarSet
trigger1 = var(20) = 0 && var(21) = 0
var(28) = 1

[State -2,Counter1]
type = VarSet
triggerall = StateNo != 4505
trigger1 = P2movetype = A
trigger2 = P2StateNo = 100
;trigger3 = 1;デバッグ用
var(34) = 1
ignorehitpause = 1

[State -2,Counter2]
type = VarSet
triggerall = !var(28)
triggerall = StateNo != 4505
trigger1 = var(34)
trigger1 = !var(46)
trigger1 = MoveHit=1 || ProjHit=1
trigger1 = P2StateNo = [5000,5210]
var(46) = 1
ignorehitpause = 1

[State -3, Counter4]
type = helper
triggerall = !(var(20)=100 && var(21)=100)
triggerall = !var(28)
triggerall = StateNo != 4505
trigger1 = var(46)=1
trigger1 = ProjHit=0
id = 8130
name = "COUNTER HIT"
pos = Ceil(enemy,Const(size.ground.front)+Var(20)),Ceil(Pos Y-enemy,Pos Y+Var(21))
postype = P2
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -3, Counter3]
type = helper
triggerall = !var(28)
triggerall = StateNo != 4505
triggerall = var(45)<4
trigger1 = var(46)=1
id = 6000+var(45)
name = "COUNTER HIT"
pos = 0,0
postype = P1
stateno = 6001+var(45)*10
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999

[State -2,Counter5]
type = VarSet
trigger1 = var(46) = 1
var(46) = -1
ignorehitpause = 1

[State -2,Counter6]
type = VarSet
trigger1 = MoveHit!
trigger1 = ProjHit=0
var(46) = 0

[State -2,Counter7]
type = VarSet
;triggerall = 0;デバッグ用
trigger1 = P2movetype != A
trigger1 = P2StateNo != 100
var(34) = 0

[State -2,Counter8]
type = VarSet
triggerall = var(28)
trigger1 = MoveType != A
var(28) = 0
 
;----------------------------
; 空中ヒット数カウント処理 
[state -3]
type = VarSet
trigger1 = P2StateType != A
trigger2 = NumTarget!
trigger3 = var(47)
var(25) = 0

[state -3]
type = VarSet
trigger1 = var(26) = 0
trigger1 = P2StateType = A
trigger1 = NumTarget
trigger1 = HitPauseTime != 0 || ProjHit=1
trigger1 = Target,StateNo != [120,155]
var(26) = 1
ignorehitpause = 1

[state -3]
type = Varadd
triggerall = var(47)!
triggerall = P2StateType = A
triggerall = NumTarget
trigger1 = var(26) = 1
var(25) = 1
ignorehitpause = 1

[state -3]
type = VarSet
trigger1 = var(26) = 1
var(26) = -1
ignorehitpause = 1

[state -3]
type = VarSet
trigger1 = HitPauseTime = 0
var(26) = 0
ignorehitpause = 1
  
;-------------------------------------------------------------------
;サウンド関連 
;------------------------
;KO時声管理
[State -2,立ちガード]
type = VarSet
triggerall = GetHitVar(animtype) != [3,5]
triggerall = AnimExist(5950)
triggerall = anim = 150 || anim = 120 || anim = 130 || anim = 10150 || anim = 10120 || anim = 10130
trigger1   = EnemyNear,HitDefAttr = A,AA || EnemyNear,HitDefAttr = SA,AP
trigger2   = EnemyNear,HitDefAttr = S,AA
trigger3   = Enemy,NumProj > 0
var(38) = 1
ignorehitpause = 1

[State -2,VarSet]
type = VarSet
triggerall = GetHitVar(animtype) != [3,5]
triggerall = AnimExist(5950)
triggerall = anim = 151 || anim = 121 || anim = 131 || anim = 10151 || anim = 10121 || anim = 10131
Trigger1   = EnemyNear,HitDefAttr = C,AA,AP || EnemyNear,HitDefAttr = C,AP
Trigger2   = EnemyNear,HitDefAttr = S,AA
trigger3   = Enemy,NumProj > 0
var(38) = 2
ignorehitpause = 1

[State -2,VarSet]
type = VarSet
trigger1 = Stateno != 120 && Stateno != 130 && Stateno != 131 && Stateno != 150 && Stateno != 151 && Stateno != 152 && Stateno != 153
trigger1 = movetype != H
var(38) = 0

[State -2,AssertSpecial]
type = AssertSpecial
trigger1 = movetype = H && var(49) != -1
flag = NoKOSnd
ignorehitpause = 1

[State -2,VarSet(11)]
type = VarSet
trigger1 = Alive
var(49) = 0

[State -2,VarSet(11)]
type = VarSet
trigger1 = !Alive &&  gethitvar(hitshaketime)=0 && var(49) = 0
var(49) = 1

[State 150, 2]
type = ChangeState
triggerall = !Alive && var(38) && var(49) = 1
trigger1 = AnimExist(5950)
trigger1 = StateNo!= 5950 && StateNo!= 5150
value = 5950

[State -2,PlaySnd]
type = PlaySnd
trigger1 = !Alive && Var(49)=1
value = ifelse((var(38)=[1,2]),5950,11)+(P1name="cvsiori"&&Var(29)||P1name="iori_ex")*10000,0
channel = 15
lowpriority = 1
persistent = 0

[State -2,VarSet(11)]
type = VarSet
trigger1 = var(49) = 1
var(49) = -1

;---------------------------------------
; 飛び道具掻き消し音
[State 810,PlaySnd]
type = PlaySnd
trigger1 = ProjCancelTime(0) = 1
value = 5, 10

;---------------------------------------
; KOサウンド
[State 9000, PlaySnd]
type = PlaySnd
triggerall = roundstate = 2
trigger1 = WinKo
value = 20,10

;---------------------------------------
; ダウン音
[State 810,PlaySnd]
type = PlaySnd
trigger1 = StateNo = 5100 && Time = 1
trigger2 = StateNo = 5110 && Time = 1
value = 3, 7

;---------------------------------------
; 崩れダウン音
;----------------------------１
[State -3, Bounding Sound]
type = PlaySnd
triggerall = anim = 5950 || anim = 15950
trigger1 = Animelem = 6
trigger1 = P1name = "cvsadon" || P1name = "Genryusai Maki"
trigger2 = Animelem = 7
trigger2 = P1name = "cvssagat" || P1name = "Raiden"
trigger3 = Animelem = 8
trigger3 = P1name = "cvsiori" || P1name = "cvsiori_normal" || P1name = "iori_ex" || P1name = "cvshonda" || P1name = "cvsmai"
trigger4 = Animelem = 9
trigger4 = P1name = "cvskyosuke"
value = 3, 7

;----------------------------２
[State -3, Bounding Sound]
type = PlaySnd
triggerall = anim = 5950
trigger1 = P1name = "Raiden" && Animelem = 3
value = 52, 0

 
;-------------------------------------------------------------------
;内部処理 
;---------------------------------------------------------------------
;原作判別
[State -2, 1]
type = VarSet
trigger1 = 1
fvar(39) = 1;CAPCOM VS SNK 2

;---------------------------------------------------------------------
;キャラ判別
[State -2, 1]
type = VarSet
triggerall = numenemy
triggerall = roundstate = 2
trigger1 = enemy,authorname = "warusaki3" && enemy,fvar(39) = 1
trigger2 = enemy,authorname = "mouser" && (P2Name = "Hibiki Takane" || P4Name = "Hibiki Takane")
trigger3 = enemy,authorname = "H”" && enemy,fvar(39) = 1
fvar(2) = 1

;---------------------------------------------------------------------
[State -2,相手ctrl可否]
type = VarSet
trigger1 = RoundState = 2
trigger1 = Enemynear,movetype != H
fvar(17) = ctrl

;---------------------------------------------------------------------
;グルーヴ別内部処理
[State 4100,Varadd]
type = VarAdd
triggerall = Time = 0 && fvar(8)!
triggerall = var(30)=4
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5030 || StateNo = 5070
trigger2 = var(30)=4 && (StateNo = 150 || StateNo = 152 || StateNo = 154)
fvar(37) = 2
ignorehitpause = 1

[State 4100,Varadd]
type = VarSet
triggerall = NumHelper(21000)
trigger1 = var(30)=[1,2]
trigger1 = fvar(8)!
trigger1 = StateNo != 4200 && StateNo != 4210
fvar(37) = Power
ignorehitpause = 1

[State 4100,Varadd]
type = VarSet
triggerall = NumHelper(21000)
trigger1 = StateNo != [3000,3999]
trigger1 = var(30)=4 || var(30)=6
trigger1 = fvar(8)!
trigger1 = var(40) = 2
fvar(37) = ifelse(NumHelper(24000),100,72)
ignorehitpause = 1

[State 4100,Varadd]
type = VarAdd
triggerall = Time = 0 && fvar(8)!
triggerall = var(30)=6
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5030 || StateNo = 5070
fvar(37) = (2+(GetHitVar(damage)*.07))*ifelse((100*life/const(data.life))<=25,1.35,ifelse((100*life/const(data.life))<=50,1.2,1))
ignorehitpause = 1

[State 20000, VarSet]
type = VarSet
trigger1 = var(43)
var(30) = floor(var(50)%10)

;---------------------------------------------------------------------
; 投げられ時のゲージ増加量
[State 4100,Varadd]
type = VarAdd
triggerall = var(30)=4 || var(30)=6
triggerall = fvar(8)!
triggerall = fvar(16) != life
trigger1 = MoveType = H
trigger1 = StateNo != [5000,5999]
trigger1 = StateNo != [120,169]
fvar(37) = ifelse(var(30)=4,2,((fVar(16)-life)*.07))
ignorehitpause = 1

[State 4100,Varadd]
type = VarSet
trigger1 = var(30)=4 || var(30)=6
fvar(16) = Life
ignorehitpause = 1

;パワーゲージ増加量
[State -2,VarSet]
type = VarSet
trigger1 = 1
fvar(5) = ifelse((var(30)=4||var(30)=6||(Var(30)=2&&fvar(8))||(Var(30)=5&&fvar(8))),0,ifelse(Var(30)=2,1.16,ifelse(Var(30)=3,0.87,ifelse(Var(30)=5,.77,1))))

;---------------------------------------------------------------------
; グルーブセレクト関連
[State -3,Super]
type = Helper
triggerall = Var(30)
triggerall = !NumHelper(20000)
triggerall = !NumHelper(21000)
trigger1 = numpartner
trigger1 = ID<partner,ID
trigger2 = !numpartner
id = 21000
name = "Gauge"
pos = 1000,0
postype = P1
stateno = 20000+Var(30)*1000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
facing = 1+(teamside = 2)*-2

;---------------------------------------------------------------------
; 怒り状態処理
[State 5900, 1]
type = VarSet
trigger1 = RoundState = 0
trigger1 = fvar(8) && var(30) = 6
fvar(37) = 0

[State -2, 1]
type = PalFX
triggerall = fvar(8)
triggerall = var(30)=5
trigger1 = GameTime % 2
trigger1 = anim != 9010 && anim != 9011 && anim != 9012 && anim != 7696
time = 1
add = 128,72,16
mul = 270,240,120
color = 10
ignorehitpause = 1

[State -2, 1]
type = PalFX
trigger1 = fvar(8) && var(30) = 6
trigger1 = anim != 9010 && anim != 9011 && anim != 9012 && anim != 7696
Time = 1
add = ceil(70+(-70*sin(gametime*.075))),-20,-20
mul = 155,125,125
ignorehitpause = 1
persistent = 0

;---------------------------------------------------------------------------
; 攻撃値修正
;------------------------ 根性値・逆根性値
[State -2,2]
type = VarSet
trigger1 = 1
fvar(6) = ifelse(((100*life/const(data.life))<=15),.1,ifelse(((100*life/const(data.life))<=30),.05,0))+ifelse(((100*(enemy,life)/(enemy,const(data.life)))<=15),-.25,ifelse(((100*(enemy,life)/(enemy,const(data.life)))<=30),-.1,0))

;------------------------ ゲージ蓄積による攻撃力の増加
[State -2,2]
type = VarSet
trigger1 = 1
fvar(9) = ifelse(var(34),1.2,1)*ifelse(fvar(8)=1,ifelse(var(30)=4,1.15,ifelse(var(30)=5,1.2,ifelse((var(30)=6&&StateNo=[3000,3999]),1.15,ifelse((var(30)=6&&StateNo=[1000,1999]),1.30,1.35)))),1)

;------------------------ 攻撃力補正値
[State -2,2]
type = VarSet
trigger1 = fvar(10)>=.05
fvar(10) = ifelse((Var(47)),((((10-var(41))/10.0)*ifelse((StateNo=[1000,1999]),.72,.8)+fvar(6))*ifelse(var(34),1.2,1)),((ifelse(var(41)>5,((24-(var(41)-5))/24.0),1)+fvar(6))*fvar(9)))

[State -2,2]
type = VarSet
trigger1 = !Var(47)
trigger1 = fvar(10)<.05
fvar(10) = .05

[State -2,2]
type = VarSet
trigger1 = Var(47)
trigger1 = fvar(10)<.01
fvar(10) = .01

;---------------------------------------------------------------------------
; ダウン回避可否
[State -2, PowerReset]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = time = 0
trigger1 = P2stateno = [3000,3999]
fvar(21) = 1

[State -2, PowerReset]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = time = 0
trigger1 = P2stateno != [3000,3999]
trigger2 = movetype != H
fvar(21) = 0

;---------------------------------------------------------------------
; 崩れダウンでターンするキャラ用
[State 40, 2]
type = Turn
triggerall = anim = 5950
triggerall = AnimElemTime(AnimElemNo(0)+1)=0
trigger1 = P1name = "Raiden"


[State 5210, 1] ;Blink white
type = PalFX
trigger1 = StateNo = 5210
add = 0,0,0
 
;-------------------------------------------------------------------
;その他 
	 
;---------------------------------------------------------------------
; オリジナルコンボ判別 
[State -2, 1]
type = VarSet
trigger1 = var(47) && !fvar(8) && StateNo != [3000,3999]
trigger2 = LoseKO
trigger3 = (StateNo = [3000,3999]) && Time > 0
var(47) = 0
 
;---------------------------------------------------------------------
; チームモード 
;------------------------
;チームモード時のイントロ
[State -2, Turns Mode Intro]
type = ChangeState
trigger1 = roundsexisted <= 0
trigger1 = roundstate = 0
trigger1 = time = 0
value = 5900

;------------------------
;チームモード時のゲージ表示フラグ
[State -2]
type = VarSet
trigger1 = numpartner
trigger1 = ID>partner,ID
var(30) = 1

[State -2]
type = VarSet
trigger1 = numpartner
trigger1 = ID>partner,ID
fvar(1) = 1

[State -2]
type = VarSet
trigger1 = numpartner
trigger1 = ID<partner,ID
fvar(1) = 2
 
;----------------------------------------------
; 残像消去 
[State -2,AfterImageTime]
type = AfterImageTime
trigger1 = MoveType = H && StateNo !=5110
trigger2 = (StateNo =[1000,2999]) && (PrevStateNo =[3000,3999])
trigger3 = PrevStateNo = 4520 && StateNo = 106
trigger4 = !var(47) && PrevStateNo = 50 && (StateNo =[600,699])
trigger5 = !var(47) && ctrl && StateNo != 50
trigger6 = RoundState = 3
time = 0
 
;---------------------------------------
; 強制振り向き 
[State -2, Turn]
type = Turn
triggerall = p2dist X < -5
trigger1 = PrevStateNo = 5320
trigger2 = var(0) && ((stateno=5001 || stateno=5011 || stateno=140) && HitOver || stateno=5120 && AnimTime = 0)
 
;---------------------------------------------------------------------
; KOフィニッシュ処理 
;---------------------------------------------------------------------
[State -2,攻撃種類判別]
type = VarSet
trigger1 = RoundState = 2
trigger1 = NumProj = 0
fvar(11) = ifelse((HitDefAttr=SCA,HA,HP,HT||(StateNo=[3000,3999])),2,ifelse((HitDefAttr=SCA,SA,SP,ST||(StateNo=[1000,1999])),1,0))
ignorehitpause = 1

;---------------------------------------------------------------------
[State -2,相手ステートナンバー]
type = VarSet
trigger1 = RoundState = 2
trigger1 = Enemynear,movetype != H
fvar(12) = Enemynear,StateNo

;---------------------------------------------------------------------
[State -2,ファイネストKOフラグ]
type = VarSet
trigger1 = RoundState = 2
fvar(19) = (fvar(11)+ifelse((Enemynear,HitDefAttr=,HA,HP,HT||(fvar(12)=[3000,3999])),2,ifelse((Enemynear,HitDefAttr=,SA,SP,ST||(fvar(12)=[1000,1999])),1,0))+(var(36)=2)+(var(46)=1)+(var(47)))>=4

;---------------------------------------------------------------------
[State -2, やられ時にゲージ消去する相手動作の判定]
type = VarSet
trigger1 = 1
fvar(4) = 0

[State -2, やられ時にゲージ消去する相手動作の判定]
type = VarSet
triggerall = numenemy
trigger1 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgouki"&&enemynear,var(13))
trigger2 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgouki_normal"&&enemynear,var(13))
trigger3 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgouki_ex"&&enemynear,var(13))
trigger4 = (enemynear,authorname="SUMI"&&enemynear,name="Destrudo Ryu"&&enemynear,var(16)=1)
trigger5 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsrugal"&&enemynear,var(13))
trigger6 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsrugal_ex"&&enemynear,var(13))
trigger7 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsryu"&&enemynear,var(13))
trigger8 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsryu_ex"&&enemynear,var(13))
trigger9 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsg_rugal"&&enemynear,var(13))
trigger10 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgeese"&&enemynear,var(13))
trigger11 = (enemynear,authorname="warusaki3"&&enemynear,name="cvssakura"&&enemynear,var(13))
fvar(4) = 1

;---------------------------------------------------------------------
; ファイネストKO
[State -3,SuperFinish]
type = Helper
triggerall = NumHelper(9000)!
triggerall = Win && !WinTime
triggerall = RoundState = 3
trigger1 = fvar(19) = 1
persistent = 0
id = 9000
name = "finish"
pos = 160,0
postype = left
stateno = 9020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999999999999

;---------------------------------------------------------------------
; スパコンKO
[State -3,SuperFinish]
type = Helper
triggerall = NumHelper(9000)!
triggerall = Win && !WinTime
triggerall = RoundState = 3
trigger1 = fvar(11)=2
trigger2 = var(47)
persistent = 0
id = 9000
name = "finish"
pos = 160,0
postype = left
stateno = ifelse(var(30)>3,9010,9000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999999999999

;---------------------------------------------------------------------
; 通常KO
[State -3,SuperFinish]
type = Helper
triggerall = NumHelper(9000)!
triggerall = NumHelper(9001)!
triggerall = Win && !WinTime
trigger1 = RoundState = 3
persistent = 0
id = 9001
name = "finish"
pos = 160,0
postype = left
stateno = 9030
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999999999999

;---------------------------------------------------------------------
;ラウンド勝敗判定
[State -2, 1]
type = VarSet
trigger1 = Win
var(53) = 1

[State -2, 1]
type = VarSet
trigger1 = Lose
var(53) = 2
 
;---------------------------------------------------------------------
; ガードフラグ 
[State -2,オリコン時ガード不能]
type = AssertSpecial
trigger1 = var(47)
flag  = NoStandGuard
flag2 = NoCrouchGuard
flag3 = NoAirGuard

[State -2,空中ガード無し]
type = AssertSpecial
trigger1 = (var(30)=[2,6]) && floor(var(52)%10)=0
flag = NoAirGuard

[State -2,時間停止による相手ガード不能１]
type = VarAdd
trigger1 = fvar(22) > 0
fvar(22) = -1

[State -2,時間停止による相手ガード不能２]
type = AssertSpecial
trigger1 = fvar(22) > 0
flag = unguardable
 
;---------------------------------------------------------------------------
; トレーニングモード 
; -アーケードモードの第1戦とVSモードで、ラウンド開始直後にF3を押して
; -パワーを満タンにすると暴発します。
[State -2, Training]
type = VarSet
trigger1 = !fvar(0)
trigger1 = ctrl
trigger2 = RoundNo > 1
fvar(0) = 1

[State -2, Training]
type = VarSet
trigger1 = !fvar(0)
trigger1 = Power >= const(data.power)
trigger1 = RoundNo = 1 && MatchNo = 1 && NumPartner = 0 && NumEnemy = 1
fvar(0) = 2

[State -2, Training]
type = VarSet
trigger1 = fvar(0) = 2 && !fvar(8)
trigger1 = fvar(37) = 0 || Var(30)=2 || Var(30)=4 || Var(30)=6
fvar(37) = ifelse(Var(30)=2,3000,ifelse(Var(30)=4,100,72))
ignorehitpause = 1

; グルーブセレクト
[state 190, groove]
type = helper
triggerall = !Numhelper(20000)
triggerall = fvar(0) = 2
trigger1 = roundstate = 0
ID = 20000
stateno = 30000
postype = P1
pos = 0,-15
name = "groove"
ontop = 1
bindtime = -1
keyctrl = 1
facing = 1+(teamside = 2)*-2
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
 
;---------------------------------------------------------------------------
; コーディー用ナイフ処理 
[State 1200,helper]
type = helper
triggerall = p1name = "cvscody"
triggerall = var(29) && Var(17) = 1
triggerall = !Numhelper(15000)
trigger1 = MoveType = H && (StateNo != [4300,4302]) && (StateNo != [4400,4405]) && (StateNo != [120,159]) && StateNo != 20
trigger2 = StateNo = 195 || StateNo = 800 || StateNo = 850 || StateNo = 1500 || StateNo = 4500 || (StateNo = [3000,3099])
trigger3 = RoundState = 4
name = "Knife"
id = 15000
pos = 0,-60
postype = p1
stateno = 15500
size.xscale = const(Size.xscale)
size.yscale = const(Size.yscale)
helpertype = normal
ownpal = 1
keyctrl = 0
ignorehitpause = 1
size.ground.back = 18
size.ground.front = 18
supermovetime = 99999999
    
